var qx=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var KN=qx((Un,Hn)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function hp(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const bt={},mo=[],Ze=()=>{},Jb=()=>!1,Xu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),dp=t=>t.startsWith("onUpdate:"),jt=Object.assign,pp=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Zx=Object.prototype.hasOwnProperty,it=(t,e)=>Zx.call(t,e),$e=Array.isArray,vo=t=>Yu(t)==="[object Map]",Qb=t=>Yu(t)==="[object Set]",ze=t=>typeof t=="function",at=t=>typeof t=="string",Oi=t=>typeof t=="symbol",et=t=>t!==null&&typeof t=="object",lu=t=>(et(t)||ze(t))&&ze(t.then)&&ze(t.catch),e1=Object.prototype.toString,Yu=t=>e1.call(t),Jx=t=>Yu(t).slice(8,-1),cu=t=>Yu(t)==="[object Object]",Ku=t=>at(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Pa=hp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),qu=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},Qx=/-\w/g,Wn=qu(t=>t.replace(Qx,e=>e.slice(1).toUpperCase())),eC=/\B([A-Z])/g,is=qu(t=>t.replace(eC,"-$1").toLowerCase()),Zu=qu(t=>t.charAt(0).toUpperCase()+t.slice(1)),Wc=qu(t=>t?`on${Zu(t)}`:""),qi=(t,e)=>!Object.is(t,e),jf=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},t1=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},tC=t=>{const e=parseFloat(t);return isNaN(e)?t:e},nC=t=>{const e=at(t)?Number(t):NaN;return isNaN(e)?t:e};let Wg;const Ju=()=>Wg||(Wg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Dt(t){if($e(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=at(r)?oC(r):Dt(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(at(t)||et(t))return t}const rC=/;(?![^(]*\))/g,iC=/:([^]+)/,sC=/\/\*[^]*?\*\//g;function oC(t){const e={};return t.replace(sC,"").split(rC).forEach(n=>{if(n){const r=n.split(iC);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ke(t){let e="";if(at(t))e=t;else if($e(t))for(let n=0;n<t.length;n++){const r=ke(t[n]);r&&(e+=r+" ")}else if(et(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const aC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",lC=hp(aC);function n1(t){return!!t||t===""}const r1=t=>!!(t&&t.__v_isRef===!0),ln=t=>at(t)?t:t==null?"":$e(t)||et(t)&&(t.toString===e1||!ze(t.toString))?r1(t)?ln(t.value):JSON.stringify(t,i1,2):String(t),i1=(t,e)=>r1(e)?i1(t,e.value):vo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Nf(r,s)+" =>"]=i,n),{})}:Qb(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Nf(n))}:Oi(e)?Nf(e):et(e)&&!$e(e)&&!cu(e)?String(e):e,Nf=(t,e="")=>{var n;return Oi(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let nn;class s1{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=nn,!e&&nn&&(this.index=(nn.scopes||(nn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=nn;try{return nn=this,e()}finally{nn=n}}}on(){++this._on===1&&(this.prevScope=nn,nn=this)}off(){this._on>0&&--this._on===0&&(nn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function cC(t){return new s1(t)}function o1(){return nn}function a1(t,e=!1){nn&&nn.cleanups.push(t)}let xt;const zf=new WeakSet;class l1{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,nn&&nn.active&&nn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,zf.has(this)&&(zf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||u1(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Xg(this),f1(this);const e=xt,n=_r;xt=this,_r=!0;try{return this.fn()}finally{h1(this),xt=e,_r=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)vp(e);this.deps=this.depsTail=void 0,Xg(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?zf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){dd(this)&&this.run()}get dirty(){return dd(this)}}let c1=0,Fa,Da;function u1(t,e=!1){if(t.flags|=8,e){t.next=Da,Da=t;return}t.next=Fa,Fa=t}function gp(){c1++}function mp(){if(--c1>0)return;if(Da){let e=Da;for(Da=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Fa;){let e=Fa;for(Fa=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function f1(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function h1(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),vp(r),uC(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function dd(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(d1(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function d1(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ja)||(t.globalVersion=Ja,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!dd(t))))return;t.flags|=2;const e=t.dep,n=xt,r=_r;xt=t,_r=!0;try{f1(t);const i=t.fn(t._value);(e.version===0||qi(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{xt=n,_r=r,h1(t),t.flags&=-3}}function vp(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)vp(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function uC(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let _r=!0;const p1=[];function bi(){p1.push(_r),_r=!1}function _i(){const t=p1.pop();_r=t===void 0?!0:t}function Xg(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=xt;xt=void 0;try{e()}finally{xt=n}}}let Ja=0;class fC{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class yp{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!xt||!_r||xt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==xt)n=this.activeLink=new fC(xt,this),xt.deps?(n.prevDep=xt.depsTail,xt.depsTail.nextDep=n,xt.depsTail=n):xt.deps=xt.depsTail=n,g1(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=xt.depsTail,n.nextDep=void 0,xt.depsTail.nextDep=n,xt.depsTail=n,xt.deps===n&&(xt.deps=r)}return n}trigger(e){this.version++,Ja++,this.notify(e)}notify(e){gp();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{mp()}}}function g1(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)g1(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const uu=new WeakMap,Os=Symbol(""),pd=Symbol(""),Qa=Symbol("");function on(t,e,n){if(_r&&xt){let r=uu.get(t);r||uu.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new yp),i.map=r,i.key=n),i.track()}}function li(t,e,n,r,i,s){const o=uu.get(t);if(!o){Ja++;return}const a=l=>{l&&l.trigger()};if(gp(),e==="clear")o.forEach(a);else{const l=$e(t),c=l&&Ku(n);if(l&&n==="length"){const u=Number(r);o.forEach((f,d)=>{(d==="length"||d===Qa||!Oi(d)&&d>=u)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Qa)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Os)),vo(t)&&a(o.get(pd)));break;case"delete":l||(a(o.get(Os)),vo(t)&&a(o.get(pd)));break;case"set":vo(t)&&a(o.get(Os));break}}mp()}function hC(t,e){const n=uu.get(t);return n&&n.get(e)}function Xs(t){const e=tt(t);return e===t?e:(on(e,"iterate",Qa),Vn(t)?e:e.map(Tr))}function Qu(t){return on(t=tt(t),"iterate",Qa),t}function Vi(t,e){return wi(t)?As(t)?ko(Tr(e)):ko(e):Tr(e)}const dC={__proto__:null,[Symbol.iterator](){return $f(this,Symbol.iterator,t=>Vi(this,t))},concat(...t){return Xs(this).concat(...t.map(e=>$e(e)?Xs(e):e))},entries(){return $f(this,"entries",t=>(t[1]=Vi(this,t[1]),t))},every(t,e){return Xr(this,"every",t,e,void 0,arguments)},filter(t,e){return Xr(this,"filter",t,e,n=>n.map(r=>Vi(this,r)),arguments)},find(t,e){return Xr(this,"find",t,e,n=>Vi(this,n),arguments)},findIndex(t,e){return Xr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Xr(this,"findLast",t,e,n=>Vi(this,n),arguments)},findLastIndex(t,e){return Xr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Xr(this,"forEach",t,e,void 0,arguments)},includes(...t){return Uf(this,"includes",t)},indexOf(...t){return Uf(this,"indexOf",t)},join(t){return Xs(this).join(t)},lastIndexOf(...t){return Uf(this,"lastIndexOf",t)},map(t,e){return Xr(this,"map",t,e,void 0,arguments)},pop(){return ca(this,"pop")},push(...t){return ca(this,"push",t)},reduce(t,...e){return Yg(this,"reduce",t,e)},reduceRight(t,...e){return Yg(this,"reduceRight",t,e)},shift(){return ca(this,"shift")},some(t,e){return Xr(this,"some",t,e,void 0,arguments)},splice(...t){return ca(this,"splice",t)},toReversed(){return Xs(this).toReversed()},toSorted(t){return Xs(this).toSorted(t)},toSpliced(...t){return Xs(this).toSpliced(...t)},unshift(...t){return ca(this,"unshift",t)},values(){return $f(this,"values",t=>Vi(this,t))}};function $f(t,e,n){const r=Qu(t),i=r[e]();return r!==t&&!Vn(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=n(s.value)),s}),i}const pC=Array.prototype;function Xr(t,e,n,r,i,s){const o=Qu(t),a=o!==t&&!Vn(t),l=o[e];if(l!==pC[e]){const f=l.apply(t,s);return a?Tr(f):f}let c=n;o!==t&&(a?c=function(f,d){return n.call(this,Vi(t,f),d,t)}:n.length>2&&(c=function(f,d){return n.call(this,f,d,t)}));const u=l.call(o,c,r);return a&&i?i(u):u}function Yg(t,e,n,r){const i=Qu(t);let s=n;return i!==t&&(Vn(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,Vi(t,a),l,t)}),i[e](s,...r)}function Uf(t,e,n){const r=tt(t);on(r,"iterate",Qa);const i=r[e](...n);return(i===-1||i===!1)&&ef(n[0])?(n[0]=tt(n[0]),r[e](...n)):i}function ca(t,e,n=[]){bi(),gp();const r=tt(t)[e].apply(t,n);return mp(),_i(),r}const gC=hp("__proto__,__v_isRef,__isVue"),m1=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Oi));function mC(t){Oi(t)||(t=String(t));const e=tt(this);return on(e,"has",t),e.hasOwnProperty(t)}class v1{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?EC:w1:s?_1:b1).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=$e(e);if(!i){let l;if(o&&(l=dC[n]))return l;if(n==="hasOwnProperty")return mC}const a=Reflect.get(e,n,kt(e)?e:r);if((Oi(n)?m1.has(n):gC(n))||(i||on(e,"get",n),s))return a;if(kt(a)){const l=o&&Ku(n)?a:a.value;return i&&et(l)?Eo(l):l}return et(a)?i?Eo(a):Go(a):a}}class y1 extends v1{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];const o=$e(e)&&Ku(n);if(!this._isShallow){const c=wi(s);if(!Vn(r)&&!wi(r)&&(s=tt(s),r=tt(r)),!o&&kt(s)&&!kt(r))return c||(s.value=r),!0}const a=o?Number(n)<e.length:it(e,n),l=Reflect.set(e,n,r,kt(e)?e:i);return e===tt(i)&&(a?qi(r,s)&&li(e,"set",n,r):li(e,"add",n,r)),l}deleteProperty(e,n){const r=it(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&li(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Oi(n)||!m1.has(n))&&on(e,"has",n),r}ownKeys(e){return on(e,"iterate",$e(e)?"length":Os),Reflect.ownKeys(e)}}class vC extends v1{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const yC=new y1,bC=new vC,_C=new y1(!0),gd=t=>t,Ml=t=>Reflect.getPrototypeOf(t);function wC(t,e,n){return function(...r){const i=this.__v_raw,s=tt(i),o=vo(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),u=n?gd:e?ko:Tr;return!e&&on(s,"iterate",l?pd:Os),{next(){const{value:f,done:d}=c.next();return d?{value:f,done:d}:{value:a?[u(f[0]),u(f[1])]:u(f),done:d}},[Symbol.iterator](){return this}}}}function Rl(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function SC(t,e){const n={get(i){const s=this.__v_raw,o=tt(s),a=tt(i);t||(qi(i,a)&&on(o,"get",i),on(o,"get",a));const{has:l}=Ml(o),c=e?gd:t?ko:Tr;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&on(tt(i),"iterate",Os),i.size},has(i){const s=this.__v_raw,o=tt(s),a=tt(i);return t||(qi(i,a)&&on(o,"has",i),on(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=tt(a),c=e?gd:t?ko:Tr;return!t&&on(l,"iterate",Os),a.forEach((u,f)=>i.call(s,c(u),c(f),o))}};return jt(n,t?{add:Rl("add"),set:Rl("set"),delete:Rl("delete"),clear:Rl("clear")}:{add(i){!e&&!Vn(i)&&!wi(i)&&(i=tt(i));const s=tt(this);return Ml(s).has.call(s,i)||(s.add(i),li(s,"add",i,i)),this},set(i,s){!e&&!Vn(s)&&!wi(s)&&(s=tt(s));const o=tt(this),{has:a,get:l}=Ml(o);let c=a.call(o,i);c||(i=tt(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,s),c?qi(s,u)&&li(o,"set",i,s):li(o,"add",i,s),this},delete(i){const s=tt(this),{has:o,get:a}=Ml(s);let l=o.call(s,i);l||(i=tt(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&li(s,"delete",i,void 0),c},clear(){const i=tt(this),s=i.size!==0,o=i.clear();return s&&li(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=wC(i,t,e)}),n}function bp(t,e){const n=SC(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(it(n,i)&&i in r?n:r,i,s)}const xC={get:bp(!1,!1)},CC={get:bp(!1,!0)},TC={get:bp(!0,!1)},b1=new WeakMap,_1=new WeakMap,w1=new WeakMap,EC=new WeakMap;function kC(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function OC(t){return t.__v_skip||!Object.isExtensible(t)?0:kC(Jx(t))}function Go(t){return wi(t)?t:_p(t,!1,yC,xC,b1)}function S1(t){return _p(t,!1,_C,CC,_1)}function Eo(t){return _p(t,!0,bC,TC,w1)}function _p(t,e,n,r,i){if(!et(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=OC(t);if(s===0)return t;const o=i.get(t);if(o)return o;const a=new Proxy(t,s===2?r:n);return i.set(t,a),a}function As(t){return wi(t)?As(t.__v_raw):!!(t&&t.__v_isReactive)}function wi(t){return!!(t&&t.__v_isReadonly)}function Vn(t){return!!(t&&t.__v_isShallow)}function ef(t){return t?!!t.__v_raw:!1}function tt(t){const e=t&&t.__v_raw;return e?tt(e):t}function x1(t){return!it(t,"__v_skip")&&Object.isExtensible(t)&&t1(t,"__v_skip",!0),t}const Tr=t=>et(t)?Go(t):t,ko=t=>et(t)?Eo(t):t;function kt(t){return t?t.__v_isRef===!0:!1}function ye(t){return C1(t,!1)}function $r(t){return C1(t,!0)}function C1(t,e){return kt(t)?t:new AC(t,e)}class AC{constructor(e,n){this.dep=new yp,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:tt(e),this._value=n?e:Tr(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Vn(e)||wi(e);e=r?e:tt(e),qi(e,n)&&(this._rawValue=e,this._value=r?e:Tr(e),this.dep.trigger())}}function D(t){return kt(t)?t.value:t}const PC={get:(t,e,n)=>e==="__v_raw"?t:D(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return kt(i)&&!kt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function T1(t){return As(t)?t:new Proxy(t,PC)}class FC{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=tt(e);let i=!0,s=e;if(!$e(e)||!Ku(String(n)))do i=!ef(s)||Vn(s);while(i&&(s=s.__v_raw));this._shallow=i}get value(){let e=this._object[this._key];return this._shallow&&(e=D(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&kt(this._raw[this._key])){const n=this._object[this._key];if(kt(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return hC(this._raw,this._key)}}class DC{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Jn(t,e,n){return kt(t)?t:ze(t)?new DC(t):et(t)&&arguments.length>1?IC(t,e,n):ye(t)}function IC(t,e,n){return new FC(t,e,n)}class MC{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new yp(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ja-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&xt!==this)return u1(this,!0),!0}get value(){const e=this.dep.track();return d1(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function RC(t,e,n=!1){let r,i;return ze(t)?r=t:(r=t.get,i=t.set),new MC(r,i,n)}const Ll={},fu=new WeakMap;let gs;function LC(t,e=!1,n=gs){if(n){let r=fu.get(n);r||fu.set(n,r=[]),r.push(t)}}function BC(t,e,n=bt){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=b=>i?b:Vn(b)||i===!1||i===0?ci(b,1):ci(b);let u,f,d,h,g=!1,p=!1;if(kt(t)?(f=()=>t.value,g=Vn(t)):As(t)?(f=()=>c(t),g=!0):$e(t)?(p=!0,g=t.some(b=>As(b)||Vn(b)),f=()=>t.map(b=>{if(kt(b))return b.value;if(As(b))return c(b);if(ze(b))return l?l(b,2):b()})):ze(t)?e?f=l?()=>l(t,2):t:f=()=>{if(d){bi();try{d()}finally{_i()}}const b=gs;gs=u;try{return l?l(t,3,[h]):t(h)}finally{gs=b}}:f=Ze,e&&i){const b=f,x=i===!0?1/0:i;f=()=>ci(b(),x)}const v=o1(),m=()=>{u.stop(),v&&v.active&&pp(v.effects,u)};if(s&&e){const b=e;e=(...x)=>{b(...x),m()}}let y=p?new Array(t.length).fill(Ll):Ll;const _=b=>{if(!(!(u.flags&1)||!u.dirty&&!b))if(e){const x=u.run();if(i||g||(p?x.some((E,T)=>qi(E,y[T])):qi(x,y))){d&&d();const E=gs;gs=u;try{const T=[x,y===Ll?void 0:p&&y[0]===Ll?[]:y,h];y=x,l?l(e,3,T):e(...T)}finally{gs=E}}}else u.run()};return a&&a(_),u=new l1(f),u.scheduler=o?()=>o(_,!1):_,h=b=>LC(b,!1,u),d=u.onStop=()=>{const b=fu.get(u);if(b){if(l)l(b,4);else for(const x of b)x();fu.delete(u)}},e?r?_(!0):y=u.run():o?o(_.bind(null,!0),!0):u.run(),m.pause=u.pause.bind(u),m.resume=u.resume.bind(u),m.stop=m,m}function ci(t,e=1/0,n){if(e<=0||!et(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,kt(t))ci(t.value,e,n);else if($e(t))for(let r=0;r<t.length;r++)ci(t[r],e,n);else if(Qb(t)||vo(t))t.forEach(r=>{ci(r,e,n)});else if(cu(t)){for(const r in t)ci(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&ci(t[r],e,n)}return t}function _l(t,e,n,r){try{return r?t(...r):t()}catch(i){tf(i,e,n)}}function Er(t,e,n,r){if(ze(t)){const i=_l(t,e,n,r);return i&&lu(i)&&i.catch(s=>{tf(s,e,n)}),i}if($e(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Er(t[s],e,n,r));return i}}function tf(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||bt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,l,c)===!1)return}a=a.parent}if(s){bi(),_l(s,null,10,[t,l,c]),_i();return}}jC(t,n,i,r,o)}function jC(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const vn=[];let Rr=-1;const yo=[];let Gi=null,ro=0;const E1=Promise.resolve();let hu=null;function Yt(t){const e=hu||E1;return t?e.then(this?t.bind(this):t):e}function NC(t){let e=Rr+1,n=vn.length;for(;e<n;){const r=e+n>>>1,i=vn[r],s=el(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function wp(t){if(!(t.flags&1)){const e=el(t),n=vn[vn.length-1];!n||!(t.flags&2)&&e>=el(n)?vn.push(t):vn.splice(NC(e),0,t),t.flags|=1,k1()}}function k1(){hu||(hu=E1.then(A1))}function zC(t){$e(t)?yo.push(...t):Gi&&t.id===-1?Gi.splice(ro+1,0,t):t.flags&1||(yo.push(t),t.flags|=1),k1()}function Kg(t,e,n=Rr+1){for(;n<vn.length;n++){const r=vn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;vn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function O1(t){if(yo.length){const e=[...new Set(yo)].sort((n,r)=>el(n)-el(r));if(yo.length=0,Gi){Gi.push(...e);return}for(Gi=e,ro=0;ro<Gi.length;ro++){const n=Gi[ro];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Gi=null,ro=0}}const el=t=>t.id==null?t.flags&2?-1:1/0:t.id;function A1(t){try{for(Rr=0;Rr<vn.length;Rr++){const e=vn[Rr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),_l(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Rr<vn.length;Rr++){const e=vn[Rr];e&&(e.flags&=-2)}Rr=-1,vn.length=0,O1(),hu=null,(vn.length||yo.length)&&A1()}}let Kt=null,P1=null;function du(t){const e=Kt;return Kt=t,P1=t&&t.type.__scopeId||null,e}function Me(t,e=Kt,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&mu(-1);const s=du(e);let o;try{o=t(...i)}finally{du(s),r._d&&mu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function wl(t,e){if(Kt===null)return t;const n=af(Kt),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=bt]=e[i];s&&(ze(s)&&(s={mounted:s,updated:s}),s.deep&&ci(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function ls(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(bi(),Er(l,n,8,[t.el,a,t,e]),_i())}}function _n(t,e){if(an){let n=an.provides;const r=an.parent&&an.parent.provides;r===n&&(n=an.provides=Object.create(r)),n[t]=e}}function Je(t,e,n=!1){const r=Jt();if(r||_o){let i=_o?_o._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&ze(e)?e.call(r&&r.proxy):e}}const $C=Symbol.for("v-scx"),UC=()=>Je($C);function F1(t,e){return Sp(t,null,e)}function Ge(t,e,n){return Sp(t,e,n)}function Sp(t,e,n=bt){const{immediate:r,deep:i,flush:s,once:o}=n,a=jt({},n),l=e&&r||!e&&s!=="post";let c;if(sl){if(s==="sync"){const h=UC();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Ze,h.resume=Ze,h.pause=Ze,h}}const u=an;a.call=(h,g,p)=>Er(h,u,g,p);let f=!1;s==="post"?a.scheduler=h=>{pn(h,u&&u.suspense)}:s!=="sync"&&(f=!0,a.scheduler=(h,g)=>{g?h():wp(h)}),a.augmentJob=h=>{e&&(h.flags|=4),f&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const d=BC(t,e,a);return sl&&(c?c.push(d):l&&d()),d}function HC(t,e,n){const r=this.proxy,i=at(t)?t.includes(".")?D1(r,t):()=>r[t]:t.bind(r,r);let s;ze(e)?s=e:(s=e.handler,n=e);const o=Sl(this),a=Sp(i,s.bind(r),n);return o(),a}function D1(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const I1=Symbol("_vte"),M1=t=>t.__isTeleport,Ia=t=>t&&(t.disabled||t.disabled===""),qg=t=>t&&(t.defer||t.defer===""),Zg=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Jg=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,md=(t,e)=>{const n=t&&t.to;return at(n)?e?e(n):null:n},R1={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:u,pc:f,pbc:d,o:{insert:h,querySelector:g,createText:p,createComment:v}}=c,m=Ia(e.props);let{shapeFlag:y,children:_,dynamicChildren:b}=e;if(t==null){const x=e.el=p(""),E=e.anchor=p("");h(x,n,r),h(E,n,r);const T=(k,I)=>{y&16&&u(_,k,I,i,s,o,a,l)},O=()=>{const k=e.target=md(e.props,g),I=L1(k,e,p,h);k&&(o!=="svg"&&Zg(k)?o="svg":o!=="mathml"&&Jg(k)&&(o="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(k),m||(T(k,I),Xc(e,!1)))};m&&(T(n,E),Xc(e,!0)),qg(e.props)?(e.el.__isMounted=!1,pn(()=>{O(),delete e.el.__isMounted},s)):O()}else{if(qg(e.props)&&t.el.__isMounted===!1){pn(()=>{R1.process(t,e,n,r,i,s,o,a,l,c)},s);return}e.el=t.el,e.targetStart=t.targetStart;const x=e.anchor=t.anchor,E=e.target=t.target,T=e.targetAnchor=t.targetAnchor,O=Ia(t.props),k=O?n:E,I=O?x:T;if(o==="svg"||Zg(E)?o="svg":(o==="mathml"||Jg(E))&&(o="mathml"),b?(d(t.dynamicChildren,b,k,i,s,o,a),Op(t,e,!0)):l||f(t,e,k,I,i,s,o,a,!1),m)O?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Bl(e,n,x,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const R=e.target=md(e.props,g);R&&Bl(e,R,null,c,0)}else O&&Bl(e,E,T,c,1);Xc(e,m)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:f,props:d}=t;if(f&&(i(c),i(u)),s&&i(l),o&16){const h=s||!Ia(d);for(let g=0;g<a.length;g++){const p=a[g];r(p,e,n,h,!!p.dynamicChildren)}}},move:Bl,hydrate:VC};function Bl(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,f=s===2;if(f&&r(o,e,n),(!f||Ia(u))&&l&16)for(let d=0;d<c.length;d++)i(c[d],e,n,2);f&&r(a,e,n)}function VC(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},f){function d(p,v,m,y){v.anchor=f(o(p),v,a(p),n,r,i,s),v.targetStart=m,v.targetAnchor=y}const h=e.target=md(e.props,l),g=Ia(e.props);if(h){const p=h._lpa||h.firstChild;if(e.shapeFlag&16)if(g)d(t,e,p,p&&o(p));else{e.anchor=o(t);let v=p;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")e.targetStart=v;else if(v.data==="teleport anchor"){e.targetAnchor=v,h._lpa=e.targetAnchor&&o(e.targetAnchor);break}}v=o(v)}e.targetAnchor||L1(h,e,u,c),f(p&&o(p),e,h,n,r,i,s)}Xc(e,g)}else g&&e.shapeFlag&16&&d(t,e,t,o(t));return e.anchor&&o(e.anchor)}const GC=R1;function Xc(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function L1(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[I1]=s,t&&(r(i,t),r(s,t)),s}const ri=Symbol("_leaveCb"),jl=Symbol("_enterCb");function B1(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return en(()=>{t.isMounted=!0}),un(()=>{t.isUnmounting=!0}),t}const Yn=[Function,Array],j1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Yn,onEnter:Yn,onAfterEnter:Yn,onEnterCancelled:Yn,onBeforeLeave:Yn,onLeave:Yn,onAfterLeave:Yn,onLeaveCancelled:Yn,onBeforeAppear:Yn,onAppear:Yn,onAfterAppear:Yn,onAppearCancelled:Yn},N1=t=>{const e=t.subTree;return e.component?N1(e.component):e},WC={name:"BaseTransition",props:j1,setup(t,{slots:e}){const n=Jt(),r=B1();return()=>{const i=e.default&&xp(e.default(),!0);if(!i||!i.length)return;const s=z1(i),o=tt(t),{mode:a}=o;if(r.isLeaving)return Hf(s);const l=Qg(s);if(!l)return Hf(s);let c=tl(l,o,r,n,f=>c=f);l.type!==Vt&&Ms(l,c);let u=n.subTree&&Qg(n.subTree);if(u&&u.type!==Vt&&!ms(u,l)&&N1(n).type!==Vt){let f=tl(u,o,r,n);if(Ms(u,f),a==="out-in"&&l.type!==Vt)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,u=void 0},Hf(s);a==="in-out"&&l.type!==Vt?f.delayLeave=(d,h,g)=>{const p=$1(r,u);p[String(u.key)]=u,d[ri]=()=>{h(),d[ri]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function z1(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Vt){e=n;break}}return e}const XC=WC;function $1(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function tl(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:d,onLeave:h,onAfterLeave:g,onLeaveCancelled:p,onBeforeAppear:v,onAppear:m,onAfterAppear:y,onAppearCancelled:_}=e,b=String(t.key),x=$1(n,t),E=(k,I)=>{k&&Er(k,r,9,I)},T=(k,I)=>{const R=I[1];E(k,I),$e(k)?k.every(C=>C.length<=1)&&R():k.length<=1&&R()},O={mode:o,persisted:a,beforeEnter(k){let I=l;if(!n.isMounted)if(s)I=v||l;else return;k[ri]&&k[ri](!0);const R=x[b];R&&ms(t,R)&&R.el[ri]&&R.el[ri](),E(I,[k])},enter(k){let I=c,R=u,C=f;if(!n.isMounted)if(s)I=m||c,R=y||u,C=_||f;else return;let P=!1;const S=k[jl]=$=>{P||(P=!0,$?E(C,[k]):E(R,[k]),O.delayedLeave&&O.delayedLeave(),k[jl]=void 0)};I?T(I,[k,S]):S()},leave(k,I){const R=String(t.key);if(k[jl]&&k[jl](!0),n.isUnmounting)return I();E(d,[k]);let C=!1;const P=k[ri]=S=>{C||(C=!0,I(),S?E(p,[k]):E(g,[k]),k[ri]=void 0,x[R]===t&&delete x[R])};x[R]=t,h?T(h,[k,P]):P()},clone(k){const I=tl(k,e,n,r,i);return i&&i(I),I}};return O}function Hf(t){if(nf(t))return t=Si(t),t.children=null,t}function Qg(t){if(!nf(t))return M1(t.type)&&t.children?z1(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&ze(n.default))return n.default()}}function Ms(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ms(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function xp(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===pt?(o.patchFlag&128&&i++,r=r.concat(xp(o.children,e,a))):(e||o.type!==Vt)&&r.push(a!=null?Si(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function De(t,e){return ze(t)?jt({name:t.name},e,{setup:t}):t}function U1(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const pu=new WeakMap;function Ma(t,e,n,r,i=!1){if($e(t)){t.forEach((g,p)=>Ma(g,e&&($e(e)?e[p]:e),n,r,i));return}if(bo(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ma(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?af(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,u=a.refs===bt?a.refs={}:a.refs,f=a.setupState,d=tt(f),h=f===bt?Jb:g=>it(d,g);if(c!=null&&c!==l){if(em(e),at(c))u[c]=null,h(c)&&(f[c]=null);else if(kt(c)){c.value=null;const g=e;g.k&&(u[g.k]=null)}}if(ze(l))_l(l,a,12,[o,u]);else{const g=at(l),p=kt(l);if(g||p){const v=()=>{if(t.f){const m=g?h(l)?f[l]:u[l]:l.value;if(i)$e(m)&&pp(m,s);else if($e(m))m.includes(s)||m.push(s);else if(g)u[l]=[s],h(l)&&(f[l]=u[l]);else{const y=[s];l.value=y,t.k&&(u[t.k]=y)}}else g?(u[l]=o,h(l)&&(f[l]=o)):p&&(l.value=o,t.k&&(u[t.k]=o))};if(o){const m=()=>{v(),pu.delete(t)};m.id=-1,pu.set(t,m),pn(m,n)}else em(t),v()}}}function em(t){const e=pu.get(t);e&&(e.flags|=8,pu.delete(t))}Ju().requestIdleCallback;Ju().cancelIdleCallback;const bo=t=>!!t.type.__asyncLoader,nf=t=>t.type.__isKeepAlive;function H1(t,e){G1(t,"a",e)}function V1(t,e){G1(t,"da",e)}function G1(t,e,n=an){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(rf(e,r,n),n){let i=n.parent;for(;i&&i.parent;)nf(i.parent.vnode)&&YC(r,e,n,i),i=i.parent}}function YC(t,e,n,r){const i=rf(e,t,r,!0);Wo(()=>{pp(r[e],i)},n)}function rf(t,e,n=an,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{bi();const a=Sl(n),l=Er(e,n,t,o);return a(),_i(),l});return r?i.unshift(s):i.push(s),s}}const Ai=t=>(e,n=an)=>{(!sl||t==="sp")&&rf(t,(...r)=>e(...r),n)},W1=Ai("bm"),en=Ai("m"),KC=Ai("bu"),Cp=Ai("u"),un=Ai("bum"),Wo=Ai("um"),qC=Ai("sp"),ZC=Ai("rtg"),JC=Ai("rtc");function QC(t,e=an){rf("ec",t,e)}const X1="components";function eT(t,e){return K1(X1,t,!0,e)||t}const Y1=Symbol.for("v-ndc");function jn(t){return at(t)?K1(X1,t,!1)||t:t||Y1}function K1(t,e,n=!0,r=!1){const i=Kt||an;if(i){const s=i.type;{const a=jT(s,!1);if(a&&(a===e||a===Wn(e)||a===Zu(Wn(e))))return s}const o=tm(i[t]||s[t],e)||tm(i.appContext[t],e);return!o&&r?s:o}}function tm(t,e){return t&&(t[e]||t[Wn(e)]||t[Zu(Wn(e))])}function nl(t,e,n,r){let i;const s=n,o=$e(t);if(o||at(t)){const a=o&&As(t);let l=!1,c=!1;a&&(l=!Vn(t),c=wi(t),t=Qu(t)),i=new Array(t.length);for(let u=0,f=t.length;u<f;u++)i[u]=e(l?c?ko(Tr(t[u])):Tr(t[u]):t[u],u,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s)}else if(et(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=e(t[u],u,l,s)}}else i=[];return i}function vd(t,e){for(let n=0;n<e.length;n++){const r=e[n];if($e(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function Ne(t,e,n={},r,i){if(Kt.ce||Kt.parent&&bo(Kt.parent)&&Kt.parent.ce){const c=Object.keys(n).length>0;return e!=="default"&&(n.name=e),le(),Ve(pt,null,[Ae("slot",n,r&&r())],c?-2:64)}let s=t[e];s&&s._c&&(s._d=!1),le();const o=s&&q1(s(n)),a=n.key||o&&o.key,l=Ve(pt,{key:(a&&!Oi(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function q1(t){return t.some(e=>il(e)?!(e.type===Vt||e.type===pt&&!q1(e.children)):!0)?t:null}function tT(t,e){const n={};for(const r in t)n[Wc(r)]=t[r];return n}const yd=t=>t?g_(t)?af(t):yd(t.parent):null,Ra=jt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>yd(t.parent),$root:t=>yd(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Q1(t),$forceUpdate:t=>t.f||(t.f=()=>{wp(t.update)}),$nextTick:t=>t.n||(t.n=Yt.bind(t.proxy)),$watch:t=>HC.bind(t)}),Vf=(t,e)=>t!==bt&&!t.__isScriptSetup&&it(t,e),nT={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Vf(r,e))return o[e]=1,r[e];if(i!==bt&&it(i,e))return o[e]=2,i[e];if(it(s,e))return o[e]=3,s[e];if(n!==bt&&it(n,e))return o[e]=4,n[e];bd&&(o[e]=0)}}const c=Ra[e];let u,f;if(c)return e==="$attrs"&&on(t.attrs,"get",""),c(t);if((u=a.__cssModules)&&(u=u[e]))return u;if(n!==bt&&it(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,it(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Vf(i,e)?(i[e]=n,!0):r!==bt&&it(r,e)?(r[e]=n,!0):it(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,props:s,type:o}},a){let l;return!!(n[a]||t!==bt&&a[0]!=="$"&&it(t,a)||Vf(e,a)||it(s,a)||it(r,a)||it(Ra,a)||it(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:it(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Tp(){return Z1().slots}function rT(){return Z1().attrs}function Z1(t){const e=Jt();return e.setupContext||(e.setupContext=v_(e))}function nm(t){return $e(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let bd=!0;function iT(t){const e=Q1(t),n=t.proxy,r=t.ctx;bd=!1,e.beforeCreate&&rm(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:d,beforeUpdate:h,updated:g,activated:p,deactivated:v,beforeDestroy:m,beforeUnmount:y,destroyed:_,unmounted:b,render:x,renderTracked:E,renderTriggered:T,errorCaptured:O,serverPrefetch:k,expose:I,inheritAttrs:R,components:C,directives:P,filters:S}=e;if(c&&sT(c,r,null),o)for(const H in o){const K=o[H];ze(K)&&(r[H]=K.bind(n))}if(i){const H=i.call(n,n);et(H)&&(t.data=Go(H))}if(bd=!0,s)for(const H in s){const K=s[H],Q=ze(K)?K.bind(n,n):ze(K.get)?K.get.bind(n,n):Ze,ce=!ze(K)&&ze(K.set)?K.set.bind(n):Ze,Y=ae({get:Q,set:ce});Object.defineProperty(r,H,{enumerable:!0,configurable:!0,get:()=>Y.value,set:U=>Y.value=U})}if(a)for(const H in a)J1(a[H],r,n,H);if(l){const H=ze(l)?l.call(n):l;Reflect.ownKeys(H).forEach(K=>{_n(K,H[K])})}u&&rm(u,t,"c");function Z(H,K){$e(K)?K.forEach(Q=>H(Q.bind(n))):K&&H(K.bind(n))}if(Z(W1,f),Z(en,d),Z(KC,h),Z(Cp,g),Z(H1,p),Z(V1,v),Z(QC,O),Z(JC,E),Z(ZC,T),Z(un,y),Z(Wo,b),Z(qC,k),$e(I))if(I.length){const H=t.exposed||(t.exposed={});I.forEach(K=>{Object.defineProperty(H,K,{get:()=>n[K],set:Q=>n[K]=Q,enumerable:!0})})}else t.exposed||(t.exposed={});x&&t.render===Ze&&(t.render=x),R!=null&&(t.inheritAttrs=R),C&&(t.components=C),P&&(t.directives=P),k&&U1(t)}function sT(t,e,n=Ze){$e(t)&&(t=_d(t));for(const r in t){const i=t[r];let s;et(i)?"default"in i?s=Je(i.from||r,i.default,!0):s=Je(i.from||r):s=Je(i),kt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function rm(t,e,n){Er($e(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function J1(t,e,n,r){let i=r.includes(".")?D1(n,r):()=>n[r];if(at(t)){const s=e[t];ze(s)&&Ge(i,s)}else if(ze(t))Ge(i,t.bind(n));else if(et(t))if($e(t))t.forEach(s=>J1(s,e,n,r));else{const s=ze(t.handler)?t.handler.bind(n):e[t.handler];ze(s)&&Ge(i,s,t)}}function Q1(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>gu(l,c,o,!0)),gu(l,e,o)),et(e)&&s.set(e,l),l}function gu(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&gu(t,s,n,!0),i&&i.forEach(o=>gu(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=oT[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const oT={data:im,props:sm,emits:sm,methods:Ta,computed:Ta,beforeCreate:dn,created:dn,beforeMount:dn,mounted:dn,beforeUpdate:dn,updated:dn,beforeDestroy:dn,beforeUnmount:dn,destroyed:dn,unmounted:dn,activated:dn,deactivated:dn,errorCaptured:dn,serverPrefetch:dn,components:Ta,directives:Ta,watch:lT,provide:im,inject:aT};function im(t,e){return e?t?function(){return jt(ze(t)?t.call(this,this):t,ze(e)?e.call(this,this):e)}:e:t}function aT(t,e){return Ta(_d(t),_d(e))}function _d(t){if($e(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function dn(t,e){return t?[...new Set([].concat(t,e))]:e}function Ta(t,e){return t?jt(Object.create(null),t,e):e}function sm(t,e){return t?$e(t)&&$e(e)?[...new Set([...t,...e])]:jt(Object.create(null),nm(t),nm(e??{})):e}function lT(t,e){if(!t)return e;if(!e)return t;const n=jt(Object.create(null),t);for(const r in e)n[r]=dn(t[r],e[r]);return n}function e_(){return{app:null,config:{isNativeTag:Jb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cT=0;function uT(t,e){return function(r,i=null){ze(r)||(r=jt({},r)),i!=null&&!et(i)&&(i=null);const s=e_(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:cT++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:zT,get config(){return s.config},set config(u){},use(u,...f){return o.has(u)||(u&&ze(u.install)?(o.add(u),u.install(c,...f)):ze(u)&&(o.add(u),u(c,...f))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,f){return f?(s.components[u]=f,c):s.components[u]},directive(u,f){return f?(s.directives[u]=f,c):s.directives[u]},mount(u,f,d){if(!l){const h=c._ceVNode||Ae(r,i);return h.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),t(h,u,d),l=!0,c._container=u,u.__vue_app__=c,af(h.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Er(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,f){return s.provides[u]=f,c},runWithContext(u){const f=_o;_o=c;try{return u()}finally{_o=f}}};return c}}let _o=null;const fT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Wn(e)}Modifiers`]||t[`${is(e)}Modifiers`];function hT(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||bt;let i=n;const s=e.startsWith("update:"),o=s&&fT(r,e.slice(7));o&&(o.trim&&(i=n.map(u=>at(u)?u.trim():u)),o.number&&(i=n.map(tC)));let a,l=r[a=Wc(e)]||r[a=Wc(Wn(e))];!l&&s&&(l=r[a=Wc(is(e))]),l&&Er(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Er(c,t,6,i)}}const dT=new WeakMap;function t_(t,e,n=!1){const r=n?dT:e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!ze(t)){const l=c=>{const u=t_(c,e,!0);u&&(a=!0,jt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(et(t)&&r.set(t,null),null):($e(s)?s.forEach(l=>o[l]=null):jt(o,s),et(t)&&r.set(t,o),o)}function sf(t,e){return!t||!Xu(e)?!1:(e=e.slice(2).replace(/Once$/,""),it(t,e[0].toLowerCase()+e.slice(1))||it(t,is(e))||it(t,e))}function om(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:f,data:d,setupState:h,ctx:g,inheritAttrs:p}=t,v=du(t);let m,y;try{if(n.shapeFlag&4){const b=i||r,x=b;m=Lr(c.call(x,b,u,f,h,d,g)),y=a}else{const b=e;m=Lr(b.length>1?b(f,{attrs:a,slots:o,emit:l}):b(f,null)),y=e.props?a:pT(a)}}catch(b){La.length=0,tf(b,t,1),m=Ae(Vt)}let _=m;if(y&&p!==!1){const b=Object.keys(y),{shapeFlag:x}=_;b.length&&x&7&&(s&&b.some(dp)&&(y=gT(y,s)),_=Si(_,y,!1,!0))}return n.dirs&&(_=Si(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&Ms(_,n.transition),m=_,du(v),m}const pT=t=>{let e;for(const n in t)(n==="class"||n==="style"||Xu(n))&&((e||(e={}))[n]=t[n]);return e},gT=(t,e)=>{const n={};for(const r in t)(!dp(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function mT(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?am(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const d=u[f];if(o[d]!==r[d]&&!sf(c,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?am(r,o,c):!0:!!o;return!1}function am(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!sf(n,s))return!0}return!1}function vT({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const n_={},r_=()=>Object.create(n_),i_=t=>Object.getPrototypeOf(t)===n_;function yT(t,e,n,r=!1){const i={},s=r_();t.propsDefaults=Object.create(null),s_(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:S1(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function bT(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=tt(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let d=u[f];if(sf(t.emitsOptions,d))continue;const h=e[d];if(l)if(it(s,d))h!==s[d]&&(s[d]=h,c=!0);else{const g=Wn(d);i[g]=wd(l,a,g,h,t,!1)}else h!==s[d]&&(s[d]=h,c=!0)}}}else{s_(t,e,i,s)&&(c=!0);let u;for(const f in a)(!e||!it(e,f)&&((u=is(f))===f||!it(e,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=wd(l,a,f,void 0,t,!0)):delete i[f]);if(s!==a)for(const f in s)(!e||!it(e,f))&&(delete s[f],c=!0)}c&&li(t.attrs,"set","")}function s_(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Pa(l))continue;const c=e[l];let u;i&&it(i,u=Wn(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:sf(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=tt(n),c=a||bt;for(let u=0;u<s.length;u++){const f=s[u];n[f]=wd(i,l,f,c[f],t,!it(c,f))}}return o}function wd(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=it(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ze(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=Sl(i);r=c[n]=l.call(null,e),u()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===is(n))&&(r=!0))}return r}const _T=new WeakMap;function o_(t,e,n=!1){const r=n?_T:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!ze(t)){const u=f=>{l=!0;const[d,h]=o_(f,e,!0);jt(o,d),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return et(t)&&r.set(t,mo),mo;if($e(s))for(let u=0;u<s.length;u++){const f=Wn(s[u]);lm(f)&&(o[f]=bt)}else if(s)for(const u in s){const f=Wn(u);if(lm(f)){const d=s[u],h=o[f]=$e(d)||ze(d)?{type:d}:jt({},d),g=h.type;let p=!1,v=!0;if($e(g))for(let m=0;m<g.length;++m){const y=g[m],_=ze(y)&&y.name;if(_==="Boolean"){p=!0;break}else _==="String"&&(v=!1)}else p=ze(g)&&g.name==="Boolean";h[0]=p,h[1]=v,(p||it(h,"default"))&&a.push(f)}}const c=[o,a];return et(t)&&r.set(t,c),c}function lm(t){return t[0]!=="$"&&!Pa(t)}const Ep=t=>t==="_"||t==="_ctx"||t==="$stable",kp=t=>$e(t)?t.map(Lr):[Lr(t)],wT=(t,e,n)=>{if(e._n)return e;const r=Me((...i)=>kp(e(...i)),n);return r._c=!1,r},a_=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Ep(i))continue;const s=t[i];if(ze(s))e[i]=wT(i,s,r);else if(s!=null){const o=kp(s);e[i]=()=>o}}},l_=(t,e)=>{const n=kp(e);t.slots.default=()=>n},c_=(t,e,n)=>{for(const r in e)(n||!Ep(r))&&(t[r]=e[r])},ST=(t,e,n)=>{const r=t.slots=r_();if(t.vnode.shapeFlag&32){const i=e._;i?(c_(r,e,n),n&&t1(r,"_",i,!0)):a_(e,r)}else e&&l_(t,e)},xT=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=bt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:c_(i,e,n):(s=!e.$stable,a_(e,i)),o=e}else e&&(l_(t,e),o={default:1});if(s)for(const a in i)!Ep(a)&&o[a]==null&&delete i[a]},pn=OT;function CT(t){return TT(t)}function TT(t,e){const n=Ju();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:d,setScopeId:h=Ze,insertStaticContent:g}=t,p=(L,z,w,N=null,j=null,A=null,F=void 0,B=null,W=!!z.dynamicChildren)=>{if(L===z)return;L&&!ms(L,z)&&(N=q(L),U(L,j,A,!0),L=null),z.patchFlag===-2&&(W=!1,z.dynamicChildren=null);const{type:G,ref:V,shapeFlag:J}=z;switch(G){case Xo:v(L,z,w,N);break;case Vt:m(L,z,w,N);break;case Wf:L==null&&y(z,w,N,F);break;case pt:C(L,z,w,N,j,A,F,B,W);break;default:J&1?x(L,z,w,N,j,A,F,B,W):J&6?P(L,z,w,N,j,A,F,B,W):(J&64||J&128)&&G.process(L,z,w,N,j,A,F,B,W,de)}V!=null&&j?Ma(V,L&&L.ref,A,z||L,!z):V==null&&L&&L.ref!=null&&Ma(L.ref,null,A,L,!0)},v=(L,z,w,N)=>{if(L==null)r(z.el=a(z.children),w,N);else{const j=z.el=L.el;z.children!==L.children&&c(j,z.children)}},m=(L,z,w,N)=>{L==null?r(z.el=l(z.children||""),w,N):z.el=L.el},y=(L,z,w,N)=>{[L.el,L.anchor]=g(L.children,z,w,N,L.el,L.anchor)},_=({el:L,anchor:z},w,N)=>{let j;for(;L&&L!==z;)j=d(L),r(L,w,N),L=j;r(z,w,N)},b=({el:L,anchor:z})=>{let w;for(;L&&L!==z;)w=d(L),i(L),L=w;i(z)},x=(L,z,w,N,j,A,F,B,W)=>{if(z.type==="svg"?F="svg":z.type==="math"&&(F="mathml"),L==null)E(z,w,N,j,A,F,B,W);else{const G=L.el&&L.el._isVueCE?L.el:null;try{G&&G._beginPatch(),k(L,z,j,A,F,B,W)}finally{G&&G._endPatch()}}},E=(L,z,w,N,j,A,F,B)=>{let W,G;const{props:V,shapeFlag:J,transition:ue,dirs:oe}=L;if(W=L.el=o(L.type,A,V&&V.is,V),J&8?u(W,L.children):J&16&&O(L.children,W,null,N,j,Gf(L,A),F,B),oe&&ls(L,null,N,"created"),T(W,L,L.scopeId,F,N),V){for(const ee in V)ee!=="value"&&!Pa(ee)&&s(W,ee,null,V[ee],A,N);"value"in V&&s(W,"value",null,V.value,A),(G=V.onVnodeBeforeMount)&&Pr(G,N,L)}oe&&ls(L,null,N,"beforeMount");const ge=ET(j,ue);ge&&ue.beforeEnter(W),r(W,z,w),((G=V&&V.onVnodeMounted)||ge||oe)&&pn(()=>{G&&Pr(G,N,L),ge&&ue.enter(W),oe&&ls(L,null,N,"mounted")},j)},T=(L,z,w,N,j)=>{if(w&&h(L,w),N)for(let A=0;A<N.length;A++)h(L,N[A]);if(j){let A=j.subTree;if(z===A||h_(A.type)&&(A.ssContent===z||A.ssFallback===z)){const F=j.vnode;T(L,F,F.scopeId,F.slotScopeIds,j.parent)}}},O=(L,z,w,N,j,A,F,B,W=0)=>{for(let G=W;G<L.length;G++){const V=L[G]=B?Wi(L[G]):Lr(L[G]);p(null,V,z,w,N,j,A,F,B)}},k=(L,z,w,N,j,A,F)=>{const B=z.el=L.el;let{patchFlag:W,dynamicChildren:G,dirs:V}=z;W|=L.patchFlag&16;const J=L.props||bt,ue=z.props||bt;let oe;if(w&&cs(w,!1),(oe=ue.onVnodeBeforeUpdate)&&Pr(oe,w,z,L),V&&ls(z,L,w,"beforeUpdate"),w&&cs(w,!0),(J.innerHTML&&ue.innerHTML==null||J.textContent&&ue.textContent==null)&&u(B,""),G?I(L.dynamicChildren,G,B,w,N,Gf(z,j),A):F||K(L,z,B,null,w,N,Gf(z,j),A,!1),W>0){if(W&16)R(B,J,ue,w,j);else if(W&2&&J.class!==ue.class&&s(B,"class",null,ue.class,j),W&4&&s(B,"style",J.style,ue.style,j),W&8){const ge=z.dynamicProps;for(let ee=0;ee<ge.length;ee++){const fe=ge[ee],Re=J[fe],ct=ue[fe];(ct!==Re||fe==="value")&&s(B,fe,Re,ct,j,w)}}W&1&&L.children!==z.children&&u(B,z.children)}else!F&&G==null&&R(B,J,ue,w,j);((oe=ue.onVnodeUpdated)||V)&&pn(()=>{oe&&Pr(oe,w,z,L),V&&ls(z,L,w,"updated")},N)},I=(L,z,w,N,j,A,F)=>{for(let B=0;B<z.length;B++){const W=L[B],G=z[B],V=W.el&&(W.type===pt||!ms(W,G)||W.shapeFlag&198)?f(W.el):w;p(W,G,V,null,N,j,A,F,!0)}},R=(L,z,w,N,j)=>{if(z!==w){if(z!==bt)for(const A in z)!Pa(A)&&!(A in w)&&s(L,A,z[A],null,j,N);for(const A in w){if(Pa(A))continue;const F=w[A],B=z[A];F!==B&&A!=="value"&&s(L,A,B,F,j,N)}"value"in w&&s(L,"value",z.value,w.value,j)}},C=(L,z,w,N,j,A,F,B,W)=>{const G=z.el=L?L.el:a(""),V=z.anchor=L?L.anchor:a("");let{patchFlag:J,dynamicChildren:ue,slotScopeIds:oe}=z;oe&&(B=B?B.concat(oe):oe),L==null?(r(G,w,N),r(V,w,N),O(z.children||[],w,V,j,A,F,B,W)):J>0&&J&64&&ue&&L.dynamicChildren&&L.dynamicChildren.length===ue.length?(I(L.dynamicChildren,ue,w,j,A,F,B),(z.key!=null||j&&z===j.subTree)&&Op(L,z,!0)):K(L,z,w,V,j,A,F,B,W)},P=(L,z,w,N,j,A,F,B,W)=>{z.slotScopeIds=B,L==null?z.shapeFlag&512?j.ctx.activate(z,w,N,F,W):S(z,w,N,j,A,F,W):$(L,z,W)},S=(L,z,w,N,j,A,F)=>{const B=L.component=MT(L,N,j);if(nf(L)&&(B.ctx.renderer=de),RT(B,!1,F),B.asyncDep){if(j&&j.registerDep(B,Z,F),!L.el){const W=B.subTree=Ae(Vt);m(null,W,z,w),L.placeholder=W.el}}else Z(B,L,z,w,j,A,F)},$=(L,z,w)=>{const N=z.component=L.component;if(mT(L,z,w))if(N.asyncDep&&!N.asyncResolved){H(N,z,w);return}else N.next=z,N.update();else z.el=L.el,N.vnode=z},Z=(L,z,w,N,j,A,F)=>{const B=()=>{if(L.isMounted){let{next:J,bu:ue,u:oe,parent:ge,vnode:ee}=L;{const tn=u_(L);if(tn){J&&(J.el=ee.el,H(L,J,F)),tn.asyncDep.then(()=>{L.isUnmounted||B()});return}}let fe=J,Re;cs(L,!1),J?(J.el=ee.el,H(L,J,F)):J=ee,ue&&jf(ue),(Re=J.props&&J.props.onVnodeBeforeUpdate)&&Pr(Re,ge,J,ee),cs(L,!0);const ct=om(L),mt=L.subTree;L.subTree=ct,p(mt,ct,f(mt.el),q(mt),L,j,A),J.el=ct.el,fe===null&&vT(L,ct.el),oe&&pn(oe,j),(Re=J.props&&J.props.onVnodeUpdated)&&pn(()=>Pr(Re,ge,J,ee),j)}else{let J;const{el:ue,props:oe}=z,{bm:ge,m:ee,parent:fe,root:Re,type:ct}=L,mt=bo(z);cs(L,!1),ge&&jf(ge),!mt&&(J=oe&&oe.onVnodeBeforeMount)&&Pr(J,fe,z),cs(L,!0);{Re.ce&&Re.ce._def.shadowRoot!==!1&&Re.ce._injectChildStyle(ct);const tn=L.subTree=om(L);p(null,tn,w,N,L,j,A),z.el=tn.el}if(ee&&pn(ee,j),!mt&&(J=oe&&oe.onVnodeMounted)){const tn=z;pn(()=>Pr(J,fe,tn),j)}(z.shapeFlag&256||fe&&bo(fe.vnode)&&fe.vnode.shapeFlag&256)&&L.a&&pn(L.a,j),L.isMounted=!0,z=w=N=null}};L.scope.on();const W=L.effect=new l1(B);L.scope.off();const G=L.update=W.run.bind(W),V=L.job=W.runIfDirty.bind(W);V.i=L,V.id=L.uid,W.scheduler=()=>wp(V),cs(L,!0),G()},H=(L,z,w)=>{z.component=L;const N=L.vnode.props;L.vnode=z,L.next=null,bT(L,z.props,N,w),xT(L,z.children,w),bi(),Kg(L),_i()},K=(L,z,w,N,j,A,F,B,W=!1)=>{const G=L&&L.children,V=L?L.shapeFlag:0,J=z.children,{patchFlag:ue,shapeFlag:oe}=z;if(ue>0){if(ue&128){ce(G,J,w,N,j,A,F,B,W);return}else if(ue&256){Q(G,J,w,N,j,A,F,B,W);return}}oe&8?(V&16&&Ce(G,j,A),J!==G&&u(w,J)):V&16?oe&16?ce(G,J,w,N,j,A,F,B,W):Ce(G,j,A,!0):(V&8&&u(w,""),oe&16&&O(J,w,N,j,A,F,B,W))},Q=(L,z,w,N,j,A,F,B,W)=>{L=L||mo,z=z||mo;const G=L.length,V=z.length,J=Math.min(G,V);let ue;for(ue=0;ue<J;ue++){const oe=z[ue]=W?Wi(z[ue]):Lr(z[ue]);p(L[ue],oe,w,null,j,A,F,B,W)}G>V?Ce(L,j,A,!0,!1,J):O(z,w,N,j,A,F,B,W,J)},ce=(L,z,w,N,j,A,F,B,W)=>{let G=0;const V=z.length;let J=L.length-1,ue=V-1;for(;G<=J&&G<=ue;){const oe=L[G],ge=z[G]=W?Wi(z[G]):Lr(z[G]);if(ms(oe,ge))p(oe,ge,w,null,j,A,F,B,W);else break;G++}for(;G<=J&&G<=ue;){const oe=L[J],ge=z[ue]=W?Wi(z[ue]):Lr(z[ue]);if(ms(oe,ge))p(oe,ge,w,null,j,A,F,B,W);else break;J--,ue--}if(G>J){if(G<=ue){const oe=ue+1,ge=oe<V?z[oe].el:N;for(;G<=ue;)p(null,z[G]=W?Wi(z[G]):Lr(z[G]),w,ge,j,A,F,B,W),G++}}else if(G>ue)for(;G<=J;)U(L[G],j,A,!0),G++;else{const oe=G,ge=G,ee=new Map;for(G=ge;G<=ue;G++){const Xt=z[G]=W?Wi(z[G]):Lr(z[G]);Xt.key!=null&&ee.set(Xt.key,G)}let fe,Re=0;const ct=ue-ge+1;let mt=!1,tn=0;const vt=new Array(ct);for(G=0;G<ct;G++)vt[G]=0;for(G=oe;G<=J;G++){const Xt=L[G];if(Re>=ct){U(Xt,j,A,!0);continue}let Mt;if(Xt.key!=null)Mt=ee.get(Xt.key);else for(fe=ge;fe<=ue;fe++)if(vt[fe-ge]===0&&ms(Xt,z[fe])){Mt=fe;break}Mt===void 0?U(Xt,j,A,!0):(vt[Mt-ge]=G+1,Mt>=tn?tn=Mt:mt=!0,p(Xt,z[Mt],w,null,j,A,F,B,W),Re++)}const as=mt?kT(vt):mo;for(fe=as.length-1,G=ct-1;G>=0;G--){const Xt=ge+G,Mt=z[Xt],aa=z[Xt+1],Dl=Xt+1<V?aa.el||f_(aa):N;vt[G]===0?p(null,Mt,w,Dl,j,A,F,B,W):mt&&(fe<0||G!==as[fe]?Y(Mt,w,Dl,2):fe--)}}},Y=(L,z,w,N,j=null)=>{const{el:A,type:F,transition:B,children:W,shapeFlag:G}=L;if(G&6){Y(L.component.subTree,z,w,N);return}if(G&128){L.suspense.move(z,w,N);return}if(G&64){F.move(L,z,w,de);return}if(F===pt){r(A,z,w);for(let J=0;J<W.length;J++)Y(W[J],z,w,N);r(L.anchor,z,w);return}if(F===Wf){_(L,z,w);return}if(N!==2&&G&1&&B)if(N===0)B.beforeEnter(A),r(A,z,w),pn(()=>B.enter(A),j);else{const{leave:J,delayLeave:ue,afterLeave:oe}=B,ge=()=>{L.ctx.isUnmounted?i(A):r(A,z,w)},ee=()=>{A._isLeaving&&A[ri](!0),J(A,()=>{ge(),oe&&oe()})};ue?ue(A,ge,ee):ee()}else r(A,z,w)},U=(L,z,w,N=!1,j=!1)=>{const{type:A,props:F,ref:B,children:W,dynamicChildren:G,shapeFlag:V,patchFlag:J,dirs:ue,cacheIndex:oe}=L;if(J===-2&&(j=!1),B!=null&&(bi(),Ma(B,null,w,L,!0),_i()),oe!=null&&(z.renderCache[oe]=void 0),V&256){z.ctx.deactivate(L);return}const ge=V&1&&ue,ee=!bo(L);let fe;if(ee&&(fe=F&&F.onVnodeBeforeUnmount)&&Pr(fe,z,L),V&6)te(L.component,w,N);else{if(V&128){L.suspense.unmount(w,N);return}ge&&ls(L,null,z,"beforeUnmount"),V&64?L.type.remove(L,z,w,de,N):G&&!G.hasOnce&&(A!==pt||J>0&&J&64)?Ce(G,z,w,!1,!0):(A===pt&&J&384||!j&&V&16)&&Ce(W,z,w),N&&he(L)}(ee&&(fe=F&&F.onVnodeUnmounted)||ge)&&pn(()=>{fe&&Pr(fe,z,L),ge&&ls(L,null,z,"unmounted")},w)},he=L=>{const{type:z,el:w,anchor:N,transition:j}=L;if(z===pt){re(w,N);return}if(z===Wf){b(L);return}const A=()=>{i(w),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(L.shapeFlag&1&&j&&!j.persisted){const{leave:F,delayLeave:B}=j,W=()=>F(w,A);B?B(L.el,A,W):W()}else A()},re=(L,z)=>{let w;for(;L!==z;)w=d(L),i(L),L=w;i(z)},te=(L,z,w)=>{const{bum:N,scope:j,job:A,subTree:F,um:B,m:W,a:G}=L;cm(W),cm(G),N&&jf(N),j.stop(),A&&(A.flags|=8,U(F,L,z,w)),B&&pn(B,z),pn(()=>{L.isUnmounted=!0},z)},Ce=(L,z,w,N=!1,j=!1,A=0)=>{for(let F=A;F<L.length;F++)U(L[F],z,w,N,j)},q=L=>{if(L.shapeFlag&6)return q(L.component.subTree);if(L.shapeFlag&128)return L.suspense.next();const z=d(L.anchor||L.el),w=z&&z[I1];return w?d(w):z};let ne=!1;const se=(L,z,w)=>{let N;L==null?z._vnode&&(U(z._vnode,null,null,!0),N=z._vnode.component):p(z._vnode||null,L,z,null,null,null,w),z._vnode=L,ne||(ne=!0,Kg(N),O1(),ne=!1)},de={p,um:U,m:Y,r:he,mt:S,mc:O,pc:K,pbc:I,n:q,o:t};return{render:se,hydrate:void 0,createApp:uT(se)}}function Gf({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function cs({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ET(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Op(t,e,n=!1){const r=t.children,i=e.children;if($e(r)&&$e(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Wi(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&Op(o,a)),a.type===Xo&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=s+(t.type===pt?1:0)),a.type===Vt&&!a.el&&(a.el=o.el)}}function kT(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function u_(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:u_(e)}function cm(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function f_(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?f_(e.subTree):null}const h_=t=>t.__isSuspense;function OT(t,e){e&&e.pendingBranch?$e(t)?e.effects.push(...t):e.effects.push(t):zC(t)}const pt=Symbol.for("v-fgt"),Xo=Symbol.for("v-txt"),Vt=Symbol.for("v-cmt"),Wf=Symbol.for("v-stc"),La=[];let zn=null;function le(t=!1){La.push(zn=t?null:[])}function AT(){La.pop(),zn=La[La.length-1]||null}let rl=1;function mu(t,e=!1){rl+=t,t<0&&zn&&e&&(zn.hasOnce=!0)}function d_(t){return t.dynamicChildren=rl>0?zn||mo:null,AT(),rl>0&&zn&&zn.push(t),t}function be(t,e,n,r,i,s){return d_(Ee(t,e,n,r,i,s,!0))}function Ve(t,e,n,r,i){return d_(Ae(t,e,n,r,i,!0))}function il(t){return t?t.__v_isVNode===!0:!1}function ms(t,e){return t.type===e.type&&t.key===e.key}const p_=({key:t})=>t??null,Yc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?at(t)||kt(t)||ze(t)?{i:Kt,r:t,k:e,f:!!n}:t:null);function Ee(t,e=null,n=null,r=0,i=null,s=t===pt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&p_(e),ref:e&&Yc(e),scopeId:P1,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Kt};return a?(Ap(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=at(n)?8:16),rl>0&&!o&&zn&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&zn.push(l),l}const Ae=PT;function PT(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===Y1)&&(t=Vt),il(t)){const a=Si(t,e,!0);return n&&Ap(a,n),rl>0&&!s&&zn&&(a.shapeFlag&6?zn[zn.indexOf(t)]=a:zn.push(a)),a.patchFlag=-2,a}if(NT(t)&&(t=t.__vccOpts),e){e=FT(e);let{class:a,style:l}=e;a&&!at(a)&&(e.class=ke(a)),et(l)&&(ef(l)&&!$e(l)&&(l=jt({},l)),e.style=Dt(l))}const o=at(t)?1:h_(t)?128:M1(t)?64:et(t)?4:ze(t)?2:0;return Ee(t,e,n,r,i,o,s,!0)}function FT(t){return t?ef(t)||i_(t)?jt({},t):t:null}function Si(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?Xn(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&p_(c),ref:e&&e.ref?n&&s?$e(s)?s.concat(Yc(e)):[s,Yc(e)]:Yc(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==pt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Si(t.ssContent),ssFallback:t.ssFallback&&Si(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Ms(u,l.clone(u)),u}function of(t=" ",e=0){return Ae(Xo,null,t,e)}function je(t="",e=!1){return e?(le(),Ve(Vt,null,t)):Ae(Vt,null,t)}function Lr(t){return t==null||typeof t=="boolean"?Ae(Vt):$e(t)?Ae(pt,null,t.slice()):il(t)?Wi(t):Ae(Xo,null,String(t))}function Wi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Si(t)}function Ap(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if($e(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Ap(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!i_(e)?e._ctx=Kt:i===3&&Kt&&(Kt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ze(e)?(e={default:e,_ctx:Kt},n=32):(e=String(e),r&64?(n=16,e=[of(e)]):n=8);t.children=e,t.shapeFlag|=n}function Xn(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=ke([e.class,r.class]));else if(i==="style")e.style=Dt([e.style,r.style]);else if(Xu(i)){const s=e[i],o=r[i];o&&s!==o&&!($e(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Pr(t,e,n,r=null){Er(t,e,7,[n,r])}const DT=e_();let IT=0;function MT(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||DT,s={uid:IT++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new s1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:o_(r,i),emitsOptions:t_(r,i),emit:null,emitted:null,propsDefaults:bt,inheritAttrs:r.inheritAttrs,ctx:bt,data:bt,props:bt,attrs:bt,slots:bt,refs:bt,setupState:bt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=hT.bind(null,s),t.ce&&t.ce(s),s}let an=null;const Jt=()=>an||Kt;let vu,Sd;{const t=Ju(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};vu=e("__VUE_INSTANCE_SETTERS__",n=>an=n),Sd=e("__VUE_SSR_SETTERS__",n=>sl=n)}const Sl=t=>{const e=an;return vu(t),t.scope.on(),()=>{t.scope.off(),vu(e)}},um=()=>{an&&an.scope.off(),vu(null)};function g_(t){return t.vnode.shapeFlag&4}let sl=!1;function RT(t,e=!1,n=!1){e&&Sd(e);const{props:r,children:i}=t.vnode,s=g_(t);yT(t,r,s,e),ST(t,i,n||e);const o=s?LT(t,e):void 0;return e&&Sd(!1),o}function LT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,nT);const{setup:r}=n;if(r){bi();const i=t.setupContext=r.length>1?v_(t):null,s=Sl(t),o=_l(r,t,0,[t.props,i]),a=lu(o);if(_i(),s(),(a||t.sp)&&!bo(t)&&U1(t),a){if(o.then(um,um),e)return o.then(l=>{fm(t,l)}).catch(l=>{tf(l,t,0)});t.asyncDep=o}else fm(t,o)}else m_(t)}function fm(t,e,n){ze(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:et(e)&&(t.setupState=T1(e)),m_(t)}function m_(t,e,n){const r=t.type;t.render||(t.render=r.render||Ze);{const i=Sl(t);bi();try{iT(t)}finally{_i(),i()}}}const BT={get(t,e){return on(t,"get",""),t[e]}};function v_(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,BT),slots:t.slots,emit:t.emit,expose:e}}function af(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(T1(x1(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ra)return Ra[n](t)},has(e,n){return n in e||n in Ra}})):t.proxy}function jT(t,e=!0){return ze(t)?t.displayName||t.name:t.name||e&&t.__name}function NT(t){return ze(t)&&"__vccOpts"in t}const ae=(t,e)=>RC(t,e,sl);function lf(t,e,n){try{mu(-1);const r=arguments.length;return r===2?et(e)&&!$e(e)?il(e)?Ae(t,null,[e]):Ae(t,e):Ae(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&il(n)&&(n=[n]),Ae(t,e,n))}finally{mu(1)}}const zT="3.5.26",$T=Ze;let xd;const hm=typeof window<"u"&&window.trustedTypes;if(hm)try{xd=hm.createPolicy("vue",{createHTML:t=>t})}catch{}const y_=xd?t=>xd.createHTML(t):t=>t,UT="http://www.w3.org/2000/svg",HT="http://www.w3.org/1998/Math/MathML",ei=typeof document<"u"?document:null,dm=ei&&ei.createElement("template"),VT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?ei.createElementNS(UT,t):e==="mathml"?ei.createElementNS(HT,t):n?ei.createElement(t,{is:n}):ei.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>ei.createTextNode(t),createComment:t=>ei.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ei.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{dm.innerHTML=y_(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=dm.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Ri="transition",ua="animation",Oo=Symbol("_vtc"),b_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},__=jt({},j1,b_),GT=t=>(t.displayName="Transition",t.props=__,t),cf=GT((t,{slots:e})=>lf(XC,w_(t),e)),us=(t,e=[])=>{$e(t)?t.forEach(n=>n(...e)):t&&t(...e)},pm=t=>t?$e(t)?t.some(e=>e.length>1):t.length>1:!1;function w_(t){const e={};for(const C in t)C in b_||(e[C]=t[C]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=t,g=WT(i),p=g&&g[0],v=g&&g[1],{onBeforeEnter:m,onEnter:y,onEnterCancelled:_,onLeave:b,onLeaveCancelled:x,onBeforeAppear:E=m,onAppear:T=y,onAppearCancelled:O=_}=e,k=(C,P,S,$)=>{C._enterCancelled=$,Ui(C,P?u:a),Ui(C,P?c:o),S&&S()},I=(C,P)=>{C._isLeaving=!1,Ui(C,f),Ui(C,h),Ui(C,d),P&&P()},R=C=>(P,S)=>{const $=C?T:y,Z=()=>k(P,C,S);us($,[P,Z]),gm(()=>{Ui(P,C?l:s),Mr(P,C?u:a),pm($)||mm(P,r,p,Z)})};return jt(e,{onBeforeEnter(C){us(m,[C]),Mr(C,s),Mr(C,o)},onBeforeAppear(C){us(E,[C]),Mr(C,l),Mr(C,c)},onEnter:R(!1),onAppear:R(!0),onLeave(C,P){C._isLeaving=!0;const S=()=>I(C,P);Mr(C,f),C._enterCancelled?(Mr(C,d),Cd(C)):(Cd(C),Mr(C,d)),gm(()=>{C._isLeaving&&(Ui(C,f),Mr(C,h),pm(b)||mm(C,r,v,S))}),us(b,[C,S])},onEnterCancelled(C){k(C,!1,void 0,!0),us(_,[C])},onAppearCancelled(C){k(C,!0,void 0,!0),us(O,[C])},onLeaveCancelled(C){I(C),us(x,[C])}})}function WT(t){if(t==null)return null;if(et(t))return[Xf(t.enter),Xf(t.leave)];{const e=Xf(t);return[e,e]}}function Xf(t){return nC(t)}function Mr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Oo]||(t[Oo]=new Set)).add(e)}function Ui(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Oo];n&&(n.delete(e),n.size||(t[Oo]=void 0))}function gm(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let XT=0;function mm(t,e,n,r){const i=t._endId=++XT,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=S_(t,e);if(!o)return r();const c=o+"end";let u=0;const f=()=>{t.removeEventListener(c,d),s()},d=h=>{h.target===t&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),t.addEventListener(c,d)}function S_(t,e){const n=window.getComputedStyle(t),r=g=>(n[g]||"").split(", "),i=r(`${Ri}Delay`),s=r(`${Ri}Duration`),o=vm(i,s),a=r(`${ua}Delay`),l=r(`${ua}Duration`),c=vm(a,l);let u=null,f=0,d=0;e===Ri?o>0&&(u=Ri,f=o,d=s.length):e===ua?c>0&&(u=ua,f=c,d=l.length):(f=Math.max(o,c),u=f>0?o>c?Ri:ua:null,d=u?u===Ri?s.length:l.length:0);const h=u===Ri&&/\b(?:transform|all)(?:,|$)/.test(r(`${Ri}Property`).toString());return{type:u,timeout:f,propCount:d,hasTransform:h}}function vm(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>ym(n)+ym(t[r])))}function ym(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Cd(t){return(t?t.ownerDocument:document).body.offsetHeight}function YT(t,e,n){const r=t[Oo];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const yu=Symbol("_vod"),x_=Symbol("_vsh"),uf={name:"show",beforeMount(t,{value:e},{transition:n}){t[yu]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):fa(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),fa(t,!0),r.enter(t)):r.leave(t,()=>{fa(t,!1)}):fa(t,e))},beforeUnmount(t,{value:e}){fa(t,e)}};function fa(t,e){t.style.display=e?t[yu]:"none",t[x_]=!e}const KT=Symbol(""),qT=/(?:^|;)\s*display\s*:/;function ZT(t,e,n){const r=t.style,i=at(n);let s=!1;if(n&&!i){if(e)if(at(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Kc(r,a,"")}else for(const o in e)n[o]==null&&Kc(r,o,"");for(const o in n)o==="display"&&(s=!0),Kc(r,o,n[o])}else if(i){if(e!==n){const o=r[KT];o&&(n+=";"+o),r.cssText=n,s=qT.test(n)}}else e&&t.removeAttribute("style");yu in t&&(t[yu]=s?r.display:"",t[x_]&&(r.display="none"))}const bm=/\s*!important$/;function Kc(t,e,n){if($e(n))n.forEach(r=>Kc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=JT(t,e);bm.test(n)?t.setProperty(is(r),n.replace(bm,""),"important"):t[r]=n}}const _m=["Webkit","Moz","ms"],Yf={};function JT(t,e){const n=Yf[e];if(n)return n;let r=Wn(e);if(r!=="filter"&&r in t)return Yf[e]=r;r=Zu(r);for(let i=0;i<_m.length;i++){const s=_m[i]+r;if(s in t)return Yf[e]=s}return e}const wm="http://www.w3.org/1999/xlink";function Sm(t,e,n,r,i,s=lC(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(wm,e.slice(6,e.length)):t.setAttributeNS(wm,e,n):n==null||s&&!n1(n)?t.removeAttribute(e):t.setAttribute(e,s?"":Oi(n)?String(n):n)}function xm(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?y_(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=n1(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function QT(t,e,n,r){t.addEventListener(e,n,r)}function eE(t,e,n,r){t.removeEventListener(e,n,r)}const Cm=Symbol("_vei");function tE(t,e,n,r,i=null){const s=t[Cm]||(t[Cm]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=nE(e);if(r){const c=s[e]=sE(r,i);QT(t,a,c,l)}else o&&(eE(t,a,o,l),s[e]=void 0)}}const Tm=/(?:Once|Passive|Capture)$/;function nE(t){let e;if(Tm.test(t)){e={};let r;for(;r=t.match(Tm);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):is(t.slice(2)),e]}let Kf=0;const rE=Promise.resolve(),iE=()=>Kf||(rE.then(()=>Kf=0),Kf=Date.now());function sE(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Er(oE(r,n.value),e,5,[r])};return n.value=t,n.attached=iE(),n}function oE(t,e){if($e(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Em=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,aE=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?YT(t,r,o):e==="style"?ZT(t,n,r):Xu(e)?dp(e)||tE(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):lE(t,e,r,o))?(xm(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Sm(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!at(r))?xm(t,Wn(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Sm(t,e,r,o))};function lE(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Em(e)&&ze(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Em(e)&&at(n)?!1:e in t}const C_=new WeakMap,T_=new WeakMap,bu=Symbol("_moveCb"),km=Symbol("_enterCb"),cE=t=>(delete t.props.mode,t),uE=cE({name:"TransitionGroup",props:jt({},__,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Jt(),r=B1();let i,s;return Cp(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!gE(i[0].el,n.vnode.el,o)){i=[];return}i.forEach(hE),i.forEach(dE);const a=i.filter(pE);Cd(n.vnode.el),a.forEach(l=>{const c=l.el,u=c.style;Mr(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[bu]=d=>{d&&d.target!==c||(!d||d.propertyName.endsWith("transform"))&&(c.removeEventListener("transitionend",f),c[bu]=null,Ui(c,o))};c.addEventListener("transitionend",f)}),i=[]}),()=>{const o=tt(t),a=w_(o);let l=o.tag||pt;if(i=[],s)for(let c=0;c<s.length;c++){const u=s[c];u.el&&u.el instanceof Element&&(i.push(u),Ms(u,tl(u,a,r,n)),C_.set(u,{left:u.el.offsetLeft,top:u.el.offsetTop}))}s=e.default?xp(e.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&Ms(u,tl(u,a,r,n))}return Ae(l,null,s)}}}),fE=uE;function hE(t){const e=t.el;e[bu]&&e[bu](),e[km]&&e[km]()}function dE(t){T_.set(t,{left:t.el.offsetLeft,top:t.el.offsetTop})}function pE(t){const e=C_.get(t),n=T_.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function gE(t,e,n){const r=t.cloneNode(),i=t[Oo];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=S_(r);return s.removeChild(r),o}const mE=["ctrl","shift","alt","meta"],vE={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>mE.some(n=>t[`${n}Key`]&&!e.includes(n))},wr=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((i,...s)=>{for(let o=0;o<e.length;o++){const a=vE[e[o]];if(a&&a(i,e))return}return t(i,...s)}))},yE={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Pp=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(i=>{if(!("key"in i))return;const s=is(i.key);if(e.some(o=>o===s||yE[o]===s))return t(i)}))},bE=jt({patchProp:aE},VT);let Om;function _E(){return Om||(Om=CT(bE))}const wE=((...t)=>{const e=_E().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=xE(r);if(!i)return;const s=e._component;!ze(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,SE(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function SE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function xE(t){return at(t)?document.querySelector(t):t}const CE=Symbol();var Am;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Am||(Am={}));function TE(){const t=cC(!0),e=t.run(()=>ye({}));let n=[],r=[];const i=x1({install(s){i._a=s,s.provide(CE,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const fn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},EE={};function kE(t,e){const n=eT("RouterView");return le(),Ve(n)}const OE=fn(EE,[["render",kE]]);const io=typeof document<"u";function E_(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function AE(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&E_(t.default)}const ut=Object.assign;function qf(t,e){const n={};for(const r in e){const i=e[r];n[r]=kr(i)?i.map(t):t(i)}return n}const Ba=()=>{},kr=Array.isArray;function Pm(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const k_=/#/g,PE=/&/g,FE=/\//g,DE=/=/g,IE=/\?/g,O_=/\+/g,ME=/%5B/g,RE=/%5D/g,A_=/%5E/g,LE=/%60/g,P_=/%7B/g,BE=/%7C/g,F_=/%7D/g,jE=/%20/g;function Fp(t){return t==null?"":encodeURI(""+t).replace(BE,"|").replace(ME,"[").replace(RE,"]")}function NE(t){return Fp(t).replace(P_,"{").replace(F_,"}").replace(A_,"^")}function Td(t){return Fp(t).replace(O_,"%2B").replace(jE,"+").replace(k_,"%23").replace(PE,"%26").replace(LE,"`").replace(P_,"{").replace(F_,"}").replace(A_,"^")}function zE(t){return Td(t).replace(DE,"%3D")}function $E(t){return Fp(t).replace(k_,"%23").replace(IE,"%3F")}function UE(t){return $E(t).replace(FE,"%2F")}function ol(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const HE=/\/$/,VE=t=>t.replace(HE,"");function Zf(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(r=e.slice(0,l),s=e.slice(l,a>0?a:e.length),i=t(s.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=YE(r??e,n),{fullPath:r+s+o,path:r,query:i,hash:ol(o)}}function GE(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Fm(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function WE(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Ao(e.matched[r],n.matched[i])&&D_(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ao(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function D_(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!XE(t[n],e[n]))return!1;return!0}function XE(t,e){return kr(t)?Dm(t,e):kr(e)?Dm(e,t):t?.valueOf()===e?.valueOf()}function Dm(t,e){return kr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function YE(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Li={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ed=(function(t){return t.pop="pop",t.push="push",t})({}),Jf=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function KE(t){if(!t)if(io){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),VE(t)}const qE=/^[^#]+#/;function ZE(t,e){return t.replace(qE,"#")+e}function JE(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ff=()=>({left:window.scrollX,top:window.scrollY});function QE(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=JE(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Im(t,e){return(history.state?history.state.position-e:-1)+t}const kd=new Map;function ek(t,e){kd.set(t,e)}function tk(t){const e=kd.get(t);return kd.delete(t),e}function nk(t){return typeof t=="string"||t&&typeof t=="object"}function I_(t){return typeof t=="string"||typeof t=="symbol"}let Pt=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const M_=Symbol("");Pt.MATCHER_NOT_FOUND+"",Pt.NAVIGATION_GUARD_REDIRECT+"",Pt.NAVIGATION_ABORTED+"",Pt.NAVIGATION_CANCELLED+"",Pt.NAVIGATION_DUPLICATED+"";function Po(t,e){return ut(new Error,{type:t,[M_]:!0},e)}function Yr(t,e){return t instanceof Error&&M_ in t&&(e==null||!!(t.type&e))}const rk=["params","query","hash"];function ik(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of rk)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function sk(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const i=n[r].replace(O_," "),s=i.indexOf("="),o=ol(s<0?i:i.slice(0,s)),a=s<0?null:ol(i.slice(s+1));if(o in e){let l=e[o];kr(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Mm(t){let e="";for(let n in t){const r=t[n];if(n=zE(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(kr(r)?r.map(i=>i&&Td(i)):[r&&Td(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function ok(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=kr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const ak=Symbol(""),Rm=Symbol(""),Dp=Symbol(""),R_=Symbol(""),Od=Symbol("");function ha(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Xi(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(Po(Pt.NAVIGATION_ABORTED,{from:n,to:e})):d instanceof Error?l(d):nk(d)?l(Po(Pt.NAVIGATION_GUARD_REDIRECT,{from:e,to:d})):(o&&r.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},u=s(()=>t.call(r&&r.instances[i],e,n,c));let f=Promise.resolve(u);t.length<3&&(f=f.then(c)),f.catch(d=>l(d))})}function Qf(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(E_(l)){const c=(l.__vccOpts||l)[e];c&&s.push(Xi(c,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=AE(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const d=(f.__vccOpts||f)[e];return d&&Xi(d,n,r,o,a,i)()}))}}return s}function lk(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Ao(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Ao(c,l))||i.push(l))}return[n,r,i]}let ck=()=>location.protocol+"//"+location.host;function L_(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let o=i.includes(t.slice(s))?t.slice(s).length:1,a=i.slice(o);return a[0]!=="/"&&(a="/"+a),Fm(a,"")}return Fm(n,t)+r+i}function uk(t,e,n,r){let i=[],s=[],o=null;const a=({state:d})=>{const h=L_(t,location),g=n.value,p=e.value;let v=0;if(d){if(n.value=h,e.value=d,o&&o===g){o=null;return}v=p?d.position-p.position:0}else r(h);i.forEach(m=>{m(n.value,g,{delta:v,type:Ed.pop,direction:v?v>0?Jf.forward:Jf.back:Jf.unknown})})};function l(){o=n.value}function c(d){i.push(d);const h=()=>{const g=i.indexOf(d);g>-1&&i.splice(g,1)};return s.push(h),h}function u(){if(document.visibilityState==="hidden"){const{history:d}=window;if(!d.state)return;d.replaceState(ut({},d.state,{scroll:ff()}),"")}}function f(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:l,listen:c,destroy:f}}function Lm(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?ff():null}}function fk(t){const{history:e,location:n}=window,r={value:L_(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const f=t.indexOf("#"),d=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:ck()+t+l;try{e[u?"replaceState":"pushState"](c,"",d),i.value=c}catch(h){console.error(h),n[u?"replace":"assign"](d)}}function o(l,c){s(l,ut({},e.state,Lm(i.value.back,l,i.value.forward,!0),c,{position:i.value.position}),!0),r.value=l}function a(l,c){const u=ut({},i.value,e.state,{forward:l,scroll:ff()});s(u.current,u,!0),s(l,ut({},Lm(r.value,l,null),{position:u.position+1},c),!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function hk(t){t=KE(t);const e=fk(t),n=uk(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=ut({location:"",base:t,go:r,createHref:ZE.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function dk(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),hk(t)}let xs=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Bt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Bt||{});const pk={type:xs.Static,value:""},gk=/[a-zA-Z0-9_]/;function mk(t){if(!t)return[[]];if(t==="/")return[[pk]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${c}": ${h}`)}let n=Bt.Static,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",u="";function f(){c&&(n===Bt.Static?s.push({type:xs.Static,value:c}):n===Bt.Param||n===Bt.ParamRegExp||n===Bt.ParamRegExpEnd?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:xs.Param,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==Bt.ParamRegExp){r=n,n=Bt.EscapeNext;continue}switch(n){case Bt.Static:l==="/"?(c&&f(),o()):l===":"?(f(),n=Bt.Param):d();break;case Bt.EscapeNext:d(),n=r;break;case Bt.Param:l==="("?n=Bt.ParamRegExp:gk.test(l)?d():(f(),n=Bt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case Bt.ParamRegExp:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=Bt.ParamRegExpEnd:u+=l;break;case Bt.ParamRegExpEnd:f(),n=Bt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===Bt.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),f(),o(),i}const Bm="[^/]+?",vk={sensitive:!1,strict:!1,start:!0,end:!0};var gn=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(gn||{});const yk=/[.+*?^${}()[\]/\\]/g;function bk(t,e){const n=ut({},vk,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const u=c.length?[]:[gn.Root];n.strict&&!c.length&&(i+="/");for(let f=0;f<c.length;f++){const d=c[f];let h=gn.Segment+(n.sensitive?gn.BonusCaseSensitive:0);if(d.type===xs.Static)f||(i+="/"),i+=d.value.replace(yk,"\\$&"),h+=gn.Static;else if(d.type===xs.Param){const{value:g,repeatable:p,optional:v,regexp:m}=d;s.push({name:g,repeatable:p,optional:v});const y=m||Bm;if(y!==Bm){h+=gn.BonusCustomRegExp;try{`${y}`}catch(b){throw new Error(`Invalid custom RegExp for param "${g}" (${y}): `+b.message)}}let _=p?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(_=v&&c.length<2?`(?:/${_})`:"/"+_),v&&(_+="?"),i+=_,h+=gn.Dynamic,v&&(h+=gn.BonusOptional),p&&(h+=gn.BonusRepeatable),y===".*"&&(h+=gn.BonusWildcard)}u.push(h)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=gn.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let d=1;d<u.length;d++){const h=u[d]||"",g=s[d-1];f[g.name]=h&&g.repeatable?h.split("/"):h}return f}function l(c){let u="",f=!1;for(const d of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const h of d)if(h.type===xs.Static)u+=h.value;else if(h.type===xs.Param){const{value:g,repeatable:p,optional:v}=h,m=g in c?c[g]:"";if(kr(m)&&!p)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const y=kr(m)?m.join("/"):m;if(!y)if(v)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=y}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function _k(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===gn.Static+gn.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===gn.Static+gn.Segment?1:-1:0}function B_(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=_k(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(jm(r))return 1;if(jm(i))return-1}return i.length-r.length}function jm(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const wk={strict:!1,end:!0,sensitive:!1};function Sk(t,e,n){const r=bk(mk(t.path),n),i=ut(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function xk(t,e){const n=[],r=new Map;e=Pm(wk,e);function i(f){return r.get(f)}function s(f,d,h){const g=!h,p=zm(f);p.aliasOf=h&&h.record;const v=Pm(e,f),m=[p];if("alias"in f){const b=typeof f.alias=="string"?[f.alias]:f.alias;for(const x of b)m.push(zm(ut({},p,{components:h?h.record.components:p.components,path:x,aliasOf:h?h.record:p})))}let y,_;for(const b of m){const{path:x}=b;if(d&&x[0]!=="/"){const E=d.record.path,T=E[E.length-1]==="/"?"":"/";b.path=d.record.path+(x&&T+x)}if(y=Sk(b,d,v),h?h.alias.push(y):(_=_||y,_!==y&&_.alias.push(y),g&&f.name&&!$m(y)&&o(f.name)),j_(y)&&l(y),p.children){const E=p.children;for(let T=0;T<E.length;T++)s(E[T],y,h&&h.children[T])}h=h||y}return _?()=>{o(_)}:Ba}function o(f){if(I_(f)){const d=r.get(f);d&&(r.delete(f),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(f);d>-1&&(n.splice(d,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const d=Ek(f,n);n.splice(d,0,f),f.record.name&&!$m(f)&&r.set(f.record.name,f)}function c(f,d){let h,g={},p,v;if("name"in f&&f.name){if(h=r.get(f.name),!h)throw Po(Pt.MATCHER_NOT_FOUND,{location:f});v=h.record.name,g=ut(Nm(d.params,h.keys.filter(_=>!_.optional).concat(h.parent?h.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),f.params&&Nm(f.params,h.keys.map(_=>_.name))),p=h.stringify(g)}else if(f.path!=null)p=f.path,h=n.find(_=>_.re.test(p)),h&&(g=h.parse(p),v=h.record.name);else{if(h=d.name?r.get(d.name):n.find(_=>_.re.test(d.path)),!h)throw Po(Pt.MATCHER_NOT_FOUND,{location:f,currentLocation:d});v=h.record.name,g=ut({},d.params,f.params),p=h.stringify(g)}const m=[];let y=h;for(;y;)m.unshift(y.record),y=y.parent;return{name:v,path:p,params:g,matched:m,meta:Tk(m)}}t.forEach(f=>s(f));function u(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function Nm(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function zm(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Ck(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Ck(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function $m(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Tk(t){return t.reduce((e,n)=>ut(e,n.meta),{})}function Ek(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;B_(t,e[s])<0?r=s:n=s+1}const i=kk(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function kk(t){let e=t;for(;e=e.parent;)if(j_(e)&&B_(t,e)===0)return e}function j_({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Um(t){const e=Je(Dp),n=Je(R_),r=ae(()=>{const l=D(t.to);return e.resolve(l)}),i=ae(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const d=f.findIndex(Ao.bind(null,u));if(d>-1)return d;const h=Hm(l[c-2]);return c>1&&Hm(u)===h&&f[f.length-1].path!==h?f.findIndex(Ao.bind(null,l[c-2])):d}),s=ae(()=>i.value>-1&&Dk(n.params,r.value.params)),o=ae(()=>i.value>-1&&i.value===n.matched.length-1&&D_(n.params,r.value.params));function a(l={}){if(Fk(l)){const c=e[D(t.replace)?"replace":"push"](D(t.to)).catch(Ba);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:ae(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function Ok(t){return t.length===1?t[0]:t}const Ak=De({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Um,setup(t,{slots:e}){const n=Go(Um(t)),{options:r}=Je(Dp),i=ae(()=>({[Vm(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Vm(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&Ok(e.default(n));return t.custom?s:lf("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Pk=Ak;function Fk(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Dk(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!kr(i)||i.length!==r.length||r.some((s,o)=>s.valueOf()!==i[o].valueOf()))return!1}return!0}function Hm(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Vm=(t,e,n)=>t??e??n,Ik=De({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Je(Od),i=ae(()=>t.route||r.value),s=Je(Rm,0),o=ae(()=>{let c=D(s);const{matched:u}=i.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=ae(()=>i.value.matched[o.value]);_n(Rm,ae(()=>o.value+1)),_n(ak,a),_n(Od,i);const l=ye();return Ge(()=>[l.value,a.value,t.name],([c,u,f],[d,h,g])=>{u&&(u.instances[f]=c,h&&h!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!Ao(u,h)||!d)&&(u.enterCallbacks[f]||[]).forEach(p=>p(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,f=a.value,d=f&&f.components[u];if(!d)return Gm(n.default,{Component:d,route:c});const h=f.props[u],g=h?h===!0?c.params:typeof h=="function"?h(c):h:null,v=lf(d,ut({},g,e,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return Gm(n.default,{Component:v,route:c})||v}}});function Gm(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Mk=Ik;function Rk(t){const e=xk(t.routes,t),n=t.parseQuery||sk,r=t.stringifyQuery||Mm,i=t.history,s=ha(),o=ha(),a=ha(),l=$r(Li);let c=Li;io&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=qf.bind(null,q=>""+q),f=qf.bind(null,UE),d=qf.bind(null,ol);function h(q,ne){let se,de;return I_(q)?(se=e.getRecordMatcher(q),de=ne):de=q,e.addRoute(de,se)}function g(q){const ne=e.getRecordMatcher(q);ne&&e.removeRoute(ne)}function p(){return e.getRoutes().map(q=>q.record)}function v(q){return!!e.getRecordMatcher(q)}function m(q,ne){if(ne=ut({},ne||l.value),typeof q=="string"){const w=Zf(n,q,ne.path),N=e.resolve({path:w.path},ne),j=i.createHref(w.fullPath);return ut(w,N,{params:d(N.params),hash:ol(w.hash),redirectedFrom:void 0,href:j})}let se;if(q.path!=null)se=ut({},q,{path:Zf(n,q.path,ne.path).path});else{const w=ut({},q.params);for(const N in w)w[N]==null&&delete w[N];se=ut({},q,{params:f(w)}),ne.params=f(ne.params)}const de=e.resolve(se,ne),_e=q.hash||"";de.params=u(d(de.params));const L=GE(r,ut({},q,{hash:NE(_e),path:de.path})),z=i.createHref(L);return ut({fullPath:L,hash:_e,query:r===Mm?ok(q.query):q.query||{}},de,{redirectedFrom:void 0,href:z})}function y(q){return typeof q=="string"?Zf(n,q,l.value.path):ut({},q)}function _(q,ne){if(c!==q)return Po(Pt.NAVIGATION_CANCELLED,{from:ne,to:q})}function b(q){return T(q)}function x(q){return b(ut(y(q),{replace:!0}))}function E(q,ne){const se=q.matched[q.matched.length-1];if(se&&se.redirect){const{redirect:de}=se;let _e=typeof de=="function"?de(q,ne):de;return typeof _e=="string"&&(_e=_e.includes("?")||_e.includes("#")?_e=y(_e):{path:_e},_e.params={}),ut({query:q.query,hash:q.hash,params:_e.path!=null?{}:q.params},_e)}}function T(q,ne){const se=c=m(q),de=l.value,_e=q.state,L=q.force,z=q.replace===!0,w=E(se,de);if(w)return T(ut(y(w),{state:typeof w=="object"?ut({},_e,w.state):_e,force:L,replace:z}),ne||se);const N=se;N.redirectedFrom=ne;let j;return!L&&WE(r,de,se)&&(j=Po(Pt.NAVIGATION_DUPLICATED,{to:N,from:de}),Y(de,de,!0,!1)),(j?Promise.resolve(j):I(N,de)).catch(A=>Yr(A)?Yr(A,Pt.NAVIGATION_GUARD_REDIRECT)?A:ce(A):K(A,N,de)).then(A=>{if(A){if(Yr(A,Pt.NAVIGATION_GUARD_REDIRECT))return T(ut({replace:z},y(A.to),{state:typeof A.to=="object"?ut({},_e,A.to.state):_e,force:L}),ne||N)}else A=C(N,de,!0,z,_e);return R(N,de,A),A})}function O(q,ne){const se=_(q,ne);return se?Promise.reject(se):Promise.resolve()}function k(q){const ne=re.values().next().value;return ne&&typeof ne.runWithContext=="function"?ne.runWithContext(q):q()}function I(q,ne){let se;const[de,_e,L]=lk(q,ne);se=Qf(de.reverse(),"beforeRouteLeave",q,ne);for(const w of de)w.leaveGuards.forEach(N=>{se.push(Xi(N,q,ne))});const z=O.bind(null,q,ne);return se.push(z),Ce(se).then(()=>{se=[];for(const w of s.list())se.push(Xi(w,q,ne));return se.push(z),Ce(se)}).then(()=>{se=Qf(_e,"beforeRouteUpdate",q,ne);for(const w of _e)w.updateGuards.forEach(N=>{se.push(Xi(N,q,ne))});return se.push(z),Ce(se)}).then(()=>{se=[];for(const w of L)if(w.beforeEnter)if(kr(w.beforeEnter))for(const N of w.beforeEnter)se.push(Xi(N,q,ne));else se.push(Xi(w.beforeEnter,q,ne));return se.push(z),Ce(se)}).then(()=>(q.matched.forEach(w=>w.enterCallbacks={}),se=Qf(L,"beforeRouteEnter",q,ne,k),se.push(z),Ce(se))).then(()=>{se=[];for(const w of o.list())se.push(Xi(w,q,ne));return se.push(z),Ce(se)}).catch(w=>Yr(w,Pt.NAVIGATION_CANCELLED)?w:Promise.reject(w))}function R(q,ne,se){a.list().forEach(de=>k(()=>de(q,ne,se)))}function C(q,ne,se,de,_e){const L=_(q,ne);if(L)return L;const z=ne===Li,w=io?history.state:{};se&&(de||z?i.replace(q.fullPath,ut({scroll:z&&w&&w.scroll},_e)):i.push(q.fullPath,_e)),l.value=q,Y(q,ne,se,z),ce()}let P;function S(){P||(P=i.listen((q,ne,se)=>{if(!te.listening)return;const de=m(q),_e=E(de,te.currentRoute.value);if(_e){T(ut(_e,{replace:!0,force:!0}),de).catch(Ba);return}c=de;const L=l.value;io&&ek(Im(L.fullPath,se.delta),ff()),I(de,L).catch(z=>Yr(z,Pt.NAVIGATION_ABORTED|Pt.NAVIGATION_CANCELLED)?z:Yr(z,Pt.NAVIGATION_GUARD_REDIRECT)?(T(ut(y(z.to),{force:!0}),de).then(w=>{Yr(w,Pt.NAVIGATION_ABORTED|Pt.NAVIGATION_DUPLICATED)&&!se.delta&&se.type===Ed.pop&&i.go(-1,!1)}).catch(Ba),Promise.reject()):(se.delta&&i.go(-se.delta,!1),K(z,de,L))).then(z=>{z=z||C(de,L,!1),z&&(se.delta&&!Yr(z,Pt.NAVIGATION_CANCELLED)?i.go(-se.delta,!1):se.type===Ed.pop&&Yr(z,Pt.NAVIGATION_ABORTED|Pt.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),R(de,L,z)}).catch(Ba)}))}let $=ha(),Z=ha(),H;function K(q,ne,se){ce(q);const de=Z.list();return de.length?de.forEach(_e=>_e(q,ne,se)):console.error(q),Promise.reject(q)}function Q(){return H&&l.value!==Li?Promise.resolve():new Promise((q,ne)=>{$.add([q,ne])})}function ce(q){return H||(H=!q,S(),$.list().forEach(([ne,se])=>q?se(q):ne()),$.reset()),q}function Y(q,ne,se,de){const{scrollBehavior:_e}=t;if(!io||!_e)return Promise.resolve();const L=!se&&tk(Im(q.fullPath,0))||(de||!se)&&history.state&&history.state.scroll||null;return Yt().then(()=>_e(q,ne,L)).then(z=>z&&QE(z)).catch(z=>K(z,q,ne))}const U=q=>i.go(q);let he;const re=new Set,te={currentRoute:l,listening:!0,addRoute:h,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:p,resolve:m,options:t,push:b,replace:x,go:U,back:()=>U(-1),forward:()=>U(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:Z.add,isReady:Q,install(q){q.component("RouterLink",Pk),q.component("RouterView",Mk),q.config.globalProperties.$router=te,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>D(l)}),io&&!he&&l.value===Li&&(he=!0,b(i.location).catch(de=>{}));const ne={};for(const de in Li)Object.defineProperty(ne,de,{get:()=>l.value[de],enumerable:!0});q.provide(Dp,te),q.provide(R_,S1(ne)),q.provide(Od,l);const se=q.unmount;re.add(q),q.unmount=function(){re.delete(q),re.size<1&&(c=Li,P&&P(),P=null,l.value=Li,he=!1,H=!1),se()}}};function Ce(q){return q.reduce((ne,se)=>ne.then(()=>k(se)),Promise.resolve())}return te}const Lk=Symbol(),qc="el",Bk="is-",fs=(t,e,n,r,i)=>{let s=`${t}-${e}`;return n&&(s+=`-${n}`),r&&(s+=`__${r}`),i&&(s+=`--${i}`),s},jk=Symbol("namespaceContextKey"),Ip=t=>{const e=Jt()?Je(jk,ye(qc)):ye(qc);return ae(()=>D(e)||qc)},wt=(t,e)=>{const n=Ip();return{namespace:n,b:(p="")=>fs(n.value,t,p,"",""),e:p=>p?fs(n.value,t,"",p,""):"",m:p=>p?fs(n.value,t,"","",p):"",be:(p,v)=>p&&v?fs(n.value,t,p,v,""):"",em:(p,v)=>p&&v?fs(n.value,t,"",p,v):"",bm:(p,v)=>p&&v?fs(n.value,t,p,"",v):"",bem:(p,v,m)=>p&&v&&m?fs(n.value,t,p,v,m):"",is:(p,...v)=>{const m=v.length>=1?v[0]:!0;return p&&m?`${Bk}${p}`:""},cssVar:p=>{const v={};for(const m in p)p[m]&&(v[`--${n.value}-${m}`]=p[m]);return v},cssVarName:p=>`--${n.value}-${p}`,cssVarBlock:p=>{const v={};for(const m in p)p[m]&&(v[`--${n.value}-${t}-${m}`]=p[m]);return v},cssVarBlockName:p=>`--${n.value}-${t}-${p}`}};var N_=typeof global=="object"&&global&&global.Object===Object&&global,Nk=typeof self=="object"&&self&&self.Object===Object&&self,Wr=N_||Nk||Function("return this")(),nr=Wr.Symbol,z_=Object.prototype,zk=z_.hasOwnProperty,$k=z_.toString,da=nr?nr.toStringTag:void 0;function Uk(t){var e=zk.call(t,da),n=t[da];try{t[da]=void 0;var r=!0}catch{}var i=$k.call(t);return r&&(e?t[da]=n:delete t[da]),i}var Hk=Object.prototype,Vk=Hk.toString;function Gk(t){return Vk.call(t)}var Wk="[object Null]",Xk="[object Undefined]",Wm=nr?nr.toStringTag:void 0;function Yo(t){return t==null?t===void 0?Xk:Wk:Wm&&Wm in Object(t)?Uk(t):Gk(t)}function Qi(t){return t!=null&&typeof t=="object"}var Yk="[object Symbol]";function Mp(t){return typeof t=="symbol"||Qi(t)&&Yo(t)==Yk}function Kk(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Or=Array.isArray,Xm=nr?nr.prototype:void 0,Ym=Xm?Xm.toString:void 0;function $_(t){if(typeof t=="string")return t;if(Or(t))return Kk(t,$_)+"";if(Mp(t))return Ym?Ym.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Fo(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function qk(t){return t}var Zk="[object AsyncFunction]",Jk="[object Function]",Qk="[object GeneratorFunction]",eO="[object Proxy]";function U_(t){if(!Fo(t))return!1;var e=Yo(t);return e==Jk||e==Qk||e==Zk||e==eO}var eh=Wr["__core-js_shared__"],Km=(function(){var t=/[^.]+$/.exec(eh&&eh.keys&&eh.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function tO(t){return!!Km&&Km in t}var nO=Function.prototype,rO=nO.toString;function zs(t){if(t!=null){try{return rO.call(t)}catch{}try{return t+""}catch{}}return""}var iO=/[\\^$.*+?()[\]{}|]/g,sO=/^\[object .+?Constructor\]$/,oO=Function.prototype,aO=Object.prototype,lO=oO.toString,cO=aO.hasOwnProperty,uO=RegExp("^"+lO.call(cO).replace(iO,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fO(t){if(!Fo(t)||tO(t))return!1;var e=U_(t)?uO:sO;return e.test(zs(t))}function hO(t,e){return t?.[e]}function $s(t,e){var n=hO(t,e);return fO(n)?n:void 0}var Ad=$s(Wr,"WeakMap"),qm=Object.create,dO=(function(){function t(){}return function(e){if(!Fo(e))return{};if(qm)return qm(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function pO(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var gO=800,mO=16,vO=Date.now;function yO(t){var e=0,n=0;return function(){var r=vO(),i=mO-(r-n);if(n=r,i>0){if(++e>=gO)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function bO(t){return function(){return t}}var _u=(function(){try{var t=$s(Object,"defineProperty");return t({},"",{}),t}catch{}})(),_O=_u?function(t,e){return _u(t,"toString",{configurable:!0,enumerable:!1,value:bO(e),writable:!0})}:qk,wO=yO(_O);function SO(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var xO=9007199254740991,CO=/^(?:0|[1-9]\d*)$/;function Rp(t,e){var n=typeof t;return e=e??xO,!!e&&(n=="number"||n!="symbol"&&CO.test(t))&&t>-1&&t%1==0&&t<e}function TO(t,e,n){e=="__proto__"&&_u?_u(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Lp(t,e){return t===e||t!==t&&e!==e}var EO=Object.prototype,kO=EO.hasOwnProperty;function H_(t,e,n){var r=t[e];(!(kO.call(t,e)&&Lp(r,n))||n===void 0&&!(e in t))&&TO(t,e,n)}var Zm=Math.max;function OO(t,e,n){return e=Zm(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=Zm(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),pO(t,this,a)}}var AO=9007199254740991;function Bp(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=AO}function PO(t){return t!=null&&Bp(t.length)&&!U_(t)}var FO=Object.prototype;function V_(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||FO;return t===n}function DO(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var IO="[object Arguments]";function Jm(t){return Qi(t)&&Yo(t)==IO}var G_=Object.prototype,MO=G_.hasOwnProperty,RO=G_.propertyIsEnumerable,jp=Jm((function(){return arguments})())?Jm:function(t){return Qi(t)&&MO.call(t,"callee")&&!RO.call(t,"callee")};function LO(){return!1}var W_=typeof Un=="object"&&Un&&!Un.nodeType&&Un,Qm=W_&&typeof Hn=="object"&&Hn&&!Hn.nodeType&&Hn,BO=Qm&&Qm.exports===W_,e0=BO?Wr.Buffer:void 0,jO=e0?e0.isBuffer:void 0,wu=jO||LO,NO="[object Arguments]",zO="[object Array]",$O="[object Boolean]",UO="[object Date]",HO="[object Error]",VO="[object Function]",GO="[object Map]",WO="[object Number]",XO="[object Object]",YO="[object RegExp]",KO="[object Set]",qO="[object String]",ZO="[object WeakMap]",JO="[object ArrayBuffer]",QO="[object DataView]",eA="[object Float32Array]",tA="[object Float64Array]",nA="[object Int8Array]",rA="[object Int16Array]",iA="[object Int32Array]",sA="[object Uint8Array]",oA="[object Uint8ClampedArray]",aA="[object Uint16Array]",lA="[object Uint32Array]",Et={};Et[eA]=Et[tA]=Et[nA]=Et[rA]=Et[iA]=Et[sA]=Et[oA]=Et[aA]=Et[lA]=!0;Et[NO]=Et[zO]=Et[JO]=Et[$O]=Et[QO]=Et[UO]=Et[HO]=Et[VO]=Et[GO]=Et[WO]=Et[XO]=Et[YO]=Et[KO]=Et[qO]=Et[ZO]=!1;function cA(t){return Qi(t)&&Bp(t.length)&&!!Et[Yo(t)]}function Np(t){return function(e){return t(e)}}var X_=typeof Un=="object"&&Un&&!Un.nodeType&&Un,ja=X_&&typeof Hn=="object"&&Hn&&!Hn.nodeType&&Hn,uA=ja&&ja.exports===X_,th=uA&&N_.process,Do=(function(){try{var t=ja&&ja.require&&ja.require("util").types;return t||th&&th.binding&&th.binding("util")}catch{}})(),t0=Do&&Do.isTypedArray,Y_=t0?Np(t0):cA,fA=Object.prototype,hA=fA.hasOwnProperty;function dA(t,e){var n=Or(t),r=!n&&jp(t),i=!n&&!r&&wu(t),s=!n&&!r&&!i&&Y_(t),o=n||r||i||s,a=o?DO(t.length,String):[],l=a.length;for(var c in t)hA.call(t,c)&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Rp(c,l)))&&a.push(c);return a}function K_(t,e){return function(n){return t(e(n))}}var pA=K_(Object.keys,Object),gA=Object.prototype,mA=gA.hasOwnProperty;function vA(t){if(!V_(t))return pA(t);var e=[];for(var n in Object(t))mA.call(t,n)&&n!="constructor"&&e.push(n);return e}function yA(t){return PO(t)?dA(t):vA(t)}var bA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_A=/^\w*$/;function wA(t,e){if(Or(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Mp(t)?!0:_A.test(t)||!bA.test(t)||e!=null&&t in Object(e)}var al=$s(Object,"create");function SA(){this.__data__=al?al(null):{},this.size=0}function xA(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var CA="__lodash_hash_undefined__",TA=Object.prototype,EA=TA.hasOwnProperty;function kA(t){var e=this.__data__;if(al){var n=e[t];return n===CA?void 0:n}return EA.call(e,t)?e[t]:void 0}var OA=Object.prototype,AA=OA.hasOwnProperty;function PA(t){var e=this.__data__;return al?e[t]!==void 0:AA.call(e,t)}var FA="__lodash_hash_undefined__";function DA(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=al&&e===void 0?FA:e,this}function Rs(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Rs.prototype.clear=SA;Rs.prototype.delete=xA;Rs.prototype.get=kA;Rs.prototype.has=PA;Rs.prototype.set=DA;function IA(){this.__data__=[],this.size=0}function hf(t,e){for(var n=t.length;n--;)if(Lp(t[n][0],e))return n;return-1}var MA=Array.prototype,RA=MA.splice;function LA(t){var e=this.__data__,n=hf(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():RA.call(e,n,1),--this.size,!0}function BA(t){var e=this.__data__,n=hf(e,t);return n<0?void 0:e[n][1]}function jA(t){return hf(this.__data__,t)>-1}function NA(t,e){var n=this.__data__,r=hf(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Pi(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Pi.prototype.clear=IA;Pi.prototype.delete=LA;Pi.prototype.get=BA;Pi.prototype.has=jA;Pi.prototype.set=NA;var ll=$s(Wr,"Map");function zA(){this.size=0,this.__data__={hash:new Rs,map:new(ll||Pi),string:new Rs}}function $A(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function df(t,e){var n=t.__data__;return $A(e)?n[typeof e=="string"?"string":"hash"]:n.map}function UA(t){var e=df(this,t).delete(t);return this.size-=e?1:0,e}function HA(t){return df(this,t).get(t)}function VA(t){return df(this,t).has(t)}function GA(t,e){var n=df(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Fi(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Fi.prototype.clear=zA;Fi.prototype.delete=UA;Fi.prototype.get=HA;Fi.prototype.has=VA;Fi.prototype.set=GA;var WA="Expected a function";function zp(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(WA);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(zp.Cache||Fi),n}zp.Cache=Fi;var XA=500;function YA(t){var e=zp(t,function(r){return n.size===XA&&n.clear(),r}),n=e.cache;return e}var KA=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qA=/\\(\\)?/g,ZA=YA(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(KA,function(n,r,i,s){e.push(i?s.replace(qA,"$1"):r||n)}),e});function JA(t){return t==null?"":$_(t)}function pf(t,e){return Or(t)?t:wA(t,e)?[t]:ZA(JA(t))}function $p(t){if(typeof t=="string"||Mp(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function q_(t,e){e=pf(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[$p(e[n++])];return n&&n==r?t:void 0}function QA(t,e,n){var r=t==null?void 0:q_(t,e);return r===void 0?n:r}function Z_(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var n0=nr?nr.isConcatSpreadable:void 0;function eP(t){return Or(t)||jp(t)||!!(n0&&t&&t[n0])}function tP(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=eP),i||(i=[]);++s<o;){var a=t[s];n(a)?Z_(i,a):i[i.length]=a}return i}function nP(t){var e=t==null?0:t.length;return e?tP(t):[]}function rP(t){return wO(OO(t,void 0,nP),t+"")}var iP=K_(Object.getPrototypeOf,Object);function r0(){if(!arguments.length)return[];var t=arguments[0];return Or(t)?t:[t]}function sP(){this.__data__=new Pi,this.size=0}function oP(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function aP(t){return this.__data__.get(t)}function lP(t){return this.__data__.has(t)}var cP=200;function uP(t,e){var n=this.__data__;if(n instanceof Pi){var r=n.__data__;if(!ll||r.length<cP-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Fi(r)}return n.set(t,e),this.size=n.size,this}function gi(t){var e=this.__data__=new Pi(t);this.size=e.size}gi.prototype.clear=sP;gi.prototype.delete=oP;gi.prototype.get=aP;gi.prototype.has=lP;gi.prototype.set=uP;var J_=typeof Un=="object"&&Un&&!Un.nodeType&&Un,i0=J_&&typeof Hn=="object"&&Hn&&!Hn.nodeType&&Hn,fP=i0&&i0.exports===J_,s0=fP?Wr.Buffer:void 0;s0&&s0.allocUnsafe;function hP(t,e){return t.slice()}function dP(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}function pP(){return[]}var gP=Object.prototype,mP=gP.propertyIsEnumerable,o0=Object.getOwnPropertySymbols,vP=o0?function(t){return t==null?[]:(t=Object(t),dP(o0(t),function(e){return mP.call(t,e)}))}:pP;function yP(t,e,n){var r=e(t);return Or(t)?r:Z_(r,n(t))}function Pd(t){return yP(t,yA,vP)}var Fd=$s(Wr,"DataView"),Dd=$s(Wr,"Promise"),Id=$s(Wr,"Set"),a0="[object Map]",bP="[object Object]",l0="[object Promise]",c0="[object Set]",u0="[object WeakMap]",f0="[object DataView]",_P=zs(Fd),wP=zs(ll),SP=zs(Dd),xP=zs(Id),CP=zs(Ad),dr=Yo;(Fd&&dr(new Fd(new ArrayBuffer(1)))!=f0||ll&&dr(new ll)!=a0||Dd&&dr(Dd.resolve())!=l0||Id&&dr(new Id)!=c0||Ad&&dr(new Ad)!=u0)&&(dr=function(t){var e=Yo(t),n=e==bP?t.constructor:void 0,r=n?zs(n):"";if(r)switch(r){case _P:return f0;case wP:return a0;case SP:return l0;case xP:return c0;case CP:return u0}return e});var TP=Object.prototype,EP=TP.hasOwnProperty;function kP(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&EP.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Su=Wr.Uint8Array;function Up(t){var e=new t.constructor(t.byteLength);return new Su(e).set(new Su(t)),e}function OP(t,e){var n=Up(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var AP=/\w*$/;function PP(t){var e=new t.constructor(t.source,AP.exec(t));return e.lastIndex=t.lastIndex,e}var h0=nr?nr.prototype:void 0,d0=h0?h0.valueOf:void 0;function FP(t){return d0?Object(d0.call(t)):{}}function DP(t,e){var n=Up(t.buffer);return new t.constructor(n,t.byteOffset,t.length)}var IP="[object Boolean]",MP="[object Date]",RP="[object Map]",LP="[object Number]",BP="[object RegExp]",jP="[object Set]",NP="[object String]",zP="[object Symbol]",$P="[object ArrayBuffer]",UP="[object DataView]",HP="[object Float32Array]",VP="[object Float64Array]",GP="[object Int8Array]",WP="[object Int16Array]",XP="[object Int32Array]",YP="[object Uint8Array]",KP="[object Uint8ClampedArray]",qP="[object Uint16Array]",ZP="[object Uint32Array]";function JP(t,e,n){var r=t.constructor;switch(e){case $P:return Up(t);case IP:case MP:return new r(+t);case UP:return OP(t);case HP:case VP:case GP:case WP:case XP:case YP:case KP:case qP:case ZP:return DP(t);case RP:return new r;case LP:case NP:return new r(t);case BP:return PP(t);case jP:return new r;case zP:return FP(t)}}function QP(t){return typeof t.constructor=="function"&&!V_(t)?dO(iP(t)):{}}var eF="[object Map]";function tF(t){return Qi(t)&&dr(t)==eF}var p0=Do&&Do.isMap,nF=p0?Np(p0):tF,rF="[object Set]";function iF(t){return Qi(t)&&dr(t)==rF}var g0=Do&&Do.isSet,sF=g0?Np(g0):iF,Q_="[object Arguments]",oF="[object Array]",aF="[object Boolean]",lF="[object Date]",cF="[object Error]",ew="[object Function]",uF="[object GeneratorFunction]",fF="[object Map]",hF="[object Number]",tw="[object Object]",dF="[object RegExp]",pF="[object Set]",gF="[object String]",mF="[object Symbol]",vF="[object WeakMap]",yF="[object ArrayBuffer]",bF="[object DataView]",_F="[object Float32Array]",wF="[object Float64Array]",SF="[object Int8Array]",xF="[object Int16Array]",CF="[object Int32Array]",TF="[object Uint8Array]",EF="[object Uint8ClampedArray]",kF="[object Uint16Array]",OF="[object Uint32Array]",St={};St[Q_]=St[oF]=St[yF]=St[bF]=St[aF]=St[lF]=St[_F]=St[wF]=St[SF]=St[xF]=St[CF]=St[fF]=St[hF]=St[tw]=St[dF]=St[pF]=St[gF]=St[mF]=St[TF]=St[EF]=St[kF]=St[OF]=!0;St[cF]=St[ew]=St[vF]=!1;function Zc(t,e,n,r,i,s){var o;if(o!==void 0)return o;if(!Fo(t))return t;var a=Or(t);if(a)o=kP(t);else{var l=dr(t),c=l==ew||l==uF;if(wu(t))return hP(t);if(l==tw||l==Q_||c&&!i)o=c?{}:QP(t);else{if(!St[l])return i?t:{};o=JP(t,l)}}s||(s=new gi);var u=s.get(t);if(u)return u;s.set(t,o),sF(t)?t.forEach(function(h){o.add(Zc(h,e,n,h,t,s))}):nF(t)&&t.forEach(function(h,g){o.set(g,Zc(h,e,n,g,t,s))});var f=Pd,d=a?void 0:f(t);return SO(d||t,function(h,g){d&&(g=h,h=t[g]),H_(o,g,Zc(h,e,n,g,t,s))}),o}var AF=1,PF=4;function m0(t){return Zc(t,AF|PF)}var FF="__lodash_hash_undefined__";function DF(t){return this.__data__.set(t,FF),this}function IF(t){return this.__data__.has(t)}function xu(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Fi;++e<n;)this.add(t[e])}xu.prototype.add=xu.prototype.push=DF;xu.prototype.has=IF;function MF(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function RF(t,e){return t.has(e)}var LF=1,BF=2;function nw(t,e,n,r,i,s){var o=n&LF,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var f=-1,d=!0,h=n&BF?new xu:void 0;for(s.set(t,e),s.set(e,t);++f<a;){var g=t[f],p=e[f];if(r)var v=o?r(p,g,f,e,t,s):r(g,p,f,t,e,s);if(v!==void 0){if(v)continue;d=!1;break}if(h){if(!MF(e,function(m,y){if(!RF(h,y)&&(g===m||i(g,m,n,r,s)))return h.push(y)})){d=!1;break}}else if(!(g===p||i(g,p,n,r,s))){d=!1;break}}return s.delete(t),s.delete(e),d}function jF(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function NF(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var zF=1,$F=2,UF="[object Boolean]",HF="[object Date]",VF="[object Error]",GF="[object Map]",WF="[object Number]",XF="[object RegExp]",YF="[object Set]",KF="[object String]",qF="[object Symbol]",ZF="[object ArrayBuffer]",JF="[object DataView]",v0=nr?nr.prototype:void 0,nh=v0?v0.valueOf:void 0;function QF(t,e,n,r,i,s,o){switch(n){case JF:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ZF:return!(t.byteLength!=e.byteLength||!s(new Su(t),new Su(e)));case UF:case HF:case WF:return Lp(+t,+e);case VF:return t.name==e.name&&t.message==e.message;case XF:case KF:return t==e+"";case GF:var a=jF;case YF:var l=r&zF;if(a||(a=NF),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=$F,o.set(t,e);var u=nw(a(t),a(e),r,i,s,o);return o.delete(t),u;case qF:if(nh)return nh.call(t)==nh.call(e)}return!1}var eD=1,tD=Object.prototype,nD=tD.hasOwnProperty;function rD(t,e,n,r,i,s){var o=n&eD,a=Pd(t),l=a.length,c=Pd(e),u=c.length;if(l!=u&&!o)return!1;for(var f=l;f--;){var d=a[f];if(!(o?d in e:nD.call(e,d)))return!1}var h=s.get(t),g=s.get(e);if(h&&g)return h==e&&g==t;var p=!0;s.set(t,e),s.set(e,t);for(var v=o;++f<l;){d=a[f];var m=t[d],y=e[d];if(r)var _=o?r(y,m,d,e,t,s):r(m,y,d,t,e,s);if(!(_===void 0?m===y||i(m,y,n,r,s):_)){p=!1;break}v||(v=d=="constructor")}if(p&&!v){var b=t.constructor,x=e.constructor;b!=x&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof x=="function"&&x instanceof x)&&(p=!1)}return s.delete(t),s.delete(e),p}var iD=1,y0="[object Arguments]",b0="[object Array]",Nl="[object Object]",sD=Object.prototype,_0=sD.hasOwnProperty;function oD(t,e,n,r,i,s){var o=Or(t),a=Or(e),l=o?b0:dr(t),c=a?b0:dr(e);l=l==y0?Nl:l,c=c==y0?Nl:c;var u=l==Nl,f=c==Nl,d=l==c;if(d&&wu(t)){if(!wu(e))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new gi),o||Y_(t)?nw(t,e,n,r,i,s):QF(t,e,l,n,r,i,s);if(!(n&iD)){var h=u&&_0.call(t,"__wrapped__"),g=f&&_0.call(e,"__wrapped__");if(h||g){var p=h?t.value():t,v=g?e.value():e;return s||(s=new gi),i(p,v,n,r,s)}}return d?(s||(s=new gi),rD(t,e,n,r,i,s)):!1}function rw(t,e,n,r,i){return t===e?!0:t==null||e==null||!Qi(t)&&!Qi(e)?t!==t&&e!==e:oD(t,e,n,r,rw,i)}function aD(t,e){return t!=null&&e in Object(t)}function lD(t,e,n){e=pf(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=$p(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&Bp(i)&&Rp(o,i)&&(Or(t)||jp(t)))}function cD(t,e){return t!=null&&lD(t,e,aD)}function Cu(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function uD(t,e){return rw(t,e)}function Ko(t){return t==null}function fD(t){return t===void 0}function hD(t,e,n,r){if(!Fo(t))return t;e=pf(e,t);for(var i=-1,s=e.length,o=s-1,a=t;a!=null&&++i<s;){var l=$p(e[i]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=o){var u=a[l];c=void 0,c===void 0&&(c=Fo(u)?u:Rp(e[i+1])?[]:{})}H_(a,l,c),a=a[l]}return t}function dD(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=q_(t,o);n(a,o)&&hD(s,pf(o,t),a)}return s}function pD(t,e){return dD(t,e,function(n,r){return cD(t,r)})}var gD=rP(function(t,e){return t==null?{}:pD(t,e)});const gf=t=>typeof t=="boolean",$n=t=>typeof t=="number",co=t=>typeof Element>"u"?!1:t instanceof Element,mD=t=>at(t)?!Number.isNaN(Number(t)):!1;function iw(t,e){var n;const r=$r();return F1(()=>{r.value=t()},{...e,flush:(n=void 0)!=null?n:"sync"}),Eo(r)}function mf(t){return o1()?(a1(t),!0):!1}function Hp(t){return typeof t=="function"?t():D(t)}const Gt=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const vD=t=>typeof t<"u",yD=Object.prototype.toString,bD=t=>yD.call(t)==="[object Object]",Jc=()=>{},_D=wD();function wD(){var t,e;return Gt&&((t=window?.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function w0(t,e,n={}){const{immediate:r=!0}=n,i=ye(!1);let s=null;function o(){s&&(clearTimeout(s),s=null)}function a(){i.value=!1,o()}function l(...c){o(),i.value=!0,s=setTimeout(()=>{i.value=!1,s=null,t(...c)},Hp(e))}return r&&(i.value=!0,Gt&&l()),mf(a),{isPending:Eo(i),start:l,stop:a}}function ui(t){var e;const n=Hp(t);return(e=n?.$el)!=null?e:n}const Vp=Gt?window:void 0;function mi(...t){let e,n,r,i;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,r,i]=t,e=Vp):[e,n,r,i]=t,!e)return Jc;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const s=[],o=()=>{s.forEach(u=>u()),s.length=0},a=(u,f,d,h)=>(u.addEventListener(f,d,h),()=>u.removeEventListener(f,d,h)),l=Ge(()=>[ui(e),Hp(i)],([u,f])=>{if(o(),!u)return;const d=bD(f)?{...f}:f;s.push(...n.flatMap(h=>r.map(g=>a(u,h,g,d))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return mf(c),c}let S0=!1;function SD(t,e,n={}){const{window:r=Vp,ignore:i=[],capture:s=!0,detectIframe:o=!1}=n;if(!r)return Jc;_D&&!S0&&(S0=!0,Array.from(r.document.body.children).forEach(d=>d.addEventListener("click",Jc)),r.document.documentElement.addEventListener("click",Jc));let a=!0;const l=d=>i.some(h=>{if(typeof h=="string")return Array.from(r.document.querySelectorAll(h)).some(g=>g===d.target||d.composedPath().includes(g));{const g=ui(h);return g&&(d.target===g||d.composedPath().includes(g))}}),u=[mi(r,"click",d=>{const h=ui(t);if(!(!h||h===d.target||d.composedPath().includes(h))){if(d.detail===0&&(a=!l(d)),!a){a=!0;return}e(d)}},{passive:!0,capture:s}),mi(r,"pointerdown",d=>{const h=ui(t);a=!l(d)&&!!(h&&!d.composedPath().includes(h))},{passive:!0}),o&&mi(r,"blur",d=>{setTimeout(()=>{var h;const g=ui(t);((h=r.document.activeElement)==null?void 0:h.tagName)==="IFRAME"&&!g?.contains(r.document.activeElement)&&e(d)},0)})].filter(Boolean);return()=>u.forEach(d=>d())}function xD(){const t=ye(!1),e=Jt();return e&&en(()=>{t.value=!0},e),t}function CD(t){const e=xD();return ae(()=>(e.value,!!t()))}function TD(t){return JSON.parse(JSON.stringify(t))}function Md(t,e,n={}){const{window:r=Vp,...i}=n;let s;const o=CD(()=>r&&"ResizeObserver"in r),a=()=>{s&&(s.disconnect(),s=void 0)},l=ae(()=>Array.isArray(t)?t.map(f=>ui(f)):[ui(t)]),c=Ge(l,f=>{if(a(),o.value&&r){s=new ResizeObserver(e);for(const d of f)d&&s.observe(d,i)}},{immediate:!0,flush:"post"}),u=()=>{a(),c()};return mf(u),{isSupported:o,stop:u}}function ED(t,e,n,r={}){var i,s,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:f,shouldEmit:d}=r,h=Jt(),g=h?.emit||((i=h?.$emit)==null?void 0:i.bind(h))||((o=(s=h?.proxy)==null?void 0:s.$emit)==null?void 0:o.bind(h?.proxy));let p=c;p=p||`update:${e.toString()}`;const v=_=>a?typeof a=="function"?a(_):TD(_):_,m=()=>vD(t[e])?v(t[e]):f,y=_=>{d?d(_)&&g(p,_):g(p,_)};if(l){const _=m(),b=ye(_);let x=!1;return Ge(()=>t[e],E=>{x||(x=!0,b.value=v(E),Yt(()=>x=!1))}),Ge(b,E=>{!x&&(E!==t[e]||u)&&y(E)},{deep:u}),b}else return ae({get(){return m()},set(_){y(_)}})}class kD extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function qo(t,e){throw new kD(`[${t}] ${e}`)}const x0={current:0},C0=ye(0),OD=2e3,T0=Symbol("elZIndexContextKey"),AD=Symbol("zIndexContextKey"),sw=t=>{const e=Jt()?Je(T0,x0):x0,n=Jt()?Je(AD,void 0):void 0,r=ae(()=>{const o=D(n);return $n(o)?o:OD}),i=ae(()=>r.value+C0.value),s=()=>(e.current++,C0.value=e.current,i.value);return!Gt&&Je(T0),{initialZIndex:r,currentZIndex:i,nextZIndex:s}};var PD={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value",alphaDescription:"alpha {alpha}, current color is {color}",hueLabel:"pick hue value",hueDescription:"hue {hue}, current color is {color}",svLabel:"pick saturation and brightness value",svDescription:"saturation {saturation}, brightness {brightness}, current color is {color}",predefineDescription:"select {value} as the color"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum",selectAllLabel:"Select all rows",selectRowLabel:"Select this row",expandRowLabel:"Expand this row",collapseRowLabel:"Collapse this row",sortLabel:"Sort by {column}",filterLabel:"Filter by {column}"},tag:{close:"Close this tag"},tour:{next:"Next",previous:"Previous",finish:"Finish",close:"Close this dialog"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const FD=t=>(e,n)=>DD(e,n,D(t)),DD=(t,e,n)=>QA(n,t,t).replace(/\{(\w+)\}/g,(r,i)=>{var s;return`${(s=e?.[i])!=null?s:`{${i}}`}`}),ID=t=>{const e=ae(()=>D(t).name),n=kt(t)?t:ye(t);return{lang:e,locale:n,t:FD(t)}},MD=Symbol("localeContextKey"),ow=t=>{const e=Je(MD,ye());return ID(ae(()=>e.value||PD))},aw="__epPropKey",Pe=t=>t,RD=t=>et(t)&&!!t[aw],vf=(t,e)=>{if(!et(t)||RD(t))return t;const{values:n,required:r,default:i,type:s,validator:o}=t,l={type:s,required:!!r,validator:n||o?c=>{let u=!1,f=[];if(n&&(f=Array.from(n),it(t,"default")&&f.push(i),u||(u=f.includes(c))),o&&(u||(u=o(c))),!u&&f.length>0){const d=[...new Set(f)].map(h=>JSON.stringify(h)).join(", ");$T(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${d}], got value ${JSON.stringify(c)}.`)}return u}:void 0,[aw]:!0};return it(t,"default")&&(l.default=i),l},gt=t=>Cu(Object.entries(t).map(([e,n])=>[e,vf(n,e)])),LD=["","default","small","large"],lw=vf({type:String,values:LD,required:!1}),BD=Symbol("size"),jD=()=>{const t=Je(BD,{});return ae(()=>D(t.size)||"")},ND=t=>Object.entries(t),E0=ye();function cw(t,e=void 0){const n=Jt()?Je(Lk,E0):E0;return t?ae(()=>{var r,i;return(i=(r=n.value)==null?void 0:r[t])!=null?i:e}):n}const Gp=gt({to:{type:Pe([String,Object]),required:!0},disabled:Boolean});var Tt=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n};const zD=De({__name:"teleport",props:Gp,setup(t){return(e,n)=>e.disabled?Ne(e.$slots,"default",{key:0}):(le(),Ve(GC,{key:1,to:e.to},[Ne(e.$slots,"default")],8,["to"]))}});var $D=Tt(zD,[["__file","/home/runner/work/element-plus/element-plus/packages/components/teleport/src/teleport.vue"]]);const lr=(t,e)=>{if(t.install=n=>{for(const r of[t,...Object.values(e??{})])n.component(r.name,r)},e)for(const[n,r]of Object.entries(e))t[n]=r;return t},uw=t=>(t.install=Ze,t),fw=lr($D),Zi="update:modelValue",Tu="change",rh="input",hw=(t="")=>t.split(" ").filter(e=>!!e.trim()),UD=(t,e)=>{if(!t||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(e)},HD=(t,e)=>{!t||!e.trim()||t.classList.add(...hw(e))},VD=(t,e)=>{!t||!e.trim()||t.classList.remove(...hw(e))},GD=(t,e)=>{var n;if(!Gt||!t||!e)return"";let r=Wn(e);r==="float"&&(r="cssFloat");try{const i=t.style[r];if(i)return i;const s=(n=document.defaultView)==null?void 0:n.getComputedStyle(t,"");return s?s[r]:""}catch{return t.style[r]}};function Io(t,e="px"){if(!t&&t!==0)return"";if($n(t)||mD(t))return`${t}${e}`;if(at(t))return t}let zl;const WD=t=>{var e;if(!Gt)return 0;if(zl!==void 0)return zl;const n=document.createElement("div");n.className=`${t}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const r=n.offsetWidth;n.style.overflow="scroll";const i=document.createElement("div");i.style.width="100%",n.appendChild(i);const s=i.offsetWidth;return(e=n.parentNode)==null||e.removeChild(n),zl=r-s,zl},XD=gt({size:{type:Pe([Number,String])},color:{type:String}}),YD=De({name:"ElIcon",inheritAttrs:!1,__name:"icon",props:XD,setup(t){const e=t,n=wt("icon"),r=ae(()=>{const{size:i,color:s}=e,o=Io(i);return!o&&!s?{}:{fontSize:o,"--color":s}});return(i,s)=>(le(),be("i",Xn({class:D(n).b(),style:r.value},i.$attrs),[Ne(i.$slots,"default")],16))}});var KD=Tt(YD,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const Lt=lr(KD);var qD=De({name:"ArrowRight",__name:"arrow-right",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M340.864 149.312a30.59 30.59 0 0 0 0 42.752L652.736 512 340.864 831.872a30.59 30.59 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),ZD=qD,JD=De({name:"Check",__name:"check",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),dw=JD,QD=De({name:"CircleCheck",__name:"circle-check",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),Ee("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752z"})]))}}),Wp=QD,e3=De({name:"CircleClose",__name:"circle-close",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),Ee("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),Xp=e3,t3=De({name:"CirclePlusFilled",__name:"circle-plus-filled",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-38.4 409.6H326.4a38.4 38.4 0 1 0 0 76.8h147.2v147.2a38.4 38.4 0 0 0 76.8 0V550.4h147.2a38.4 38.4 0 0 0 0-76.8H550.4V326.4a38.4 38.4 0 1 0-76.8 0z"})]))}}),n3=t3,r3=De({name:"CirclePlus",__name:"circle-plus",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M352 480h320a32 32 0 1 1 0 64H352a32 32 0 0 1 0-64"}),Ee("path",{fill:"currentColor",d:"M480 672V352a32 32 0 1 1 64 0v320a32 32 0 0 1-64 0"}),Ee("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),i3=r3,s3=De({name:"Close",__name:"close",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),Yp=s3,o3=De({name:"CopyDocument",__name:"copy-document",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64z"}),Ee("path",{fill:"currentColor",d:"M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64"})]))}}),a3=o3,l3=De({name:"Delete",__name:"delete",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),c3=l3,u3=De({name:"Document",__name:"document",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),f3=u3,h3=De({name:"Fold",__name:"fold",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M896 192H128v128h768zm0 256H384v128h512zm0 256H128v128h768zM320 384 128 512l192 128z"})]))}}),d3=h3,p3=De({name:"FolderOpened",__name:"folder-opened",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M878.08 448H241.92l-96 384h636.16zM832 384v-64H485.76L357.504 192H128v448l57.92-231.744A32 32 0 0 1 216.96 384zm-24.96 512H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h287.872l128.384 128H864a32 32 0 0 1 32 32v96h23.04a32 32 0 0 1 31.04 39.744l-112 448A32 32 0 0 1 807.04 896"})]))}}),g3=p3,m3=De({name:"Hide",__name:"hide",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4s-12.8-9.6-22.4-9.6-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176S0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4s3.2 16 9.6 22.4 12.8 9.6 22.4 9.6 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4m-646.4 528Q115.2 579.2 76.8 512q43.2-72 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4m140.8-96Q352 555.2 352 512c0-44.8 16-83.2 48-112s67.2-48 112-48c28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6q-43.2 72-153.6 172.8c-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176S1024 528 1024 512s-48.001-73.6-134.401-176"}),Ee("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112s-67.2 48-112 48"})]))}}),v3=m3,y3=De({name:"House",__name:"house",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M192 413.952V896h640V413.952L512 147.328zM139.52 374.4l352-293.312a32 32 0 0 1 40.96 0l352 293.312A32 32 0 0 1 896 398.976V928a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V398.976a32 32 0 0 1 11.52-24.576"})]))}}),b3=y3,_3=De({name:"Loading",__name:"loading",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248m452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248M828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0"})]))}}),Kp=_3,w3=De({name:"PictureFilled",__name:"picture-filled",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),S3=w3,x3=De({name:"Picture",__name:"picture",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M160 160v704h704V160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32"}),Ee("path",{fill:"currentColor",d:"M384 288q64 0 64 64t-64 64-64-64 64-64M185.408 876.992l-50.816-38.912L350.72 556.032a96 96 0 0 1 134.592-17.856l1.856 1.472 122.88 99.136a32 32 0 0 0 44.992-4.864l216-269.888 49.92 39.936-215.808 269.824-.256.32a96 96 0 0 1-135.04 14.464l-122.88-99.072-.64-.512a32 32 0 0 0-44.8 5.952z"})]))}}),C3=x3,T3=De({name:"Plus",__name:"plus",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),E3=T3,k3=De({name:"View",__name:"view",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288m0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.19 160.19 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),O3=k3,A3=De({name:"WarningFilled",__name:"warning-filled",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.43 58.43 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.43 58.43 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),P3=A3,F3=De({name:"ZoomIn",__name:"zoom-in",setup(t){return(e,n)=>(le(),be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ee("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),D3=F3;const Ps=Pe([String,Object,Function]),I3={Close:Yp},M3={validating:Kp,success:Wp,error:Xp},R3=()=>Gt&&/firefox/i.test(window.navigator.userAgent),L3=()=>Gt&&/android/i.test(window.navigator.userAgent);let Sn;const B3={height:"0",visibility:"hidden",overflow:R3()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},j3=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],k0=t=>{const e=Number.parseFloat(t);return Number.isNaN(e)?t:e};function N3(t){const e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),r=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),i=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:j3.map(o=>[o,e.getPropertyValue(o)]),paddingSize:r,borderSize:i,boxSizing:n}}function O0(t,e=1,n){var r,i;Sn||(Sn=document.createElement("textarea"),((r=t.parentNode)!=null?r:document.body).appendChild(Sn));const{paddingSize:s,borderSize:o,boxSizing:a,contextStyle:l}=N3(t);l.forEach(([d,h])=>Sn?.style.setProperty(d,h)),Object.entries(B3).forEach(([d,h])=>Sn?.style.setProperty(d,h,"important")),Sn.value=t.value||t.placeholder||"";let c=Sn.scrollHeight;const u={};a==="border-box"?c=c+o:a==="content-box"&&(c=c-s),Sn.value="";const f=Sn.scrollHeight-s;if($n(e)){let d=f*e;a==="border-box"&&(d=d+s+o),c=Math.max(d,c),u.minHeight=`${d}px`}if($n(n)){let d=f*n;a==="border-box"&&(d=d+s+o),c=Math.min(d,c)}return u.height=`${c}px`,(i=Sn.parentNode)==null||i.removeChild(Sn),Sn=void 0,u}const cl=t=>t,z3=gt({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),yf=t=>gD(z3,t),$3=gt({id:{type:String,default:void 0},size:lw,disabled:{type:Boolean,default:void 0},modelValue:{type:Pe([String,Number,Object]),default:""},modelModifiers:{type:Pe(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:Pe(String),default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Pe([Boolean,Object]),default:!1},autocomplete:{type:Pe(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:Ps,default:Xp},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:["inside","outside"],default:"inside"},suffixIcon:{type:Ps},prefixIcon:{type:Ps},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Pe([Object,Array,String]),default:()=>cl({})},autofocus:Boolean,rows:{type:Number,default:2},...yf(["ariaLabel"]),inputmode:{type:Pe(String),default:void 0},name:String}),U3={[Zi]:t=>at(t),input:t=>at(t),change:(t,e)=>at(t)&&(e instanceof Event||e===void 0),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},H3=["class","style"],V3=/^on[A-Z]/,G3=(t={})=>{const{excludeListeners:e=!1,excludeKeys:n}=t,r=ae(()=>(n?.value||[]).concat(H3)),i=Jt();return ae(i?()=>{var s;return Cu(Object.entries((s=i.proxy)==null?void 0:s.$attrs).filter(([o])=>!r.value.includes(o)&&!(e&&V3.test(o))))}:()=>({}))},A0={prefix:Math.floor(Math.random()*1e4),current:0},W3=Symbol("elIdInjection"),qp=()=>Jt()?Je(W3,A0):A0,Eu=t=>{const e=qp(),n=Ip();return iw(()=>D(t)||`${n.value}-id-${e.prefix}-${e.current++}`)},Zp=Symbol("formContextKey"),ku=Symbol("formItemContextKey"),pw=()=>{const t=Je(Zp,void 0),e=Je(ku,void 0);return{form:t,formItem:e}},X3=(t,{formItemContext:e,disableIdGeneration:n,disableIdManagement:r})=>{n||(n=ye(!1)),r||(r=ye(!1));const i=Jt(),s=()=>{let c=i?.parent;for(;c;){if(c.type.name==="ElFormItem")return!1;if(c.type.name==="ElLabelWrap")return!0;c=c.parent}return!1},o=ye();let a;const l=ae(()=>{var c;return!!(!(t.label||t.ariaLabel)&&e&&e.inputIds&&((c=e.inputIds)==null?void 0:c.length)<=1)});return en(()=>{a=Ge([Jn(t,"id"),n],([c,u])=>{const f=c??(u?void 0:Eu().value);f!==o.value&&(e?.removeInputId&&!s()&&(o.value&&e.removeInputId(o.value),!r?.value&&!u&&f&&e.addInputId(f)),o.value=f)},{immediate:!0})}),Wo(()=>{a&&a(),e?.removeInputId&&o.value&&e.removeInputId(o.value)}),{isLabeledByFormItem:l,inputId:o}},gw=t=>{const e=Jt();return ae(()=>{var n,r;return(r=(n=e?.proxy)==null?void 0:n.$props)==null?void 0:r[t]})},mw=(t,e={})=>{const n=ye(void 0),r=e.prop?n:gw("size"),i=e.global?n:jD(),s=e.form?{size:void 0}:Je(Zp,void 0),o=e.formItem?{size:void 0}:Je(ku,void 0);return ae(()=>r.value||D(t)||o?.size||s?.size||i.value||"")},Us=t=>{const e=gw("disabled"),n=Je(Zp,void 0);return ae(()=>{var r,i,s;return(s=(i=(r=e.value)!=null?r:D(t))!=null?i:n?.disabled)!=null?s:!1})},P0=t=>typeof Element>"u"?!1:t instanceof Element,Ou=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.tabIndex<0||t.hasAttribute("disabled")||t.getAttribute("aria-disabled")==="true")return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Jp=(t,e)=>{if(!t||!t.focus)return;let n=!1;P0(t)&&!Ou(t)&&!t.getAttribute("tabindex")&&(t.setAttribute("tabindex","-1"),n=!0),t.focus(e),P0(t)&&n&&t.removeAttribute("tabindex")};function Y3(t,{disabled:e,beforeFocus:n,afterFocus:r,beforeBlur:i,afterBlur:s}={}){const o=Jt(),{emit:a}=o,l=$r(),c=ye(!1),u=h=>{const g=ze(n)?n(h):!1;D(e)||c.value||g||(c.value=!0,a("focus",h),r?.())},f=h=>{var g;const p=ze(i)?i(h):!1;D(e)||h.relatedTarget&&((g=l.value)!=null&&g.contains(h.relatedTarget))||p||(c.value=!1,a("blur",h),s?.())},d=h=>{var g,p;D(e)||Ou(h.target)||(g=l.value)!=null&&g.contains(document.activeElement)&&l.value!==document.activeElement||(p=t.value)==null||p.focus()};return Ge([l,()=>D(e)],([h,g])=>{h&&(g?h.removeAttribute("tabindex"):h.setAttribute("tabindex","-1"))}),mi(l,"focus",u,!0),mi(l,"blur",f,!0),mi(l,"click",d,!0),{isFocused:c,wrapperRef:l,handleFocus:u,handleBlur:f}}const K3=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t);function q3({afterComposition:t,emit:e}){const n=ye(!1),r=a=>{e?.("compositionstart",a),n.value=!0},i=a=>{var l;e?.("compositionupdate",a);const c=(l=a.target)==null?void 0:l.value,u=c[c.length-1]||"";n.value=!K3(u)},s=a=>{e?.("compositionend",a),n.value&&(n.value=!1,Yt(()=>t(a)))};return{isComposing:n,handleComposition:a=>{a.type==="compositionend"?s(a):i(a)},handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:s}}function Z3(t){let e;function n(){if(t.value==null)return;const{selectionStart:i,selectionEnd:s,value:o}=t.value;if(i==null||s==null)return;const a=o.slice(0,Math.max(0,i)),l=o.slice(Math.max(0,s));e={selectionStart:i,selectionEnd:s,value:o,beforeTxt:a,afterTxt:l}}function r(){if(t.value==null||e==null)return;const{value:i}=t.value,{beforeTxt:s,afterTxt:o,selectionStart:a}=e;if(s==null||o==null||a==null)return;let l=i.length;if(i.endsWith(o))l=i.length-o.length;else if(i.startsWith(s))l=s.length;else{const c=s[a-1],u=i.indexOf(c,a-1);u!==-1&&(l=u+1)}t.value.setSelectionRange(l,l)}return[n,r]}const J3=["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode"],Q3=["id","name","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role"],eI="ElInput",tI=De({name:eI,inheritAttrs:!1,__name:"input",props:$3,emits:U3,setup(t,{expose:e,emit:n}){const r=t,i=n,s=rT(),o=G3(),a=Tp(),l=ae(()=>[r.type==="textarea"?v.b():p.b(),p.m(h.value),p.is("disabled",g.value),p.is("exceed",he.value),{[p.b("group")]:a.prepend||a.append,[p.m("prefix")]:a.prefix||r.prefixIcon,[p.m("suffix")]:a.suffix||r.suffixIcon||r.clearable||r.showPassword,[p.bm("suffix","password-clear")]:Q.value&&ce.value,[p.b("hidden")]:r.type==="hidden"},s.class]),c=ae(()=>[p.e("wrapper"),p.is("focus",k.value)]),{form:u,formItem:f}=pw(),{inputId:d}=X3(r,{formItemContext:f}),h=mw(),g=Us(),p=wt("input"),v=wt("textarea"),m=$r(),y=$r(),_=ye(!1),b=ye(!1),x=ye(),E=$r(r.inputStyle),T=ae(()=>m.value||y.value),{wrapperRef:O,isFocused:k,handleFocus:I,handleBlur:R}=Y3(T,{disabled:g,afterBlur(){var ee;r.validateEvent&&((ee=f?.validate)==null||ee.call(f,"blur").catch(fe=>void 0))}}),C=ae(()=>{var ee;return(ee=u?.statusIcon)!=null?ee:!1}),P=ae(()=>f?.validateState||""),S=ae(()=>P.value&&M3[P.value]),$=ae(()=>b.value?O3:v3),Z=ae(()=>[s.style]),H=ae(()=>[r.inputStyle,E.value,{resize:r.resize}]),K=ae(()=>Ko(r.modelValue)?"":String(r.modelValue)),Q=ae(()=>r.clearable&&!g.value&&!r.readonly&&!!K.value&&(k.value||_.value)),ce=ae(()=>r.showPassword&&!g.value&&!!K.value),Y=ae(()=>r.showWordLimit&&!!r.maxlength&&(r.type==="text"||r.type==="textarea")&&!g.value&&!r.readonly&&!r.showPassword),U=ae(()=>K.value.length),he=ae(()=>!!Y.value&&U.value>Number(r.maxlength)),re=ae(()=>!!a.suffix||!!r.suffixIcon||Q.value||r.showPassword||Y.value||!!P.value&&C.value),te=ae(()=>!!Object.keys(r.modelModifiers).length),[Ce,q]=Z3(m);Md(y,ee=>{if(de(),!Y.value||r.resize!=="both"&&r.resize!=="horizontal")return;const fe=ee[0],{width:Re}=fe.contentRect;x.value={right:`calc(100% - ${Re+22-10}px)`}});const ne=()=>{const{type:ee,autosize:fe}=r;if(!(!Gt||ee!=="textarea"||!y.value))if(fe){const Re=et(fe)?fe.minRows:void 0,ct=et(fe)?fe.maxRows:void 0,mt=O0(y.value,Re,ct);E.value={overflowY:"hidden",...mt},Yt(()=>{y.value.offsetHeight,E.value=mt})}else E.value={minHeight:O0(y.value).minHeight}},de=(ee=>{let fe=!1;return()=>{var Re;if(fe||!r.autosize)return;((Re=y.value)==null?void 0:Re.offsetParent)===null||(setTimeout(ee),fe=!0)}})(ne),_e=()=>{const ee=T.value,fe=r.formatter?r.formatter(K.value):K.value;!ee||ee.value===fe||r.type==="file"||(ee.value=fe)},L=ee=>{const{trim:fe,number:Re}=r.modelModifiers;return fe&&(ee=ee.trim()),Re&&(ee=`${k0(ee)}`),r.formatter&&r.parser&&(ee=r.parser(ee)),ee},z=async ee=>{if(N.value)return;const{lazy:fe}=r.modelModifiers;let{value:Re}=ee.target;if(fe){i(rh,Re);return}if(Re=L(Re),String(Re)===K.value){r.formatter&&_e();return}Ce(),i(Zi,Re),i(rh,Re),await Yt(),(r.formatter&&r.parser||!te.value)&&_e(),q()},w=async ee=>{let{value:fe}=ee.target;fe=L(fe),r.modelModifiers.lazy&&i(Zi,fe),i(Tu,fe,ee),await Yt(),_e()},{isComposing:N,handleCompositionStart:j,handleCompositionUpdate:A,handleCompositionEnd:F}=q3({emit:i,afterComposition:z}),B=()=>{b.value=!b.value},W=()=>{var ee;return(ee=T.value)==null?void 0:ee.focus()},G=()=>{var ee;return(ee=T.value)==null?void 0:ee.blur()},V=ee=>{_.value=!1,i("mouseleave",ee)},J=ee=>{_.value=!0,i("mouseenter",ee)},ue=ee=>{i("keydown",ee)},oe=()=>{var ee;(ee=T.value)==null||ee.select()},ge=()=>{i(Zi,""),i(Tu,""),i("clear"),i(rh,"")};return Ge(()=>r.modelValue,()=>{var ee;Yt(()=>ne()),r.validateEvent&&((ee=f?.validate)==null||ee.call(f,"change").catch(fe=>void 0))}),Ge(K,ee=>{if(!T.value)return;const{trim:fe,number:Re}=r.modelModifiers,ct=T.value.value,mt=(Re||r.type==="number")&&!/^0\d/.test(ct)?`${k0(ct)}`:ct;mt!==ee&&(document.activeElement===T.value&&T.value.type!=="range"&&fe&&mt.trim()===ee||_e())}),Ge(()=>r.type,async()=>{await Yt(),_e(),ne()}),en(()=>{!r.formatter&&r.parser,_e(),Yt(ne)}),e({input:m,textarea:y,ref:T,textareaStyle:H,autosize:Jn(r,"autosize"),isComposing:N,focus:W,blur:G,select:oe,clear:ge,resizeTextarea:ne}),(ee,fe)=>(le(),be("div",{class:ke([l.value,{[D(p).bm("group","append")]:ee.$slots.append,[D(p).bm("group","prepend")]:ee.$slots.prepend}]),style:Dt(Z.value),onMouseenter:J,onMouseleave:V},[je(" input "),ee.type!=="textarea"?(le(),be(pt,{key:0},[je(" prepend slot "),ee.$slots.prepend?(le(),be("div",{key:0,class:ke(D(p).be("group","prepend"))},[Ne(ee.$slots,"prepend")],2)):je("v-if",!0),Ee("div",{ref_key:"wrapperRef",ref:O,class:ke(c.value)},[je(" prefix slot "),ee.$slots.prefix||ee.prefixIcon?(le(),be("span",{key:0,class:ke(D(p).e("prefix"))},[Ee("span",{class:ke(D(p).e("prefix-inner"))},[Ne(ee.$slots,"prefix"),ee.prefixIcon?(le(),Ve(D(Lt),{key:0,class:ke(D(p).e("icon"))},{default:Me(()=>[(le(),Ve(jn(ee.prefixIcon)))]),_:1},8,["class"])):je("v-if",!0)],2)],2)):je("v-if",!0),Ee("input",Xn({id:D(d),ref_key:"input",ref:m,class:D(p).e("inner")},D(o),{name:ee.name,minlength:ee.minlength,maxlength:ee.maxlength,type:ee.showPassword?b.value?"text":"password":ee.type,disabled:D(g),readonly:ee.readonly,autocomplete:ee.autocomplete,tabindex:ee.tabindex,"aria-label":ee.ariaLabel,placeholder:ee.placeholder,style:ee.inputStyle,form:ee.form,autofocus:ee.autofocus,role:ee.containerRole,inputmode:ee.inputmode,onCompositionstart:fe[0]||(fe[0]=(...Re)=>D(j)&&D(j)(...Re)),onCompositionupdate:fe[1]||(fe[1]=(...Re)=>D(A)&&D(A)(...Re)),onCompositionend:fe[2]||(fe[2]=(...Re)=>D(F)&&D(F)(...Re)),onInput:z,onChange:w,onKeydown:ue}),null,16,J3),je(" suffix slot "),re.value?(le(),be("span",{key:1,class:ke(D(p).e("suffix"))},[Ee("span",{class:ke(D(p).e("suffix-inner"))},[!Q.value||!ce.value||!Y.value?(le(),be(pt,{key:0},[Ne(ee.$slots,"suffix"),ee.suffixIcon?(le(),Ve(D(Lt),{key:0,class:ke(D(p).e("icon"))},{default:Me(()=>[(le(),Ve(jn(ee.suffixIcon)))]),_:1},8,["class"])):je("v-if",!0)],64)):je("v-if",!0),Q.value?(le(),Ve(D(Lt),{key:1,class:ke([D(p).e("icon"),D(p).e("clear")]),onMousedown:wr(D(Ze),["prevent"]),onClick:ge},{default:Me(()=>[(le(),Ve(jn(ee.clearIcon)))]),_:1},8,["class","onMousedown"])):je("v-if",!0),ce.value?(le(),Ve(D(Lt),{key:2,class:ke([D(p).e("icon"),D(p).e("password")]),onClick:B,onMousedown:wr(D(Ze),["prevent"]),onMouseup:wr(D(Ze),["prevent"])},{default:Me(()=>[(le(),Ve(jn($.value)))]),_:1},8,["class","onMousedown","onMouseup"])):je("v-if",!0),Y.value?(le(),be("span",{key:3,class:ke([D(p).e("count"),D(p).is("outside",ee.wordLimitPosition==="outside")])},[Ee("span",{class:ke(D(p).e("count-inner"))},ln(U.value)+" / "+ln(ee.maxlength),3)],2)):je("v-if",!0),P.value&&S.value&&C.value?(le(),Ve(D(Lt),{key:4,class:ke([D(p).e("icon"),D(p).e("validateIcon"),D(p).is("loading",P.value==="validating")])},{default:Me(()=>[(le(),Ve(jn(S.value)))]),_:1},8,["class"])):je("v-if",!0)],2)],2)):je("v-if",!0)],2),je(" append slot "),ee.$slots.append?(le(),be("div",{key:1,class:ke(D(p).be("group","append"))},[Ne(ee.$slots,"append")],2)):je("v-if",!0)],64)):(le(),be(pt,{key:1},[je(" textarea "),Ee("textarea",Xn({id:D(d),ref_key:"textarea",ref:y,class:[D(v).e("inner"),D(p).is("focus",D(k))]},D(o),{name:ee.name,minlength:ee.minlength,maxlength:ee.maxlength,tabindex:ee.tabindex,disabled:D(g),readonly:ee.readonly,autocomplete:ee.autocomplete,style:H.value,"aria-label":ee.ariaLabel,placeholder:ee.placeholder,form:ee.form,autofocus:ee.autofocus,rows:ee.rows,role:ee.containerRole,onCompositionstart:fe[3]||(fe[3]=(...Re)=>D(j)&&D(j)(...Re)),onCompositionupdate:fe[4]||(fe[4]=(...Re)=>D(A)&&D(A)(...Re)),onCompositionend:fe[5]||(fe[5]=(...Re)=>D(F)&&D(F)(...Re)),onInput:z,onFocus:fe[6]||(fe[6]=(...Re)=>D(I)&&D(I)(...Re)),onBlur:fe[7]||(fe[7]=(...Re)=>D(R)&&D(R)(...Re)),onChange:w,onKeydown:ue}),null,16,Q3),Y.value?(le(),be("span",{key:0,style:Dt(x.value),class:ke([D(p).e("count"),D(p).is("outside",ee.wordLimitPosition==="outside")])},ln(U.value)+" / "+ln(ee.maxlength),7)):je("v-if",!0)],64))],38))}});var nI=Tt(tI,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const rI=lr(nI),Ys=4,iI={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},sI=({move:t,size:e,bar:n})=>({[n.size]:e,transform:`translate${n.axis}(${t}%)`}),Qp=Symbol("scrollbarContextKey"),oI=gt({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),aI="Thumb",lI=De({__name:"thumb",props:oI,setup(t){const e=t,n=Je(Qp),r=wt("scrollbar");n||qo(aI,"can not inject scrollbar context");const i=ye(),s=ye(),o=ye({}),a=ye(!1);let l=!1,c=!1,u=0,f=0,d=Gt?document.onselectstart:null;const h=ae(()=>iI[e.vertical?"vertical":"horizontal"]),g=ae(()=>sI({size:e.size,move:e.move,bar:h.value})),p=ae(()=>i.value[h.value.offset]**2/n.wrapElement[h.value.scrollSize]/e.ratio/s.value[h.value.offset]),v=O=>{var k;if(O.stopPropagation(),O.ctrlKey||[1,2].includes(O.button))return;(k=window.getSelection())==null||k.removeAllRanges(),y(O);const I=O.currentTarget;I&&(o.value[h.value.axis]=I[h.value.offset]-(O[h.value.client]-I.getBoundingClientRect()[h.value.direction]))},m=O=>{if(!s.value||!i.value||!n.wrapElement)return;const k=Math.abs(O.target.getBoundingClientRect()[h.value.direction]-O[h.value.client]),I=s.value[h.value.offset]/2,R=(k-I)*100*p.value/i.value[h.value.offset];n.wrapElement[h.value.scroll]=R*n.wrapElement[h.value.scrollSize]/100},y=O=>{O.stopImmediatePropagation(),l=!0,u=n.wrapElement.scrollHeight,f=n.wrapElement.scrollWidth,document.addEventListener("mousemove",_),document.addEventListener("mouseup",b),d=document.onselectstart,document.onselectstart=()=>!1},_=O=>{if(!i.value||!s.value||l===!1)return;const k=o.value[h.value.axis];if(!k)return;const I=(i.value.getBoundingClientRect()[h.value.direction]-O[h.value.client])*-1,R=s.value[h.value.offset]-k,C=(I-R)*100*p.value/i.value[h.value.offset];h.value.scroll==="scrollLeft"?n.wrapElement[h.value.scroll]=C*f/100:n.wrapElement[h.value.scroll]=C*u/100},b=()=>{l=!1,o.value[h.value.axis]=0,document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",b),T(),c&&(a.value=!1)},x=()=>{c=!1,a.value=!!e.size},E=()=>{c=!0,a.value=l};un(()=>{T(),document.removeEventListener("mouseup",b)});const T=()=>{document.onselectstart!==d&&(document.onselectstart=d)};return mi(Jn(n,"scrollbarElement"),"mousemove",x),mi(Jn(n,"scrollbarElement"),"mouseleave",E),(O,k)=>(le(),Ve(cf,{name:D(r).b("fade"),persisted:""},{default:Me(()=>[wl(Ee("div",{ref_key:"instance",ref:i,class:ke([D(r).e("bar"),D(r).is(h.value.key)]),onMousedown:m,onClick:k[0]||(k[0]=wr(()=>{},["stop"]))},[Ee("div",{ref_key:"thumb",ref:s,class:ke(D(r).e("thumb")),style:Dt(g.value),onMousedown:v},null,38)],34),[[uf,O.always||a.value]])]),_:1},8,["name"]))}});var F0=Tt(lI,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const cI=gt({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),uI=De({__name:"bar",props:cI,setup(t,{expose:e}){const n=t,r=Je(Qp),i=ye(0),s=ye(0),o=ye(""),a=ye(""),l=ye(1),c=ye(1);return e({handleScroll:d=>{if(d){const h=d.offsetHeight-Ys,g=d.offsetWidth-Ys;s.value=d.scrollTop*100/h*l.value,i.value=d.scrollLeft*100/g*c.value}},update:()=>{const d=r?.wrapElement;if(!d)return;const h=d.offsetHeight-Ys,g=d.offsetWidth-Ys,p=h**2/d.scrollHeight,v=g**2/d.scrollWidth,m=Math.max(p,n.minSize),y=Math.max(v,n.minSize);l.value=p/(h-p)/(m/(h-m)),c.value=v/(g-v)/(y/(g-y)),a.value=m+Ys<h?`${m}px`:"",o.value=y+Ys<g?`${y}px`:""}}),(d,h)=>(le(),be(pt,null,[Ae(F0,{move:i.value,ratio:c.value,size:o.value,always:d.always},null,8,["move","ratio","size","always"]),Ae(F0,{move:s.value,ratio:l.value,size:a.value,vertical:"",always:d.always},null,8,["move","ratio","size","always"])],64))}});var fI=Tt(uI,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const hI=gt({distance:{type:Number,default:0},height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:Pe([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...yf(["ariaLabel","ariaOrientation"])}),dI={"end-reached":t=>["left","right","top","bottom"].includes(t),scroll:({scrollTop:t,scrollLeft:e})=>[t,e].every($n)},pI=["tabindex"],gI="ElScrollbar",mI=De({name:gI,__name:"scrollbar",props:hI,emits:dI,setup(t,{expose:e,emit:n}){const r=t,i=n,s=wt("scrollbar");let o,a,l,c=0,u=0,f="";const d={bottom:!1,top:!1,right:!1,left:!1},h=ye(),g=ye(),p=ye(),v=ye(),m=ae(()=>{const C={},P=Io(r.height),S=Io(r.maxHeight);return P&&(C.height=P),S&&(C.maxHeight=S),[r.wrapStyle,C]}),y=ae(()=>[r.wrapClass,s.e("wrap"),{[s.em("wrap","hidden-default")]:!r.native}]),_=ae(()=>[s.e("view"),r.viewClass]),b=C=>{var P;return(P=d[C])!=null?P:!1},x={top:"bottom",bottom:"top",left:"right",right:"left"},E=C=>{const P=x[f];if(!P)return;const S=C[f],$=C[P];S&&!d[f]&&(d[f]=!0),!$&&d[P]&&(d[P]=!1)},T=()=>{var C;if(g.value){(C=v.value)==null||C.handleScroll(g.value);const P=c,S=u;c=g.value.scrollTop,u=g.value.scrollLeft;const $={bottom:c+g.value.clientHeight>=g.value.scrollHeight-r.distance,top:c<=r.distance&&P!==0,right:u+g.value.clientWidth>=g.value.scrollWidth-r.distance&&S!==u,left:u<=r.distance&&S!==0};if(i("scroll",{scrollTop:c,scrollLeft:u}),P!==c&&(f=c>P?"bottom":"top"),S!==u&&(f=u>S?"right":"left"),r.distance>0){if(b(f))return;E($)}$[f]&&i("end-reached",f)}};function O(C,P){et(C)?g.value.scrollTo(C):$n(C)&&$n(P)&&g.value.scrollTo(C,P)}const k=C=>{$n(C)&&(g.value.scrollTop=C)},I=C=>{$n(C)&&(g.value.scrollLeft=C)},R=()=>{var C;(C=v.value)==null||C.update(),d[f]=!1};return Ge(()=>r.noresize,C=>{C?(o?.(),a?.(),l?.()):({stop:o}=Md(p,R),{stop:a}=Md(g,R),l=mi("resize",R))},{immediate:!0}),Ge(()=>[r.maxHeight,r.height],()=>{r.native||Yt(()=>{var C;R(),g.value&&((C=v.value)==null||C.handleScroll(g.value))})}),_n(Qp,Go({scrollbarElement:h,wrapElement:g})),H1(()=>{g.value&&(g.value.scrollTop=c,g.value.scrollLeft=u)}),en(()=>{r.native||Yt(()=>{R()})}),Cp(()=>R()),e({wrapRef:g,update:R,scrollTo:O,setScrollTop:k,setScrollLeft:I,handleScroll:T}),(C,P)=>(le(),be("div",{ref_key:"scrollbarRef",ref:h,class:ke(D(s).b())},[Ee("div",{ref_key:"wrapRef",ref:g,class:ke(y.value),style:Dt(m.value),tabindex:C.tabindex,onScroll:T},[(le(),Ve(jn(C.tag),{id:C.id,ref_key:"resizeRef",ref:p,class:ke(_.value),style:Dt(C.viewStyle),role:C.role,"aria-label":C.ariaLabel,"aria-orientation":C.ariaOrientation},{default:Me(()=>[Ne(C.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,pI),C.native?je("v-if",!0):(le(),Ve(fI,{key:0,ref_key:"barRef",ref:v,always:C.always,"min-size":C.minSize},null,8,["always","min-size"]))],2))}});var vI=Tt(mI,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const yI=lr(vI),eg=Symbol("popper"),vw=Symbol("popperContent"),bI=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],yw=gt({role:{type:String,values:bI,default:"tooltip"}}),_I=De({name:"ElPopper",inheritAttrs:!1,__name:"popper",props:yw,setup(t,{expose:e}){const n=t,r=ye(),i=ye(),s=ye(),o=ye(),a=ae(()=>n.role),l={triggerRef:r,popperInstanceRef:i,contentRef:s,referenceRef:o,role:a};return e(l),_n(eg,l),(c,u)=>Ne(c.$slots,"default")}});var wI=Tt(_I,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const SI=De({name:"ElPopperArrow",inheritAttrs:!1,__name:"arrow",setup(t,{expose:e}){const n=wt("popper"),{arrowRef:r,arrowStyle:i}=Je(vw,void 0);return un(()=>{r.value=void 0}),e({arrowRef:r}),(s,o)=>(le(),be("span",{ref_key:"arrowRef",ref:r,class:ke(D(n).e("arrow")),style:Dt(D(i)),"data-popper-arrow":""},null,6))}});var xI=Tt(SI,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const bw=gt({virtualRef:{type:Pe(Object)},virtualTriggering:Boolean,onMouseenter:{type:Pe(Function)},onMouseleave:{type:Pe(Function)},onClick:{type:Pe(Function)},onKeydown:{type:Pe(Function)},onFocus:{type:Pe(Function)},onBlur:{type:Pe(Function)},onContextmenu:{type:Pe(Function)},id:String,open:Boolean}),_w=Symbol("elForwardRef"),CI=t=>{_n(_w,{setForwardRef:n=>{t.value=n}})},TI=t=>({mounted(e){t(e)},updated(e){t(e)},unmounted(){t(null)}}),EI="ElOnlyChild",kI=De({name:EI,setup(t,{slots:e,attrs:n}){var r;const i=Je(_w),s=TI((r=i?.setForwardRef)!=null?r:Ze);return()=>{var o;const a=(o=e.default)==null?void 0:o.call(e,n);if(!a)return null;const[l,c]=ww(a);return l?wl(Si(l,n),[[s]]):null}}});function ww(t){if(!t)return[null,0];const e=t,n=e.filter(r=>r.type!==Vt).length;for(const r of e){if(et(r))switch(r.type){case Vt:continue;case Xo:case"svg":return[D0(r),n];case pt:return ww(r.children);default:return[r,n]}return[D0(r),n]}return[null,0]}function D0(t){const e=wt("only-child");return Ae("span",{class:e.e("content")},[t])}const OI=De({name:"ElPopperTrigger",inheritAttrs:!1,__name:"trigger",props:bw,setup(t,{expose:e}){const n=t,{role:r,triggerRef:i}=Je(eg,void 0);CI(i);const s=ae(()=>a.value?n.id:void 0),o=ae(()=>{if(r&&r.value==="tooltip")return n.open&&n.id?n.id:void 0}),a=ae(()=>{if(r&&r.value!=="tooltip")return r.value}),l=ae(()=>a.value?`${n.open}`:void 0);let c;const u=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return en(()=>{Ge(()=>n.virtualRef,f=>{f&&(i.value=ui(f))},{immediate:!0}),Ge(i,(f,d)=>{c?.(),c=void 0,co(d)&&u.forEach(h=>{const g=n[h];g&&d.removeEventListener(h.slice(2).toLowerCase(),g,["onFocus","onBlur"].includes(h))}),co(f)&&(u.forEach(h=>{const g=n[h];g&&f.addEventListener(h.slice(2).toLowerCase(),g,["onFocus","onBlur"].includes(h))}),Ou(f)&&(c=Ge([s,o,a,l],h=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((g,p)=>{Ko(h[p])?f.removeAttribute(g):f.setAttribute(g,h[p])})},{immediate:!0}))),co(d)&&Ou(d)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(h=>d.removeAttribute(h))},{immediate:!0})}),un(()=>{if(c?.(),c=void 0,i.value&&co(i.value)){const f=i.value;u.forEach(d=>{const h=n[d];h&&f.removeEventListener(d.slice(2).toLowerCase(),h,["onFocus","onBlur"].includes(d))}),i.value=void 0}}),e({triggerRef:i}),(f,d)=>f.virtualTriggering?je("v-if",!0):(le(),Ve(D(kI),Xn({key:0},f.$attrs,{"aria-controls":s.value,"aria-describedby":o.value,"aria-expanded":l.value,"aria-haspopup":a.value}),{default:Me(()=>[Ne(f.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var AI=Tt(OI,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const ih="focus-trap.focus-after-trapped",sh="focus-trap.focus-after-released",PI="focus-trap.focusout-prevented",I0={cancelable:!0,bubbles:!1},FI={cancelable:!0,bubbles:!1},M0="focusAfterTrapped",R0="focusAfterReleased",Sw=Symbol("elFocusTrap"),tg=ye(),bf=ye(0),ng=ye(0);let $l=0;const xw=t=>{const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e},L0=(t,e)=>{for(const n of t)if(!DI(n,e))return n},DI=(t,e)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},II=t=>{const e=xw(t),n=L0(e,t),r=L0(e.reverse(),t);return[n,r]},MI=t=>t instanceof HTMLInputElement&&"select"in t,Hi=(t,e)=>{if(t){const n=document.activeElement;Jp(t,{preventScroll:!0}),ng.value=window.performance.now(),t!==n&&MI(t)&&e&&t.select()}};function B0(t,e){const n=[...t],r=t.indexOf(e);return r!==-1&&n.splice(r,1),n}const RI=()=>{let t=[];return{push:r=>{const i=t[0];i&&r!==i&&i.pause(),t=B0(t,r),t.unshift(r)},remove:r=>{var i,s;t=B0(t,r),(s=(i=t[0])==null?void 0:i.resume)==null||s.call(i)}}},LI=(t,e=!1)=>{const n=document.activeElement;for(const r of t)if(Hi(r,e),document.activeElement!==n)return},j0=RI(),BI=()=>bf.value>ng.value,Ul=()=>{tg.value="pointer",bf.value=window.performance.now()},N0=()=>{tg.value="keyboard",bf.value=window.performance.now()},jI=()=>(en(()=>{$l===0&&(document.addEventListener("mousedown",Ul),document.addEventListener("touchstart",Ul),document.addEventListener("keydown",N0)),$l++}),un(()=>{$l--,$l<=0&&(document.removeEventListener("mousedown",Ul),document.removeEventListener("touchstart",Ul),document.removeEventListener("keydown",N0))}),{focusReason:tg,lastUserFocusTimestamp:bf,lastAutomatedFocusTimestamp:ng}),Hl=t=>new CustomEvent(PI,{...FI,detail:t}),Fs={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},ti=(t,e,{checkForDefaultPrevented:n=!0}={})=>i=>{const s=t?.(i);if(n===!1||!s)return e?.(i)},rg=t=>{if(t.code&&t.code!=="Unidentified")return t.code;const e=NI(t);return e?Object.values(Fs).includes(e)?e:e===" "?Fs.space:"":""},NI=t=>{let e=t.key&&t.key!=="Unidentified"?t.key:"";if(!e&&t.type==="keyup"&&L3()){const n=t.target;e=n.value.charAt(n.selectionStart-1)}return e};let so=[];const z0=t=>{rg(t)===Fs.esc&&so.forEach(n=>n(t))},zI=t=>{en(()=>{so.length===0&&document.addEventListener("keydown",z0),Gt&&so.push(t)}),un(()=>{so=so.filter(e=>e!==t),so.length===0&&Gt&&document.removeEventListener("keydown",z0)})},$I=De({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[M0,R0,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:e}){const n=ye();let r,i;const{focusReason:s}=jI();zI(g=>{t.trapped&&!o.paused&&e("release-requested",g)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=g=>{if(!t.loop&&!t.trapped||o.paused)return;const{altKey:p,ctrlKey:v,metaKey:m,currentTarget:y,shiftKey:_}=g,{loop:b}=t,E=rg(g)===Fs.tab&&!p&&!v&&!m,T=document.activeElement;if(E&&T){const O=y,[k,I]=II(O);if(k&&I){if(!_&&T===I){const C=Hl({focusReason:s.value});e("focusout-prevented",C),C.defaultPrevented||(g.preventDefault(),b&&Hi(k,!0))}else if(_&&[k,O].includes(T)){const C=Hl({focusReason:s.value});e("focusout-prevented",C),C.defaultPrevented||(g.preventDefault(),b&&Hi(I,!0))}}else if(T===O){const C=Hl({focusReason:s.value});e("focusout-prevented",C),C.defaultPrevented||g.preventDefault()}}};_n(Sw,{focusTrapRef:n,onKeydown:a}),Ge(()=>t.focusTrapEl,g=>{g&&(n.value=g)},{immediate:!0}),Ge([n],([g],[p])=>{g&&(g.addEventListener("keydown",a),g.addEventListener("focusin",u),g.addEventListener("focusout",f)),p&&(p.removeEventListener("keydown",a),p.removeEventListener("focusin",u),p.removeEventListener("focusout",f))});const l=g=>{e(M0,g)},c=g=>e(R0,g),u=g=>{const p=D(n);if(!p)return;const v=g.target,m=g.relatedTarget,y=v&&p.contains(v);t.trapped||m&&p.contains(m)||(r=m),y&&e("focusin",g),!o.paused&&t.trapped&&(y?i=v:Hi(i,!0))},f=g=>{const p=D(n);if(!(o.paused||!p))if(t.trapped){const v=g.relatedTarget;!Ko(v)&&!p.contains(v)&&setTimeout(()=>{if(!o.paused&&t.trapped){const m=Hl({focusReason:s.value});e("focusout-prevented",m),m.defaultPrevented||Hi(i,!0)}},0)}else{const v=g.target;v&&p.contains(v)||e("focusout",g)}};async function d(){await Yt();const g=D(n);if(g){j0.push(o);const p=g.contains(document.activeElement)?r:document.activeElement;if(r=p,!g.contains(p)){const m=new Event(ih,I0);g.addEventListener(ih,l),g.dispatchEvent(m),m.defaultPrevented||Yt(()=>{let y=t.focusStartEl;at(y)||(Hi(y),document.activeElement!==y&&(y="first")),y==="first"&&LI(xw(g),!0),(document.activeElement===p||y==="container")&&Hi(g)})}}}function h(){const g=D(n);if(g){g.removeEventListener(ih,l);const p=new CustomEvent(sh,{...I0,detail:{focusReason:s.value}});g.addEventListener(sh,c),g.dispatchEvent(p),!p.defaultPrevented&&(s.value=="keyboard"||!BI()||g.contains(document.activeElement))&&Hi(r??document.body),g.removeEventListener(sh,c),j0.remove(o),r=null,i=null}}return en(()=>{t.trapped&&d(),Ge(()=>t.trapped,g=>{g?d():h()})}),un(()=>{t.trapped&&h(),n.value&&(n.value.removeEventListener("keydown",a),n.value.removeEventListener("focusin",u),n.value.removeEventListener("focusout",f),n.value=void 0),r=null,i=null}),{onKeydown:a}}});function UI(t,e,n,r,i,s){return Ne(t.$slots,"default",{handleKeydown:t.onKeydown})}var Cw=Tt($I,[["render",UI],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]),Cn="top",rr="bottom",ir="right",Tn="left",ig="auto",xl=[Cn,rr,ir,Tn],Mo="start",ul="end",HI="clippingParents",Tw="viewport",pa="popper",VI="reference",$0=xl.reduce(function(t,e){return t.concat([e+"-"+Mo,e+"-"+ul])},[]),sg=[].concat(xl,[ig]).reduce(function(t,e){return t.concat([e,e+"-"+Mo,e+"-"+ul])},[]),GI="beforeRead",WI="read",XI="afterRead",YI="beforeMain",KI="main",qI="afterMain",ZI="beforeWrite",JI="write",QI="afterWrite",eM=[GI,WI,XI,YI,KI,qI,ZI,JI,QI];function Vr(t){return t?(t.nodeName||"").toLowerCase():null}function Ar(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ro(t){var e=Ar(t).Element;return t instanceof e||t instanceof Element}function Qn(t){var e=Ar(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function og(t){if(typeof ShadowRoot>"u")return!1;var e=Ar(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function tM(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!Qn(s)||!Vr(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function nM(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!Qn(i)||!Vr(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}var Ew={name:"applyStyles",enabled:!0,phase:"write",fn:tM,effect:nM,requires:["computeStyles"]};function Ur(t){return t.split("-")[0]}var Ds=Math.max,Au=Math.min,Lo=Math.round;function Bo(t,e){e===void 0&&(e=!1);var n=t.getBoundingClientRect(),r=1,i=1;if(Qn(t)&&e){var s=t.offsetHeight,o=t.offsetWidth;o>0&&(r=Lo(n.width)/o||1),s>0&&(i=Lo(n.height)/s||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function ag(t){var e=Bo(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function kw(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&og(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function xi(t){return Ar(t).getComputedStyle(t)}function rM(t){return["table","td","th"].indexOf(Vr(t))>=0}function ss(t){return((Ro(t)?t.ownerDocument:t.document)||window.document).documentElement}function _f(t){return Vr(t)==="html"?t:t.assignedSlot||t.parentNode||(og(t)?t.host:null)||ss(t)}function U0(t){return!Qn(t)||xi(t).position==="fixed"?null:t.offsetParent}function iM(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&Qn(t)){var r=xi(t);if(r.position==="fixed")return null}var i=_f(t);for(og(i)&&(i=i.host);Qn(i)&&["html","body"].indexOf(Vr(i))<0;){var s=xi(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Cl(t){for(var e=Ar(t),n=U0(t);n&&rM(n)&&xi(n).position==="static";)n=U0(n);return n&&(Vr(n)==="html"||Vr(n)==="body"&&xi(n).position==="static")?e:n||iM(t)||e}function lg(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Na(t,e,n){return Ds(t,Au(e,n))}function sM(t,e,n){var r=Na(t,e,n);return r>n?n:r}function Ow(){return{top:0,right:0,bottom:0,left:0}}function Aw(t){return Object.assign({},Ow(),t)}function Pw(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var oM=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,Aw(typeof t!="number"?t:Pw(t,xl))};function aM(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Ur(n.placement),l=lg(a),c=[Tn,ir].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var f=oM(i.padding,n),d=ag(s),h=l==="y"?Cn:Tn,g=l==="y"?rr:ir,p=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],v=o[l]-n.rects.reference[l],m=Cl(s),y=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,_=p/2-v/2,b=f[h],x=y-d[u]-f[g],E=y/2-d[u]/2+_,T=Na(b,E,x),O=l;n.modifiersData[r]=(e={},e[O]=T,e.centerOffset=T-E,e)}}function lM(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!kw(e.elements.popper,i)||(e.elements.arrow=i))}var cM={name:"arrow",enabled:!0,phase:"main",fn:aM,effect:lM,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function jo(t){return t.split("-")[1]}var uM={top:"auto",right:"auto",bottom:"auto",left:"auto"};function fM(t){var e=t.x,n=t.y,r=window,i=r.devicePixelRatio||1;return{x:Lo(e*i)/i||0,y:Lo(n*i)/i||0}}function H0(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,f=t.isFixed,d=o.x,h=d===void 0?0:d,g=o.y,p=g===void 0?0:g,v=typeof u=="function"?u({x:h,y:p}):{x:h,y:p};h=v.x,p=v.y;var m=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),_=Tn,b=Cn,x=window;if(c){var E=Cl(n),T="clientHeight",O="clientWidth";if(E===Ar(n)&&(E=ss(n),xi(E).position!=="static"&&a==="absolute"&&(T="scrollHeight",O="scrollWidth")),E=E,i===Cn||(i===Tn||i===ir)&&s===ul){b=rr;var k=f&&E===x&&x.visualViewport?x.visualViewport.height:E[T];p-=k-r.height,p*=l?1:-1}if(i===Tn||(i===Cn||i===rr)&&s===ul){_=ir;var I=f&&E===x&&x.visualViewport?x.visualViewport.width:E[O];h-=I-r.width,h*=l?1:-1}}var R=Object.assign({position:a},c&&uM),C=u===!0?fM({x:h,y:p}):{x:h,y:p};if(h=C.x,p=C.y,l){var P;return Object.assign({},R,(P={},P[b]=y?"0":"",P[_]=m?"0":"",P.transform=(x.devicePixelRatio||1)<=1?"translate("+h+"px, "+p+"px)":"translate3d("+h+"px, "+p+"px, 0)",P))}return Object.assign({},R,(e={},e[b]=y?p+"px":"",e[_]=m?h+"px":"",e.transform="",e))}function hM(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Ur(e.placement),variation:jo(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,H0(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,H0(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Fw={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:hM,data:{}},Vl={passive:!0};function dM(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=Ar(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Vl)}),a&&l.addEventListener("resize",n.update,Vl),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Vl)}),a&&l.removeEventListener("resize",n.update,Vl)}}var Dw={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:dM,data:{}},pM={left:"right",right:"left",bottom:"top",top:"bottom"};function Qc(t){return t.replace(/left|right|bottom|top/g,function(e){return pM[e]})}var gM={start:"end",end:"start"};function V0(t){return t.replace(/start|end/g,function(e){return gM[e]})}function cg(t){var e=Ar(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function ug(t){return Bo(ss(t)).left+cg(t).scrollLeft}function mM(t){var e=Ar(t),n=ss(t),r=e.visualViewport,i=n.clientWidth,s=n.clientHeight,o=0,a=0;return r&&(i=r.width,s=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,a=r.offsetTop)),{width:i,height:s,x:o+ug(t),y:a}}function vM(t){var e,n=ss(t),r=cg(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Ds(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Ds(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+ug(t),l=-r.scrollTop;return xi(i||n).direction==="rtl"&&(a+=Ds(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function fg(t){var e=xi(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Iw(t){return["html","body","#document"].indexOf(Vr(t))>=0?t.ownerDocument.body:Qn(t)&&fg(t)?t:Iw(_f(t))}function za(t,e){var n;e===void 0&&(e=[]);var r=Iw(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Ar(r),o=i?[s].concat(s.visualViewport||[],fg(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(za(_f(o)))}function Rd(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function yM(t){var e=Bo(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function G0(t,e){return e===Tw?Rd(mM(t)):Ro(e)?yM(e):Rd(vM(ss(t)))}function bM(t){var e=za(_f(t)),n=["absolute","fixed"].indexOf(xi(t).position)>=0,r=n&&Qn(t)?Cl(t):t;return Ro(r)?e.filter(function(i){return Ro(i)&&kw(i,r)&&Vr(i)!=="body"}):[]}function _M(t,e,n){var r=e==="clippingParents"?bM(t):[].concat(e),i=[].concat(r,[n]),s=i[0],o=i.reduce(function(a,l){var c=G0(t,l);return a.top=Ds(c.top,a.top),a.right=Au(c.right,a.right),a.bottom=Au(c.bottom,a.bottom),a.left=Ds(c.left,a.left),a},G0(t,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Mw(t){var e=t.reference,n=t.element,r=t.placement,i=r?Ur(r):null,s=r?jo(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Cn:l={x:o,y:e.y-n.height};break;case rr:l={x:o,y:e.y+e.height};break;case ir:l={x:e.x+e.width,y:a};break;case Tn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?lg(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Mo:l[c]=l[c]-(e[u]/2-n[u]/2);break;case ul:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function fl(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.boundary,o=s===void 0?HI:s,a=n.rootBoundary,l=a===void 0?Tw:a,c=n.elementContext,u=c===void 0?pa:c,f=n.altBoundary,d=f===void 0?!1:f,h=n.padding,g=h===void 0?0:h,p=Aw(typeof g!="number"?g:Pw(g,xl)),v=u===pa?VI:pa,m=t.rects.popper,y=t.elements[d?v:u],_=_M(Ro(y)?y:y.contextElement||ss(t.elements.popper),o,l),b=Bo(t.elements.reference),x=Mw({reference:b,element:m,placement:i}),E=Rd(Object.assign({},m,x)),T=u===pa?E:b,O={top:_.top-T.top+p.top,bottom:T.bottom-_.bottom+p.bottom,left:_.left-T.left+p.left,right:T.right-_.right+p.right},k=t.modifiersData.offset;if(u===pa&&k){var I=k[i];Object.keys(O).forEach(function(R){var C=[ir,rr].indexOf(R)>=0?1:-1,P=[Cn,rr].indexOf(R)>=0?"y":"x";O[R]+=I[P]*C})}return O}function wM(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?sg:l,u=jo(r),f=u?a?$0:$0.filter(function(g){return jo(g)===u}):xl,d=f.filter(function(g){return c.indexOf(g)>=0});d.length===0&&(d=f);var h=d.reduce(function(g,p){return g[p]=fl(t,{placement:p,boundary:i,rootBoundary:s,padding:o})[Ur(p)],g},{});return Object.keys(h).sort(function(g,p){return h[g]-h[p]})}function SM(t){if(Ur(t)===ig)return[];var e=Qc(t);return[V0(t),e,V0(e)]}function xM(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,f=n.rootBoundary,d=n.altBoundary,h=n.flipVariations,g=h===void 0?!0:h,p=n.allowedAutoPlacements,v=e.options.placement,m=Ur(v),y=m===v,_=l||(y||!g?[Qc(v)]:SM(v)),b=[v].concat(_).reduce(function(re,te){return re.concat(Ur(te)===ig?wM(e,{placement:te,boundary:u,rootBoundary:f,padding:c,flipVariations:g,allowedAutoPlacements:p}):te)},[]),x=e.rects.reference,E=e.rects.popper,T=new Map,O=!0,k=b[0],I=0;I<b.length;I++){var R=b[I],C=Ur(R),P=jo(R)===Mo,S=[Cn,rr].indexOf(C)>=0,$=S?"width":"height",Z=fl(e,{placement:R,boundary:u,rootBoundary:f,altBoundary:d,padding:c}),H=S?P?ir:Tn:P?rr:Cn;x[$]>E[$]&&(H=Qc(H));var K=Qc(H),Q=[];if(s&&Q.push(Z[C]<=0),a&&Q.push(Z[H]<=0,Z[K]<=0),Q.every(function(re){return re})){k=R,O=!1;break}T.set(R,Q)}if(O)for(var ce=g?3:1,Y=function(re){var te=b.find(function(Ce){var q=T.get(Ce);if(q)return q.slice(0,re).every(function(ne){return ne})});if(te)return k=te,"break"},U=ce;U>0;U--){var he=Y(U);if(he==="break")break}e.placement!==k&&(e.modifiersData[r]._skip=!0,e.placement=k,e.reset=!0)}}var CM={name:"flip",enabled:!0,phase:"main",fn:xM,requiresIfExists:["offset"],data:{_skip:!1}};function W0(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function X0(t){return[Cn,ir,rr,Tn].some(function(e){return t[e]>=0})}function TM(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=fl(e,{elementContext:"reference"}),a=fl(e,{altBoundary:!0}),l=W0(o,r),c=W0(a,i,s),u=X0(l),f=X0(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}var EM={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:TM};function kM(t,e,n){var r=Ur(t),i=[Tn,Cn].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Tn,ir].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function OM(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=sg.reduce(function(u,f){return u[f]=kM(f,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}var AM={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:OM};function PM(t){var e=t.state,n=t.name;e.modifiersData[n]=Mw({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}var Rw={name:"popperOffsets",enabled:!0,phase:"read",fn:PM,data:{}};function FM(t){return t==="x"?"y":"x"}function DM(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,f=n.padding,d=n.tether,h=d===void 0?!0:d,g=n.tetherOffset,p=g===void 0?0:g,v=fl(e,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),m=Ur(e.placement),y=jo(e.placement),_=!y,b=lg(m),x=FM(b),E=e.modifiersData.popperOffsets,T=e.rects.reference,O=e.rects.popper,k=typeof p=="function"?p(Object.assign({},e.rects,{placement:e.placement})):p,I=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),R=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,C={x:0,y:0};if(E){if(s){var P,S=b==="y"?Cn:Tn,$=b==="y"?rr:ir,Z=b==="y"?"height":"width",H=E[b],K=H+v[S],Q=H-v[$],ce=h?-O[Z]/2:0,Y=y===Mo?T[Z]:O[Z],U=y===Mo?-O[Z]:-T[Z],he=e.elements.arrow,re=h&&he?ag(he):{width:0,height:0},te=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Ow(),Ce=te[S],q=te[$],ne=Na(0,T[Z],re[Z]),se=_?T[Z]/2-ce-ne-Ce-I.mainAxis:Y-ne-Ce-I.mainAxis,de=_?-T[Z]/2+ce+ne+q+I.mainAxis:U+ne+q+I.mainAxis,_e=e.elements.arrow&&Cl(e.elements.arrow),L=_e?b==="y"?_e.clientTop||0:_e.clientLeft||0:0,z=(P=R?.[b])!=null?P:0,w=H+se-z-L,N=H+de-z,j=Na(h?Au(K,w):K,H,h?Ds(Q,N):Q);E[b]=j,C[b]=j-H}if(a){var A,F=b==="x"?Cn:Tn,B=b==="x"?rr:ir,W=E[x],G=x==="y"?"height":"width",V=W+v[F],J=W-v[B],ue=[Cn,Tn].indexOf(m)!==-1,oe=(A=R?.[x])!=null?A:0,ge=ue?V:W-T[G]-O[G]-oe+I.altAxis,ee=ue?W+T[G]+O[G]-oe-I.altAxis:J,fe=h&&ue?sM(ge,W,ee):Na(h?ge:V,W,h?ee:J);E[x]=fe,C[x]=fe-W}e.modifiersData[r]=C}}var IM={name:"preventOverflow",enabled:!0,phase:"main",fn:DM,requiresIfExists:["offset"]};function MM(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function RM(t){return t===Ar(t)||!Qn(t)?cg(t):MM(t)}function LM(t){var e=t.getBoundingClientRect(),n=Lo(e.width)/t.offsetWidth||1,r=Lo(e.height)/t.offsetHeight||1;return n!==1||r!==1}function BM(t,e,n){n===void 0&&(n=!1);var r=Qn(e),i=Qn(e)&&LM(e),s=ss(e),o=Bo(t,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Vr(e)!=="body"||fg(s))&&(a=RM(e)),Qn(e)?(l=Bo(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=ug(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function jM(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function NM(t){var e=jM(t);return eM.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function zM(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function $M(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Y0={placement:"bottom",modifiers:[],strategy:"absolute"};function K0(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function hg(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?Y0:i;return function(o,a,l){l===void 0&&(l=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Y0,s),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},u=[],f=!1,d={state:c,setOptions:function(p){var v=typeof p=="function"?p(c.options):p;g(),c.options=Object.assign({},s,c.options,v),c.scrollParents={reference:Ro(o)?za(o):o.contextElement?za(o.contextElement):[],popper:za(a)};var m=NM($M([].concat(r,c.options.modifiers)));return c.orderedModifiers=m.filter(function(y){return y.enabled}),h(),d.update()},forceUpdate:function(){if(!f){var p=c.elements,v=p.reference,m=p.popper;if(K0(v,m)){c.rects={reference:BM(v,Cl(m),c.options.strategy==="fixed"),popper:ag(m)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(O){return c.modifiersData[O.name]=Object.assign({},O.data)});for(var y=0;y<c.orderedModifiers.length;y++){if(c.reset===!0){c.reset=!1,y=-1;continue}var _=c.orderedModifiers[y],b=_.fn,x=_.options,E=x===void 0?{}:x,T=_.name;typeof b=="function"&&(c=b({state:c,options:E,name:T,instance:d})||c)}}}},update:zM(function(){return new Promise(function(p){d.forceUpdate(),p(c)})}),destroy:function(){g(),f=!0}};if(!K0(o,a))return d;d.setOptions(l).then(function(p){!f&&l.onFirstUpdate&&l.onFirstUpdate(p)});function h(){c.orderedModifiers.forEach(function(p){var v=p.name,m=p.options,y=m===void 0?{}:m,_=p.effect;if(typeof _=="function"){var b=_({state:c,name:v,instance:d,options:y}),x=function(){};u.push(b||x)}})}function g(){u.forEach(function(p){return p()}),u=[]}return d}}hg();var UM=[Dw,Rw,Fw,Ew];hg({defaultModifiers:UM});var HM=[Dw,Rw,Fw,Ew,AM,CM,IM,cM,EM],VM=hg({defaultModifiers:HM});const Lw=gt({arrowOffset:{type:Number,default:5}}),GM=["fixed","absolute"],WM=gt({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Pe(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:sg,default:"bottom"},popperOptions:{type:Pe(Object),default:()=>({})},strategy:{type:String,values:GM,default:"absolute"}}),Bw=gt({...WM,...Lw,id:String,style:{type:Pe([String,Array,Object])},className:{type:Pe([String,Array,Object])},effect:{type:Pe(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:Boolean,trapping:Boolean,popperClass:{type:Pe([String,Array,Object])},popperStyle:{type:Pe([String,Array,Object])},referenceEl:{type:Pe(Object)},triggerTargetEl:{type:Pe(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...yf(["ariaLabel"]),loop:Boolean}),XM={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},YM=(t,e)=>{const n=ye(!1),r=ye(),i=()=>{e("focus")},s=c=>{var u;((u=c.detail)==null?void 0:u.focusReason)!=="pointer"&&(r.value="first",e("blur"))},o=c=>{t.visible&&!n.value&&(c.target&&(r.value=c.target),n.value=!0)},a=c=>{t.trapping||(c.detail.focusReason==="pointer"&&c.preventDefault(),n.value=!1)},l=()=>{n.value=!1,e("close")};return un(()=>{r.value=void 0}),{focusStartRef:r,trapped:n,onFocusAfterReleased:s,onFocusAfterTrapped:i,onFocusInTrap:o,onFocusoutPrevented:a,onReleaseRequested:l}},KM=(t,e=[])=>{const{placement:n,strategy:r,popperOptions:i}=t,s={placement:n,strategy:r,...i,modifiers:[...ZM(t),...e]};return JM(s,i?.modifiers),s},qM=t=>{if(Gt)return ui(t)};function ZM(t){const{offset:e,gpuAcceleration:n,fallbackPlacements:r}=t;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:0,bottom:0,left:0,right:0}}},{name:"flip",options:{padding:5,fallbackPlacements:r}},{name:"computeStyles",options:{gpuAcceleration:n}}]}function JM(t,e){e&&(t.modifiers=[...t.modifiers,...e??[]])}const QM=(t,e,n={})=>{const r={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const c=e4(l);Object.assign(o.value,c)},requires:["computeStyles"]},i=ae(()=>{const{onFirstUpdate:l,placement:c,strategy:u,modifiers:f}=D(n);return{onFirstUpdate:l,placement:c||"bottom",strategy:u||"absolute",modifiers:[...f||[],r,{name:"applyStyles",enabled:!1}]}}),s=$r(),o=ye({styles:{popper:{position:D(i).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return Ge(i,l=>{const c=D(s);c&&c.setOptions(l)},{deep:!0}),Ge([t,e],([l,c])=>{a(),!(!l||!c)&&(s.value=VM(l,c,D(i)))}),un(()=>{a()}),{state:ae(()=>{var l;return{...((l=D(s))==null?void 0:l.state)||{}}}),styles:ae(()=>D(o).styles),attributes:ae(()=>D(o).attributes),update:()=>{var l;return(l=D(s))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=D(s))==null?void 0:l.forceUpdate()},instanceRef:ae(()=>D(s))}};function e4(t){const e=Object.keys(t.elements),n=Cu(e.map(i=>[i,t.styles[i]||{}])),r=Cu(e.map(i=>[i,t.attributes[i]]));return{styles:n,attributes:r}}const t4=0,n4=t=>{const{popperInstanceRef:e,contentRef:n,triggerRef:r,role:i}=Je(eg,void 0),s=ye(),o=ae(()=>t.arrowOffset),a=ae(()=>({name:"eventListeners",enabled:!!t.visible})),l=ae(()=>{var m;const y=D(s),_=(m=D(o))!=null?m:t4;return{name:"arrow",enabled:!fD(y),options:{element:y,padding:_}}}),c=ae(()=>({onFirstUpdate:()=>{g()},...KM(t,[D(l),D(a)])})),u=ae(()=>qM(t.referenceEl)||D(r)),{attributes:f,state:d,styles:h,update:g,forceUpdate:p,instanceRef:v}=QM(u,n,c);return Ge(v,m=>e.value=m,{flush:"sync"}),en(()=>{Ge(()=>{var m,y;return(y=(m=D(u))==null?void 0:m.getBoundingClientRect)==null?void 0:y.call(m)},()=>{g()})}),un(()=>{e.value=void 0}),{attributes:f,arrowRef:s,contentRef:n,instanceRef:v,state:d,styles:h,role:i,forceUpdate:p,update:g}},r4=(t,{attributes:e,styles:n,role:r})=>{const{nextZIndex:i}=sw(),s=wt("popper"),o=ae(()=>D(e).popper),a=ye($n(t.zIndex)?t.zIndex:i()),l=ae(()=>[s.b(),s.is("pure",t.pure),s.is(t.effect),t.popperClass]),c=ae(()=>[{zIndex:D(a)},D(n).popper,t.popperStyle||{}]),u=ae(()=>r.value==="dialog"?"false":void 0),f=ae(()=>D(n).arrow||{});return{ariaModal:u,arrowStyle:f,contentAttrs:o,contentClass:l,contentStyle:c,contentZIndex:a,updateZIndex:()=>{a.value=$n(t.zIndex)?t.zIndex:i()}}},i4=De({name:"ElPopperContent",__name:"content",props:Bw,emits:XM,setup(t,{expose:e,emit:n}){const r=n,i=t,{focusStartRef:s,trapped:o,onFocusAfterReleased:a,onFocusAfterTrapped:l,onFocusInTrap:c,onFocusoutPrevented:u,onReleaseRequested:f}=YM(i,r),{attributes:d,arrowRef:h,contentRef:g,styles:p,instanceRef:v,role:m,update:y}=n4(i),{ariaModal:_,arrowStyle:b,contentAttrs:x,contentClass:E,contentStyle:T,updateZIndex:O}=r4(i,{styles:p,attributes:d,role:m}),k=Je(ku,void 0);_n(vw,{arrowStyle:b,arrowRef:h}),k&&_n(ku,{...k,addInputId:Ze,removeInputId:Ze});let I;const R=(P=!0)=>{y(),P&&O()},C=()=>{R(!1),i.visible&&i.focusOnShow?o.value=!0:i.visible===!1&&(o.value=!1)};return en(()=>{Ge(()=>i.triggerTargetEl,(P,S)=>{I?.(),I=void 0;const $=D(P||g.value),Z=D(S||g.value);co($)&&(I=Ge([m,()=>i.ariaLabel,_,()=>i.id],H=>{["role","aria-label","aria-modal","id"].forEach((K,Q)=>{Ko(H[Q])?$.removeAttribute(K):$.setAttribute(K,H[Q])})},{immediate:!0})),Z!==$&&co(Z)&&["role","aria-label","aria-modal","id"].forEach(H=>{Z.removeAttribute(H)})},{immediate:!0}),Ge(()=>i.visible,C,{immediate:!0})}),un(()=>{I?.(),I=void 0,g.value=void 0}),e({popperContentRef:g,popperInstanceRef:v,updatePopper:R,contentStyle:T}),(P,S)=>(le(),be("div",Xn({ref_key:"contentRef",ref:g},D(x),{style:D(T),class:D(E),tabindex:"-1",onMouseenter:S[0]||(S[0]=$=>P.$emit("mouseenter",$)),onMouseleave:S[1]||(S[1]=$=>P.$emit("mouseleave",$))}),[Ae(D(Cw),{loop:P.loop,trapped:D(o),"trap-on-focus-in":!0,"focus-trap-el":D(g),"focus-start-el":D(s),onFocusAfterTrapped:D(l),onFocusAfterReleased:D(a),onFocusin:D(c),onFocusoutPrevented:D(u),onReleaseRequested:D(f)},{default:Me(()=>[Ne(P.$slots,"default")]),_:3},8,["loop","trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var s4=Tt(i4,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const o4=lr(wI),dg=Symbol("elTooltip");function q0(){let t;const e=(r,i)=>{n(),t=window.setTimeout(r,i)},n=()=>window.clearTimeout(t);return mf(()=>n()),{registerTimeout:e,cancelTimeout:n}}const a4=gt({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),l4=({showAfter:t,hideAfter:e,autoClose:n,open:r,close:i})=>{const{registerTimeout:s}=q0(),{registerTimeout:o,cancelTimeout:a}=q0();return{onOpen:(u,f=D(t))=>{s(()=>{r(u);const d=D(n);$n(d)&&d>0&&o(()=>{i(u)},d)},f)},onClose:(u,f=D(e))=>{a(),s(()=>{i(u)},f)}}},jw=gt({...a4,...Bw,appendTo:{type:Gp.to.type},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:Pe(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...yf(["ariaLabel"])}),Nw=gt({...bw,disabled:Boolean,trigger:{type:Pe([String,Array]),default:"hover"},triggerKeys:{type:Pe(Array),default:()=>[Fs.enter,Fs.numpadEnter,Fs.space]},focusOnTarget:Boolean}),c4=vf({type:Pe(Boolean),default:null}),u4=vf({type:Pe(Function)}),f4=t=>{const e=`update:${t}`,n=`onUpdate:${t}`,r=[e],i={[t]:c4,[n]:u4};return{useModelToggle:({indicator:o,toggleReason:a,shouldHideWhenRouteChanges:l,shouldProceed:c,onShow:u,onHide:f})=>{const d=Jt(),{emit:h}=d,g=d.props,p=ae(()=>ze(g[n])),v=ae(()=>g[t]===null),m=T=>{o.value!==!0&&(o.value=!0,a&&(a.value=T),ze(u)&&u(T))},y=T=>{o.value!==!1&&(o.value=!1,a&&(a.value=T),ze(f)&&f(T))},_=T=>{if(g.disabled===!0||ze(c)&&!c())return;const O=p.value&&Gt;O&&h(e,!0),(v.value||!O)&&m(T)},b=T=>{if(g.disabled===!0||!Gt)return;const O=p.value&&Gt;O&&h(e,!1),(v.value||!O)&&y(T)},x=T=>{gf(T)&&(g.disabled&&T?p.value&&h(e,!1):o.value!==T&&(T?m():y()))},E=()=>{o.value?b():_()};return Ge(()=>g[t],x),l&&d.appContext.config.globalProperties.$route!==void 0&&Ge(()=>({...d.proxy.$route}),()=>{l.value&&o.value&&b()}),en(()=>{x(g[t])}),{hide:b,show:_,toggle:E,hasUpdateHandler:p}},useModelToggleProps:i,useModelToggleEmits:r}},{useModelToggleProps:h4,useModelToggleEmits:d4,useModelToggle:p4}=f4("visible"),g4=gt({...yw,...h4,...jw,...Nw,...Lw,showArrow:{type:Boolean,default:!0}}),m4=[...d4,"before-show","before-hide","show","hide","open","close"],Ld=(t,e)=>$e(t)?t.includes(e):t===e,Ks=(t,e,n)=>r=>{Ld(D(t),e)&&n(r)},v4=De({name:"ElTooltipTrigger",__name:"trigger",props:Nw,setup(t,{expose:e}){const n=t,r=wt("tooltip"),{controlled:i,id:s,open:o,onOpen:a,onClose:l,onToggle:c}=Je(dg,void 0),u=ye(null),f=()=>{if(D(i)||n.disabled)return!0},d=Jn(n,"trigger"),h=ti(f,Ks(d,"hover",b=>{a(b),n.focusOnTarget&&b.target&&Yt(()=>{Jp(b.target,{preventScroll:!0})})})),g=ti(f,Ks(d,"hover",l)),p=ti(f,Ks(d,"click",b=>{b.button===0&&c(b)})),v=ti(f,Ks(d,"focus",a)),m=ti(f,Ks(d,"focus",l)),y=ti(f,Ks(d,"contextmenu",b=>{b.preventDefault(),c(b)})),_=ti(f,b=>{const x=rg(b);n.triggerKeys.includes(x)&&(b.preventDefault(),c(b))});return e({triggerRef:u}),(b,x)=>(le(),Ve(D(AI),{id:D(s),"virtual-ref":b.virtualRef,open:D(o),"virtual-triggering":b.virtualTriggering,class:ke(D(r).e("trigger")),onBlur:D(m),onClick:D(p),onContextmenu:D(y),onFocus:D(v),onMouseenter:D(h),onMouseleave:D(g),onKeydown:D(_)},{default:Me(()=>[Ne(b.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var y4=Tt(v4,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const zw=()=>{const t=Ip(),e=qp(),n=ae(()=>`${t.value}-popper-container-${e.prefix}`),r=ae(()=>`#${n.value}`);return{id:n,selector:r}},b4=t=>{const e=document.createElement("div");return e.id=t,document.body.appendChild(e),e},_4=()=>{const{id:t,selector:e}=zw();return W1(()=>{Gt&&(document.body.querySelector(e.value)||b4(t.value))}),{id:t,selector:e}},w4=t=>!t&&t!==0?[]:$e(t)?t:[t],S4=De({name:"ElTooltipContent",inheritAttrs:!1,__name:"content",props:jw,setup(t,{expose:e}){const n=t,{selector:r}=zw(),i=wt("tooltip"),s=ye(),o=iw(()=>{var K;return(K=s.value)==null?void 0:K.popperContentRef});let a;const{controlled:l,id:c,open:u,trigger:f,onClose:d,onOpen:h,onShow:g,onHide:p,onBeforeShow:v,onBeforeHide:m}=Je(dg,void 0),y=ae(()=>n.transition||`${i.namespace.value}-fade-in-linear`),_=ae(()=>n.persistent);un(()=>{a?.()});const b=ae(()=>D(_)?!0:D(u)),x=ae(()=>n.disabled?!1:D(u)),E=ae(()=>n.appendTo||r.value),T=ae(()=>{var K;return(K=n.style)!=null?K:{}}),O=ye(!0),k=()=>{p(),H()&&Jp(document.body,{preventScroll:!0}),O.value=!0},I=()=>{if(D(l))return!0},R=ti(I,()=>{n.enterable&&Ld(D(f),"hover")&&h()}),C=ti(I,()=>{Ld(D(f),"hover")&&d()}),P=()=>{var K,Q;(Q=(K=s.value)==null?void 0:K.updatePopper)==null||Q.call(K),v?.()},S=()=>{m?.()},$=()=>{g()},Z=()=>{n.virtualTriggering||d()},H=K=>{var Q;const ce=(Q=s.value)==null?void 0:Q.popperContentRef,Y=K?.relatedTarget||document.activeElement;return ce?.contains(Y)};return Ge(()=>D(u),K=>{K?(O.value=!1,a=SD(o,()=>{if(D(l))return;w4(D(f)).every(ce=>ce!=="hover"&&ce!=="focus")&&d()},{detectIframe:!0})):a?.()},{flush:"post"}),Ge(()=>n.content,()=>{var K,Q;(Q=(K=s.value)==null?void 0:K.updatePopper)==null||Q.call(K)}),e({contentRef:s,isFocusInsideContent:H}),(K,Q)=>(le(),Ve(D(fw),{disabled:!K.teleported,to:E.value},{default:Me(()=>[b.value||!O.value?(le(),Ve(cf,{key:0,name:y.value,appear:!_.value,onAfterLeave:k,onBeforeEnter:P,onAfterEnter:$,onBeforeLeave:S,persisted:""},{default:Me(()=>[wl(Ae(D(s4),Xn({id:D(c),ref_key:"contentRef",ref:s},K.$attrs,{"aria-label":K.ariaLabel,"aria-hidden":O.value,"boundaries-padding":K.boundariesPadding,"fallback-placements":K.fallbackPlacements,"gpu-acceleration":K.gpuAcceleration,offset:K.offset,placement:K.placement,"popper-options":K.popperOptions,"arrow-offset":K.arrowOffset,strategy:K.strategy,effect:K.effect,enterable:K.enterable,pure:K.pure,"popper-class":K.popperClass,"popper-style":[K.popperStyle,T.value],"reference-el":K.referenceEl,"trigger-target-el":K.triggerTargetEl,visible:x.value,"z-index":K.zIndex,loop:K.loop,onMouseenter:D(R),onMouseleave:D(C),onBlur:Z,onClose:D(d)}),{default:Me(()=>[Ne(K.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","arrow-offset","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","loop","onMouseenter","onMouseleave","onClose"]),[[uf,x.value]])]),_:3},8,["name","appear"])):je("v-if",!0)]),_:3},8,["disabled","to"]))}});var x4=Tt(S4,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const C4=["innerHTML"],T4={key:1},E4=De({name:"ElTooltip",__name:"tooltip",props:g4,emits:m4,setup(t,{expose:e,emit:n}){const r=t,i=n;_4();const s=wt("tooltip"),o=Eu(),a=ye(),l=ye(),c=()=>{var b;const x=D(a);x&&((b=x.popperInstanceRef)==null||b.update())},u=ye(!1),f=ye(),{show:d,hide:h,hasUpdateHandler:g}=p4({indicator:u,toggleReason:f}),{onOpen:p,onClose:v}=l4({showAfter:Jn(r,"showAfter"),hideAfter:Jn(r,"hideAfter"),autoClose:Jn(r,"autoClose"),open:d,close:h}),m=ae(()=>gf(r.visible)&&!g.value),y=ae(()=>[s.b(),r.popperClass]);_n(dg,{controlled:m,id:o,open:Eo(u),trigger:Jn(r,"trigger"),onOpen:p,onClose:v,onToggle:b=>{D(u)?v(b):p(b)},onShow:()=>{i("show",f.value)},onHide:()=>{i("hide",f.value)},onBeforeShow:()=>{i("before-show",f.value)},onBeforeHide:()=>{i("before-hide",f.value)},updatePopper:c}),Ge(()=>r.disabled,b=>{b&&u.value&&(u.value=!1)});const _=b=>{var x;return(x=l.value)==null?void 0:x.isFocusInsideContent(b)};return V1(()=>u.value&&h()),un(()=>{f.value=void 0}),e({popperRef:a,contentRef:l,isFocusInsideContent:_,updatePopper:c,onOpen:p,onClose:v,hide:h}),(b,x)=>(le(),Ve(D(o4),{ref_key:"popperRef",ref:a,role:b.role},{default:Me(()=>[Ae(y4,{disabled:b.disabled,trigger:b.trigger,"trigger-keys":b.triggerKeys,"virtual-ref":b.virtualRef,"virtual-triggering":b.virtualTriggering,"focus-on-target":b.focusOnTarget},{default:Me(()=>[b.$slots.default?Ne(b.$slots,"default",{key:0}):je("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering","focus-on-target"]),Ae(x4,{ref_key:"contentRef",ref:l,"aria-label":b.ariaLabel,"boundaries-padding":b.boundariesPadding,content:b.content,disabled:b.disabled,effect:b.effect,enterable:b.enterable,"fallback-placements":b.fallbackPlacements,"hide-after":b.hideAfter,"gpu-acceleration":b.gpuAcceleration,offset:b.offset,persistent:b.persistent,"popper-class":y.value,"popper-style":b.popperStyle,placement:b.placement,"popper-options":b.popperOptions,"arrow-offset":b.arrowOffset,pure:b.pure,"raw-content":b.rawContent,"reference-el":b.referenceEl,"trigger-target-el":b.triggerTargetEl,"show-after":b.showAfter,strategy:b.strategy,teleported:b.teleported,transition:b.transition,"virtual-triggering":b.virtualTriggering,"z-index":b.zIndex,"append-to":b.appendTo,loop:b.loop},{default:Me(()=>[Ne(b.$slots,"content",{},()=>[b.rawContent?(le(),be("span",{key:0,innerHTML:b.content},null,8,C4)):(le(),be("span",T4,ln(b.content),1))]),b.showArrow?(le(),Ve(D(xI),{key:0})):je("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","arrow-offset","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to","loop"])]),_:3},8,["role"]))}});var k4=Tt(E4,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const O4=lr(k4),$w=Symbol("buttonGroupContextKey"),Uw=({from:t,replacement:e,scope:n,version:r,ref:i,type:s="API"},o)=>{Ge(()=>D(o),a=>{},{immediate:!0})},A4=(t,e)=>{Uw({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},ae(()=>t.type==="text"));const n=Je($w,void 0),r=cw("button"),{form:i}=pw(),s=mw(ae(()=>n?.size)),o=Us(),a=ye(),l=Tp(),c=ae(()=>{var m;return t.type||n?.type||((m=r.value)==null?void 0:m.type)||""}),u=ae(()=>{var m,y,_;return(_=(y=t.autoInsertSpace)!=null?y:(m=r.value)==null?void 0:m.autoInsertSpace)!=null?_:!1}),f=ae(()=>{var m,y,_;return(_=(y=t.plain)!=null?y:(m=r.value)==null?void 0:m.plain)!=null?_:!1}),d=ae(()=>{var m,y,_;return(_=(y=t.round)!=null?y:(m=r.value)==null?void 0:m.round)!=null?_:!1}),h=ae(()=>{var m,y,_;return(_=(y=t.text)!=null?y:(m=r.value)==null?void 0:m.text)!=null?_:!1}),g=ae(()=>t.tag==="button"?{ariaDisabled:o.value||t.loading,disabled:o.value||t.loading,autofocus:t.autofocus,type:t.nativeType}:{}),p=ae(()=>{var m;const y=(m=l.default)==null?void 0:m.call(l);if(u.value&&y?.length===1){const _=y[0];if(_?.type===Xo){const b=_.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(b.trim())}}return!1});return{_disabled:o,_size:s,_type:c,_ref:a,_props:g,_plain:f,_round:d,_text:h,shouldAddSpace:p,handleClick:m=>{if(o.value||t.loading){m.stopPropagation();return}t.nativeType==="reset"&&i?.resetFields(),e("click",m)}}},P4=["default","primary","success","warning","info","danger","text",""],F4=["button","submit","reset"],Bd=gt({size:lw,disabled:{type:Boolean,default:void 0},type:{type:String,values:P4,default:""},icon:{type:Ps},nativeType:{type:String,values:F4,default:"button"},loading:Boolean,loadingIcon:{type:Ps,default:()=>Kp},plain:{type:Boolean,default:void 0},text:{type:Boolean,default:void 0},link:Boolean,bg:Boolean,autofocus:Boolean,round:{type:Boolean,default:void 0},circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Pe([String,Object]),default:"button"}}),D4={click:t=>t instanceof MouseEvent};function Zt(t,e){I4(t)&&(t="100%");var n=M4(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function Gl(t){return Math.min(1,Math.max(0,t))}function I4(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function M4(t){return typeof t=="string"&&t.indexOf("%")!==-1}function Hw(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Wl(t){return t<=1?"".concat(Number(t)*100,"%"):t}function Cs(t){return t.length===1?"0"+t:String(t)}function R4(t,e,n){return{r:Zt(t,255)*255,g:Zt(e,255)*255,b:Zt(n,255)*255}}function Z0(t,e,n){t=Zt(t,255),e=Zt(e,255),n=Zt(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),s=0,o=0,a=(r+i)/2;if(r===i)o=0,s=0;else{var l=r-i;switch(o=a>.5?l/(2-r-i):l/(r+i),r){case t:s=(e-n)/l+(e<n?6:0);break;case e:s=(n-t)/l+2;break;case n:s=(t-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function oh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function L4(t,e,n){var r,i,s;if(t=Zt(t,360),e=Zt(e,100),n=Zt(n,100),e===0)i=n,s=n,r=n;else{var o=n<.5?n*(1+e):n+e-n*e,a=2*n-o;r=oh(a,o,t+1/3),i=oh(a,o,t),s=oh(a,o,t-1/3)}return{r:r*255,g:i*255,b:s*255}}function J0(t,e,n){t=Zt(t,255),e=Zt(e,255),n=Zt(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),s=0,o=r,a=r-i,l=r===0?0:a/r;if(r===i)s=0;else{switch(r){case t:s=(e-n)/a+(e<n?6:0);break;case e:s=(n-t)/a+2;break;case n:s=(t-e)/a+4;break}s/=6}return{h:s,s:l,v:o}}function B4(t,e,n){t=Zt(t,360)*6,e=Zt(e,100),n=Zt(n,100);var r=Math.floor(t),i=t-r,s=n*(1-e),o=n*(1-i*e),a=n*(1-(1-i)*e),l=r%6,c=[n,o,s,s,a,n][l],u=[a,n,n,o,s,s][l],f=[s,s,a,n,n,o][l];return{r:c*255,g:u*255,b:f*255}}function Q0(t,e,n,r){var i=[Cs(Math.round(t).toString(16)),Cs(Math.round(e).toString(16)),Cs(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function j4(t,e,n,r,i){var s=[Cs(Math.round(t).toString(16)),Cs(Math.round(e).toString(16)),Cs(Math.round(n).toString(16)),Cs(N4(r))];return i&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function N4(t){return Math.round(parseFloat(t)*255).toString(16)}function ev(t){return Dn(t)/255}function Dn(t){return parseInt(t,16)}function z4(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var jd={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function $4(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,s=null,o=!1,a=!1;return typeof t=="string"&&(t=V4(t)),typeof t=="object"&&(Kr(t.r)&&Kr(t.g)&&Kr(t.b)?(e=R4(t.r,t.g,t.b),o=!0,a=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Kr(t.h)&&Kr(t.s)&&Kr(t.v)?(r=Wl(t.s),i=Wl(t.v),e=B4(t.h,r,i),o=!0,a="hsv"):Kr(t.h)&&Kr(t.s)&&Kr(t.l)&&(r=Wl(t.s),s=Wl(t.l),e=L4(t.h,r,s),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=Hw(n),{ok:o,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var U4="[-\\+]?\\d+%?",H4="[-\\+]?\\d*\\.\\d+%?",Yi="(?:".concat(H4,")|(?:").concat(U4,")"),ah="[\\s|\\(]+(".concat(Yi,")[,|\\s]+(").concat(Yi,")[,|\\s]+(").concat(Yi,")\\s*\\)?"),lh="[\\s|\\(]+(".concat(Yi,")[,|\\s]+(").concat(Yi,")[,|\\s]+(").concat(Yi,")[,|\\s]+(").concat(Yi,")\\s*\\)?"),ur={CSS_UNIT:new RegExp(Yi),rgb:new RegExp("rgb"+ah),rgba:new RegExp("rgba"+lh),hsl:new RegExp("hsl"+ah),hsla:new RegExp("hsla"+lh),hsv:new RegExp("hsv"+ah),hsva:new RegExp("hsva"+lh),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function V4(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(jd[t])t=jd[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=ur.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=ur.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=ur.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=ur.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=ur.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=ur.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=ur.hex8.exec(t),n?{r:Dn(n[1]),g:Dn(n[2]),b:Dn(n[3]),a:ev(n[4]),format:e?"name":"hex8"}:(n=ur.hex6.exec(t),n?{r:Dn(n[1]),g:Dn(n[2]),b:Dn(n[3]),format:e?"name":"hex"}:(n=ur.hex4.exec(t),n?{r:Dn(n[1]+n[1]),g:Dn(n[2]+n[2]),b:Dn(n[3]+n[3]),a:ev(n[4]+n[4]),format:e?"name":"hex8"}:(n=ur.hex3.exec(t),n?{r:Dn(n[1]+n[1]),g:Dn(n[2]+n[2]),b:Dn(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function Kr(t){return!!ur.CSS_UNIT.exec(String(t))}var G4=(function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var r;if(e instanceof t)return e;typeof e=="number"&&(e=z4(e)),this.originalInput=e;var i=$4(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=n.format)!==null&&r!==void 0?r:i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,r,i,s=e.r/255,o=e.g/255,a=e.b/255;return s<=.03928?n=s/12.92:n=Math.pow((s+.055)/1.055,2.4),o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),a<=.03928?i=a/12.92:i=Math.pow((a+.055)/1.055,2.4),.2126*n+.7152*r+.0722*i},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=Hw(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=J0(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=J0(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(r,"%, ").concat(i,"%)"):"hsva(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=Z0(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=Z0(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)"):"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),Q0(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),j4(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(r,")"):"rgba(".concat(e,", ").concat(n,", ").concat(r,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(Zt(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(Zt(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+Q0(this.r,this.g,this.b,!1),n=0,r=Object.entries(jd);n<r.length;n++){var i=r[n],s=i[0],o=i[1];if(e===o)return s}return!1},t.prototype.toString=function(e){var n=!!e;e=e??this.format;var r=!1,i=this.a<1&&this.a>=0,s=!n&&i&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=Gl(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=Gl(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=Gl(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=Gl(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var r=this.toRgb(),i=new t(e).toRgb(),s=n/100,o={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return new t(o)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var r=this.toHsl(),i=360/n,s=[this];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(new t(r));return s},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),r=n.h,i=n.s,s=n.v,o=[],a=1/e;e--;)o.push(new t({h:r,s:i,v:s})),s=(s+a)%1;return o},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),r=new t(e).toRgb(),i=n.a+r.a*(1-n.a);return new t({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),r=n.h,i=[this],s=360/e,o=1;o<e;o++)i.push(new t({h:(r+o*s)%360,s:n.s,l:n.l}));return i},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t})();function Bi(t,e=20){return t.mix("#141414",e).toString()}function W4(t){const e=Us(),n=wt("button");return ae(()=>{let r={},i=t.color;if(i){const s=i.match(/var\((.*?)\)/);s&&(i=window.getComputedStyle(window.document.documentElement).getPropertyValue(s[1]));const o=new G4(i),a=t.dark?o.tint(20).toString():Bi(o,20);if(t.plain)r=n.cssVarBlock({"bg-color":t.dark?Bi(o,90):o.tint(90).toString(),"text-color":i,"border-color":t.dark?Bi(o,50):o.tint(50).toString(),"hover-text-color":`var(${n.cssVarName("color-white")})`,"hover-bg-color":i,"hover-border-color":i,"active-bg-color":a,"active-text-color":`var(${n.cssVarName("color-white")})`,"active-border-color":a}),e.value&&(r[n.cssVarBlockName("disabled-bg-color")]=t.dark?Bi(o,90):o.tint(90).toString(),r[n.cssVarBlockName("disabled-text-color")]=t.dark?Bi(o,50):o.tint(50).toString(),r[n.cssVarBlockName("disabled-border-color")]=t.dark?Bi(o,80):o.tint(80).toString());else{const l=t.dark?Bi(o,30):o.tint(30).toString(),c=o.isDark()?`var(${n.cssVarName("color-white")})`:`var(${n.cssVarName("color-black")})`;if(r=n.cssVarBlock({"bg-color":i,"text-color":c,"border-color":i,"hover-bg-color":l,"hover-text-color":c,"hover-border-color":l,"active-bg-color":a,"active-border-color":a}),e.value){const u=t.dark?Bi(o,50):o.tint(50).toString();r[n.cssVarBlockName("disabled-bg-color")]=u,r[n.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${n.cssVarName("color-white")})`,r[n.cssVarBlockName("disabled-border-color")]=u}}}return r})}const X4=De({name:"ElButton",__name:"button",props:Bd,emits:D4,setup(t,{expose:e,emit:n}){const r=t,i=n,s=W4(r),o=wt("button"),{_ref:a,_size:l,_type:c,_disabled:u,_props:f,_plain:d,_round:h,_text:g,shouldAddSpace:p,handleClick:v}=A4(r,i),m=ae(()=>[o.b(),o.m(c.value),o.m(l.value),o.is("disabled",u.value),o.is("loading",r.loading),o.is("plain",d.value),o.is("round",h.value),o.is("circle",r.circle),o.is("text",g.value),o.is("link",r.link),o.is("has-bg",r.bg)]);return e({ref:a,size:l,type:c,disabled:u,shouldAddSpace:p}),(y,_)=>(le(),Ve(jn(y.tag),Xn({ref_key:"_ref",ref:a},D(f),{class:m.value,style:D(s),onClick:D(v)}),{default:Me(()=>[y.loading?(le(),be(pt,{key:0},[y.$slots.loading?Ne(y.$slots,"loading",{key:0}):(le(),Ve(D(Lt),{key:1,class:ke(D(o).is("loading"))},{default:Me(()=>[(le(),Ve(jn(y.loadingIcon)))]),_:1},8,["class"]))],64)):y.icon||y.$slots.icon?(le(),Ve(D(Lt),{key:1},{default:Me(()=>[y.icon?(le(),Ve(jn(y.icon),{key:0})):Ne(y.$slots,"icon",{key:1})]),_:3})):je("v-if",!0),y.$slots.default?(le(),be("span",{key:2,class:ke({[D(o).em("text","expand")]:D(p)})},[Ne(y.$slots,"default")],2)):je("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Y4=Tt(X4,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const K4={size:Bd.size,type:Bd.type,direction:{type:Pe(String),values:["horizontal","vertical"],default:"horizontal"}},q4=De({name:"ElButtonGroup",__name:"button-group",props:K4,setup(t){const e=t;_n($w,Go({size:Jn(e,"size"),type:Jn(e,"type")}));const n=wt("button");return(r,i)=>(le(),be("div",{class:ke([D(n).b("group"),D(n).bm("group",e.direction)])},[Ne(r.$slots,"default")],2))}});var Vw=Tt(q4,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);const Gw=lr(Y4,{ButtonGroup:Vw});uw(Vw);var Xl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ww(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eu=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(eu||{});const tv=t=>$n(t)||at(t)||$e(t),Z4=gt({accordion:Boolean,modelValue:{type:Pe([Array,String,Number]),default:()=>cl([])},expandIconPosition:{type:Pe([String]),default:"right"},beforeCollapse:{type:Pe(Function)}}),J4={[Zi]:tv,[Tu]:tv},Xw=Symbol("collapseContextKey"),Q4="ElCollapse",e5=(t,e)=>{const n=ye(r0(t.modelValue)),r=o=>{n.value=o;const a=t.accordion?n.value[0]:n.value;e(Zi,a),e(Tu,a)},i=o=>{if(t.accordion)r([n.value[0]===o?"":o]);else{const a=[...n.value],l=a.indexOf(o);l>-1?a.splice(l,1):a.push(o),r(a)}},s=async o=>{const{beforeCollapse:a}=t;if(!a){i(o);return}const l=a(o);[lu(l),gf(l)].includes(!0)||qo(Q4,"beforeCollapse must return type `Promise<boolean>` or `boolean`"),lu(l)?l.then(u=>{u!==!1&&i(o)}).catch(u=>{}):l&&i(o)};return Ge(()=>t.modelValue,()=>n.value=r0(t.modelValue),{deep:!0}),_n(Xw,{activeNames:n,handleItemClick:s}),{activeNames:n,setActiveNames:r}},t5=t=>{const e=wt("collapse");return{rootKls:ae(()=>[e.b(),e.b(`icon-position-${t.expandIconPosition}`)])}},n5=De({name:"ElCollapse",__name:"collapse",props:Z4,emits:J4,setup(t,{expose:e,emit:n}){const r=t,i=n,{activeNames:s,setActiveNames:o}=e5(r,i),{rootKls:a}=t5(r);return e({activeNames:s,setActiveNames:o}),(l,c)=>(le(),be("div",{class:ke(D(a))},[Ne(l.$slots,"default")],2))}});var r5=Tt(n5,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const i5=De({name:"ElCollapseTransition",__name:"collapse-transition",setup(t){const e=wt("collapse-transition"),n=i=>{i.style.maxHeight="",i.style.overflow=i.dataset.oldOverflow,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom},r={beforeEnter(i){i.dataset||(i.dataset={}),i.dataset.oldPaddingTop=i.style.paddingTop,i.dataset.oldPaddingBottom=i.style.paddingBottom,i.style.height&&(i.dataset.elExistsHeight=i.style.height),i.style.maxHeight=0,i.style.paddingTop=0,i.style.paddingBottom=0},enter(i){requestAnimationFrame(()=>{i.dataset.oldOverflow=i.style.overflow,i.dataset.elExistsHeight?i.style.maxHeight=i.dataset.elExistsHeight:i.scrollHeight!==0?i.style.maxHeight=`${i.scrollHeight}px`:i.style.maxHeight=0,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom,i.style.overflow="hidden"})},afterEnter(i){i.style.maxHeight="",i.style.overflow=i.dataset.oldOverflow},enterCancelled(i){n(i)},beforeLeave(i){i.dataset||(i.dataset={}),i.dataset.oldPaddingTop=i.style.paddingTop,i.dataset.oldPaddingBottom=i.style.paddingBottom,i.dataset.oldOverflow=i.style.overflow,i.style.maxHeight=`${i.scrollHeight}px`,i.style.overflow="hidden"},leave(i){i.scrollHeight!==0&&(i.style.maxHeight=0,i.style.paddingTop=0,i.style.paddingBottom=0)},afterLeave(i){n(i)},leaveCancelled(i){n(i)}};return(i,s)=>(le(),Ve(cf,Xn({name:D(e).b()},tT(r)),{default:Me(()=>[Ne(i.$slots,"default")]),_:3},16,["name"]))}});var s5=Tt(i5,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);const o5=lr(s5),a5=gt({title:{type:String,default:""},name:{type:Pe([String,Number]),default:void 0},icon:{type:Ps,default:ZD},disabled:Boolean}),l5=t=>{const e=Je(Xw),{namespace:n}=wt("collapse"),r=ye(!1),i=ye(!1),s=qp(),o=ae(()=>s.current++),a=ae(()=>{var d;return(d=t.name)!=null?d:`${n.value}-id-${s.prefix}-${D(o)}`}),l=ae(()=>e?.activeNames.value.includes(D(a)));return{focusing:r,id:o,isActive:l,handleFocus:()=>{setTimeout(()=>{i.value?i.value=!1:r.value=!0},50)},handleHeaderClick:d=>{if(t.disabled)return;const h=d.target;h?.closest("input, textarea, select")||(e?.handleItemClick(D(a)),r.value=!1,i.value=!0)},handleEnterClick:d=>{const h=d.target;h?.closest("input, textarea, select")||(d.preventDefault(),e?.handleItemClick(D(a)))}}},c5=(t,{focusing:e,isActive:n,id:r})=>{const i=wt("collapse"),s=ae(()=>[i.b("item"),i.is("active",D(n)),i.is("disabled",t.disabled)]),o=ae(()=>[i.be("item","header"),i.is("active",D(n)),{focusing:D(e)&&!t.disabled}]),a=ae(()=>[i.be("item","arrow"),i.is("active",D(n))]),l=ae(()=>[i.be("item","title")]),c=ae(()=>i.be("item","wrap")),u=ae(()=>i.be("item","content")),f=ae(()=>i.b(`content-${D(r)}`)),d=ae(()=>i.b(`head-${D(r)}`));return{itemTitleKls:l,arrowKls:a,headKls:o,rootKls:s,itemWrapperKls:c,itemContentKls:u,scopedContentId:f,scopedHeadId:d}},u5=["id","aria-expanded","aria-controls","aria-describedby","tabindex","aria-disabled"],f5=["id","aria-hidden","aria-labelledby"],h5=De({name:"ElCollapseItem",__name:"collapse-item",props:a5,setup(t,{expose:e}){const n=t,{focusing:r,id:i,isActive:s,handleFocus:o,handleHeaderClick:a,handleEnterClick:l}=l5(n),{arrowKls:c,headKls:u,rootKls:f,itemTitleKls:d,itemWrapperKls:h,itemContentKls:g,scopedContentId:p,scopedHeadId:v}=c5(n,{focusing:r,isActive:s,id:i});return e({isActive:s}),(m,y)=>(le(),be("div",{class:ke(D(f))},[Ee("div",{id:D(v),class:ke(D(u)),"aria-expanded":D(s),"aria-controls":D(p),"aria-describedby":D(p),tabindex:m.disabled?void 0:0,"aria-disabled":m.disabled,role:"button",onClick:y[0]||(y[0]=(..._)=>D(a)&&D(a)(..._)),onKeydown:y[1]||(y[1]=Pp(wr((..._)=>D(l)&&D(l)(..._),["stop"]),["space","enter"])),onFocus:y[2]||(y[2]=(..._)=>D(o)&&D(o)(..._)),onBlur:y[3]||(y[3]=_=>r.value=!1)},[Ee("span",{class:ke(D(d))},[Ne(m.$slots,"title",{isActive:D(s)},()=>[of(ln(m.title),1)])],2),Ne(m.$slots,"icon",{isActive:D(s)},()=>[Ae(D(Lt),{class:ke(D(c))},{default:Me(()=>[(le(),Ve(jn(m.icon)))]),_:1},8,["class"])])],42,u5),Ae(D(o5),null,{default:Me(()=>[wl(Ee("div",{id:D(p),role:"region",class:ke(D(h)),"aria-hidden":!D(s),"aria-labelledby":D(v)},[Ee("div",{class:ke(D(g))},[Ne(m.$slots,"default")],2)],10,f5),[[uf,D(s)]])]),_:3})],2))}});var Yw=Tt(h5,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const d5=lr(r5,{CollapseItem:Yw}),p5=uw(Yw),Kw=t=>{if(!t)return{onClick:Ze,onMousedown:Ze,onMouseup:Ze};let e=!1,n=!1;return{onClick:o=>{e&&n&&t(o),e=n=!1},onMousedown:o=>{e=o.target===o.currentTarget},onMouseup:o=>{n=o.target===o.currentTarget}}},g5=gt({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:Pe([String,Array,Object])},zIndex:{type:Pe([String,Number])}}),m5={click:t=>t instanceof MouseEvent},v5="overlay";var y5=De({name:"ElOverlay",props:g5,emits:m5,setup(t,{slots:e,emit:n}){const r=wt(v5),i=l=>{n("click",l)},{onClick:s,onMousedown:o,onMouseup:a}=Kw(t.customMaskEvent?void 0:i);return()=>t.mask?Ae("div",{class:[r.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:s,onMousedown:o,onMouseup:a},[Ne(e,"default")],eu.STYLE|eu.CLASS|eu.PROPS,["onClick","onMouseup","onMousedown"]):lf("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Ne(e,"default")])}});const b5=y5,qw=Symbol("dialogInjectionKey"),nv="dialog-fade",Zw=gt({center:Boolean,alignCenter:{type:Boolean,default:void 0},closeIcon:{type:Ps},draggable:{type:Boolean,default:void 0},overflow:{type:Boolean,default:void 0},fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),_5={close:()=>!0},w5=(t,e,n,r)=>{const i={offsetX:0,offsetY:0},s=ye(!1),o=(d,h)=>{if(t.value){const{offsetX:g,offsetY:p}=i,v=t.value.getBoundingClientRect(),m=v.left,y=v.top,_=v.width,b=v.height,x=document.documentElement.clientWidth,E=document.documentElement.clientHeight,T=-m+g,O=-y+p,k=x-m-_+g,I=E-y-(b<E?b:0)+p;r?.value||(d=Math.min(Math.max(d,T),k),h=Math.min(Math.max(h,O),I)),i.offsetX=d,i.offsetY=h,t.value.style.transform=`translate(${Io(d)}, ${Io(h)})`}},a=d=>{const h=d.clientX,g=d.clientY,{offsetX:p,offsetY:v}=i,m=_=>{s.value||(s.value=!0);const b=p+_.clientX-h,x=v+_.clientY-g;o(b,x)},y=()=>{s.value=!1,document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",y)},l=()=>{e.value&&t.value&&(e.value.addEventListener("mousedown",a),window.addEventListener("resize",f))},c=()=>{e.value&&t.value&&(e.value.removeEventListener("mousedown",a),window.removeEventListener("resize",f))},u=()=>{i.offsetX=0,i.offsetY=0,t.value&&(t.value.style.transform="")},f=()=>{const{offsetX:d,offsetY:h}=i;o(d,h)};return en(()=>{F1(()=>{n.value?l():c()})}),un(()=>{c()}),{isDragging:s,resetPosition:u,updatePosition:f}},S5=(...t)=>e=>{t.forEach(n=>{n.value=e})},x5=["aria-level"],C5=["aria-label"],T5=["id"],E5=De({name:"ElDialogContent",__name:"dialog-content",props:Zw,emits:_5,setup(t,{expose:e}){const{t:n}=ow(),{Close:r}=I3,i=t,{dialogRef:s,headerRef:o,bodyId:a,ns:l,style:c}=Je(qw),{focusTrapRef:u}=Je(Sw),f=S5(u,s),d=ae(()=>!!i.draggable),h=ae(()=>!!i.overflow),{resetPosition:g,updatePosition:p,isDragging:v}=w5(s,o,d,h),m=ae(()=>[l.b(),l.is("fullscreen",i.fullscreen),l.is("draggable",d.value),l.is("dragging",v.value),l.is("align-center",!!i.alignCenter),{[l.m("center")]:i.center}]);return e({resetPosition:g,updatePosition:p}),(y,_)=>(le(),be("div",{ref:D(f),class:ke(m.value),style:Dt(D(c)),tabindex:"-1"},[Ee("header",{ref_key:"headerRef",ref:o,class:ke([D(l).e("header"),y.headerClass,{"show-close":y.showClose}])},[Ne(y.$slots,"header",{},()=>[Ee("span",{role:"heading","aria-level":y.ariaLevel,class:ke(D(l).e("title"))},ln(y.title),11,x5)]),y.showClose?(le(),be("button",{key:0,"aria-label":D(n)("el.dialog.close"),class:ke(D(l).e("headerbtn")),type:"button",onClick:_[0]||(_[0]=b=>y.$emit("close"))},[Ae(D(Lt),{class:ke(D(l).e("close"))},{default:Me(()=>[(le(),Ve(jn(y.closeIcon||D(r))))]),_:1},8,["class"])],10,C5)):je("v-if",!0)],2),Ee("div",{id:D(a),class:ke([D(l).e("body"),y.bodyClass])},[Ne(y.$slots,"default")],10,T5),y.$slots.footer?(le(),be("footer",{key:0,class:ke([D(l).e("footer"),y.footerClass])},[Ne(y.$slots,"footer")],2)):je("v-if",!0)],6))}});var k5=Tt(E5,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const O5=gt({...Zw,appendToBody:Boolean,appendTo:{type:Gp.to.type,default:"body"},beforeClose:{type:Pe(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:Pe([String,Object]),default:void 0}}),A5={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Zi]:t=>gf(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},P5=(t,e={})=>{kt(t)||qo("[useLockscreen]","You need to pass a ref param to this function");const n=e.ns||wt("popup"),r=ae(()=>n.bm("parent","hidden"));let i=0,s=!1,o="0";const a=()=>{setTimeout(()=>{typeof document>"u"||s&&document&&(document.body.style.width=o,VD(document.body,r.value))},200)};Ge(t,l=>{if(!l){a();return}s=!UD(document.body,r.value),s&&(o=document.body.style.width,HD(document.body,r.value)),i=WD(n.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,u=GD(document.body,"overflowY");i>0&&(c||u==="scroll")&&s&&(document.body.style.width=`calc(100% - ${i}px)`)}),a1(()=>a())},F5=(t,e)=>{var n;const i=Jt().emit,{nextZIndex:s}=sw();let o="";const a=Eu(),l=Eu(),c=ye(!1),u=ye(!1),f=ye(!1),d=ye((n=t.zIndex)!=null?n:s()),h=ye(!1);let g,p;const v=cw(),m=ae(()=>{var U,he;return(he=(U=v.value)==null?void 0:U.namespace)!=null?he:qc}),y=ae(()=>{var U;return(U=v.value)==null?void 0:U.dialog}),_=ae(()=>{const U={},he=`--${m.value}-dialog`;if(!t.fullscreen){t.top&&(U[`${he}-margin-top`]=t.top);const re=Io(t.width);re&&(U[`${he}-width`]=re)}return U}),b=ae(()=>{var U,he,re;return((re=(he=t.draggable)!=null?he:(U=y.value)==null?void 0:U.draggable)!=null?re:!1)&&!t.fullscreen}),x=ae(()=>{var U,he,re;return(re=(he=t.alignCenter)!=null?he:(U=y.value)==null?void 0:U.alignCenter)!=null?re:!1}),E=ae(()=>{var U,he,re;return(re=(he=t.overflow)!=null?he:(U=y.value)==null?void 0:U.overflow)!=null?re:!1}),T=ae(()=>x.value?{display:"flex"}:{}),O=ae(()=>{var U,he,re;const te=(re=(he=t.transition)!=null?he:(U=y.value)==null?void 0:U.transition)!=null?re:nv,Ce={name:te,onAfterEnter:k,onBeforeLeave:R,onAfterLeave:I};if(et(te)){const q={...te},ne=(se,de)=>_e=>{$e(se)?se.forEach(L=>{ze(L)&&L(_e)}):ze(se)&&se(_e),de()};return q.onAfterEnter=ne(q.onAfterEnter,k),q.onBeforeLeave=ne(q.onBeforeLeave,R),q.onAfterLeave=ne(q.onAfterLeave,I),q.name||(q.name=nv),q}return Ce});function k(){i("opened")}function I(){i("closed"),i(Zi,!1),t.destroyOnClose&&(f.value=!1),h.value=!1}function R(){h.value=!0,i("close")}function C(){p?.(),g?.(),t.openDelay&&t.openDelay>0?{stop:g}=w0(()=>Z(),t.openDelay):Z()}function P(){g?.(),p?.(),t.closeDelay&&t.closeDelay>0?{stop:p}=w0(()=>H(),t.closeDelay):H()}function S(){function U(he){he||(u.value=!0,c.value=!1)}t.beforeClose?t.beforeClose(U):P()}function $(){t.closeOnClickModal&&S()}function Z(){Gt&&(c.value=!0)}function H(){c.value=!1}function K(){i("openAutoFocus")}function Q(){i("closeAutoFocus")}function ce(U){var he;((he=U.detail)==null?void 0:he.focusReason)==="pointer"&&U.preventDefault()}t.lockScroll&&P5(c);function Y(){t.closeOnPressEscape&&S()}return Ge(()=>t.zIndex,()=>{var U;d.value=(U=t.zIndex)!=null?U:s()}),Ge(()=>t.modelValue,U=>{var he;U?(u.value=!1,C(),f.value=!0,d.value=(he=t.zIndex)!=null?he:s(),Yt(()=>{i("open"),e.value&&(e.value.parentElement.scrollTop=0,e.value.parentElement.scrollLeft=0,e.value.scrollTop=0)})):c.value&&P()}),Ge(()=>t.fullscreen,U=>{e.value&&(U?(o=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=o)}),en(()=>{t.modelValue&&(c.value=!0,f.value=!0,C())}),{afterEnter:k,afterLeave:I,beforeLeave:R,handleClose:S,onModalClick:$,close:P,doClose:H,onOpenAutoFocus:K,onCloseAutoFocus:Q,onCloseRequested:Y,onFocusoutPrevented:ce,titleId:a,bodyId:l,closed:u,style:_,overlayDialogStyle:T,rendered:f,visible:c,zIndex:d,transitionConfig:O,_draggable:b,_alignCenter:x,_overflow:E,closing:h}},D5=["aria-label","aria-labelledby","aria-describedby"],I5=De({name:"ElDialog",inheritAttrs:!1,__name:"dialog",props:O5,emits:A5,setup(t,{expose:e}){const n=t,r=Tp();Uw({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},ae(()=>!!r.title));const i=wt("dialog"),s=ye(),o=ye(),a=ye(),{visible:l,titleId:c,bodyId:u,style:f,overlayDialogStyle:d,rendered:h,transitionConfig:g,zIndex:p,_draggable:v,_alignCenter:m,_overflow:y,handleClose:_,onModalClick:b,onOpenAutoFocus:x,onCloseAutoFocus:E,onCloseRequested:T,onFocusoutPrevented:O,closing:k}=F5(n,s);_n(qw,{dialogRef:s,headerRef:o,bodyId:u,ns:i,rendered:h,style:f});const I=Kw(b),R=ae(()=>n.modalPenetrable&&!n.modal&&!n.fullscreen);return e({visible:l,dialogContentRef:a,resetPosition:()=>{var P;(P=a.value)==null||P.resetPosition()},handleClose:_}),(P,S)=>(le(),Ve(D(fw),{to:P.appendTo,disabled:P.appendTo!=="body"?!1:!P.appendToBody},{default:Me(()=>[Ae(cf,Xn(D(g),{persisted:""}),{default:Me(()=>{var $;return[wl(Ae(D(b5),{"custom-mask-event":"",mask:P.modal,"overlay-class":[($=P.modalClass)!=null?$:"",`${D(i).namespace.value}-modal-dialog`,D(i).is("penetrable",R.value)],"z-index":D(p)},{default:Me(()=>[Ee("div",{role:"dialog","aria-modal":"true","aria-label":P.title||void 0,"aria-labelledby":P.title?void 0:D(c),"aria-describedby":D(u),class:ke([`${D(i).namespace.value}-overlay-dialog`,D(i).is("closing",D(k))]),style:Dt(D(d)),onClick:S[0]||(S[0]=(...Z)=>D(I).onClick&&D(I).onClick(...Z)),onMousedown:S[1]||(S[1]=(...Z)=>D(I).onMousedown&&D(I).onMousedown(...Z)),onMouseup:S[2]||(S[2]=(...Z)=>D(I).onMouseup&&D(I).onMouseup(...Z))},[Ae(D(Cw),{loop:"",trapped:D(l),"focus-start-el":"container",onFocusAfterTrapped:D(x),onFocusAfterReleased:D(E),onFocusoutPrevented:D(O),onReleaseRequested:D(T)},{default:Me(()=>[D(h)?(le(),Ve(k5,Xn({key:0,ref_key:"dialogContentRef",ref:a},P.$attrs,{center:P.center,"align-center":D(m),"close-icon":P.closeIcon,draggable:D(v),overflow:D(y),fullscreen:P.fullscreen,"header-class":P.headerClass,"body-class":P.bodyClass,"footer-class":P.footerClass,"show-close":P.showClose,title:P.title,"aria-level":P.headerAriaLevel,onClose:D(_)}),vd({header:Me(()=>[P.$slots.title?Ne(P.$slots,"title",{key:1}):Ne(P.$slots,"header",{key:0,close:D(_),titleId:D(c),titleClass:D(i).e("title")})]),default:Me(()=>[Ne(P.$slots,"default")]),_:2},[P.$slots.footer?{name:"footer",fn:Me(()=>[Ne(P.$slots,"footer")]),key:"0"}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):je("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,D5)]),_:3},8,["mask","overlay-class","z-index"]),[[uf,D(l)]])]}),_:3},16)]),_:3},8,["to","disabled"]))}});var M5=Tt(I5,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const R5=lr(M5),L5=gt({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Pe(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Pe([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:Pe(Function),default:t=>`${t}%`}}),B5=["aria-valuenow"],j5={viewBox:"0 0 100 100"},N5=["d","stroke","stroke-linecap","stroke-width"],z5=["d","stroke","opacity","stroke-linecap","stroke-width"],$5={key:0},U5=De({name:"ElProgress",__name:"progress",props:L5,setup(t){const e={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},n=t,r=wt("progress"),i=ae(()=>{const _={width:`${n.percentage}%`,animationDuration:`${n.duration}s`},b=y(n.percentage);return b.includes("gradient")?_.background=b:_.backgroundColor=b,_}),s=ae(()=>(n.strokeWidth/n.width*100).toFixed(1)),o=ae(()=>["circle","dashboard"].includes(n.type)?Number.parseInt(`${50-Number.parseFloat(s.value)/2}`,10):0),a=ae(()=>{const _=o.value,b=n.type==="dashboard";return`
          M 50 50
          m 0 ${b?"":"-"}${_}
          a ${_} ${_} 0 1 1 0 ${b?"-":""}${_*2}
          a ${_} ${_} 0 1 1 0 ${b?"":"-"}${_*2}
          `}),l=ae(()=>2*Math.PI*o.value),c=ae(()=>n.type==="dashboard"?.75:1),u=ae(()=>`${-1*l.value*(1-c.value)/2}px`),f=ae(()=>({strokeDasharray:`${l.value*c.value}px, ${l.value}px`,strokeDashoffset:u.value})),d=ae(()=>({strokeDasharray:`${l.value*c.value*(n.percentage/100)}px, ${l.value}px`,strokeDashoffset:u.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),h=ae(()=>{let _;return n.color?_=y(n.percentage):_=e[n.status]||e.default,_}),g=ae(()=>n.status==="warning"?P3:n.type==="line"?n.status==="success"?Wp:Xp:n.status==="success"?dw:Yp),p=ae(()=>n.type==="line"?12+n.strokeWidth*.4:n.width*.111111+2),v=ae(()=>n.format(n.percentage));function m(_){const b=100/_.length;return _.map((E,T)=>at(E)?{color:E,percentage:(T+1)*b}:E).sort((E,T)=>E.percentage-T.percentage)}const y=_=>{var b;const{color:x}=n;if(ze(x))return x(_);if(at(x))return x;{const E=m(x);for(const T of E)if(T.percentage>_)return T.color;return(b=E[E.length-1])==null?void 0:b.color}};return(_,b)=>(le(),be("div",{class:ke([D(r).b(),D(r).m(_.type),D(r).is(_.status),{[D(r).m("without-text")]:!_.showText,[D(r).m("text-inside")]:_.textInside}]),role:"progressbar","aria-valuenow":_.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[_.type==="line"?(le(),be("div",{key:0,class:ke(D(r).b("bar"))},[Ee("div",{class:ke(D(r).be("bar","outer")),style:Dt({height:`${_.strokeWidth}px`})},[Ee("div",{class:ke([D(r).be("bar","inner"),{[D(r).bem("bar","inner","indeterminate")]:_.indeterminate},{[D(r).bem("bar","inner","striped")]:_.striped},{[D(r).bem("bar","inner","striped-flow")]:_.stripedFlow}]),style:Dt(i.value)},[(_.showText||_.$slots.default)&&_.textInside?(le(),be("div",{key:0,class:ke(D(r).be("bar","innerText"))},[Ne(_.$slots,"default",{percentage:_.percentage},()=>[Ee("span",null,ln(v.value),1)])],2)):je("v-if",!0)],6)],6)],2)):(le(),be("div",{key:1,class:ke(D(r).b("circle")),style:Dt({height:`${_.width}px`,width:`${_.width}px`})},[(le(),be("svg",j5,[Ee("path",{class:ke(D(r).be("circle","track")),d:a.value,stroke:`var(${D(r).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":_.strokeLinecap,"stroke-width":s.value,fill:"none",style:Dt(f.value)},null,14,N5),Ee("path",{class:ke(D(r).be("circle","path")),d:a.value,stroke:h.value,fill:"none",opacity:_.percentage?1:0,"stroke-linecap":_.strokeLinecap,"stroke-width":s.value,style:Dt(d.value)},null,14,z5)]))],6)),(_.showText||_.$slots.default)&&!_.textInside?(le(),be("div",{key:2,class:ke(D(r).e("text")),style:Dt({fontSize:`${p.value}px`})},[Ne(_.$slots,"default",{percentage:_.percentage},()=>[_.status?(le(),Ve(D(Lt),{key:1},{default:Me(()=>[(le(),Ve(jn(g.value)))]),_:1})):(le(),be("span",$5,ln(v.value),1))])],6)):je("v-if",!0)],10,B5))}});var H5=Tt(U5,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const V5=lr(H5),Jw=Symbol("uploadContextKey"),G5="ElUpload";class W5 extends Error{constructor(e,n,r,i){super(e),this.name="UploadAjaxError",this.status=n,this.method=r,this.url=i}}function rv(t,e,n){let r;return n.response?r=`${n.response.error||n.response}`:n.responseText?r=`${n.responseText}`:r=`fail to ${e.method} ${t} ${n.status}`,new W5(r,n.status,e.method,t)}function X5(t){const e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const Y5=t=>{typeof XMLHttpRequest>"u"&&qo(G5,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,n=t.action;e.upload&&e.upload.addEventListener("progress",s=>{const o=s;o.percent=s.total>0?s.loaded/s.total*100:0,t.onProgress(o)});const r=new FormData;if(t.data)for(const[s,o]of Object.entries(t.data))$e(o)&&o.length?r.append(s,...o):r.append(s,o);r.append(t.filename,t.file,t.file.name),e.addEventListener("error",()=>{t.onError(rv(n,t,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return t.onError(rv(n,t,e));t.onSuccess(X5(e))}),e.open(t.method,n,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const i=t.headers||{};if(i instanceof Headers)i.forEach((s,o)=>e.setRequestHeader(o,s));else for(const[s,o]of Object.entries(i))Ko(o)||e.setRequestHeader(s,String(o));return e.send(r),e},Qw=["text","picture","picture-card"];let K5=1;const Nd=()=>Date.now()+K5++,e2=gt({action:{type:String,default:"#"},headers:{type:Pe(Object)},method:{type:String,default:"post"},data:{type:Pe([Object,Function,Promise]),default:()=>cl({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:Pe(Array),default:()=>cl([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Qw,default:"text"},httpRequest:{type:Pe(Function),default:Y5},disabled:{type:Boolean,default:void 0},limit:Number}),q5=gt({...e2,beforeUpload:{type:Pe(Function),default:Ze},beforeRemove:{type:Pe(Function)},onRemove:{type:Pe(Function),default:Ze},onChange:{type:Pe(Function),default:Ze},onPreview:{type:Pe(Function),default:Ze},onSuccess:{type:Pe(Function),default:Ze},onProgress:{type:Pe(Function),default:Ze},onError:{type:Pe(Function),default:Ze},onExceed:{type:Pe(Function),default:Ze},crossorigin:{type:Pe(String)}}),Z5=gt({files:{type:Pe(Array),default:()=>cl([])},disabled:{type:Boolean,default:void 0},handlePreview:{type:Pe(Function),default:Ze},listType:{type:String,values:Qw,default:"text"},crossorigin:{type:Pe(String)}}),J5={remove:t=>!!t},Q5=["tabindex","aria-disabled","onKeydown"],eR=["src","crossorigin"],tR=["onClick"],nR=["title"],rR=["onClick"],iR=["onClick"],sR=De({name:"ElUploadList",__name:"upload-list",props:Z5,emits:J5,setup(t,{emit:e}){const n=t,r=e,{t:i}=ow(),s=wt("upload"),o=wt("icon"),a=wt("list"),l=Us(),c=ye(!1),u=ae(()=>[s.b("list"),s.bm("list",n.listType),s.is("disabled",l.value)]),f=d=>{r("remove",d)};return(d,h)=>(le(),Ve(fE,{tag:"ul",class:ke(u.value),name:D(a).b()},{default:Me(()=>[(le(!0),be(pt,null,nl(d.files,(g,p)=>(le(),be("li",{key:g.uid||g.name,class:ke([D(s).be("list","item"),D(s).is(g.status),{focusing:c.value}]),tabindex:D(l)?void 0:0,"aria-disabled":D(l),role:"button",onKeydown:Pp(v=>!D(l)&&f(g),["delete"]),onFocus:h[0]||(h[0]=v=>c.value=!0),onBlur:h[1]||(h[1]=v=>c.value=!1),onClick:h[2]||(h[2]=v=>c.value=!1)},[Ne(d.$slots,"default",{file:g,index:p},()=>[d.listType==="picture"||g.status!=="uploading"&&d.listType==="picture-card"?(le(),be("img",{key:0,class:ke(D(s).be("list","item-thumbnail")),src:g.url,crossorigin:d.crossorigin,alt:""},null,10,eR)):je("v-if",!0),g.status==="uploading"||d.listType!=="picture-card"?(le(),be("div",{key:1,class:ke(D(s).be("list","item-info"))},[Ee("a",{class:ke(D(s).be("list","item-name")),onClick:wr(v=>d.handlePreview(g),["prevent"])},[Ae(D(Lt),{class:ke(D(o).m("document"))},{default:Me(()=>[Ae(D(f3))]),_:1},8,["class"]),Ee("span",{class:ke(D(s).be("list","item-file-name")),title:g.name},ln(g.name),11,nR)],10,tR),g.status==="uploading"?(le(),Ve(D(V5),{key:0,type:d.listType==="picture-card"?"circle":"line","stroke-width":d.listType==="picture-card"?6:2,percentage:Number(g.percentage),style:Dt(d.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):je("v-if",!0)],2)):je("v-if",!0),Ee("label",{class:ke(D(s).be("list","item-status-label"))},[d.listType==="text"?(le(),Ve(D(Lt),{key:0,class:ke([D(o).m("upload-success"),D(o).m("circle-check")])},{default:Me(()=>[Ae(D(Wp))]),_:1},8,["class"])):["picture-card","picture"].includes(d.listType)?(le(),Ve(D(Lt),{key:1,class:ke([D(o).m("upload-success"),D(o).m("check")])},{default:Me(()=>[Ae(D(dw))]),_:1},8,["class"])):je("v-if",!0)],2),D(l)?je("v-if",!0):(le(),Ve(D(Lt),{key:2,class:ke(D(o).m("close")),onClick:v=>f(g)},{default:Me(()=>[Ae(D(Yp))]),_:1},8,["class","onClick"])),je(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),je(" This is a bug which needs to be fixed "),je(" TODO: Fix the incorrect navigation interaction "),D(l)?je("v-if",!0):(le(),be("i",{key:3,class:ke(D(o).m("close-tip"))},ln(D(i)("el.upload.deleteTip")),3)),d.listType==="picture-card"?(le(),be("span",{key:4,class:ke(D(s).be("list","item-actions"))},[Ee("span",{class:ke(D(s).be("list","item-preview")),onClick:v=>d.handlePreview(g)},[Ae(D(Lt),{class:ke(D(o).m("zoom-in"))},{default:Me(()=>[Ae(D(D3))]),_:1},8,["class"])],10,rR),D(l)?je("v-if",!0):(le(),be("span",{key:0,class:ke(D(s).be("list","item-delete")),onClick:v=>f(g)},[Ae(D(Lt),{class:ke(D(o).m("delete"))},{default:Me(()=>[Ae(D(c3))]),_:1},8,["class"])],10,iR))],2)):je("v-if",!0)])],42,Q5))),128)),Ne(d.$slots,"append")]),_:3},8,["class","name"]))}});var iv=Tt(sR,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const oR=gt({disabled:{type:Boolean,default:void 0}}),aR={file:t=>$e(t)},sv="ElUploadDrag",lR=De({name:sv,__name:"upload-dragger",props:oR,emits:aR,setup(t,{emit:e}){const n=e;Je(Jw)||qo(sv,"usage: <el-upload><el-upload-dragger /></el-upload>");const i=wt("upload"),s=ye(!1),o=Us(),a=u=>{if(o.value)return;s.value=!1,u.stopPropagation();const f=Array.from(u.dataTransfer.files),d=u.dataTransfer.items||[];f.forEach((h,g)=>{var p;const v=d[g],m=(p=v?.webkitGetAsEntry)==null?void 0:p.call(v);m&&(h.isDirectory=m.isDirectory)}),n("file",f)},l=()=>{o.value||(s.value=!0)},c=u=>{u.currentTarget.contains(u.relatedTarget)||(s.value=!1)};return(u,f)=>(le(),be("div",{class:ke([D(i).b("dragger"),D(i).is("dragover",s.value)]),onDrop:wr(a,["prevent"]),onDragover:wr(l,["prevent"]),onDragleave:wr(c,["prevent"])},[Ne(u.$slots,"default")],34))}});var cR=Tt(lR,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const uR=gt({...e2,beforeUpload:{type:Pe(Function),default:Ze},onRemove:{type:Pe(Function),default:Ze},onStart:{type:Pe(Function),default:Ze},onSuccess:{type:Pe(Function),default:Ze},onProgress:{type:Pe(Function),default:Ze},onError:{type:Pe(Function),default:Ze},onExceed:{type:Pe(Function),default:Ze}}),fR=["tabindex","aria-disabled","onKeydown"],hR=["name","disabled","multiple","accept"],dR=De({name:"ElUploadContent",inheritAttrs:!1,__name:"upload-content",props:uR,setup(t,{expose:e}){const n=t,r=wt("upload"),i=Us(),s=$r({}),o=$r(),a=p=>{if(p.length===0)return;const{autoUpload:v,limit:m,fileList:y,multiple:_,onStart:b,onExceed:x}=n;if(m&&y.length+p.length>m){x(p,y);return}_||(p=p.slice(0,1));for(const E of p){const T=E;T.uid=Nd(),b(T),v&&l(T)}},l=async p=>{if(o.value.value="",!n.beforeUpload)return u(p);let v,m={};try{const _=n.data,b=n.beforeUpload(p);m=cu(n.data)?m0(n.data):n.data,v=await b,cu(n.data)&&uD(_,m)&&(m=m0(n.data))}catch{v=!1}if(v===!1){n.onRemove(p);return}let y=p;v instanceof Blob&&(v instanceof File?y=v:y=new File([v],p.name,{type:p.type})),u(Object.assign(y,{uid:p.uid}),m)},c=async(p,v)=>ze(p)?p(v):p,u=async(p,v)=>{const{headers:m,data:y,method:_,withCredentials:b,name:x,action:E,onProgress:T,onSuccess:O,onError:k,httpRequest:I}=n;try{v=await c(v??y,p)}catch{n.onRemove(p);return}const{uid:R}=p,C={headers:m||{},withCredentials:b,file:p,data:v,method:_,filename:x,action:E,onProgress:S=>{T(S,p)},onSuccess:S=>{O(S,p),delete s.value[R]},onError:S=>{k(S,p),delete s.value[R]}},P=I(C);s.value[R]=P,P instanceof Promise&&P.then(C.onSuccess,C.onError)},f=p=>{const v=p.target.files;v&&a(Array.from(v))},d=()=>{i.value||(o.value.value="",o.value.click())},h=()=>{d()};return e({abort:p=>{ND(s.value).filter(p?([m])=>String(p.uid)===m:()=>!0).forEach(([m,y])=>{y instanceof XMLHttpRequest&&y.abort(),delete s.value[m]})},upload:l}),(p,v)=>(le(),be("div",{class:ke([D(r).b(),D(r).m(p.listType),D(r).is("drag",p.drag),D(r).is("disabled",D(i))]),tabindex:D(i)?void 0:0,"aria-disabled":D(i),role:"button",onClick:d,onKeydown:Pp(wr(h,["self"]),["enter","space"])},[p.drag?(le(),Ve(cR,{key:0,disabled:D(i),onFile:a},{default:Me(()=>[Ne(p.$slots,"default")]),_:3},8,["disabled"])):Ne(p.$slots,"default",{key:1}),Ee("input",{ref_key:"inputRef",ref:o,class:ke(D(r).e("input")),name:p.name,disabled:D(i),multiple:p.multiple,accept:p.accept,type:"file",onChange:f,onClick:v[0]||(v[0]=wr(()=>{},["stop"]))},null,42,hR)],42,fR))}});var ov=Tt(dR,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const av="ElUpload",lv=t=>{var e;(e=t.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(t.url)},pR=(t,e)=>{const n=ED(t,"fileList",void 0,{passive:!0}),r=g=>n.value.find(p=>p.uid===g.uid);function i(g){var p;(p=e.value)==null||p.abort(g)}function s(g=["ready","uploading","success","fail"]){n.value=n.value.filter(p=>!g.includes(p.status))}function o(g){n.value=n.value.filter(p=>p.uid!==g.uid)}const a=g=>{Yt(()=>t.onChange(g,n.value))},l=(g,p)=>{const v=r(p);v&&(console.error(g),v.status="fail",o(v),t.onError(g,v,n.value),a(v))},c=(g,p)=>{const v=r(p);v&&(t.onProgress(g,v,n.value),v.status="uploading",v.percentage=Math.round(g.percent))},u=(g,p)=>{const v=r(p);v&&(v.status="success",v.response=g,t.onSuccess(g,v,n.value),a(v))},f=g=>{Ko(g.uid)&&(g.uid=Nd());const p={name:g.name,percentage:0,status:"ready",size:g.size,raw:g,uid:g.uid};if(t.listType==="picture-card"||t.listType==="picture")try{p.url=URL.createObjectURL(g)}catch(v){v.message,t.onError(v,p,n.value)}n.value=[...n.value,p],a(p)},d=async g=>{const p=g instanceof File?r(g):g;p||qo(av,"file to be removed not found");const v=m=>{i(m),o(m),t.onRemove(m,n.value),lv(m)};t.beforeRemove?await t.beforeRemove(p,n.value)!==!1&&v(p):v(p)};function h(){n.value.filter(({status:g})=>g==="ready").forEach(({raw:g})=>{var p;return g&&((p=e.value)==null?void 0:p.upload(g))})}return Ge(()=>t.listType,g=>{g!=="picture-card"&&g!=="picture"||(n.value=n.value.map(p=>{const{raw:v,url:m}=p;if(!m&&v)try{p.url=URL.createObjectURL(v)}catch(y){t.onError(y,p,n.value)}return p}))}),Ge(n,g=>{for(const p of g)p.uid||(p.uid=Nd()),p.status||(p.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:i,clearFiles:s,handleError:l,handleProgress:c,handleStart:f,handleSuccess:u,handleRemove:d,submit:h,revokeFileObjectURL:lv}},gR=De({name:"ElUpload",__name:"upload",props:q5,setup(t,{expose:e}){const n=t,r=Us(),i=$r(),{abort:s,submit:o,clearFiles:a,uploadFiles:l,handleStart:c,handleError:u,handleRemove:f,handleSuccess:d,handleProgress:h,revokeFileObjectURL:g}=pR(n,i),p=ae(()=>n.listType==="picture-card"),v=ae(()=>({...n,fileList:l.value,onStart:c,onProgress:h,onSuccess:d,onError:u,onRemove:f}));return un(()=>{l.value.forEach(g)}),_n(Jw,{accept:Jn(n,"accept")}),e({abort:s,submit:o,clearFiles:a,handleStart:c,handleRemove:f}),(m,y)=>(le(),be("div",null,[p.value&&m.showFileList?(le(),Ve(iv,{key:0,disabled:D(r),"list-type":m.listType,files:D(l),crossorigin:m.crossorigin,"handle-preview":m.onPreview,onRemove:D(f)},vd({append:Me(()=>[Ae(ov,Xn({ref_key:"uploadRef",ref:i},v.value),{default:Me(()=>[m.$slots.trigger?Ne(m.$slots,"trigger",{key:0}):je("v-if",!0),!m.$slots.trigger&&m.$slots.default?Ne(m.$slots,"default",{key:1}):je("v-if",!0)]),_:3},16)]),_:2},[m.$slots.file?{name:"default",fn:Me(({file:_,index:b})=>[Ne(m.$slots,"file",{file:_,index:b})]),key:"0"}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):je("v-if",!0),!p.value||p.value&&!m.showFileList?(le(),Ve(ov,Xn({key:1,ref_key:"uploadRef",ref:i},v.value),{default:Me(()=>[m.$slots.trigger?Ne(m.$slots,"trigger",{key:0}):je("v-if",!0),!m.$slots.trigger&&m.$slots.default?Ne(m.$slots,"default",{key:1}):je("v-if",!0)]),_:3},16)):je("v-if",!0),m.$slots.trigger?Ne(m.$slots,"default",{key:2}):je("v-if",!0),Ne(m.$slots,"tip"),!p.value&&m.showFileList?(le(),Ve(iv,{key:3,disabled:D(r),"list-type":m.listType,files:D(l),crossorigin:m.crossorigin,"handle-preview":m.onPreview,onRemove:D(f)},vd({_:2},[m.$slots.file?{name:"default",fn:Me(({file:_,index:b})=>[Ne(m.$slots,"file",{file:_,index:b})]),key:"0"}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):je("v-if",!0)]))}});var mR=Tt(gR,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const vR=lr(mR),ga=ye(!1);function t2(){return{loading:ga,open:()=>{ga.value=!0},close:()=>{ga.value=!1},toggle:()=>{ga.value=!ga.value}}}const yR={key:0,class:"loading-container"},bR=De({__name:"LoadingMask",setup(t){const{loading:e}=t2();return(n,r)=>{const i=Lt;return D(e)?(le(),be("div",yR,[Ae(i,{class:"is-loading"},{default:Me(()=>[Ae(D(Kp))]),_:1}),r[0]||(r[0]=Ee("span",{class:"loading-text"},"...",-1))])):je("",!0)}}}),_R=fn(bR,[["__scopeId","data-v-3100aec6"]]),wR={class:"layout-container"},SR={class:"header-inner"},xR={class:"layout-main"},CR={class:"main-wrap"},TR=De({__name:"index",setup(t){return(e,n)=>(le(),be(pt,null,[Ee("div",wR,[Ee("header",SR,[Ne(e.$slots,"header",{},void 0,!0)]),Ee("div",xR,[Ne(e.$slots,"nav",{},void 0,!0),Ee("main",CR,[Ne(e.$slots,"main",{},void 0,!0)]),Ne(e.$slots,"aside",{},void 0,!0)])]),Ae(_R)],64))}}),ER=fn(TR,[["__scopeId","data-v-507539a6"]]),kR={key:0,class:"aside-default-content"},OR=De({__name:"index",props:{initialWidth:{default:100},minWidth:{default:100},maxWidth:{default:600},direction:{default:"left"}},emits:["width-change"],setup(t,{expose:e,emit:n}){const r=t,i=n,s=ye(r.initialWidth),o=ye(!1),a=ye(0),l=ye(0);function c(v){if(!o.value)return;v.preventDefault();const m=r.direction==="left"?a.value-v.clientX:v.clientX-a.value;f(m)}function u(v){if(!o.value)return;v.preventDefault();const m=v.touches[0],y=r.direction==="left"?a.value-(m?.clientX??0):(m?.clientX??0)-a.value;f(y)}function f(v){let m=l.value+v;m<r.minWidth?m=r.minWidth:m>r.maxWidth&&(m=r.maxWidth),s.value=m}function d(){o.value=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d),document.body.style.userSelect="",document.body.style.cursor="",i("width-change",s.value)}function h(){o.value=!1,document.removeEventListener("touchmove",u),document.removeEventListener("touchend",h),document.body.style.userSelect="",document.body.style.cursor="",i("width-change",s.value)}function g(){s.value=r.initialWidth,i("width-change",s.value)}function p(v){v>=r.minWidth&&v<=r.maxWidth&&(s.value=v,i("width-change",s.value))}return Wo(()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",h)}),e({resetWidth:g,setWidth:p,getWidth:()=>s.value}),(v,m)=>(le(),be("div",{class:"aside-inner",style:Dt({width:`${s.value}px`})},[Ne(v.$slots,"default",{},()=>[v.$slots.default===void 0?(le(),be("div",kR," aside ")):je("",!0)],!0)],4))}}),AR=fn(OR,[["__scopeId","data-v-05095f5b"]]);function PR(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(i){i(n)}),(r=t.get("*"))&&r.slice().map(function(i){i(e,n)})}}}const Yl=PR();function Zo(){const t=[],e=(s,o)=>{Yl.on(s,o),t.push({type:s,handler:o})},n=(s,o)=>{Yl.emit(s,o)},r=(s,o)=>{Yl.off(s,o);const a=t.findIndex(l=>l.type===s&&l.handler===o);a>-1&&t.splice(a,1)},i=()=>{t.forEach(({type:s,handler:o})=>{Yl.off(s,o)}),t.length=0};return Wo(()=>{i()}),{on:e,emit:n,off:r,clear:i}}const FR={class:"download"},DR=De({__name:"Download",setup(t){const{emit:e}=Zo();function n(){e("download")}return(r,i)=>{const s=Gw;return le(),be("div",FR,[Ae(s,{onClick:n},{default:Me(()=>[...i[0]||(i[0]=[of("  ",-1)])]),_:1})])}}}),IR=fn(DR,[["__scopeId","data-v-fb4af221"]]),MR={class:"logo"},RR={class:"logo-icon"},LR=De({__name:"Logo",setup(t){return(e,n)=>{const r=Lt,i=O4;return le(),be("div",MR,[Ae(i,{content:"",placement:"top"},{default:Me(()=>[Ee("div",RR,[Ae(r,null,{default:Me(()=>[Ae(D(b3))]),_:1})])]),_:1})])}}}),BR=fn(LR,[["__scopeId","data-v-5026c9f2"]]),jR={class:"header-container"},NR=De({__name:"index",setup(t){return(e,n)=>(le(),be("div",jR,[Ae(BR),Ae(IR)]))}}),zR=fn(NR,[["__scopeId","data-v-c8827cae"]]);function X(t,e,n){return(e=(function(r){var i=(function(s,o){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var l=a.call(s,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)})(r,"string");return typeof i=="symbol"?i:i+""})(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class cv{constructor(){X(this,"browserShadowBlurConstant",1),X(this,"DPI",96),X(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),X(this,"perfLimitSizeTotal",2097152),X(this,"maxCacheSideLimit",4096),X(this,"minCacheSideLimit",256),X(this,"disableStyleCopyPaste",!1),X(this,"enableGLFiltering",!0),X(this,"textureSize",4096),X(this,"forceGLPutImageData",!1),X(this,"cachesBoundsOfCurve",!1),X(this,"fontPaths",{}),X(this,"NUM_FRACTION_DIGITS",4)}}const rt=new class extends cv{constructor(t){super(),this.configure(t)}configure(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,t)}addFonts(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths={...this.fontPaths,...t}}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(t=>{delete this.fontPaths[t]})}clearFonts(){this.fontPaths={}}restoreDefaults(t){const e=new cv,n=t?.reduce((r,i)=>(r[i]=e[i],r),{})||e;this.configure(n)}},es=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return console[t]("fabric",...n)};class jr extends Error{constructor(e,n){super(`fabric: ${e}`,n)}}class $R extends jr{constructor(e){super(`${e} 'options.signal' is in 'aborted' state`)}}class UR{}class HR extends UR{testPrecision(e,n){const r=`precision ${n} float;
void main(){}`,i=e.createShader(e.FRAGMENT_SHADER);return!!i&&(e.shaderSource(i,r),e.compileShader(i),!!e.getShaderParameter(i,e.COMPILE_STATUS))}queryWebGL(e){const n=e.getContext("webgl");n&&(this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(n,r)),n.getExtension("WEBGL_lose_context").loseContext(),es("log",`WebGL: max texture size ${this.maxTextureSize}`))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const VR={};let uv;const Gr=()=>uv||(uv={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new HR,dispose(){},copyPasteData:VR}),Jo=()=>Gr().document,wf=()=>Gr().window,n2=()=>{var t;return Math.max((t=rt.devicePixelRatio)!==null&&t!==void 0?t:wf().devicePixelRatio,1)},$a=new class{constructor(){X(this,"boundsOfCurveCache",{}),this.charWidthsCache=new Map}getFontCache(t){let{fontFamily:e,fontStyle:n,fontWeight:r}=t;e=e.toLowerCase();const i=this.charWidthsCache;i.has(e)||i.set(e,new Map);const s=i.get(e),o=`${n.toLowerCase()}_${(r+"").toLowerCase()}`;return s.has(o)||s.set(o,new Map),s.get(o)}clearFontCache(t){t?this.charWidthsCache.delete((t||"").toLowerCase()):this.charWidthsCache=new Map}limitDimsByArea(t){const{perfLimitSizeTotal:e}=rt,n=Math.sqrt(e*t);return[Math.floor(n),Math.floor(e/n)]}},zd="7.1.0";function tu(){}const Tl=Math.PI/2,GR=Math.PI/4,No=2*Math.PI,pg=Math.PI/180,wn=Object.freeze([1,0,0,1,0,0]),gg=16,ji=.4477152502,We="center",ft="left",En="top",$d="bottom",Ft="right",kn="none",mg=/\r?\n/,r2="moving",Sf="scaling",i2="rotating",vg="rotate",s2="skewing",hl="resizing",WR="modifyPoly",XR="modifyPath",Pu="changed",xf="scale",On="scaleX",sr="scaleY",Qo="skewX",ea="skewY",Wt="fill",Gn="stroke",Fu="modified",vs="ltr",ni="rtl",Ud="normal",qs="json",ch="svg",Fe=new class{constructor(){this[qs]=new Map,this[ch]=new Map}has(t){return this[qs].has(t)}getClass(t){const e=this[qs].get(t);if(!e)throw new jr(`No class registered for ${t}`);return e}setClass(t,e){e?this[qs].set(e,t):(this[qs].set(t.type,t),this[qs].set(t.type.toLowerCase(),t))}getSVGClass(t){return this[ch].get(t)}setSVGClass(t,e){this[ch].set(e??t.type.toLowerCase(),t)}},Du=new class extends Array{remove(t){const e=this.indexOf(t);e>-1&&this.splice(e,1)}cancelAll(){const t=this.splice(0);return t.forEach(e=>e.abort()),t}cancelByCanvas(t){if(!t)return[];const e=this.filter(n=>{var r;return n.target===t||typeof n.target=="object"&&((r=n.target)===null||r===void 0?void 0:r.canvas)===t});return e.forEach(n=>n.abort()),e}cancelByTarget(t){if(!t)return[];const e=this.filter(n=>n.target===t);return e.forEach(n=>n.abort()),e}};class YR{constructor(){X(this,"__eventListeners",{})}on(e,n){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[i,s]=r;this.on(i,s)}),()=>this.off(e);if(n){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(n),()=>this.off(r,n)}return()=>!1}once(e,n){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(i=>{let[s,o]=i;r.push(this.once(s,o))}),()=>r.forEach(i=>i())}if(n){const r=this.on(e,function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];n.call(this,...s),r()});return r}return()=>!1}_removeEventListener(e,n){if(this.__eventListeners[e])if(n){const r=this.__eventListeners[e],i=r.indexOf(n);i>-1&&r.splice(i,1)}else this.__eventListeners[e]=[]}off(e,n){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[i,s]=r;this._removeEventListener(i,s)}):this._removeEventListener(e,n)}fire(e,n){var r;if(!this.__eventListeners)return;const i=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(i)for(let s=0;s<i.length;s++)i[s].call(this,n||{})}}const oo=(t,e)=>{const n=t.indexOf(e);return n!==-1&&t.splice(n,1),t},Ci=t=>{if(t===0)return 1;switch(Math.abs(t)/Tl){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},Ti=t=>{if(t===0)return 0;const e=t/Tl,n=Math.sign(t);switch(e){case 1:return n;case 2:return 0;case 3:return-n}return Math.sin(t)};class ie{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=n)}add(e){return new ie(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new ie(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new ie(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new ie(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new ie(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new ie(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new ie(this.x/e.x,this.y/e.y)}scalarDivide(e){return new ie(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return n=Math.max(Math.min(1,n),0),new ie(this.x+(e.x-this.x)*n,this.y+(e.y-this.y)*n)}distanceFrom(e){const n=this.x-e.x,r=this.y-e.y;return Math.sqrt(n*n+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new ie(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new ie(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return`${this.x},${this.y}`}setXY(e,n){return this.x=e,this.y=n,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const n=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=n,e.y=r}clone(){return new ie(this.x,this.y)}rotate(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yg;const r=Ti(e),i=Ci(e),s=this.subtract(n);return new ie(s.x*i-s.y*r,s.x*r+s.y*i).add(n)}transform(e){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new ie(e[0]*this.x+e[2]*this.y+(n?0:e[4]),e[1]*this.x+e[3]*this.y+(n?0:e[5]))}}const yg=new ie(0,0),nu=t=>!!t&&Array.isArray(t._objects);function o2(t){class e extends t{constructor(){super(...arguments),X(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];const o=this._objects.push(...i);return i.forEach(a=>this._onObjectAdded(a)),o}insertAt(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return this._objects.splice(r,0,...s),s.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,i=[];for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return o.forEach(l=>{const c=r.indexOf(l);c!==-1&&(r.splice(c,1),i.push(l),this._onObjectRemoved(l))}),i}forEachObject(r){this.getObjects().forEach((i,s,o)=>r(i,s,o))}getObjects(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...i))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,i){return!!this._objects.includes(r)||!!i&&this._objects.some(s=>s instanceof e&&s.contains(r,!0))}complexity(){return this._objects.reduce((r,i)=>r+=i.complexity?i.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(oo(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(oo(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,i){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==0){const o=this.findNewLowerIndex(r,s,i);return oo(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,i){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==this._objects.length-1){const o=this.findNewUpperIndex(r,s,i);return oo(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,i){return r!==this._objects[i]&&(oo(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,i,s){let o;if(s){o=i;for(let a=i-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=i-1;return o}findNewUpperIndex(r,i,s){let o;if(s){o=i;for(let a=i+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=i+1;return o}collectObjects(r){let{left:i,top:s,width:o,height:a}=r,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],u=new ie(i,s),f=u.add(new ie(o,a));for(let d=this._objects.length-1;d>=0;d--){const h=this._objects[d];h.selectable&&h.visible&&(l&&h.intersectsWithRect(u,f)||h.isContainedWithinRect(u,f)||l&&h.containsPoint(u)||l&&h.containsPoint(f))&&c.push(h)}return c}}return e}class a2 extends YR{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const n in e)this.set(n,e[n])}_setObject(e){for(const n in e)this._set(n,e[n])}set(e,n){return typeof e=="object"?this._setObject(e):this._set(e,n),this}_set(e,n){this[e]=n}toggle(e){const n=this.get(e);return typeof n=="boolean"&&this.set(e,!n),this}get(e){return this[e]}}function ru(t){return wf().requestAnimationFrame(t)}function KR(t){return wf().cancelAnimationFrame(t)}let qR=0;const ts=()=>qR++,Ei=()=>{const t=Jo().createElement("canvas");if(!t||t.getContext===void 0)throw new jr("Failed to create `canvas` element");return t},ZR=()=>Jo().createElement("img"),or=t=>{const e=Ei();return e.width=t.width,e.height=t.height,e},l2=(t,e,n)=>t.toDataURL(`image/${e}`,n),c2=(t,e,n)=>new Promise((r,i)=>{t.toBlob(r,`image/${e}`,n)}),It=t=>t*pg,ns=t=>t/pg,JR=t=>t.every((e,n)=>e===wn[n]),xn=(t,e,n)=>new ie(t).transform(e,n),vr=t=>{const e=1/(t[0]*t[3]-t[1]*t[2]),n=[e*t[3],-e*t[1],-e*t[2],e*t[0],0,0],{x:r,y:i}=new ie(t[4],t[5]).transform(n,!0);return n[4]=-r,n[5]=-i,n},qt=(t,e,n)=>[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],n?0:t[0]*e[4]+t[2]*e[5]+t[4],n?0:t[1]*e[4]+t[3]*e[5]+t[5]],bg=(t,e)=>t.reduceRight((n,r)=>r&&n?qt(r,n,e):r||n,void 0)||wn.concat(),u2=t=>{let[e,n]=t;return Math.atan2(n,e)},Iu=t=>{const e=u2(t),n=Math.pow(t[0],2)+Math.pow(t[1],2),r=Math.sqrt(n),i=(t[0]*t[3]-t[2]*t[1])/r,s=Math.atan2(t[0]*t[2]+t[1]*t[3],n);return{angle:ns(e),scaleX:r,scaleY:i,skewX:ns(s),skewY:0,translateX:t[4]||0,translateY:t[5]||0}},El=function(t){return[1,0,0,1,t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function ta(){let{angle:t=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:n=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=It(t),i=Ci(r),s=Ti(r);return[i,s,-s,i,e?e-(i*e-s*n):0,n?n-(s*e+i*n):0]}const _g=function(t){return[t,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,0,0]},f2=t=>Math.tan(It(t)),h2=t=>[1,0,f2(t),1,0,0],d2=t=>[1,f2(t),0,1,0,0],Cf=t=>{let{scaleX:e=1,scaleY:n=1,flipX:r=!1,flipY:i=!1,skewX:s=0,skewY:o=0}=t,a=_g(r?-e:e,i?-n:n);return s&&(a=qt(a,h2(s),!0)),o&&(a=qt(a,d2(o),!0)),a},QR=t=>{const{translateX:e=0,translateY:n=0,angle:r=0}=t;let i=El(e,n);r&&(i=qt(i,ta({angle:r})));const s=Cf(t);return JR(s)||(i=qt(i,s)),i},iu=function(t){let{signal:e,crossOrigin:n=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,i){if(e&&e.aborted)return i(new $R("loadImage"));const s=ZR();let o;e&&(o=function(l){s.src="",i(l)},e.addEventListener("abort",o,{once:!0}));const a=function(){s.onload=s.onerror=null,o&&e?.removeEventListener("abort",o),r(s)};t?(s.onload=a,s.onerror=function(){o&&e?.removeEventListener("abort",o),i(new jr(`Error loading ${s.src}`))},n&&(s.crossOrigin=n),s.src=t):a()})},dl=function(t){let{signal:e,reviver:n=tu}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,i)=>{const s=[];e&&e.addEventListener("abort",i,{once:!0}),Promise.all(t.map(o=>Fe.getClass(o.type).fromObject(o,{signal:e}).then(a=>(n(o,a),s.push(a),a)))).then(r).catch(o=>{s.forEach(a=>{a.dispose&&a.dispose()}),i(o)}).finally(()=>{e&&e.removeEventListener("abort",i)})})},Tf=function(t){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,r)=>{const i=[];e&&e.addEventListener("abort",r,{once:!0});const s=Object.values(t).map(a=>a&&a.type&&Fe.has(a.type)?dl([a],{signal:e}).then(l=>{let[c]=l;return i.push(c),c}):a),o=Object.keys(t);Promise.all(s).then(a=>a.reduce((l,c,u)=>(l[o[u]]=c,l),{})).then(n).catch(a=>{i.forEach(l=>{l.dispose&&l.dispose()}),r(a)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},na=function(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,n)=>(n in t&&(e[n]=t[n]),e),{})},wg=(t,e)=>Object.keys(t).reduce((n,r)=>(e(t[r],r,t)&&(n[r]=t[r]),n),{}),Ct=(t,e)=>parseFloat(Number(t).toFixed(e)),pl=t=>"matrix("+t.map(e=>Ct(e,rt.NUM_FRACTION_DIGITS)).join(" ")+")",Zn=t=>!!t&&t.toLive!==void 0,fv=t=>!!t&&typeof t.toObject=="function",hv=t=>!!t&&t.offsetX!==void 0&&"source"in t,ys=t=>!!t&&"multiSelectionStacking"in t;function p2(t){const e=t&&mr(t);let n=0,r=0;if(!t||!e)return{left:n,top:r};let i=t;const s=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;i&&(i.parentNode||i.host)&&(i=i.parentNode||i.host,i===e?(n=o.scrollLeft||s.scrollLeft||0,r=o.scrollTop||s.scrollTop||0):(n+=i.scrollLeft||0,r+=i.scrollTop||0),i.nodeType!==1||i.style.position!=="fixed"););return{left:n,top:r}}const mr=t=>t.ownerDocument||null,g2=t=>{var e;return((e=t.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},m2=function(t,e,n){let{width:r,height:i}=n,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;t.width=r,t.height=i,s>1&&(t.setAttribute("width",(r*s).toString()),t.setAttribute("height",(i*s).toString()),e.scale(s,s))},Hd=(t,e)=>{let{width:n,height:r}=e;n&&(t.style.width=typeof n=="number"?`${n}px`:n),r&&(t.style.height=typeof r=="number"?`${r}px`:r)};function dv(t){return t.onselectstart!==void 0&&(t.onselectstart=()=>!1),t.style.userSelect=kn,t}class v2{constructor(e){X(this,"_originalCanvasStyle",void 0),X(this,"lower",void 0);const n=this.createLowerCanvas(e);this.lower={el:n,ctx:n.getContext("2d")}}createLowerCanvas(e){const n=(r=e)&&r.getContext!==void 0?e:e&&Jo().getElementById(e)||Ei();var r;if(n.hasAttribute("data-fabric"))throw new jr("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=n.style.cssText,n.setAttribute("data-fabric","main"),n.classList.add("lower-canvas"),n}cleanupDOM(e){let{width:n,height:r}=e;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width",`${n}`),i.setAttribute("height",`${r}`),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,n){const{el:r,ctx:i}=this.lower;m2(r,i,e,n)}setCSSDimensions(e){Hd(this.lower.el,e)}calcOffset(){return(function(e){var n;const r=e&&mr(e),i={left:0,top:0};if(!r)return i;const s=((n=g2(e))===null||n===void 0?void 0:n.getComputedStyle(e,null))||{};i.left+=parseInt(s.borderLeftWidth,10)||0,i.top+=parseInt(s.borderTopWidth,10)||0,i.left+=parseInt(s.paddingLeft,10)||0,i.top+=parseInt(s.paddingTop,10)||0;let o={left:0,top:0};const a=r.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const l=p2(e);return{left:o.left+l.left-(a.clientLeft||0)+i.left,top:o.top+l.top-(a.clientTop||0)+i.top}})(this.lower.el)}dispose(){Gr().dispose(this.lower.el),delete this.lower}}const e8={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...wn],patternQuality:"best"};class kl extends o2(a2){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return kl.ownDefaults}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(n),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new v2(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(es("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?n2():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}_setDimensionsImpl(e){let{cssOnly:n=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!n){const i={width:this.width,height:this.height,...e};this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,n){this._setDimensionsImpl(e,n),n&&n.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,n){const r=e,i=[...this.viewportTransform],s=xn(e,vr(i));i[0]=n,i[3]=n;const o=xn(s,i);i[4]+=r.x-o.x,i[5]+=r.y-o.y,this.setViewportTransform(i)}setZoom(e){this.zoomToPoint(new ie(0,0),e)}absolutePan(e){const n=[...this.viewportTransform];return n[4]=-e.x,n[5]=-e.y,this.setViewportTransform(n)}relativePan(e){return this.absolutePan(new ie(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=ru(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,n=this.height,r=vr(this.viewportTransform),i=xn({x:0,y:0},r),s=xn({x:e,y:n},r),o=i.min(s),a=i.max(s);return this.vptCoords={tl:o,tr:new ie(a.x,o.y),bl:new ie(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(KR(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,n){if(this.destroyed)return;const r=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality=this.patternQuality,this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,n),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,i)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,n){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",n.transform(e),e.scale(1/n.zoomX,1/n.zoomY),e.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),e.restore()}_renderObjects(e,n){for(let r=0,i=n.length;r<i;++r)n[r]&&n[r].render(e)}_renderBackgroundOrOverlay(e,n){const r=this[`${n}Color`],i=this[`${n}Image`],s=this.viewportTransform,o=this[`${n}Vpt`];if(!r&&!i)return;const a=Zn(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,o&&e.transform(...s),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const l=r.gradientTransform||r.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(i){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...s),i.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenterPoint(){return new ie(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new ie(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new ie(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new ie(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new ie(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return xn(this.getCenterPoint(),vr(this.viewportTransform))}_centerObject(e,n){e.setXY(n,We,We),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,n){const r=this.clipPath,i=r&&!r.excludeFromExport?this._toObject(r,e,n):null;return{version:zd,...na(this,n),objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,e,n)),...this.__serializeBgOverlay(e,n),...i?{clipPath:i}:null}}_toObject(e,n,r){let i;this.includeDefaultValues||(i=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[n](r);return this.includeDefaultValues||(e.includeDefaultValues=!!i),s}__serializeBgOverlay(e,n){const r={},i=this.backgroundImage,s=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return Zn(o)?o.excludeFromExport||(r.background=o.toObject(n)):o&&(r.background=o),Zn(a)?a.excludeFromExport||(r.overlay=a.toObject(n)):a&&(r.overlay=a),i&&!i.excludeFromExport&&(r.backgroundImage=this._toObject(i,e,n)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,e,n)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;e.reviver=n;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push(`<g clip-path="url(#${this.clipPath.clipPathId})" >
`),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",n),this._setSVGObjects(r,n),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",n),r.push("</svg>"),r.join("")}_setSVGPreamble(e,n){n.suppressPreamble||e.push('<?xml version="1.0" encoding="',n.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,n){const r=n.width||`${this.width}`,i=n.height||`${this.height}`,s=rt.NUM_FRACTION_DIGITS,o=n.viewBox;let a;if(o)a=`viewBox="${o.x} ${o.y} ${o.width} ${o.height}" `;else if(this.svgViewportTransformation){const l=this.viewportTransform;a=`viewBox="${Ct(-l[4]/l[0],s)} ${Ct(-l[5]/l[3],s)} ${Ct(this.width/l[0],s)} ${Ct(this.height/l[3],s)}" `}else a=`viewBox="0 0 ${this.width} ${this.height}" `;e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',i,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",zd,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(n),`</defs>
`)}createSVGClipPathMarkup(e){const n=this.clipPath;return n?(n.clipPathId=`CLIPPATH_${ts()}`,`<clipPath id="${n.clipPathId}" >
${n.toClipPathSVG(e.reviver)}</clipPath>
`):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const n=this[`${e}Color`];if(Zn(n)){const r=this[`${e}Vpt`],i=this.viewportTransform,s={isType:()=>!1,width:this.width/(r?i[0]:1),height:this.height/(r?i[3]:1)};return n.toSVG(s,{additionalTransform:r?pl(i):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],n={},r=rt.fontPaths;this._objects.forEach(function s(o){e.push(o),nu(o)&&o._objects.forEach(s)}),e.forEach(s=>{if(!(o=s)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:l}=s;!n[l]&&r[l]&&(n[l]=!0,a&&Object.values(a).forEach(c=>{Object.values(c).forEach(u=>{let{fontFamily:f=""}=u;!n[f]&&r[f]&&(n[f]=!0)})}))});const i=Object.keys(n).map(s=>`		@font-face {
			font-family: '${s}';
			src: url('${r[s]}');
		}
`).join("");return i?`	<style type="text/css"><![CDATA[
${i}]]></style>
`:""}_setSVGObjects(e,n){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,n)})}_setSVGObject(e,n,r){e.push(n.toSVG(r))}_setSVGBgOverlayImage(e,n,r){const i=this[n];i&&!i.excludeFromExport&&i.toSVG&&e.push(i.toSVG(r))}_setSVGBgOverlayColor(e,n){const r=this[`${n}Color`];if(r)if(Zn(r)){const i=r.repeat||"",s=this.width,o=this.height,a=this[`${n}Vpt`]?pl(vr(this.viewportTransform)):"";e.push(`<rect transform="${a} translate(${s/2},${o/2})" x="${r.offsetX-s/2}" y="${r.offsetY-o/2}" width="${i!=="repeat-y"&&i!=="no-repeat"||!hv(r)?s:r.source.width}" height="${i!=="repeat-x"&&i!=="no-repeat"||!hv(r)?o:r.source.height}" fill="url(#SVGID_${r.id})"></rect>
`)}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,n){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new jr("`json` is undefined"));const{objects:i=[],...s}=typeof e=="string"?JSON.parse(e):e,{backgroundImage:o,background:a,overlayImage:l,overlay:c,clipPath:u}=s,f=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([dl(i,{reviver:n,signal:r}),Tf({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:u},{signal:r})]).then(d=>{let[h,g]=d;return this.clear(),this.add(...h),this.set(s),this.set(g),this.renderOnAddRemove=f,this})}clone(e){const n=this.toObject(e);return this.cloneWithoutData().loadFromJSON(n)}cloneWithoutData(){const e=or(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:n="png",quality:r=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,o=i*(s?this.getRetinaScaling():1);return l2(this.toCanvasElement(o,e),n,r)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:n="png",quality:r=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,o=i*(s?this.getRetinaScaling():1);return c2(this.toCanvasElement(o,e),n,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:n,height:r,left:i,top:s,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(n||this.width)*e,l=(r||this.height)*e,c=this.getZoom(),u=this.width,f=this.height,d=this.skipControlsDrawing,h=c*e,g=this.viewportTransform,p=[h,0,0,h,(g[4]-(i||0))*e,(g[5]-(s||0))*e],v=this.enableRetinaScaling,m=or({width:a,height:l}),y=o?this._objects.filter(_=>o(_)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=p,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(m.getContext("2d"),y),this.viewportTransform=g,this.width=u,this.height=f,this.calcViewportBoundaries(),this.enableRetinaScaling=v,this.skipControlsDrawing=d,m}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Du.cancelByCanvas(this),this.disposed=!0,new Promise((e,n)=>{const r=()=>{this.destroy(),e(!0)};r.kill=n,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return`#<Canvas (${this.complexity()}): { objects: ${this._objects.length} }>`}}X(kl,"ownDefaults",e8);const t8=["touchstart","touchmove","touchend"],n8=t=>{const e=p2(t.target),n=(function(r){const i=r.changedTouches;return i&&i[0]?i[0]:r})(t);return new ie(n.clientX+e.left,n.clientY+e.top)},Vd=t=>t8.includes(t.type)||t.pointerType==="touch",pv=t=>{t.preventDefault(),t.stopPropagation()},vi=t=>{let e=0,n=0,r=0,i=0;for(let s=0,o=t.length;s<o;s++){const{x:a,y:l}=t[s];(a>r||!s)&&(r=a),(a<e||!s)&&(e=a),(l>i||!s)&&(i=l),(l<n||!s)&&(n=l)}return{left:e,top:n,width:r-e,height:i-n}},r8=(t,e)=>Mu(t,qt(e,t.calcOwnMatrix())),Mu=(t,e)=>{const{translateX:n,translateY:r,scaleX:i,scaleY:s,...o}=Iu(e),a=new ie(n,r);t.flipX=!1,t.flipY=!1,Object.assign(t,o),t.set({scaleX:i,scaleY:s}),t.setPositionByOrigin(a,We,We)},i8=t=>{t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},y2=t=>({scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}),Sg=(t,e,n)=>{const r=t/2,i=e/2,s=[new ie(-r,-i),new ie(r,-i),new ie(-r,i),new ie(r,i)].map(a=>a.transform(n)),o=vi(s);return new ie(o.width,o.height)},Ef=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wn;return qt(vr(arguments.length>1&&arguments[1]!==void 0?arguments[1]:wn),t)},zo=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wn,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wn;return t.transform(Ef(e,n))},s8=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wn,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wn;return t.transform(Ef(e,n),!0)},o8=(t,e,n)=>{const r=Ef(e,n);return Mu(t,qt(r,t.calcOwnMatrix())),r},a8={left:-.5,top:-.5,center:0,bottom:.5,right:.5},yn=t=>typeof t=="string"?a8[t]:t-.5,l8=new ie(1,0),b2=new ie,_2=(t,e)=>t.rotate(e),Ru=(t,e)=>new ie(e).subtract(t),Gd=t=>t.distanceFrom(b2),Wd=(t,e)=>Math.atan2(Ua(t,e),c8(t,e)),w2=t=>Wd(l8,t),xg=t=>t.eq(b2)?t:t.scalarDivide(Gd(t)),S2=function(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return xg(new ie(-t.y,t.x).scalarMultiply(e?1:-1))},Ua=(t,e)=>t.x*e.y-t.y*e.x,c8=(t,e)=>t.x*e.x+t.y*e.y,gv=(t,e,n)=>{if(t.eq(e)||t.eq(n))return!0;const r=Ua(e,n),i=Ua(e,t),s=Ua(n,t);return r>=0?i>=0&&s<=0:!(i<=0&&s>=0)},Lu="not-allowed";function x2(t){return yn(t.originX)===yn(We)&&yn(t.originY)===yn(We)}function mv(t){return .5-yn(t)}const Sr=(t,e)=>t[e],C2=(t,e,n,r)=>({e:t,transform:e,pointer:new ie(n,r)});function T2(t,e,n){const r=n,i=zo(t.getCenterPoint(),t.canvas.viewportTransform,void 0),s=w2(Ru(i,r))+No;return Math.round(s%No/GR)}function Cg(t,e,n,r,i){var s;let{target:o,corner:a}=t;const l=o.controls[a],c=((s=o.canvas)===null||s===void 0?void 0:s.getZoom())||1,u=o.padding/c,f=(function(d,h,g,p){const v=d.getRelativeCenterPoint(),m=g!==void 0&&p!==void 0?d.translateToGivenOrigin(v,We,We,g,p):new ie(d.left,d.top);return(d.angle?h.rotate(-It(d.angle),v):h).subtract(m)})(o,new ie(r,i),e,n);return f.x>=u&&(f.x-=u),f.x<=-u&&(f.x+=u),f.y>=u&&(f.y-=u),f.y<=u&&(f.y+=u),f.x-=l.offsetX,f.y-=l.offsetY,f}const Bu=t=>t.replace(/\s+/g," "),vv={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},uh=(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t),yv=(t,e,n,r)=>{t/=255,e/=255,n/=255;const i=Math.max(t,e,n),s=Math.min(t,e,n);let o,a;const l=(i+s)/2;if(i===s)o=a=0;else{const c=i-s;switch(a=l>.5?c/(2-i-s):c/(i+s),i){case t:o=(e-n)/c+(e<n?6:0);break;case e:o=(n-t)/c+2;break;case n:o=(t-e)/c+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),r]},bv=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(t)/(t.endsWith("%")?100:1)},Kl=t=>Math.min(Math.round(t),255).toString(16).toUpperCase().padStart(2,"0"),_v=t=>{let[e,n,r,i=1]=t;const s=Math.round(.3*e+.59*n+.11*r);return[s,s,s,i]};class yt{constructor(e){if(X(this,"isUnrecognised",!1),e)if(e instanceof yt)this.setSource([...e._source]);else if(Array.isArray(e)){const[n,r,i,s=1]=e;this.setSource([n,r,i,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in vv&&(e=vv[e]),e==="transparent"?[255,255,255,0]:yt.sourceFromHex(e)||yt.sourceFromRgb(e)||yt.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,n,r]=this.getSource();return`rgb(${e},${n},${r})`}toRgba(){return`rgba(${this.getSource().join(",")})`}toHsl(){const[e,n,r]=yv(...this.getSource());return`hsl(${e},${n}%,${r}%)`}toHsla(){const[e,n,r,i]=yv(...this.getSource());return`hsla(${e},${n}%,${r}%,${i})`}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,n,r,i]=this.getSource();return`${Kl(e)}${Kl(n)}${Kl(r)}${Kl(Math.round(255*i))}`}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(_v(this.getSource())),this}toBlackWhite(e){const[n,,,r]=_v(this.getSource()),i=n<(e||127)?0:255;return this.setSource([i,i,i,r]),this}overlayWith(e){e instanceof yt||(e=new yt(e));const n=this.getSource(),r=e.getSource(),[i,s,o]=n.map((a,l)=>Math.round(.5*a+.5*r[l]));return this.setSource([i,s,o,n[3]]),this}static fromRgb(e){return yt.fromRgba(e)}static fromRgba(e){return new yt(yt.sourceFromRgb(e))}static sourceFromRgb(e){const n=Bu(e).match(/^rgba?\(\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d{0,3}(?:\.\d+)?%?)\s?)?\)$/i);if(n){const[r,i,s]=n.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[r,i,s,bv(n[4])]}}static fromHsl(e){return yt.fromHsla(e)}static fromHsla(e){return new yt(yt.sourceFromHsl(e))}static sourceFromHsl(e){const n=Bu(e).match(/^hsla?\(\s?([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d*(?:\.\d+)?%?)\s?)?\)$/i);if(!n)return;const r=(yt.parseAngletoDegrees(n[1])%360+360)%360/360,i=parseFloat(n[2])/100,s=parseFloat(n[3])/100;let o,a,l;if(i===0)o=a=l=s;else{const c=s<=.5?s*(i+1):s+i-s*i,u=2*s-c;o=uh(u,c,r+1/3),a=uh(u,c,r),l=uh(u,c,r-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),bv(n[4])]}static fromHex(e){return new yt(yt.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const n=e.slice(e.indexOf("#")+1);let r;r=n.length<=4?n.split("").map(l=>l+l):n.match(/.{2}/g);const[i,s,o,a=255]=r.map(l=>parseInt(l,16));return[i,s,o,a/255]}}static parseAngletoDegrees(e){const n=e.toLowerCase(),r=parseFloat(n);return n.includes("rad")?ns(r):n.includes("turn")?360*r:r}}const wo=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gg;const n=/\D{0,2}$/.exec(t),r=parseFloat(t),i=rt.DPI;switch(n?.[0]){case"mm":return r*i/25.4;case"cm":return r*i/2.54;case"in":return r*i;case"pt":return r*i/72;case"pc":return r*i/72*12;case"em":return r*e;default:return r}},u8=t=>{const[e,n]=t.trim().split(" "),[r,i]=(s=e)&&s!==kn?[s.slice(1,4),s.slice(5,8)]:s===kn?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:n||"meet",alignX:r,alignY:i}},gl=function(t,e){let n,r,i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)n=`url(#SVGID_${e.id})`;else{const s=new yt(e),o=s.getAlpha();n=s.toRgb(),o!==1&&(r=o.toString())}else n="none";return i?`${t}: ${n}; ${r?`${t}-opacity: ${r}; `:""}`:`${t}="${n}" ${r?`${t}-opacity="${r}" `:""}`};class E2{getSvgStyles(e){const n=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):kn,s=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",u=this.visible?"":" visibility: hidden;",f=e?"":this.getSvgFilter(),d=gl(Wt,this.fill);return[gl(Gn,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",n,"; ","opacity: ",c,";",f,u].join("")}getSvgFilter(){return this.shadow?`filter: url(#SVGID_${this.shadow.id});`:""}getSvgCommons(){return[this.id?`id="${this.id}" `:"",this.clipPath?`clip-path="url(#${this.clipPath.clipPathId})" `:""].join("")}getSvgTransform(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix();return`${`transform="${pl(r)}`}${n}" `}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:n,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=i,n?n(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:n,reviver:r,withShadow:i,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=n?"":`style="${this.getSvgStyles()}" `,a=i?`style="${this.getSvgFilter()}" `:"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,f=this.stroke,d=this.fill,h=this.shadow,g=[],p=e.indexOf("COMMON_PARTS");let v;l&&(l.clipPathId=`CLIPPATH_${ts()}`,v=`<clipPath id="${l.clipPathId}" >
${l.toClipPathSVG(r)}</clipPath>
`),u&&g.push("<g ",a,this.getSvgCommons(),` >
`),g.push("<g ",this.getSvgTransform(!1),u?"":a+this.getSvgCommons(),` >
`);const m=[o,c,n?"":this.addPaintOrder()," ",s?`transform="${s}" `:""].join("");return e[p]=m,Zn(d)&&g.push(d.toSVG(this)),Zn(f)&&g.push(f.toSVG(this)),h&&g.push(h.toSVG(this)),l&&g.push(v),g.push(e.join("")),g.push(`</g>
`),u&&g.push(`</g>
`),r?r(g.join("")):g.join("")}addPaintOrder(){return this.paintFirst!==Wt?` paint-order="${this.paintFirst}" `:""}}function kf(t){return new RegExp("^("+t.join("|")+")\\b","i")}const Ls="textDecorationThickness",k2=["fontSize","fontWeight","fontFamily","fontStyle"],O2=["underline","overline","linethrough"],A2=[...k2,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],P2=[...A2,...O2,"textBackgroundColor","direction",Ls],f8=[...k2,...O2,Gn,"strokeWidth",Wt,"deltaY","textBackgroundColor",Ls],h8={_reNewline:mg,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:Ud,fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:ft,fontStyle:Ud,lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:ft,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:vs,CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[Ls]:66.667},Nr="justify",ju="justify-left",Ha="justify-right",Va="justify-center",Bs=String.raw`[-+]?(?:\d*\.\d+|\d+\.?)(?:[eE][-+]?\d+)?`,d8=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Bs+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Bs+"))?\\s+(.*)"),p8={cx:ft,x:ft,r:"radius",cy:En,y:En,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":Ls},fh="font-size",hh="clip-path";kf(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);kf(["symbol","image","marker","pattern","view","svg"]);const wv=kf(["symbol","g","a","svg","clipPath","defs"]),Sv="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",xv=new RegExp("(?:\\s|^)"+Sv+Sv+"("+Bs+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class yi{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=typeof e=="string"?yi.parseShadow(e):e;Object.assign(this,yi.ownDefaults,n),this.id=ts()}static parseShadow(e){const n=e.trim(),[,r=0,i=0,s=0]=(xv.exec(n)||[]).map(o=>parseFloat(o)||0);return{color:(n.replace(xv,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:i,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const n=_2(new ie(this.offsetX,this.offsetY),It(-e.angle)),r=new yt(this.color);let i=40,s=40;return e.width&&e.height&&(i=100*Ct((Math.abs(n.x)+this.blur)/e.width,rt.NUM_FRACTION_DIGITS)+20,s=100*Ct((Math.abs(n.y)+this.blur)/e.height,rt.NUM_FRACTION_DIGITS)+20),e.flipX&&(n.x*=-1),e.flipY&&(n.y*=-1),`<filter id="SVGID_${this.id}" y="-${s}%" height="${100+2*s}%" x="-${i}%" width="${100+2*i}%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="${Ct(this.blur?this.blur/2:0,rt.NUM_FRACTION_DIGITS)}"></feGaussianBlur>
	<feOffset dx="${Ct(n.x,rt.NUM_FRACTION_DIGITS)}" dy="${Ct(n.y,rt.NUM_FRACTION_DIGITS)}" result="oBlur" ></feOffset>
	<feFlood flood-color="${r.toRgb()}" flood-opacity="${r.getAlpha()}"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},n=yi.ownDefaults;return this.includeDefaultValues?e:wg(e,(r,i)=>r!==n[i])}static async fromObject(e){return new this(e)}}X(yi,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),X(yi,"type","shadow"),Fe.setClass(yi,"shadow");const $o=(t,e,n)=>Math.max(t,Math.min(e,n)),g8=[En,ft,On,sr,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Qo,ea],Di=[Wt,Gn,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],m8={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:We,originY:We,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Wt,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},v8=(t,e,n,r)=>-n*Math.cos(t/r*Tl)+n+e,y8=()=>!1;class Tg{constructor(e){let{startValue:n,byValue:r,duration:i=500,delay:s=0,easing:o=v8,onStart:a=tu,onChange:l=tu,onComplete:c=tu,abort:u=y8,target:f}=e;X(this,"_state","pending"),X(this,"durationProgress",0),X(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=s,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=u,this.target=f,this.startValue=n,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=n=>{this._state==="pending"&&(this.startTime=n||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>ru(e),this.delay):ru(e)}tick(e){const n=(e||+new Date)-this.startTime,r=Math.min(n,this.duration);this.durationProgress=r/this.duration;const{value:i,valueProgress:s}=this.calculate(r);this.value=Object.freeze(i),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):n>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),ru(this.tick)))}register(){Du.push(this)}unregister(){Du.remove(this)}abort(){this._state="aborted",this.unregister()}}class b8 extends Tg{constructor(e){let{startValue:n=0,endValue:r=100,...i}=e;super({...i,startValue:n,byValue:r-n})}calculate(e){const n=this.easing(e,this.startValue,this.byValue,this.duration);return{value:n,valueProgress:Math.abs((n-this.startValue)/this.byValue)}}}class _8 extends Tg{constructor(e){let{startValue:n=[0],endValue:r=[100],...i}=e;super({...i,startValue:n,byValue:r.map((s,o)=>s-n[o])})}calculate(e){const n=this.startValue.map((r,i)=>this.easing(e,r,this.byValue[i],this.duration,i));return{value:n,valueProgress:Math.abs((n[0]-this.startValue[0])/this.byValue[0])}}}const w8=(t,e,n,r)=>e+n*(1-Math.cos(t/r*Tl)),dh=t=>t&&((e,n,r)=>t(new yt(e).toRgba(),n,r));class S8 extends Tg{constructor(e){let{startValue:n,endValue:r,easing:i=w8,onChange:s,onComplete:o,abort:a,...l}=e;const c=new yt(n).getSource(),u=new yt(r).getSource();super({...l,startValue:c,byValue:u.map((f,d)=>f-c[d]),easing:i,onChange:dh(s),onComplete:dh(o),abort:dh(a)})}calculate(e){const[n,r,i,s]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),o=[...[n,r,i].map(Math.round),$o(0,s,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function F2(t){const e=(n=>Array.isArray(n.startValue)||Array.isArray(n.endValue))(t)?new _8(t):new b8(t);return e.start(),e}function x8(t){const e=new S8(t);return e.start(),e}class At{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(n=>n.eq(e))}append(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.points=this.points.concat(n.filter(i=>!this.includes(i))),this}static isPointContained(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(n.eq(r))return e.eq(n);if(n.x===r.x)return e.x===n.x&&(i||e.y>=Math.min(n.y,r.y)&&e.y<=Math.max(n.y,r.y));if(n.y===r.y)return e.y===n.y&&(i||e.x>=Math.min(n.x,r.x)&&e.x<=Math.max(n.x,r.x));{const s=Ru(n,r),o=Ru(n,e).divide(s);return i?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,n){const r=new ie(e).setX(Math.min(e.x-1,...n.map(s=>s.x)));let i=0;for(let s=0;s<n.length;s++){const o=this.intersectSegmentSegment(n[s],n[(s+1)%n.length],e,r);if(o.includes(e))return!0;i+=+(o.status==="Intersection")}return i%2==1}static intersectLineLine(e,n,r,i){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=n.x-e.x,l=n.y-e.y,c=i.x-r.x,u=i.y-r.y,f=e.x-r.x,d=e.y-r.y,h=c*d-u*f,g=a*d-l*f,p=u*a-c*l;if(p!==0){const v=h/p,m=g/p;return(s||0<=v&&v<=1)&&(o||0<=m&&m<=1)?new At("Intersection").append(new ie(e.x+v*a,e.y+v*l)):new At}if(h===0||g===0){const v=s||o||At.isPointContained(e,r,i)||At.isPointContained(n,r,i)||At.isPointContained(r,e,n)||At.isPointContained(i,e,n);return new At(v?"Coincident":void 0)}return new At("Parallel")}static intersectSegmentLine(e,n,r,i){return At.intersectLineLine(e,n,r,i,!1,!0)}static intersectSegmentSegment(e,n,r,i){return At.intersectLineLine(e,n,r,i,!1,!1)}static intersectLinePolygon(e,n,r){let i=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new At,o=r.length;for(let a,l,c,u=0;u<o;u++){if(a=r[u],l=r[(u+1)%o],c=At.intersectLineLine(e,n,a,l,i,!1),c.status==="Coincident")return c;s.append(...c.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,n,r){return At.intersectLinePolygon(e,n,r,!1)}static intersectPolygonPolygon(e,n){const r=new At,i=e.length,s=[];for(let o=0;o<i;o++){const a=e[o],l=e[(o+1)%i],c=At.intersectSegmentPolygon(a,l,n);c.status==="Coincident"?(s.push(c),r.append(a,l)):r.append(...c.points)}return s.length>0&&s.length===e.length?new At("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,n,r){const i=n.min(r),s=n.max(r),o=new ie(s.x,i.y),a=new ie(i.x,s.y);return At.intersectPolygonPolygon(e,[i,o,s,a])}}class C8 extends a2{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?xn(e,this.group.calcTransformMatrix()):e}setXY(e,n,r){this.group&&(e=xn(e,vr(this.group.calcTransformMatrix()))),this.setRelativeXY(e,n,r)}getRelativeXY(){return new ie(this.left,this.top)}setRelativeXY(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,n,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:n,br:r,bl:i}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,n,r,i];if(this.group){const o=this.group.calcTransformMatrix();return s.map(a=>xn(a,o))}return s}intersectsWithRect(e,n){return At.intersectPolygonRectangle(this.getCoords(),e,n).status==="Intersection"}intersectsWithObject(e){const n=At.intersectPolygonPolygon(this.getCoords(),e.getCoords());return n.status==="Intersection"||n.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(n=>e.containsPoint(n))}isContainedWithinRect(e,n){const{left:r,top:i,width:s,height:o}=this.getBoundingRect();return r>=e.x&&r+s<=n.x&&i>=e.y&&i+o<=n.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return At.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:n}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=n.x&&r.x>=e.x&&r.y<=n.y&&r.y>=e.y)||!!this.intersectsWithRect(e,n)||this.containsPoint(e.midPointFrom(n))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:n}=this.canvas.vptCoords;return this.intersectsWithRect(e,n)?!0:this.getCoords().every(r=>(r.x>=n.x||r.x<=e.x)&&(r.y>=n.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(n))}getBoundingRect(){return vi(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(On,e),this._set(sr,e),this.setCoords()}scaleToWidth(e){const n=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/n)}scaleToHeight(e){const n=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/n)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?ns(u2(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||wn.concat()}calcACoords(){const e=ta({angle:this.angle}),{x:n,y:r}=this.getRelativeCenterPoint(),i=El(n,r),s=qt(i,e),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:xn({x:-a,y:-l},s),tr:xn({x:a,y:-l},s),bl:xn({x:-a,y:l},s),br:xn({x:a,y:l},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=[];return!e&&this.group&&(n=this.group.transformMatrixKey(e)),n.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,yn(this.originX),yn(this.originY)),n}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=this.calcOwnMatrix();if(e||!this.group)return n;const r=this.transformMatrixKey(e),i=this.matrixCache;return i&&i.key.every((s,o)=>s===r[o])?i.value:(this.group&&(n=qt(this.group.calcTransformMatrix(!1),n)),this.matrixCache={key:r,value:n},n)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),n=this.ownMatrixCache;if(n&&n.key.every((o,a)=>o===e[a]))return n.value;const r=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=QR(i);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new ie(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth,...e},r=n.strokeWidth;let i=r,s=0;this.strokeUniform&&(i=0,s=r);const o=n.width+i,a=n.height+i;let l;return l=n.skewX===0&&n.skewY===0?new ie(o*n.scaleX,a*n.scaleY):Sg(o,a,Cf(n)),l.scalarAdd(s)}translateToGivenOrigin(e,n,r,i,s){let o=e.x,a=e.y;const l=yn(i)-yn(n),c=yn(s)-yn(r);if(l||c){const u=this._getTransformedDimensions();o+=l*u.x,a+=c*u.y}return new ie(o,a)}translateToCenterPoint(e,n,r){if(n===We&&r===We)return e;const i=this.translateToGivenOrigin(e,n,r,We,We);return this.angle?i.rotate(It(this.angle),e):i}translateToOriginPoint(e,n,r){const i=this.translateToGivenOrigin(e,We,We,n,r);return this.angle?i.rotate(It(this.angle),e):i}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?xn(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new ie(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,n){return this.getPositionByOrigin(e,n)}getPositionByOrigin(e,n){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,n)}setPositionByOrigin(e,n,r){const i=this.translateToCenterPoint(e,n,r),s=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.getPositionByOrigin(ft,En)}positionByLeftTop(e){return this.setPositionByOrigin(e,ft,En)}}let Qr=class su extends C8{static getDefaults(){return su.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){es("warn","Setting type has no effect",e)}constructor(e){super(),X(this,"_cacheContext",null),Object.assign(this,su.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Ei(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const n=e.width,r=e.height,i=rt.maxCacheSideLimit,s=rt.minCacheSideLimit;if(n<=i&&r<=i&&n*r<=rt.perfLimitSizeTotal)return n<s&&(e.width=s),r<s&&(e.height=s),e;const o=n/r,[a,l]=$a.limitDimsByArea(o),c=$o(s,a,i),u=$o(s,l,i);return n>c&&(e.zoomX/=n/c,e.width=c,e.capped=!0),r>u&&(e.zoomY/=r/u,e.height=u,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),n=this._getTransformedDimensions({skewX:0,skewY:0}),r=n.x*e.x/this.scaleX,i=n.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(i+2),zoomX:e.x,zoomY:e.y,x:r,y:i}}_updateCacheCanvas(){const e=this._cacheCanvas,n=this._cacheContext,{width:r,height:i,zoomX:s,zoomY:o,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),c=r!==e.width||i!==e.height,u=this.zoomX!==s||this.zoomY!==o;if(!e||!n)return!1;if(c||u){r!==e.width||i!==e.height?(e.width=r,e.height=i):(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height));const f=a/2,d=l/2;return this.cacheTranslationX=Math.round(e.width/2-f)+f,this.cacheTranslationY=Math.round(e.height/2-d)+d,n.translate(this.cacheTranslationX,this.cacheTranslationY),n.scale(s,o),this.zoomX=s,this.zoomY=o,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const n=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!n);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new ie(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Iu(this.calcTransformMatrix());return new ie(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const n=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(n*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,n){e!==On&&e!==sr||(n=this._constrainScale(n)),e===On&&n<0?(this.flipX=!this.flipX,n*=-1):e==="scaleY"&&n<0?(this.flipY=!this.flipY,n*=-1):e!=="shadow"||!n||n instanceof yi||(n=new yi(n));const r=this[e]!==n;return this[e]=n,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:n,zoomY:r,cacheTranslationX:i,cacheTranslationY:s}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:n,zoomY:r,cacheTranslationX:i,cacheTranslationY:s,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return!!this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return!!this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Gn&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,n,r){e.save(),n.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,n,r){const i=this.fill,s=this.stroke;n?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=i,this.stroke=s}createClipPathLayer(e,n){const r=or(n),i=r.getContext("2d");if(i.translate(n.cacheTranslationX,n.cacheTranslationY),i.scale(n.zoomX,n.zoomY),e._cacheCanvas=r,n.parentClipPaths.forEach(s=>{s.transform(i)}),n.parentClipPaths.push(e),e.absolutePositioned){const s=vr(this.calcTransformMatrix());i.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return e.transform(i),e.drawObject(i,!0,n),r}_drawClipPath(e,n,r){if(!n)return;n._transformDone=!0;const i=this.createClipPathLayer(n,r);this.drawClipPathOnCache(e,n,i)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const n=this._cacheCanvas,r=this._cacheContext;return!(!n||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(n&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,n.width,n.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const n=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,n){const r=n.stroke;r&&(e.lineWidth=n.strokeWidth,e.lineCap=n.strokeLineCap,e.lineDashOffset=n.strokeDashOffset,e.lineJoin=n.strokeLineJoin,e.miterLimit=n.strokeMiterLimit,Zn(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=n.stroke)}_setFillStyles(e,n){let{fill:r}=n;r&&(Zn(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,n){n&&n.length!==0&&e.setLineDash(n)}_setShadow(e){if(!this.shadow)return;const n=this.shadow,r=this.canvas,i=this.getCanvasRetinaScaling(),[s,,,o]=r?.viewportTransform||wn,a=s*i,l=o*i,c=n.nonScaling?new ie(1,1):this.getObjectScaling();e.shadowColor=n.color,e.shadowBlur=n.blur*rt.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,e.shadowOffsetX=n.offsetX*a*c.x,e.shadowOffsetY=n.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,n){if(!Zn(n))return{offsetX:0,offsetY:0};const r=n.gradientTransform||n.patternTransform,i=-this.width/2+n.offsetX||0,s=-this.height/2+n.offsetY||0;return n.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,i,s):e.transform(1,0,0,1,i,s),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:i,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===Gn?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const n=this.getObjectScaling();e.scale(1/n.x,1/n.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,n){var r;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),o=i.x/this.scaleX/s,a=i.y/this.scaleY/s,l=or({width:Math.ceil(o),height:Math.ceil(a)}),c=l.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(o,0),c.lineTo(o,a),c.lineTo(0,a),c.closePath(),c.translate(o/2,a/2),c.scale(i.zoomX/this.scaleX/s,i.zoomY/this.scaleY/s),this._applyPatternGradientTransform(c,n),c.fillStyle=n.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/i.zoomX,s*this.scaleY/i.zoomY),e.strokeStyle=(r=c.createPattern(l,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new ie(this.left+this.width/2,this.top+this.height/2)}clone(e){const n=this.toObject(e);return this.constructor.fromObject(n)}cloneAsImage(e){const n=this.toCanvasElement(e);return new(Fe.getClass("image"))(n)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=y2(this),r=this.group,i=this.shadow,s=Math.abs,o=e.enableRetinaScaling?n2():1,a=(e.multiplier||1)*o,l=e.canvasProvider||(y=>new kl(y,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&i8(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&o8(this,this.getViewportTransform()),this.setCoords();const c=Ei(),u=this.getBoundingRect(),f=this.shadow,d=new ie;if(f){const y=f.blur,_=f.nonScaling?new ie(1,1):this.getObjectScaling();d.x=2*Math.round(s(f.offsetX)+y)*s(_.x),d.y=2*Math.round(s(f.offsetY)+y)*s(_.y)}const h=u.width+d.x,g=u.height+d.y;c.width=Math.ceil(h),c.height=Math.ceil(g);const p=l(c);e.format==="jpeg"&&(p.backgroundColor="#fff"),this.setPositionByOrigin(new ie(p.width/2,p.height/2),We,We);const v=this.canvas;p._objects=[this],this.set("canvas",p),this.setCoords();const m=p.toCanvasElement(a||1,e);return this.set("canvas",v),this.shadow=i,r&&(this.group=r),this.set(n),this.setCoords(),p._objects=[],p.destroy(),m}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return l2(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return c2(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.includes(this.constructor.type)||n.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:n,originX:r,originY:i}=this;if(n){const{x:s,y:o}=this.getRelativeCenterPoint();this.originX=We,this.originY=We,this.left=s,this.top=o}if(this.set("angle",e),n){const{x:s,y:o}=this.getPositionByOrigin(r,i);this.left=s,this.top=o,this.originX=r,this.originY=i}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Du.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Gr().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,n){return Object.entries(e).reduce((r,i)=>{let[s,o]=i;return r[s]=this._animate(s,o,n),r},{})}_animate(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.split("."),s=this.constructor.colorProperties.includes(i[i.length-1]),{abort:o,startValue:a,onChange:l,onComplete:c}=r,u={...r,target:this,startValue:a??i.reduce((f,d)=>f[d],this),endValue:n,abort:o?.bind(this),onChange:(f,d,h)=>{i.reduce((g,p,v)=>(v===i.length-1&&(g[p]=f),g[p]),this),l&&l(f,d,h)},onComplete:(f,d,h)=>{this.setCoords(),c&&c(f,d,h)}};return s?x8(u):F2(u)}isDescendantOf(e){const{parent:n,group:r}=this;return n===e||r===e||!!n&&n.isDescendantOf(e)||!!r&&r!==n&&r.isDescendantOf(e)}getAncestors(){const e=[];let n=this;do n=n.parent,n&&e.push(n);while(n);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const n=this.getAncestors(),r=e.getAncestors();if(n.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let i,s=0;s<n.length;s++){if(i=n[s],i===e)return{fork:[this,...n.slice(0,s)],otherFork:[],common:n.slice(s)};for(let o=0;o<r.length;o++){if(this===r[o])return{fork:[],otherFork:[e,...r.slice(0,o)],common:[this,...n]};if(i===r[o])return{fork:[this,...n.slice(0,s)],otherFork:[e,...r.slice(0,o)],common:n.slice(s)}}}return{fork:[this,...n],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const n=this.findCommonAncestors(e);return n&&!!n.common.length}isInFrontOf(e){if(this===e)return;const n=this.findCommonAncestors(e);if(n.fork.includes(e))return!0;if(n.otherFork.includes(this))return!1;const r=n.common[0]||this.canvas;if(!r)return;const i=n.fork.pop(),s=n.otherFork.pop(),o=r._objects.indexOf(i),a=r._objects.indexOf(s);return o>-1&&o>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(su.customProperties,this.constructor.customProperties||[]);let n;const r=rt.NUM_FRACTION_DIGITS,{clipPath:i,fill:s,stroke:o,shadow:a,strokeDashArray:l,left:c,top:u,originX:f,originY:d,width:h,height:g,strokeWidth:p,strokeLineCap:v,strokeDashOffset:m,strokeLineJoin:y,strokeUniform:_,strokeMiterLimit:b,scaleX:x,scaleY:E,angle:T,flipX:O,flipY:k,opacity:I,visible:R,backgroundColor:C,fillRule:P,paintFirst:S,globalCompositeOperation:$,skewX:Z,skewY:H}=this;i&&!i.excludeFromExport&&(n=i.toObject(e.concat("inverted","absolutePositioned")));const K=ce=>Ct(ce,r),Q={...na(this,e),type:this.constructor.type,version:zd,originX:f,originY:d,left:K(c),top:K(u),width:K(h),height:K(g),fill:fv(s)?s.toObject():s,stroke:fv(o)?o.toObject():o,strokeWidth:K(p),strokeDashArray:l&&l.concat(),strokeLineCap:v,strokeDashOffset:m,strokeLineJoin:y,strokeUniform:_,strokeMiterLimit:K(b),scaleX:K(x),scaleY:K(E),angle:K(T),flipX:O,flipY:k,opacity:K(I),shadow:a&&a.toObject(),visible:R,backgroundColor:C,fillRule:P,paintFirst:S,globalCompositeOperation:$,skewX:K(Z),skewY:K(H),...n?{clipPath:n}:null};return this.includeDefaultValues?Q:this._removeDefaultValues(Q)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const n=this.constructor.getDefaults(),r=Object.keys(n).length>0?n:Object.getPrototypeOf(this);return wg(e,(i,s)=>{if(s===ft||s===En||s==="type")return!0;const o=r[s];return i!==o&&!(Array.isArray(i)&&Array.isArray(o)&&i.length===0&&o.length===0)})}toString(){return`#<${this.constructor.type}>`}static _fromObject(e){let{type:n,...r}=e,{extraParam:i,...s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Tf(r,s).then(o=>i?(delete o[i],new this(r[i],o)):new this(o))}static fromObject(e,n){return this._fromObject(e,n)}};X(Qr,"stateProperties",g8),X(Qr,"cacheProperties",Di),X(Qr,"ownDefaults",m8),X(Qr,"type","FabricObject"),X(Qr,"colorProperties",[Wt,Gn,"backgroundColor"]),X(Qr,"customProperties",[]),Fe.setClass(Qr),Fe.setClass(Qr,"object");const D2=(t,e)=>{var n;const{transform:{target:r}}=e;(n=r.canvas)===null||n===void 0||n.fire(`object:${t}`,{...e,target:r}),r.fire(t,e)},ra=(t,e,n)=>(r,i,s,o)=>{const a=e(r,i,s,o);return a&&D2(t,{...C2(r,i,s,o),...n}),a};function ia(t){return(e,n,r,i)=>{const{target:s,originX:o,originY:a}=n,l=s.getPositionByOrigin(o,a),c=t(e,n,r,i);return s.setPositionByOrigin(l,n.originX,n.originY),c}}const T8=(t,e,n,r)=>(i,s,o,a)=>{const l=Cg(s,s.originX,s.originY,o,a)[n],c=yn(s[e]);if(c===0||c>0&&l<0||c<0&&l>0){const{target:u}=s,f=u.strokeWidth/(u.strokeUniform?u[r]:1),d=x2(s)?2:1,h=u[t],g=Math.abs(l*d/u[r])-f;return u.set(t,Math.max(g,1)),h!==u[t]}return!1},E8=T8("width","originX","x","scaleX"),Cv=ra(hl,ia(E8));function k8(t,e,n,r,i){t.save();const{stroke:s,xSize:o,ySize:a,opName:l}=this.commonRenderProps(t,e,n,i,r);let c=o;o>a?t.scale(1,a/o):a>o&&(c=a,t.scale(o/a,1)),t.beginPath(),t.arc(0,0,c/2,0,No,!1),t[l](),s&&t.stroke(),t.restore()}function O8(t,e,n,r,i){t.save();const{stroke:s,xSize:o,ySize:a,opName:l}=this.commonRenderProps(t,e,n,i,r),c=o/2,u=a/2;t[`${l}Rect`](-c,-u,o,a),s&&t.strokeRect(-c,-u,o,a),t.restore()}class fr{constructor(e){X(this,"visible",!0),X(this,"actionName",xf),X(this,"angle",0),X(this,"x",0),X(this,"y",0),X(this,"offsetX",0),X(this,"offsetY",0),X(this,"sizeX",0),X(this,"sizeY",0),X(this,"touchSizeX",0),X(this,"touchSizeY",0),X(this,"cursorStyle","crosshair"),X(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,n,r,i){var s;let{tl:o,tr:a,br:l,bl:c}=i;return((s=n.canvas)===null||s===void 0?void 0:s.getActiveObject())===n&&n.isControlVisible(e)&&At.isPointInPolygon(r,[o,a,l,c])}getActionHandler(e,n,r){return this.actionHandler}getMouseDownHandler(e,n,r){return this.mouseDownHandler}getMouseUpHandler(e,n,r){return this.mouseUpHandler}cursorStyleHandler(e,n,r,i){return n.cursorStyle}getActionName(e,n,r){return n.actionName}getVisibility(e,n){var r,i;return(r=(i=e._controlsVisibility)===null||i===void 0?void 0:i[n])!==null&&r!==void 0?r:this.visible}setVisibility(e,n,r){this.visible=e}positionHandler(e,n,r,i){return new ie(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(n)}calcCornerCoords(e,n,r,i,s,o){const a=bg([El(r,i),ta({angle:e}),_g((s?this.touchSizeX:this.sizeX)||n,(s?this.touchSizeY:this.sizeY)||n)]);return{tl:new ie(-.5,-.5).transform(a),tr:new ie(.5,-.5).transform(a),br:new ie(.5,.5).transform(a),bl:new ie(-.5,.5).transform(a)}}commonRenderProps(e,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const{cornerSize:o,cornerColor:a,transparentCorners:l,cornerStrokeColor:c}=s,u=o||i.cornerSize,f=this.sizeX||u,d=this.sizeY||u,h=l!==void 0?l:i.transparentCorners,g=h?Gn:Wt,p=c||i.cornerStrokeColor,v=!h&&!!p;return e.fillStyle=a||i.cornerColor||"",e.strokeStyle=p||"",e.translate(n,r),e.rotate(It(i.getTotalAngle())),{stroke:v,xSize:f,ySize:d,transparentCorners:h,opName:g}}render(e,n,r,i,s){((i=i||{}).cornerStyle||s.cornerStyle)==="circle"?k8.call(this,e,n,r,i,s):O8.call(this,e,n,r,i,s)}}const A8=(t,e,n)=>n.lockRotation?Lu:e.cursorStyle,P8=ra(i2,ia((t,e,n,r)=>{let{target:i,ex:s,ey:o,theta:a,originX:l,originY:c}=e;const u=i.getPositionByOrigin(l,c);if(Sr(i,"lockRotation"))return!1;const f=Math.atan2(o-u.y,s-u.x),d=Math.atan2(r-u.y,n-u.x);let h=ns(d-f+a);if(i.snapAngle&&i.snapAngle>0){const p=i.snapAngle,v=i.snapThreshold||p,m=Math.ceil(h/p)*p,y=Math.floor(h/p)*p;Math.abs(h-y)<v?h=y:Math.abs(h-m)<v&&(h=m)}h<0&&(h=360+h),h%=360;const g=i.angle!==h;return i.angle=h,g}));function I2(t,e){const n=e.canvas,r=t[n.uniScaleKey];return n.uniformScaling&&!r||!n.uniformScaling&&r}function M2(t,e,n){const r=Sr(t,"lockScalingX"),i=Sr(t,"lockScalingY");if(r&&i||!e&&(r||i)&&n||r&&e==="x"||i&&e==="y")return!0;const{width:s,height:o,strokeWidth:a}=t;return s===0&&a===0&&e!=="y"||o===0&&a===0&&e!=="x"}const F8=["e","se","s","sw","w","nw","n","ne","e"],Ea=(t,e,n,r)=>{const i=I2(t,n);if(M2(n,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",i))return Lu;const s=T2(n,0,r);return`${F8[s]}-resize`};function Eg(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,o=i.by,a=I2(t,s);let l,c,u,f,d,h;if(M2(s,o,a))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,u=e.scaleY*e.gestureScale;else{if(l=Cg(e,e.originX,e.originY,n,r),d=o!=="y"?Math.sign(l.x||e.signX||1):1,h=o!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=d),e.signY||(e.signY=h),Sr(s,"lockScalingFlip")&&(e.signX!==d||e.signY!==h))return!1;if(f=s._getTransformedDimensions(),a&&!o){const v=Math.abs(l.x)+Math.abs(l.y),{original:m}=e,y=v/(Math.abs(f.x*m.scaleX/s.scaleX)+Math.abs(f.y*m.scaleY/s.scaleY));c=m.scaleX*y,u=m.scaleY*y}else c=Math.abs(l.x*s.scaleX/f.x),u=Math.abs(l.y*s.scaleY/f.y);x2(e)&&(c*=2,u*=2),e.signX!==d&&o!=="y"&&(e.originX=mv(e.originX),c*=-1,e.signX=d),e.signY!==h&&o!=="x"&&(e.originY=mv(e.originY),u*=-1,e.signY=h)}const g=s.scaleX,p=s.scaleY;return o?(o==="x"&&s.set(On,c),o==="y"&&s.set(sr,u)):(!Sr(s,"lockScalingX")&&s.set(On,c),!Sr(s,"lockScalingY")&&s.set(sr,u)),g!==s.scaleX||p!==s.scaleY}const ql=ra(Sf,ia((t,e,n,r)=>Eg(t,e,n,r))),D8=ra(Sf,ia((t,e,n,r)=>Eg(t,e,n,r,{by:"x"}))),I8=ra(Sf,ia((t,e,n,r)=>Eg(t,e,n,r,{by:"y"}))),ph={x:{counterAxis:"y",scale:On,skew:Qo,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:sr,skew:ea,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},M8=["ns","nesw","ew","nwse"],R8=(t,e,n,r)=>{if(e.x!==0&&Sr(n,"lockSkewingY")||e.y!==0&&Sr(n,"lockSkewingX"))return Lu;const i=T2(n,0,r)%4;return`${M8[i]}-resize`};function R2(t,e,n,r,i){const{target:s}=n,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:u}=ph[t];if(Sr(s,l))return!1;const{origin:f,flip:d}=ph[o],h=yn(n[f])*(s[d]?-1:1),g=-Math.sign(h)*(s[u]?-1:1),p=.5*-((s[c]===0&&Cg(n,We,We,r,i)[t]>0||s[c]>0?1:-1)*g)+.5;return ra(s2,ia((m,y,_,b)=>(function(x,E,T){let{target:O,ex:k,ey:I,skewingSide:R,...C}=E;const{skew:P}=ph[x],S=T.subtract(new ie(k,I)).divide(new ie(O.scaleX,O.scaleY))[x],$=O[P],Z=C[P],H=Math.tan(It(Z)),K=x==="y"?O._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:O._getTransformedDimensions({scaleX:1,scaleY:1}).y,Q=2*S*R/Math.max(K,1)+H,ce=ns(Math.atan(Q));O.set(P,ce);const Y=$!==O[P];if(Y&&x==="y"){const{skewX:U,scaleX:he}=O,re=O._getTransformedDimensions({skewY:$}),te=O._getTransformedDimensions(),Ce=U!==0?re.x/te.x:1;Ce!==1&&O.set(On,Ce*he)}return Y})(t,y,new ie(_,b))))(e,{...n,[a]:p,skewingSide:g},r,i)}const L8=(t,e,n,r)=>R2("x",t,e,n,r),B8=(t,e,n,r)=>R2("y",t,e,n,r);function Of(t,e){return t[e.canvas.altActionKey]}const Zl=(t,e,n)=>{const r=Of(t,n);return e.x===0?r?Qo:sr:e.y===0?r?ea:On:""},uo=(t,e,n,r)=>Of(t,n)?R8(0,e,n,r):Ea(t,e,n,r),Tv=(t,e,n,r)=>Of(t,e.target)?B8(t,e,n,r):D8(t,e,n,r),Ev=(t,e,n,r)=>Of(t,e.target)?L8(t,e,n,r):I8(t,e,n,r),L2=()=>({ml:new fr({x:-.5,y:0,cursorStyleHandler:uo,actionHandler:Tv,getActionName:Zl}),mr:new fr({x:.5,y:0,cursorStyleHandler:uo,actionHandler:Tv,getActionName:Zl}),mb:new fr({x:0,y:.5,cursorStyleHandler:uo,actionHandler:Ev,getActionName:Zl}),mt:new fr({x:0,y:-.5,cursorStyleHandler:uo,actionHandler:Ev,getActionName:Zl}),tl:new fr({x:-.5,y:-.5,cursorStyleHandler:Ea,actionHandler:ql}),tr:new fr({x:.5,y:-.5,cursorStyleHandler:Ea,actionHandler:ql}),bl:new fr({x:-.5,y:.5,cursorStyleHandler:Ea,actionHandler:ql}),br:new fr({x:.5,y:.5,cursorStyleHandler:Ea,actionHandler:ql}),mtr:new fr({x:0,y:-.5,actionHandler:P8,cursorStyleHandler:A8,offsetY:-40,withConnection:!0,actionName:vg})}),j8=()=>({mr:new fr({x:.5,y:0,actionHandler:Cv,cursorStyleHandler:uo,actionName:hl}),ml:new fr({x:-.5,y:0,actionHandler:Cv,cursorStyleHandler:uo,actionName:hl})}),N8=()=>({...L2(),...j8()});class ml extends Qr{static getDefaults(){return{...super.getDefaults(),...ml.ownDefaults}}constructor(e){super(),Object.assign(this,this.constructor.createControls(),ml.ownDefaults),this.setOptions(e)}static createControls(){return{controls:L2()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const n=e._currentTransform,r=n.target,i=n.action;if(this===r&&i&&i.startsWith(xf))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let i=r.length-1;i>=0;i--){const[s,o]=r[i],a=this.controls[s];if(a.shouldActivate(s,this,e,n?o.touchCorner:o.corner))return this.__corner=s,{key:s,control:a,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),n=this.getCenterPoint(),r=El(n.x,n.y),i=ta({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=qt(r,i),o=qt(e,s),a=qt(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?Iu(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),u={};return this.forEachControl((f,d)=>{const h=f.positionHandler(c,a,this,f);u[d]=Object.assign(h,this._calcCornerCoords(f,h))}),u}_calcCornerCoords(e,n){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,n.x,n.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,n.x,n.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const n in this.controls)e(this.controls[n],n,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const n=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),i=this.getViewportTransform();e.translate(n.x,n.y),e.scale(1/i[0],1/i[3]),e.rotate(It(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,n){e.strokeRect(-n.x/2,-n.y/2,n.x,n.y)}_drawBorders(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i={hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray,...r};e.save(),e.strokeStyle=i.borderColor,this._setLineDash(e,i.borderDashArray),this.strokeBorders(e,n),i.hasControls&&this.drawControlsConnectingLines(e,n),e.restore()}_renderControls(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:i}=this,s={hasBorders:r,hasControls:i,...n},o=this.getViewportTransform(),a=s.hasBorders,l=s.hasControls,c=qt(o,this.calcTransformMatrix()),u=Iu(c);e.save(),e.translate(u.translateX,u.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),e.rotate(It(this.group?u.angle:this.angle)),a&&this.drawBorders(e,u,n),l&&this.drawControls(e,n),e.restore()}drawBorders(e,n,r){let i;if(r&&r.forActiveSelection||this.group){const s=Sg(this.width,this.height,Cf(n)),o=this.isStrokeAccountedForInDimensions()?yg:(this.strokeUniform?new ie().scalarAdd(this.canvas?this.canvas.getZoom():1):new ie(n.scaleX,n.scaleY)).scalarMultiply(this.strokeWidth);i=s.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,i,r)}drawControlsConnectingLines(e,n){let r=!1;e.beginPath(),this.forEachControl((i,s)=>{i.withConnection&&i.getVisibility(this,s)&&(r=!0,e.moveTo(i.x*n.x,i.y*n.y),e.lineTo(i.x*n.x+i.offsetX,i.y*n.y+i.offsetY))}),r&&e.stroke()}drawControls(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:s,cornerColor:o}=this,a={cornerStrokeColor:i,cornerDashArray:s,cornerColor:o,...n};e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const u=this.oCoords[c];l.render(e,u.x,u.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,n){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=n}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(n=>{let[r,i]=n;return this.setControlVisible(r,i)})}clearContextTop(e){if(!this.canvas)return;const n=this.canvas.contextTop;if(!n)return;const r=this.canvas.viewportTransform;n.save(),n.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(n);const i=this.width+4,s=this.height+4;return n.clearRect(-i/2,-s/2,i,s),e||n.restore(),n}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function B2(t,e){return e.forEach(n=>{Object.getOwnPropertyNames(n.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(n.prototype,r)||Object.create(null))})}),t}X(ml,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class cn extends ml{}B2(cn,[E2]),Fe.setClass(cn),Fe.setClass(cn,"object");const z8=(t,e,n,r)=>{const i=2*(r=Math.round(r))+1,{data:s}=t.getImageData(e-r,n-r,i,i);for(let o=3;o<s.length;o+=4)if(s[o]>0)return!1;return!0};class j2{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new ie(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new ie(1/this.options.scaleX,1/this.options.scaleY):new ie(1,1)}createSideVector(e,n){const r=Ru(e,n);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,n,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,n,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const n=new ie(e);return n.y+=n.x*Math.tan(It(this.options.skewY)),n.x+=n.y*Math.tan(It(this.options.skewX)),n}scaleUnitVector(e,n){return e.multiply(this.strokeUniformScalar).scalarMultiply(n)}}const $8=new ie;class So extends j2{static getOrthogonalRotationFactor(e,n){const r=n?Wd(e,n):w2(e);return Math.abs(r)<Tl?-1:1}constructor(e,n,r,i){super(i),X(this,"AB",void 0),X(this,"AC",void 0),X(this,"alpha",void 0),X(this,"bisector",void 0),this.A=new ie(e),this.B=new ie(n),this.C=new ie(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Wd(this.AB,this.AC),this.bisector=xg(_2(this.AB.eq($8)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,n),s=S2(i),o=So.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,r*o)}projectBevel(){const e=[];return(this.alpha%No===0?[this.B]:[this.B,this.C]).forEach(n=>{e.push(this.projectOrthogonally(this.A,n)),e.push(this.projectOrthogonally(this.A,n,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],n=Math.abs(this.alpha),r=1/Math.sin(n/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),s=this.options.strokeUniform?Gd(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Gd(i)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(i))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,n){const r=[],i=new ie(So.getOrthogonalRotationFactor(this.bisector),So.getOrthogonalRotationFactor(new ie(this.bisector.y,this.bisector.x)));return[new ie(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),new ie(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i)].forEach(s=>{gv(s,e,n)&&r.push(this.A.add(s))}),r}projectRoundWithSkew(e,n){const r=[],{skewX:i,skewY:s,scaleX:o,scaleY:a,strokeUniform:l}=this.options,c=new ie(Math.tan(It(i)),Math.tan(It(s))),u=this.strokeProjectionMagnitude,f=l?u/a/Math.sqrt(1/a**2+1/o**2*c.y**2):u/Math.sqrt(1+c.y**2),d=new ie(Math.sqrt(Math.max(u**2-f**2,0)),f),h=l?u/Math.sqrt(1+c.x**2*(1/a)**2/(1/o+1/o*c.x*c.y)**2):u/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),g=new ie(h,Math.sqrt(Math.max(u**2-h**2,0)));return[g,g.scalarMultiply(-1),d,d.scalarMultiply(-1)].map(p=>this.applySkew(l?p.multiply(this.strokeUniformScalar):p)).forEach(p=>{gv(p,e,n)&&r.push(this.applySkew(this.A).add(p))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const n=this.alpha%No===0,r=this.applySkew(this.A),i=e[n?0:2].subtract(r),s=e[n?1:0].subtract(r),o=n?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=Ua(i,o)>0,l=a?i:s,c=a?s:i;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,c)):e.push(...this.projectRoundNoSkew(l,c)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class kv extends j2{constructor(e,n,r){super(r),this.A=new ie(e),this.T=new ie(n)}calcOrthogonalProjection(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,n);return this.scaleUnitVector(S2(i),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const n=new ie(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(n)),this.applySkew(this.A.subtract(n)))}else e.push(...new So(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const n=new ie(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(n),this.A.subtract(n))}else{const n=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(xg(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(r);e.push(i.add(n),i.subtract(n))}return e.map(n=>this.applySkew(n))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const U8=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(t.length===0)return r;const i=t.reduce((s,o)=>(s[s.length-1].eq(o)||s.push(new ie(o)),s),[new ie(t[0])]);if(i.length===1)n=!0;else if(!n){const s=i[0],o=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(i,a=>!a.eq(s));i.splice(o+1)}return i.forEach((s,o,a)=>{let l,c;o===0?(c=a[1],l=n?s:a[a.length-1]):o===a.length-1?(l=a[o-1],c=n?s:a[0]):(l=a[o-1],c=a[o+1]),n&&a.length===1?r.push(...new kv(s,s,e).project()):!n||o!==0&&o!==a.length-1?r.push(...new So(s,l,c,e).project()):r.push(...new kv(s,o===0?c:l,e).project())}),r},kg=t=>{const e={};return Object.keys(t).forEach(n=>{e[n]={},Object.keys(t[n]).forEach(r=>{e[n][r]={...t[n][r]}})}),e},H8=t=>t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let ma;const Og=t=>{if(ma||ma||(ma="Intl"in wf()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),ma){const e=ma.segment(t);return Array.from(e).map(n=>{let{segment:r}=n;return r})}return V8(t)},V8=t=>{const e=[];for(let n,r=0;r<t.length;r++)(n=G8(t,r))!==!1&&e.push(n);return e},G8=(t,e)=>{const n=t.charCodeAt(e);if(isNaN(n))return"";if(n<55296||n>57343)return t.charAt(e);if(55296<=n&&n<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";const i=t.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=t.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},Ag=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.textDecorationThickness!==e.textDecorationThickness||t.textBackgroundColor!==e.textBackgroundColor||t.deltaY!==e.deltaY||n&&(t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough)},W8=(t,e)=>{const n=e.split(`
`),r=[];let i=-1,s={};t=kg(t);for(let o=0;o<n.length;o++){const a=Og(n[o]);if(t[o])for(let l=0;l<a.length;l++){i++;const c=t[o][l];c&&Object.keys(c).length>0&&(Ag(s,c,!0)?r.push({start:i,end:i+1,style:c}):r[r.length-1].end++),s=c||{}}else i+=a.length,s={}}return r},X8=(t,e)=>{if(!Array.isArray(t))return kg(t);const n=e.split(mg),r={};let i=-1,s=0;for(let o=0;o<n.length;o++){const a=Og(n[o]);for(let l=0;l<a.length;l++)i++,t[s]&&t[s].start<=i&&i<t[s].end&&(r[o]=r[o]||{},r[o][l]={...t[s].style},i===t[s].end-1&&s++)}return r},os=["display","transform",Wt,"fill-opacity","fill-rule","opacity",Gn,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Ov(t,e){const n=t.nodeName,r=t.getAttribute("class"),i=t.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+n,"i"),e=e.replace(o,""),i&&e.length&&(o=new RegExp("#"+i+s,"i"),e=e.replace(o,"")),r&&e.length){const a=r.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+s,"i"),e=e.replace(o,"")}return e.length===0}function Y8(t,e){let n=!0;const r=Ov(t,e.pop());return r&&e.length&&(n=(function(i,s){let o,a=!0;for(;i.parentElement&&i.parentElement.nodeType===1&&s.length;)a&&(o=s.pop()),a=Ov(i=i.parentElement,o);return s.length===0})(t,e)),r&&n&&e.length===0}function K8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n={};for(const r in e)Y8(t,r.split(" "))&&(n={...n,...e[r]});return n}const q8=t=>{var e;return(e=p8[t])!==null&&e!==void 0?e:t},Z8=new RegExp(`(${Bs})`,"gi"),bn=`(${Bs})`,J8=String.raw`(skewX)\(${bn}\)`,Q8=String.raw`(skewY)\(${bn}\)`,eL=String.raw`(rotate)\(${bn}(?: ${bn} ${bn})?\)`,tL=String.raw`(scale)\(${bn}(?: ${bn})?\)`,nL=String.raw`(translate)\(${bn}(?: ${bn})?\)`,Pg=`(?:${String.raw`(matrix)\(${bn} ${bn} ${bn} ${bn} ${bn} ${bn}\)`}|${nL}|${eL}|${tL}|${J8}|${Q8})`,rL=`(?:${Pg}*)`,iL=String.raw`^\s*(?:${rL}?)\s*$`,sL=new RegExp(iL),oL=new RegExp(Pg),aL=new RegExp(Pg,"g");function Xd(t){const e=[];if(!(t=(n=>Bu(n.replace(Z8," $1 ").replace(/,/gi," ")))(t).replace(/\s*([()])\s*/gi,"$1"))||t&&!sL.test(t))return[...wn];for(const n of t.matchAll(aL)){const r=oL.exec(n[0]);if(!r)continue;let i=wn;const s=r.filter(g=>!!g),[,o,...a]=s,[l,c,u,f,d,h]=a.map(g=>parseFloat(g));switch(o){case"translate":i=El(l,c);break;case vg:i=ta({angle:l},{x:c,y:u});break;case xf:i=_g(l,c);break;case Qo:i=h2(l);break;case ea:i=d2(l);break;case"matrix":i=[l,c,u,f,d,h]}e.push(i)}return bg(e)}function lL(t,e,n,r){const i=Array.isArray(e);let s,o=e;if(t!==Wt&&t!==Gn||e!==kn){if(t==="strokeUniform")return e==="non-scaling-stroke";if(t==="strokeDashArray")o=e===kn?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(t==="transformMatrix")o=n&&n.transformMatrix?qt(n.transformMatrix,Xd(e)):Xd(e);else if(t==="visible")o=e!==kn&&e!=="hidden",n&&n.visible===!1&&(o=!1);else if(t==="opacity")o=parseFloat(e),n&&n.opacity!==void 0&&(o*=n.opacity);else if(t==="textAnchor")o=e==="start"?ft:e==="end"?Ft:We;else if(t==="charSpacing"||t===Ls)s=wo(e,r)/r*1e3;else if(t==="paintFirst"){const a=e.indexOf(Wt),l=e.indexOf(Gn);o=Wt,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=Gn)}else{if(t==="href"||t==="xlink:href"||t==="font"||t==="id")return e;if(t==="imageSmoothing")return e==="optimizeQuality";s=i?e.map(wo):wo(e,r)}}else o="";return!i&&isNaN(s)?o:s}function cL(t,e){t.replace(/;\s*$/,"").split(";").forEach(n=>{if(!n)return;const[r,i]=n.split(":");e[r.trim().toLowerCase()]=i.trim()})}function uL(t){const e={},n=t.getAttribute("style");return n&&(typeof n=="string"?cL(n,e):(function(r,i){Object.entries(r).forEach(s=>{let[o,a]=s;a!==void 0&&(i[o.toLowerCase()]=a)})})(n,e)),e}const fL={stroke:"strokeOpacity",fill:"fillOpacity"};function Ii(t,e,n){if(!t)return{};let r,i={},s=gg;t.parentNode&&wv.test(t.parentNode.nodeName)&&(i=Ii(t.parentElement,e,n),i.fontSize&&(r=s=wo(i.fontSize)));const o={...e.reduce((c,u)=>{const f=t.getAttribute(u);return f&&(c[u]=f),c},{}),...K8(t,n),...uL(t)};o[hh]&&t.setAttribute(hh,o[hh]),o[fh]&&(r=wo(o[fh],s),o[fh]=`${r}`);const a={};for(const c in o){const u=q8(c),f=lL(u,o[c],i,r);a[u]=f}a&&a.font&&(function(c,u){const f=c.match(d8);if(!f)return;const d=f[1],h=f[3],g=f[4],p=f[5],v=f[6];d&&(u.fontStyle=d),h&&(u.fontWeight=isNaN(parseFloat(h))?h:parseFloat(h)),g&&(u.fontSize=wo(g)),v&&(u.fontFamily=v),p&&(u.lineHeight=p===Ud?1:p)})(a.font,a);const l={...i,...a};return wv.test(t.nodeName)?l:(function(c){const u=cn.getDefaults();return Object.entries(fL).forEach(f=>{let[d,h]=f;if(c[h]===void 0||c[d]==="")return;if(c[d]===void 0){if(!u[d])return;c[d]=u[d]}if(c[d].indexOf("url(")===0)return;const g=new yt(c[d]);c[d]=g.setAlpha(Ct(g.getAlpha()*c[h],2)).toRgba()}),c})(l)}const N2=["rx","ry"];class Br extends cn{static getDefaults(){return{...super.getDefaults(),...Br.ownDefaults}}constructor(e){super(),Object.assign(this,Br.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:n}=this;e&&!n?this.ry=e:n&&!e&&(this.rx=n)}_render(e){const{width:n,height:r}=this,i=-n/2,s=-r/2,o=this.rx?Math.min(this.rx,n/2):0,a=this.ry?Math.min(this.ry,r/2):0,l=o!==0||a!==0;e.beginPath(),e.moveTo(i+o,s),e.lineTo(i+n-o,s),l&&e.bezierCurveTo(i+n-ji*o,s,i+n,s+ji*a,i+n,s+a),e.lineTo(i+n,s+r-a),l&&e.bezierCurveTo(i+n,s+r-ji*a,i+n-ji*o,s+r,i+n-o,s+r),e.lineTo(i+o,s+r),l&&e.bezierCurveTo(i+ji*o,s+r,i,s+r-ji*a,i,s+r-a),e.lineTo(i,s+a),l&&e.bezierCurveTo(i,s+ji*a,i+ji*o,s,i+o,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...N2,...e])}_toSVG(){const{width:e,height:n,rx:r,ry:i}=this;return["<rect ","COMMON_PARTS",`x="${-e/2}" y="${-n/2}" rx="${r}" ry="${i}" width="${e}" height="${n}" />
`]}static async fromElement(e,n,r){const{left:i=0,top:s=0,width:o=0,height:a=0,visible:l=!0,...c}=Ii(e,this.ATTRIBUTE_NAMES,r);return new this({...n,...c,left:i,top:s,width:o,height:a,visible:!!(l&&o&&a)})}}X(Br,"type","Rect"),X(Br,"cacheProperties",[...Di,...N2]),X(Br,"ownDefaults",{rx:0,ry:0}),X(Br,"ATTRIBUTE_NAMES",[...os,"x","y","rx","ry","width","height"]),Fe.setClass(Br),Fe.setSVGClass(Br);const fi="initialization",Nu="added",Fg="removed",zu="imperative",z2=(t,e)=>{const{strokeUniform:n,strokeWidth:r,width:i,height:s,group:o}=e,a=o&&o!==t?Ef(o.calcTransformMatrix(),t.calcTransformMatrix()):null,l=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),u=n&&c?s8(new ie(r,r),void 0,t.calcTransformMatrix()):yg,f=!n&&c?r:0,d=Sg(i+f,s+f,bg([a,e.calcOwnMatrix()],!0)).add(u).scalarDivide(2);return[l.subtract(d),l.add(d)]};class Af{calcLayoutResult(e,n){if(this.shouldPerformLayout(e))return this.calcBoundingBox(n,e)}shouldPerformLayout(e){let{type:n,prevStrategy:r,strategy:i}=e;return n===fi||n===zu||!!r&&i!==r}shouldLayoutClipPath(e){let{type:n,target:{clipPath:r}}=e;return n!==fi&&r&&!r.absolutePositioned}getInitialSize(e,n){return n.size}calcBoundingBox(e,n){const{type:r,target:i}=n;if(r===zu&&n.overrides)return n.overrides;if(e.length===0)return;const{left:s,top:o,width:a,height:l}=vi(e.map(f=>z2(i,f)).reduce((f,d)=>f.concat(d),[])),c=new ie(a,l),u=new ie(s,o).add(c.scalarDivide(2));if(r===fi){const f=this.getInitialSize(n,{size:c,center:u});return{center:u,relativeCorrection:new ie(0,0),size:f}}return{center:u.transform(i.calcOwnMatrix()),size:c}}}X(Af,"type","strategy");class Yd extends Af{shouldPerformLayout(e){return!0}}X(Yd,"type","fit-content"),Fe.setClass(Yd);const $2="layoutManager";class vl{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Yd;X(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const n={bubbles:!0,strategy:this.strategy,...e,prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}};this.onBeforeLayout(n);const r=this.getLayoutResult(n);r&&this.commitLayout(n,r),this.onAfterLayout(n,r),this._prevLayoutStrategy=n.strategy}attachHandlers(e,n){const{target:r}=n;return[Fu,r2,hl,i2,Sf,s2,Pu,WR,XR].map(i=>e.on(i,s=>this.performLayout(i===Fu?{type:"object_modified",trigger:i,e:s,target:r}:{type:"object_modifying",trigger:i,e:s,target:r})))}subscribe(e,n){this.unsubscribe(e,n);const r=this.attachHandlers(e,n);this._subscriptions.set(e,r)}unsubscribe(e,n){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(n=>this.unsubscribe(n,e))}subscribeTargets(e){e.targets.forEach(n=>this.subscribe(n,e))}onBeforeLayout(e){const{target:n,type:r}=e,{canvas:i}=n;if(r===fi||r===Nu?this.subscribeTargets(e):r===Fg&&this.unsubscribeTargets(e),n.fire("layout:before",{context:e}),i&&i.fire("object:layout:before",{target:n,context:e}),r===zu&&e.deep){const{strategy:s,...o}=e;n.forEachObject(a=>a.layoutManager&&a.layoutManager.performLayout({...o,bubbles:!1,target:a}))}}getLayoutResult(e){const{target:n,strategy:r,type:i}=e,s=r.calcLayoutResult(e,n.getObjects());if(!s)return;const o=i===fi?new ie:n.getRelativeCenterPoint(),{center:a,correction:l=new ie,relativeCorrection:c=new ie}=s,u=o.subtract(a).add(l).transform(i===fi?wn:vr(n.calcOwnMatrix()),!0).add(c);return{result:s,prevCenter:o,nextCenter:a,offset:u}}commitLayout(e,n){const{target:r}=e,{result:{size:i},nextCenter:s}=n;var o,a;r.set({width:i.x,height:i.y}),this.layoutObjects(e,n),e.type===fi?r.set({left:(o=e.x)!==null&&o!==void 0?o:s.x+i.x*yn(r.originX),top:(a=e.y)!==null&&a!==void 0?a:s.y+i.y*yn(r.originY)}):(r.setPositionByOrigin(s,We,We),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,n){const{target:r}=e;r.forEachObject(i=>{i.group===r&&this.layoutObject(e,n,i)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,n,r.clipPath)}layoutObject(e,n,r){let{offset:i}=n;r.set({left:r.left+i.x,top:r.top+i.y})}onAfterLayout(e,n){const{target:r,strategy:i,bubbles:s,prevStrategy:o,...a}=e,{canvas:l}=r;r.fire("layout:after",{context:e,result:n}),l&&l.fire("object:layout:after",{context:e,result:n,target:r});const c=r.parent;s&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(r),c.layoutManager.performLayout({...a,target:c})),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(n=>n.forEach(r=>r())),e.clear()}toObject(){return{type:$2,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}Fe.setClass(vl,$2);class hL extends vl{performLayout(){}}class Is extends o2(cn){static getDefaults(){return{...super.getDefaults(),...Is.ownDefaults}}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),X(this,"_activeObjects",[]),X(this,"__objectSelectionTracker",void 0),X(this,"__objectSelectionDisposer",void 0),Object.assign(this,Is.ownDefaults),this.setOptions(n),this.groupInit(e,n)}groupInit(e,n){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(i=>{this.enterGroup(i,!1)}),this.layoutManager=(r=n.layoutManager)!==null&&r!==void 0?r:new vl,this.layoutManager.performLayout({type:fi,target:this,targets:[...e],x:n.left,y:n.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(es("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(es("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((n,r,i)=>this.canEnterGroup(n)&&i.indexOf(n)===r)}add(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=this._filterObjectsBeforeEnteringGroup(n),s=super.add(...i);return this._onAfterObjectsChange(Nu,i),s}insertAt(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=this._filterObjectsBeforeEnteringGroup(r),o=super.insertAt(e,...s);return this._onAfterObjectsChange(Nu,s),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(Fg,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,n){this.exitGroup(e,n),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,n){this.layoutManager.performLayout({type:e,targets:n,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,n){const r=this[e];return super._set(e,n),e==="canvas"&&r!==n&&(this._objects||[]).forEach(i=>{i._set(e,n)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,n){let{target:r}=n;const i=this._activeObjects;if(e)i.push(r),this._set("dirty",!0);else if(i.length>0){const s=i.indexOf(r);s>-1&&(i.splice(s,1),this._set("dirty",!0))}}_watchObject(e,n){e&&this._watchObject(!1,n),e?(n.on("selected",this.__objectSelectionTracker),n.on("deselected",this.__objectSelectionDisposer)):(n.off("selected",this.__objectSelectionTracker),n.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,n){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,n)}_enterGroup(e,n){n&&Mu(e,qt(vr(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,n){this._exitGroup(e,n),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,n){e._set("group",void 0),n||(Mu(e,qt(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=cn.prototype.shouldCache.call(this);if(e){for(let n=0;n<this._objects.length;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,n,r){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var i;const o=this._objects[s];(i=this.canvas)!==null&&i!==void 0&&i.preserveObjectStacking&&o.group!==this?(e.save(),e.transform(...vr(this.calcTransformMatrix())),o.render(e),e.restore()):o.group===this&&o.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout({target:this,type:zu,...e})}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,n){const r=this.includeDefaultValues;return this._objects.filter(function(i){return!i.excludeFromExport}).map(function(i){const s=i.includeDefaultValues;i.includeDefaultValues=r;const o=i[e||"toObject"](n);return i.includeDefaultValues=s,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=this.layoutManager.toObject();return{...super.toObject(["subTargetCheck","interactive",...e]),...n.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:n}:{},objects:this.__serializeObjects("toObject",e)}}toString(){return`#<Group: (${this.complexity()})>`}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const n=Br.prototype._toSVG.call(this),r=n.indexOf("COMMON_PARTS");n[r]='for="group" ';const i=n.join("");return e?e(i):i}_toSVG(e){const n=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&n.push("		",r);for(let i=0;i<this._objects.length;i++)n.push("		",this._objects[i].toSVG(e));return n.push(`</g>
`),n}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?`opacity: ${this.opacity};`:"",n=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),n].join("")}toClipPathSVG(e){const n=[],r=this._createSVGBgRect(e);r&&n.push("	",r);for(let i=0;i<this._objects.length;i++)n.push("	",this._objects[i].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(n,{reviver:e})}static fromObject(e,n){let{type:r,objects:i=[],layoutManager:s,...o}=e;return Promise.all([dl(i,n),Tf(o,n)]).then(a=>{let[l,c]=a;const u=new this(l,{...o,...c,layoutManager:new hL});if(s){const f=Fe.getClass(s.type),d=Fe.getClass(s.strategy);u.layoutManager=new f(new d)}else u.layoutManager=new vl;return u.layoutManager.subscribeTargets({type:fi,target:u,targets:u.getObjects()}),u.setCoords(),u})}}X(Is,"type","Group"),X(Is,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),Fe.setClass(Is);const dL=(t,e)=>Math.min(e.width/t.width,e.height/t.height),pL=(t,e)=>Math.max(e.width/t.width,e.height/t.height),Kd="\\s*,?\\s*",va=`${Kd}(${Bs})`,gL=`${va}${va}${va}${Kd}([01])${Kd}([01])${va}${va}`,mL={m:"l",M:"L"},vL=(t,e,n,r,i,s,o,a,l,c,u)=>{const f=Ci(t),d=Ti(t),h=Ci(e),g=Ti(e),p=n*i*h-r*s*g+o,v=r*i*h+n*s*g+a;return["C",c+l*(-n*i*d-r*s*f),u+l*(-r*i*d+n*s*f),p+l*(n*i*g+r*s*h),v+l*(r*i*g-n*s*h),p,v]},Av=(t,e,n,r)=>{const i=Math.atan2(e,t),s=Math.atan2(r,n);return s>=i?s-i:2*Math.PI-(i-s)};function Pv(t,e,n,r,i,s,o,a){let l;if(rt.cachesBoundsOfCurve&&(l=[...arguments].join(),$a.boundsOfCurveCache[l]))return $a.boundsOfCurveCache[l];const c=Math.sqrt,u=Math.abs,f=[],d=[[0,0],[0,0]];let h=6*t-12*n+6*i,g=-3*t+9*n-9*i+3*o,p=3*n-3*t;for(let b=0;b<2;++b){if(b>0&&(h=6*e-12*r+6*s,g=-3*e+9*r-9*s+3*a,p=3*r-3*e),u(g)<1e-12){if(u(h)<1e-12)continue;const k=-p/h;0<k&&k<1&&f.push(k);continue}const x=h*h-4*p*g;if(x<0)continue;const E=c(x),T=(-h+E)/(2*g);0<T&&T<1&&f.push(T);const O=(-h-E)/(2*g);0<O&&O<1&&f.push(O)}let v=f.length;const m=v,y=U2(t,e,n,r,i,s,o,a);for(;v--;){const{x:b,y:x}=y(f[v]);d[0][v]=b,d[1][v]=x}d[0][m]=t,d[1][m]=e,d[0][m+1]=o,d[1][m+1]=a;const _=[new ie(Math.min(...d[0]),Math.min(...d[1])),new ie(Math.max(...d[0]),Math.max(...d[1]))];return rt.cachesBoundsOfCurve&&($a.boundsOfCurveCache[l]=_),_}const yL=(t,e,n)=>{let[r,i,s,o,a,l,c,u]=n;const f=((d,h,g,p,v,m,y)=>{if(g===0||p===0)return[];let _=0,b=0,x=0;const E=Math.PI,T=y*pg,O=Ti(T),k=Ci(T),I=.5*(-k*d-O*h),R=.5*(-k*h+O*d),C=g**2,P=p**2,S=R**2,$=I**2,Z=C*P-C*S-P*$;let H=Math.abs(g),K=Math.abs(p);if(Z<0){const de=Math.sqrt(1-Z/(C*P));H*=de,K*=de}else x=(v===m?-1:1)*Math.sqrt(Z/(C*S+P*$));const Q=x*H*R/K,ce=-x*K*I/H,Y=k*Q-O*ce+.5*d,U=O*Q+k*ce+.5*h;let he=Av(1,0,(I-Q)/H,(R-ce)/K),re=Av((I-Q)/H,(R-ce)/K,(-I-Q)/H,(-R-ce)/K);m===0&&re>0?re-=2*E:m===1&&re<0&&(re+=2*E);const te=Math.ceil(Math.abs(re/E*2)),Ce=[],q=re/te,ne=8/3*Math.sin(q/4)*Math.sin(q/4)/Math.sin(q/2);let se=he+q;for(let de=0;de<te;de++)Ce[de]=vL(he,se,k,O,H,K,Y,U,ne,_,b),_=Ce[de][5],b=Ce[de][6],he=se,se+=q;return Ce})(c-t,u-e,i,s,a,l,o);for(let d=0,h=f.length;d<h;d++)f[d][1]+=t,f[d][2]+=e,f[d][3]+=t,f[d][4]+=e,f[d][5]+=t,f[d][6]+=e;return f},bL=t=>{let e=0,n=0,r=0,i=0;const s=[];let o,a=0,l=0;for(const c of t){const u=[...c];let f;switch(u[0]){case"l":u[1]+=e,u[2]+=n;case"L":e=u[1],n=u[2],f=["L",e,n];break;case"h":u[1]+=e;case"H":e=u[1],f=["L",e,n];break;case"v":u[1]+=n;case"V":n=u[1],f=["L",e,n];break;case"m":u[1]+=e,u[2]+=n;case"M":e=u[1],n=u[2],r=u[1],i=u[2],f=["M",e,n];break;case"c":u[1]+=e,u[2]+=n,u[3]+=e,u[4]+=n,u[5]+=e,u[6]+=n;case"C":a=u[3],l=u[4],e=u[5],n=u[6],f=["C",u[1],u[2],a,l,e,n];break;case"s":u[1]+=e,u[2]+=n,u[3]+=e,u[4]+=n;case"S":o==="C"?(a=2*e-a,l=2*n-l):(a=e,l=n),e=u[3],n=u[4],f=["C",a,l,u[1],u[2],e,n],a=f[3],l=f[4];break;case"q":u[1]+=e,u[2]+=n,u[3]+=e,u[4]+=n;case"Q":a=u[1],l=u[2],e=u[3],n=u[4],f=["Q",a,l,e,n];break;case"t":u[1]+=e,u[2]+=n;case"T":o==="Q"?(a=2*e-a,l=2*n-l):(a=e,l=n),e=u[1],n=u[2],f=["Q",a,l,e,n];break;case"a":u[6]+=e,u[7]+=n;case"A":yL(e,n,u).forEach(d=>s.push(d)),e=u[6],n=u[7];break;case"z":case"Z":e=r,n=i,f=["Z"]}f?(s.push(f),o=f[0]):o=""}return s},$u=(t,e,n,r)=>Math.sqrt((n-t)**2+(r-e)**2),U2=(t,e,n,r,i,s,o,a)=>l=>{const c=l**3,u=(h=>3*h**2*(1-h))(l),f=(h=>3*h*(1-h)**2)(l),d=(h=>(1-h)**3)(l);return new ie(o*c+i*u+n*f+t*d,a*c+s*u+r*f+e*d)},H2=t=>t**2,V2=t=>2*t*(1-t),G2=t=>(1-t)**2,_L=(t,e,n,r,i,s,o,a)=>l=>{const c=H2(l),u=V2(l),f=G2(l),d=3*(f*(n-t)+u*(i-n)+c*(o-i)),h=3*(f*(r-e)+u*(s-r)+c*(a-s));return Math.atan2(h,d)},wL=(t,e,n,r,i,s)=>o=>{const a=H2(o),l=V2(o),c=G2(o);return new ie(i*a+n*l+t*c,s*a+r*l+e*c)},SL=(t,e,n,r,i,s)=>o=>{const a=1-o,l=2*(a*(n-t)+o*(i-n)),c=2*(a*(r-e)+o*(s-r));return Math.atan2(c,l)},Fv=(t,e,n)=>{let r=new ie(e,n),i=0;for(let s=1;s<=100;s+=1){const o=t(s/100);i+=$u(r.x,r.y,o.x,o.y),r=o}return i},xL=(t,e)=>{let n,r=0,i=0,s={x:t.x,y:t.y},o={...s},a=.01,l=0;const c=t.iterator,u=t.angleFinder;for(;i<e&&a>1e-4;)o=c(r),l=r,n=$u(s.x,s.y,o.x,o.y),n+i>e?(r-=a,a/=2):(s=o,r+=a,i+=n);return{...o,angle:u(l)}},W2=t=>{let e,n,r=0,i=0,s=0,o=0,a=0;const l=[];for(const c of t){const u={x:i,y:s,command:c[0],length:0};switch(c[0]){case"M":n=u,n.x=o=i=c[1],n.y=a=s=c[2];break;case"L":n=u,n.length=$u(i,s,c[1],c[2]),i=c[1],s=c[2];break;case"C":e=U2(i,s,c[1],c[2],c[3],c[4],c[5],c[6]),n=u,n.iterator=e,n.angleFinder=_L(i,s,c[1],c[2],c[3],c[4],c[5],c[6]),n.length=Fv(e,i,s),i=c[5],s=c[6];break;case"Q":e=wL(i,s,c[1],c[2],c[3],c[4]),n=u,n.iterator=e,n.angleFinder=SL(i,s,c[1],c[2],c[3],c[4]),n.length=Fv(e,i,s),i=c[3],s=c[4];break;case"Z":n=u,n.destX=o,n.destY=a,n.length=$u(i,s,o,a),i=o,s=a}r+=n.length,l.push(n)}return l.push({length:r,x:i,y:s}),l},CL=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:W2(t),r=0;for(;e-n[r].length>0&&r<n.length-2;)e-=n[r].length,r++;const i=n[r],s=e/i.length,o=t[r];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return{...new ie(i.x,i.y).lerp(new ie(i.destX,i.destY),s),angle:Math.atan2(i.destY-i.y,i.destX-i.x)};case"L":return{...new ie(i.x,i.y).lerp(new ie(o[1],o[2]),s),angle:Math.atan2(o[2]-i.y,o[1]-i.x)};case"C":case"Q":return xL(i,e)}},TL=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Dv=new RegExp(gL,"g"),EL=new RegExp(Bs,"gi"),kL={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},OL=t=>{var e;const n=[],r=(e=t.match(TL))!==null&&e!==void 0?e:[];for(const i of r){const s=i[0];if(s==="z"||s==="Z"){n.push([s]);continue}const o=kL[s.toLowerCase()];let a=[];if(s==="a"||s==="A"){Dv.lastIndex=0;for(let l=null;l=Dv.exec(i);)a.push(...l.slice(1))}else a=i.match(EL)||[];for(let l=0;l<a.length;l+=o){const c=new Array(o),u=mL[s];c[0]=l>0&&u?u:s;for(let f=0;f<o;f++)c[f+1]=parseFloat(a[l+f]);n.push(c)}}return n},AL=(t,e)=>t.map(n=>n.map((r,i)=>i===0||e===void 0?r:Ct(r,e)).join(" ")).join(" ");function qd(t,e){const n=t.style;n&&Object.entries(e).forEach(r=>{let[i,s]=r;return n.setProperty(i,s)})}class PL extends v2{constructor(e){let{allowTouchScrolling:n=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),X(this,"upper",void 0),X(this,"container",void 0);const{el:i}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:n}),this.applyCanvasStyle(s,{allowTouchScrolling:n,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(r),i.parentNode&&i.parentNode.replaceChild(o,i),o.append(i,s),this.container=o}createUpperCanvas(){const{el:e}=this.lower,n=Ei();return n.className=e.className,n.classList.remove("lower-canvas"),n.classList.add("upper-canvas"),n.setAttribute("data-fabric","top"),n.style.cssText=e.style.cssText,n.setAttribute("draggable","true"),n}createContainerElement(){const e=Jo().createElement("div");return e.setAttribute("data-fabric","wrapper"),qd(e,{position:"relative"}),dv(e),e}applyCanvasStyle(e,n){const{styles:r,allowTouchScrolling:i}=n;qd(e,{...r,"touch-action":i?"manipulation":kn}),dv(e)}setDimensions(e,n){super.setDimensions(e,n);const{el:r,ctx:i}=this.upper;m2(r,i,e,n)}setCSSDimensions(e){super.setCSSDimensions(e),Hd(this.upper.el,e),Hd(this.container,e)}cleanupDOM(e){const n=this.container,{el:r}=this.lower,{el:i}=this.upper;super.cleanupDOM(e),n.removeChild(i),n.removeChild(r),n.parentNode&&n.parentNode.replaceChild(r,n)}dispose(){super.dispose(),Gr().dispose(this.upper.el),delete this.upper,delete this.container}}const FL=(t,e,n,r)=>{const{target:i,offsetX:s,offsetY:o}=e,a=n-s,l=r-o,c=!Sr(i,"lockMovementX")&&i.left!==a,u=!Sr(i,"lockMovementY")&&i.top!==l;return c&&i.set(ft,a),u&&i.set(En,l),(c||u)&&D2(r2,C2(t,e,n,r)),c||u};class Pf extends kl{constructor(){super(...arguments),X(this,"_hoveredTargets",[]),X(this,"_currentTransform",null),X(this,"_groupSelector",null),X(this,"contextTopDirty",!1)}static getDefaults(){return{...super.getDefaults(),...Pf.ownDefaults}}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new PL(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(n=>!n.group&&n!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const n=this.getRetinaScaling(),r=Math.ceil((2*e+1)*n);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(n,n)}isTargetTransparent(e,n,r){const i=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-n+i,-r+i),s.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=o,s.restore();const a=Math.round(i*this.getRetinaScaling());return z8(s,a,a,a)}_isSelectionKeyPressed(e){const n=this.selectionKey;return!!n&&(Array.isArray(n)?!!n.find(r=>!!r&&e[r]===!0):e[n])}_shouldClearSelection(e,n){const r=this.getActiveObjects(),i=this._activeObject;return!!(!n||n&&i&&r.length>1&&r.indexOf(n)===-1&&i!==n&&!this._isSelectionKeyPressed(e)||n&&!n.evented||n&&!n.selectable&&i&&i!==n)}_shouldCenterTransform(e,n,r){if(!e)return;let i;return n===xf||n===On||n===sr||n===hl?i=this.centeredScaling||e.centeredScaling:n===vg&&(i=this.centeredRotation||e.centeredRotation),i?!r:r}_getOriginFromCorner(e,n){const r={x:e.originX,y:e.originY};return n&&(["ml","tl","bl"].includes(n)?r.x=Ft:["mr","tr","br"].includes(n)&&(r.x=ft),["tl","mt","tr"].includes(n)?r.y=$d:["bl","mb","br"].includes(n)&&(r.y=En)),r}_setupCurrentTransform(e,n,r){var i;const s=n.group?zo(this.getScenePoint(e),void 0,n.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:a}=n.getActiveControl()||{},l=r&&a?(i=a.getActionHandler(e,n,a))===null||i===void 0?void 0:i.bind(a):FL,c=((O,k,I,R)=>{if(!k||!O)return"drag";const C=R.controls[k];return C.getActionName(I,C,R)})(r,o,e,n),u=e[this.centeredKey],f=this._shouldCenterTransform(n,c,u)?{x:We,y:We}:this._getOriginFromCorner(n,o),{scaleX:d,scaleY:h,skewX:g,skewY:p,left:v,top:m,angle:y,width:_,height:b,cropX:x,cropY:E}=n,T={target:n,action:c,actionHandler:l,actionPerformed:!1,corner:o,scaleX:d,scaleY:h,skewX:g,skewY:p,offsetX:s.x-v,offsetY:s.y-m,originX:f.x,originY:f.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:It(y),width:_,height:b,shiftKey:e.shiftKey,altKey:u,original:{...y2(n),originX:f.x,originY:f.y,cropX:x,cropY:E}};this._currentTransform=T,this.fire("before:transform",{e,transform:T})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:n,y:r,deltaX:i,deltaY:s}=this._groupSelector,o=new ie(n,r).transform(this.viewportTransform),a=new ie(n+i,r+s).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),u=Math.min(o.y,a.y),f=Math.max(o.x,a.x),d=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,u,f-c,d-u)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,u+=l,f-=l,d-=l,cn.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,u,f-c,d-u))}findTarget(e){if(this._targetInfo)return this._targetInfo;if(this.skipTargetFind)return{subTargets:[],currentSubTargets:[]};const n=this.getScenePoint(e),r=this._activeObject,i=this.getActiveObjects(),s=this.searchPossibleTargets(this._objects,n),{subTargets:o,container:a,target:l}=s,c={...s,currentSubTargets:o,currentContainer:a,currentTarget:l};if(!r)return c;const u={...this.searchPossibleTargets([r],n),currentSubTargets:o,currentContainer:a,currentTarget:l};return r.findControl(this.getViewportPoint(e),Vd(e))?{...u,target:r}:u.target&&(i.length>1||!this.preserveObjectStacking||this.preserveObjectStacking&&e[this.altSelectionKey])?u:c}_pointIsInObjectSelectionArea(e,n){let r=e.getCoords();const i=this.getZoom(),s=e.padding/i;if(s){const[o,a,l,c]=r,u=Math.atan2(a.y-o.y,a.x-o.x),f=Ci(u)*s,d=Ti(u)*s,h=f+d,g=f-d;r=[new ie(o.x-g,o.y-h),new ie(a.x+h,a.y-g),new ie(l.x+g,l.y+h),new ie(c.x-h,c.y+g)]}return At.isPointInPolygon(n,r)}_checkTarget(e,n){if(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,n)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;{const r=n.transform(this.viewportTransform);if(!this.isTargetTransparent(e,r.x,r.y))return!0}}return!1}_searchPossibleTargets(e,n,r){let i=e.length;for(;i--;){const s=e[i];if(this._checkTarget(s,n)){if(nu(s)&&s.subTargetCheck){const{target:o}=this._searchPossibleTargets(s._objects,n,r);o&&r.push(o)}return{target:s,subTargets:r}}}return{subTargets:[]}}searchPossibleTargets(e,n){const r=this._searchPossibleTargets(e,n,[]);r.container=r.target;const{container:i,subTargets:s}=r;if(i&&nu(i)&&i.interactive&&s[0]){for(let o=s.length-1;o>0;o--){const a=s[o];if(!nu(a)||!a.interactive)return r.target=a,r}return r.target=s[0],r}return r}getViewportPoint(e){return this._viewportPoint?this._viewportPoint:this._getPointerImpl(e,!0)}getScenePoint(e){return this._scenePoint?this._scenePoint:this._getPointerImpl(e)}_getPointerImpl(e){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,i=r.getBoundingClientRect();let s=n8(e),o=i.width||0,a=i.height||0;o&&a||(En in i&&$d in i&&(a=Math.abs(i.top-i.bottom)),Ft in i&&ft in i&&(o=Math.abs(i.right-i.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,n||(s=zo(s,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(s.x/=l,s.y/=l);const c=o===0||a===0?new ie(1,1):new ie(r.width/o,r.height/a);return s.multiply(c)}_setDimensionsImpl(e,n){this._resetTransformEventData(),super._setDimensionsImpl(e,n),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Ei(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return ys(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,n){let r=!1,i=!1;const s=this.getActiveObjects(),o=[],a=[];e.forEach(l=>{s.includes(l)||(r=!0,l.fire("deselected",{e:n,target:l}),a.push(l))}),s.forEach(l=>{e.includes(l)||(r=!0,l.fire("selected",{e:n,target:l}),o.push(l))}),e.length>0&&s.length>0?(i=!0,r&&this.fire("selection:updated",{e:n,selected:o,deselected:a})):s.length>0?(i=!0,this.fire("selection:created",{e:n,selected:o})):e.length>0&&(i=!0,this.fire("selection:cleared",{e:n,deselected:a})),i&&(this._objectsToRender=void 0)}setActiveObject(e,n){const r=this.getActiveObjects(),i=this._setActiveObject(e,n);return this._fireSelectionEvents(r,n),i}_setActiveObject(e,n){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(n,e)&&this._activeObject)&&!e.onSelect({e:n})&&(this._activeObject=e,ys(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,n){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:n})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),ys(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const n=this.getActiveObjects(),r=this.getActiveObject();n.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const i=this._discardActiveObject(e);return this._fireSelectionEvents(n,e),i}endCurrentTransform(e){const n=this._currentTransform;this._finalizeCurrentTransform(e),n&&n.target&&(n.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const n=this._currentTransform,r=n.target,i={e,target:r,transform:n,action:n.action};r._scaling&&(r._scaling=!1),r.setCoords(),n.actionPerformed&&(this.fire("object:modified",i),r.fire(Fu,i))}setViewportTransform(e){super.setViewportTransform(e);const n=this._activeObject;n&&n.setCoords()}destroy(){const e=this._activeObject;ys(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const n=this._activeObject;n&&n._renderControls(e)}_toObject(e,n,r){const i=this._realizeGroupTransformOnObject(e),s=super._toObject(e,n,r);return e.set(i),s}_realizeGroupTransformOnObject(e){const{group:n}=e;if(n&&ys(n)&&this._activeObject===n){const r=na(e,["angle","flipX","flipY",ft,On,sr,Qo,ea,En]);return r8(e,n.calcOwnMatrix()),r}return{}}_setSVGObject(e,n,r){const i=this._realizeGroupTransformOnObject(n);super._setSVGObject(e,n,r),n.set(i)}}X(Pf,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!0,fireRightClick:!0,fireMiddleClick:!0,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!0});class DL{constructor(e){X(this,"targets",[]),X(this,"__disposer",void 0);const n=()=>{const{hiddenTextarea:i}=e.getActiveObject()||{};i&&i.focus()},r=e.upperCanvasEl;r.addEventListener("click",n),this.__disposer=()=>r.removeEventListener("click",n)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),oo(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var n;!((n=this.target)===null||n===void 0)&&n.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const An={passive:!1},hs=(t,e)=>({viewportPoint:t.getViewportPoint(e),scenePoint:t.getScenePoint(e)}),Ni=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.addEventListener(...n)},Kn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.removeEventListener(...n)},IL={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Zd extends Pf{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),X(this,"_isClick",void 0),X(this,"textEditingManager",new DL(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(n=>{this[n]=this[n].bind(this)}),this.addOrRemove(Ni)}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,i=this._getEventPrefix();e(g2(r),"resize",this._onResize),e(r,i+"down",this._onMouseDown),e(r,`${i}move`,this._onMouseMove,An),e(r,`${i}out`,this._onMouseOut),e(r,`${i}enter`,this._onMouseEnter),e(r,"wheel",this._onMouseWheel,{passive:!1}),e(r,"contextmenu",this._onContextMenu),n||(e(r,"click",this._onClick),e(r,"dblclick",this._onClick)),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,An)}removeListeners(){this.addOrRemove(Kn);const e=this._getEventPrefix(),n=mr(this.upperCanvasEl);Kn(n,`${e}up`,this._onMouseUp),Kn(n,"touchend",this._onTouchEnd,An),Kn(n,`${e}move`,this._onMouseMove,An),Kn(n,"touchmove",this._onMouseMove,An),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_onMouseOut(e){const n=this._hoveredTarget,r={e,...hs(this,e)};this.fire("mouse:out",{...r,target:n}),this._hoveredTarget=void 0,n&&n.fire("mouseout",{...r}),this._hoveredTargets.forEach(i=>{this.fire("mouse:out",{...r,target:i}),i&&i.fire("mouseout",{...r})}),this._hoveredTargets=[]}_onMouseEnter(e){const{target:n}=this.findTarget(e);this._currentTransform||n||(this.fire("mouse:over",{e,...hs(this,e)}),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const n=this.getActiveObject();if(n&&n.onDragStart(e)){this._dragSource=n;const r={e,target:n};return this.fire("dragstart",r),n.fire("dragstart",r),void Ni(this.upperCanvasEl,"drag",this._onDragProgress)}pv(e)}_renderDragEffects(e,n,r){let i=!1;const s=this._dropTarget;s&&s!==n&&s!==r&&(s.clearContextTop(),i=!0),n?.clearContextTop(),r!==n&&r?.clearContextTop();const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),n&&(o.save(),n.transform(o),n.renderDragSourceEffect(e),o.restore(),i=!0),r&&(o.save(),r.transform(o),r.renderDropTargetEffect(e),o.restore(),i=!0),o.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(e){const{currentSubTargets:n}=this.findTarget(e),r=!!e.dataTransfer&&e.dataTransfer.dropEffect!==kn,i=r?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:n,dragSource:this._dragSource,didDrop:r,dropTarget:i};Kn(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const n={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",n),this._dragSource&&this._dragSource.fire("drag",n)}_onDragOver(e){const n="dragover",{currentContainer:r,currentSubTargets:i}=this.findTarget(e),s=this._dragSource,o={e,target:r,subTargets:i,dragSource:s,canDrop:!1,dropTarget:void 0};let a;this.fire(n,o),this._fireEnterLeaveEvents(e,r,o),r&&(r.canDrop(e)&&(a=r),r.fire(n,o));for(let l=0;l<i.length;l++){const c=i[l];c.canDrop(e)&&(a=c),c.fire(n,o)}this._renderDragEffects(e,s,a),this._dropTarget=a}_onDragEnter(e){const{currentContainer:n,currentSubTargets:r}=this.findTarget(e),i={e,target:n,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(e,n,i)}_onDragLeave(e){const{currentSubTargets:n}=this.findTarget(e),r={e,target:this._draggedoverTarget,subTargets:n,dragSource:this._dragSource};this.fire("dragleave",r),this._fireEnterLeaveEvents(e,void 0,r),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this._hoveredTargets=[]}_onDrop(e){const{currentContainer:n,currentSubTargets:r}=this.findTarget(e),i=this._basicEventHandler("drop:before",{e,target:n,subTargets:r,dragSource:this._dragSource,...hs(this,e)});i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(e){const{target:n,subTargets:r}=this.findTarget(e),i=this._basicEventHandler("contextmenu:before",{e,target:n,subTargets:r});return this.stopContextMenu&&pv(e),this._basicEventHandler("contextmenu",i),!1}_onClick(e){const n=e.detail;n>3||n<2||(this._cacheTransformEventData(e),n==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),n==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}fireEventFromPointerEvent(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this._cacheTransformEventData(e);const{target:s,subTargets:o}=this.findTarget(e),a={e,target:s,subTargets:o,...hs(this,e),transform:this._currentTransform,...i};this.fire(n,a),s&&s.fire(r,a);for(let l=0;l<o.length;l++)o[l]!==s&&o[l].fire(r,a);this._resetTransformEventData()}getPointerId(e){const n=e.changedTouches;return n?n[0]&&n[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){this._cacheTransformEventData(e);let n=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e);const{target:i}=this.findTarget(e);(this.isDrawingMode||r&&i===r)&&(n=!0),n&&e.preventDefault();const s=this.upperCanvasEl,o=this._getEventPrefix(),a=mr(s);Ni(a,"touchend",this._onTouchEnd,An),n&&Ni(a,"touchmove",this._onMouseMove,An),Kn(s,`${o}down`,this._onMouseDown),this._resetTransformEventData()}_onMouseDown(e){this._cacheTransformEventData(e),this.__onMouseDown(e);const n=this.upperCanvasEl,r=this._getEventPrefix();Kn(n,`${r}move`,this._onMouseMove,An);const i=mr(n);Ni(i,`${r}up`,this._onMouseUp),Ni(i,`${r}move`,this._onMouseMove,An),this._resetTransformEventData()}_onTouchEnd(e){if(e.touches.length>0)return;this._cacheTransformEventData(e),this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const n=this._getEventPrefix(),r=mr(this.upperCanvasEl);Kn(r,"touchend",this._onTouchEnd,An),Kn(r,"touchmove",this._onMouseMove,An),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Ni(this.upperCanvasEl,`${n}down`,this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this._cacheTransformEventData(e),this.__onMouseUp(e);const n=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const i=mr(this.upperCanvasEl);Kn(i,`${r}up`,this._onMouseUp),Kn(i,`${r}move`,this._onMouseMove,An),Ni(n,`${r}move`,this._onMouseMove,An)}this._resetTransformEventData()}_onMouseMove(e){this._cacheTransformEventData(e);const n=this.getActiveObject();!this.allowTouchScrolling&&(!n||!n.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e),this._resetTransformEventData()}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const n=this.getActiveObject();return!!n!=!!e||n&&e&&n!==e}__onMouseUp(e){var n;this._handleEvent(e,"up:before");const r=this._currentTransform,i=this._isClick,{target:s}=this.findTarget(e),{button:o}=e;if(o)return void((this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"));if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,l,c=!1;if(r&&(this._finalizeCurrentTransform(e),c=r.actionPerformed),!i){const u=s===this._activeObject;this.handleSelection(e),c||(c=this._shouldRender(s)||!u&&s===this._activeObject)}if(s){const u=s.findControl(this.getViewportPoint(e),Vd(e)),{key:f,control:d}=u||{};if(l=f,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,e),c=!0;else if(d){const h=d.getMouseUpHandler(e,s,d);h&&(a=this.getScenePoint(e),h.call(d,e,r,a.x,a.y))}s.isMoving=!1}if(r&&(r.target!==s||r.corner!==l)){const u=r.target&&r.target.controls[r.corner],f=u&&u.getMouseUpHandler(e,r.target,u);a=a||this.getScenePoint(e),f&&f.call(u,e,r,a.x,a.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),c?this.requestRenderAll():i||(n=this._activeObject)!==null&&n!==void 0&&n.isEditing||this.renderTop()}_basicEventHandler(e,n){const{target:r,subTargets:i=[]}=n;this.fire(e,n),r&&r.fire(e,n);for(let s=0;s<i.length;s++)i[s]!==r&&i[s].fire(e,n);return n}_handleEvent(e,n,r){const{target:i,subTargets:s}=this.findTarget(e),o={e,target:i,subTargets:s,...hs(this,e),transform:this._currentTransform,...n==="down:before"||n==="down"?r:{}};n!=="up:before"&&n!=="up"||(o.isClick=this._isClick),this.fire(`mouse:${n}`,o),i&&i.fire(`mouse${n}`,o);for(let a=0;a<s.length;a++)s[a]!==i&&s[a].fire(`mouse${n}`,o)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const n=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(n,{e,pointer:n}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const n=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(n,{e,pointer:n})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const n=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:n}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._handleEvent(e,"down:before");let{target:n}=this.findTarget(e),r=!!n&&n===this._activeObject;const{button:i}=e;if(i)return void((this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(e,"down",{alreadySelected:r}));if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let s=this._shouldRender(n),o=!1;if(this.handleMultiSelection(e,n)?(n=this._activeObject,o=!0,s=!0):this._shouldClearSelection(e,n)&&this.discardActiveObject(e),this.selection&&(!n||!n.selectable&&!n.isEditing&&n!==this._activeObject)){const a=this.getScenePoint(e);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(r=!!n&&n===this._activeObject,n){n.selectable&&n.activeOn==="down"&&this.setActiveObject(n,e);const a=n.findControl(this.getViewportPoint(e),Vd(e));if(n===this._activeObject&&(a||!o)){this._setupCurrentTransform(e,n,r);const l=a?a.control:void 0,c=this.getScenePoint(e),u=l&&l.getMouseDownHandler(e,n,l);u&&u.call(l,e,this._currentTransform,c.x,c.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:r}),s&&this.requestRenderAll()}_resetTransformEventData(){this._targetInfo=this._viewportPoint=this._scenePoint=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._viewportPoint=this.getViewportPoint(e),this._scenePoint=zo(this._viewportPoint,void 0,this.viewportTransform),this._targetInfo=this.findTarget(e),this._currentTransform&&(this._targetInfo.target=this._currentTransform.target)}__onMouseMove(e){if(this._isClick=!1,this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const n=this._groupSelector;if(n){const r=this.getScenePoint(e);n.deltaX=r.x-n.x,n.deltaY=r.y-n.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const{target:r}=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move")}_fireOverOutEvents(e,n){const{_hoveredTarget:r,_hoveredTargets:i}=this,{subTargets:s}=this.findTarget(e),o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:n,oldTarget:r,fireCanvas:!0});for(let a=0;a<o;a++)s[a]===n||i[a]&&i[a]===r||this.fireSyntheticInOutEvents("mouse",{e,target:s[a],oldTarget:i[a]});this._hoveredTarget=n,this._hoveredTargets=s}_fireEnterLeaveEvents(e,n,r){const i=this._draggedoverTarget,s=this._hoveredTargets,{subTargets:o}=this.findTarget(e),a=Math.max(s.length,o.length);this.fireSyntheticInOutEvents("drag",{...r,target:n,oldTarget:i,fireCanvas:!0});for(let l=0;l<a;l++)this.fireSyntheticInOutEvents("drag",{...r,target:o[l],oldTarget:s[l]});this._draggedoverTarget=n}fireSyntheticInOutEvents(e,n){let{target:r,oldTarget:i,fireCanvas:s,e:o,...a}=n;const{targetIn:l,targetOut:c,canvasIn:u,canvasOut:f}=IL[e],d=i!==r;if(i&&d){const h={...a,e:o,target:i,nextTarget:r,...hs(this,o)};s&&this.fire(f,h),i.fire(c,h)}if(r&&d){const h={...a,e:o,target:r,previousTarget:i,...hs(this,o)};s&&this.fire(u,h),r.fire(l,h)}}_transformObject(e){const n=this.getScenePoint(e),r=this._currentTransform,i=r.target,s=i.group?zo(n,void 0,i.group.calcTransformMatrix()):n;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,n,r){const{action:i,actionHandler:s,target:o}=n,a=!!s&&s(e,n,r.x,r.y);a&&o.setCoords(),i==="drag"&&a&&(n.target.isMoving=!0,this.setCursor(n.target.moveCursor||this.moveCursor)),n.actionPerformed=n.actionPerformed||a}_setCursorFromEvent(e,n){if(!n)return void this.setCursor(this.defaultCursor);let r=n.hoverCursor||this.hoverCursor;const i=ys(this._activeObject)?this._activeObject:null,s=(!i||n.group!==i)&&n.findControl(this.getViewportPoint(e));if(s){const{control:o,coord:a}=s;this.setCursor(o.cursorStyleHandler(e,o,n,a))}else{if(n.subTargetCheck){const{subTargets:o}=this.findTarget(e);o.concat().reverse().forEach(a=>{r=a.hoverCursor||r})}this.setCursor(r)}}handleMultiSelection(e,n){const r=this._activeObject,i=ys(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&n&&n.selectable&&(r!==n||i)&&(i||!n.isDescendantOf(r)&&!r.isDescendantOf(n))&&!n.onSelect({e})&&!r.getActiveControl()){if(i){const s=r.getObjects();let o=[];if(n===r){const a=this.getScenePoint(e);let l=this.searchPossibleTargets(s,a);if(l.target?(n=l.target,o=l.subTargets):(l=this.searchPossibleTargets(this._objects,a),n=l.target,o=l.subTargets),!n||!n.selectable)return!1}n.group===r?(r.remove(n),this._hoveredTarget=n,this._hoveredTargets=o,r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(n),this._hoveredTarget=r,this._hoveredTargets=o),this._fireSelectionEvents(s,e)}else{r.isEditing&&r.exitEditing();const s=new(Fe.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(r,n),this._hoveredTarget=s,this._setActiveObject(s,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:n,y:r,deltaX:i,deltaY:s}=this._groupSelector,o=new ie(n,r),a=o.add(new ie(i,s)),l=o.min(a),c=o.max(a).subtract(l),u=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),f=o.eq(a)?u[0]?[u[0]]:[]:u.length>1?u.filter(d=>!d.onSelect({e})).reverse():u;if(f.length===1)this.setActiveObject(f[0],e);else if(f.length>1){const d=Fe.getClass("ActiveSelection");this.setActiveObject(new d(f,{canvas:this}),e)}return this._groupSelector=null,!0}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;const{upper:r}=this.elements;r.ctx=void 0;const i=super.toCanvasElement(e,n);return r.ctx=r.el.getContext("2d"),i}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const X2={x1:0,y1:0,x2:0,y2:0},ML={...X2,r1:0,r2:0},fo=(t,e)=>isNaN(t)&&typeof e=="number"?e:t;function Y2(t){return t&&/%$/.test(t)&&Number.isFinite(parseFloat(t))}function K2(t,e){const n=typeof t=="number"?t:typeof t=="string"?parseFloat(t)/(Y2(t)?100:1):NaN;return $o(0,fo(n,e),1)}const RL=/\s*;\s*/,LL=/\s*:\s*/;function BL(t,e){let n,r;const i=t.getAttribute("style");if(i){const o=i.split(RL);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split(LL).map(u=>u.trim());l==="stop-color"?n=c:l==="stop-opacity"&&(r=c)}}n=n||t.getAttribute("stop-color")||"rgb(0,0,0)",r=fo(parseFloat(r||t.getAttribute("stop-opacity")||""),1);const s=new yt(n);return s.setAlpha(s.getAlpha()*r*e),{offset:K2(t.getAttribute("offset"),0),color:s.toRgba()}}function jL(t,e){const n=[],r=t.getElementsByTagName("stop"),i=K2(e,1);for(let s=r.length;s--;)n.push(BL(r[s],i));return n}function q2(t){return t.nodeName==="linearGradient"||t.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Z2(t){return t.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function cr(t,e){return t.getAttribute(e)}function NL(t,e){return(function(n,r){let i,{width:s,height:o,gradientUnits:a}=r;return Object.entries(n).reduce((l,c)=>{let[u,f]=c;if(f==="Infinity")i=1;else if(f==="-Infinity")i=0;else{const d=typeof f=="string";i=d?parseFloat(f):f,d&&Y2(f)&&(i*=.01,a==="pixels"&&(u!=="x1"&&u!=="x2"&&u!=="r2"||(i*=s),u!=="y1"&&u!=="y2"||(i*=o)))}return l[u]=i,l},{})})(q2(t)==="linear"?(function(n){return{x1:cr(n,"x1")||0,y1:cr(n,"y1")||0,x2:cr(n,"x2")||"100%",y2:cr(n,"y2")||0}})(t):(function(n){return{x1:cr(n,"fx")||cr(n,"cx")||"50%",y1:cr(n,"fy")||cr(n,"cy")||"50%",r1:0,x2:cr(n,"cx")||"50%",y2:cr(n,"cy")||"50%",r2:cr(n,"r")||"50%"}})(t),{...e,gradientUnits:Z2(t)})}class Jl{constructor(e){const{type:n="linear",gradientUnits:r="pixels",coords:i={},colorStops:s=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:c}=e||{};Object.assign(this,{type:n,gradientUnits:r,coords:{...n==="radial"?ML:X2,...i},colorStops:s,offsetX:o,offsetY:a,gradientTransform:l,id:c?`${c}_${ts()}`:ts()})}addColorStop(e){for(const n in e)this.colorStops.push({offset:parseFloat(n),color:e[n]});return this}toObject(e){return{...na(this,e),type:this.type,coords:{...this.coords},colorStops:this.colorStops.map(n=>({...n})),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0}}toSVG(e){let{additionalTransform:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],i=this.gradientTransform?this.gradientTransform.concat():wn.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(f=>({...f})).sort((f,d)=>f.offset-d.offset);let a=-this.offsetX,l=-this.offsetY;var c;s==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),(c=e)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),i[4]-=a,i[5]-=l;const u=[`id="SVGID_${this.id}"`,`gradientUnits="${s}"`,`gradientTransform="${n?n+" ":""}${pl(i)}"`,""].join(" ");if(this.type==="linear"){const{x1:f,y1:d,x2:h,y2:g}=this.coords;r.push("<linearGradient ",u,' x1="',f,'" y1="',d,'" x2="',h,'" y2="',g,`">
`)}else if(this.type==="radial"){const{x1:f,y1:d,x2:h,y2:g,r1:p,r2:v}=this.coords,m=p>v;r.push("<radialGradient ",u,' cx="',m?f:h,'" cy="',m?d:g,'" r="',m?p:v,'" fx="',m?h:f,'" fy="',m?g:d,`">
`),m&&(o.reverse(),o.forEach(_=>{_.offset=1-_.offset}));const y=Math.min(p,v);if(y>0){const _=y/Math.max(p,v);o.forEach(b=>{b.offset+=_*(1-b.offset)})}}return o.forEach(f=>{let{color:d,offset:h}=f;r.push(`<stop offset="${100*h}%" style="stop-color:${d};"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:n,y1:r,x2:i,y2:s,r1:o,r2:a}=this.coords,l=this.type==="linear"?e.createLinearGradient(n,r,i,s):e.createRadialGradient(n,r,o,i,s,a);return this.colorStops.forEach(c=>{let{color:u,offset:f}=c;l.addColorStop(f,u)}),l}static async fromObject(e){const{colorStops:n,gradientTransform:r}=e;return new this({...e,colorStops:n?n.map(i=>({...i})):void 0,gradientTransform:r?[...r]:void 0})}static fromElement(e,n,r){const i=Z2(e),s=n._findCenterFromElement();return new this({id:e.getAttribute("id")||void 0,type:q2(e),coords:NL(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:jL(e,r.opacity),gradientUnits:i,gradientTransform:Xd(e.getAttribute("gradientTransform")||""),...i==="pixels"?{offsetX:n.width/2-s.x,offsetY:n.height/2-s.y}:{offsetX:0,offsetY:0}})}}X(Jl,"type","Gradient"),Fe.setClass(Jl,"gradient"),Fe.setClass(Jl,"linear"),Fe.setClass(Jl,"radial");class gh{get type(){return"pattern"}set type(e){es("warn","Setting type has no effect",e)}constructor(e){X(this,"repeat","repeat"),X(this,"offsetX",0),X(this,"offsetY",0),X(this,"crossOrigin",""),this.id=ts(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:n,crossOrigin:r}=this;return{...na(this,e),type:"pattern",source:this.sourceToString(),repeat:n,crossOrigin:r,offsetX:Ct(this.offsetX,rt.NUM_FRACTION_DIGITS),offsetY:Ct(this.offsetY,rt.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null}}toSVG(e){let{width:n,height:r}=e;const{source:i,repeat:s,id:o}=this,a=fo(this.offsetX/n,0),l=fo(this.offsetY/r,0);return[`<pattern id="SVGID_${o}" x="${a}" y="${l}" width="${s==="repeat-y"||s==="no-repeat"?1+Math.abs(a||0):fo(i.width/n,0)}" height="${s==="repeat-x"||s==="no-repeat"?1+Math.abs(l||0):fo(i.height/r,0)}">`,`<image x="0" y="0" width="${i.width}" height="${i.height}" xlink:href="${this.sourceToString()}"></image>`,"</pattern>",""].join(`
`)}static async fromObject(e,n){let{type:r,source:i,patternTransform:s,...o}=e;const a=await iu(i,{...n,crossOrigin:o.crossOrigin});return new this({...o,patternTransform:s&&s.slice(0),source:a})}}X(gh,"type","Pattern"),Fe.setClass(gh),Fe.setClass(gh,"pattern");class bs extends cn{constructor(e){let{path:n,left:r,top:i,...s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,bs.ownDefaults),this.setOptions(s),this._setPath(e||[],!0),typeof r=="number"&&this.set(ft,r),typeof i=="number"&&this.set(En,i)}_setPath(e,n){this.path=bL(Array.isArray(e)?e:OL(e)),this.setBoundingBox(n)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new ie(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const n=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const i of this.path)switch(i[0]){case"L":e.lineTo(i[1]+n,i[2]+r);break;case"M":e.moveTo(i[1]+n,i[2]+r);break;case"C":e.bezierCurveTo(i[1]+n,i[2]+r,i[3]+n,i[4]+r,i[5]+n,i[6]+r);break;case"Q":e.quadraticCurveTo(i[1]+n,i[2]+r,i[3]+n,i[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return`#<Path (${this.complexity()}): { "top": ${this.top}, "left": ${this.left} }>`}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return{...super.toObject(e),path:this.path.map(n=>n.slice())}}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=this.toObject(e);return this.sourcePath&&(delete n.path,n.sourcePath=this.sourcePath),n}_toSVG(){return["<path ","COMMON_PARTS",`d="${AL(this.path,rt.NUM_FRACTION_DIGITS)}" stroke-linecap="round" />
`]}_getOffsetTransform(){const e=rt.NUM_FRACTION_DIGITS;return` translate(${Ct(-this.pathOffset.x,e)}, ${Ct(-this.pathOffset.y,e)})`}toClipPathSVG(e){const n=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:n})}toSVG(e){const n=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:n})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:n,height:r,pathOffset:i}=this._calcDimensions();this.set({width:n,height:r,pathOffset:i}),e&&this.setPositionByOrigin(i,We,We)}_calcBoundsFromPath(){const e=[];let n=0,r=0,i=0,s=0;for(const o of this.path)switch(o[0]){case"L":i=o[1],s=o[2],e.push({x:n,y:r},{x:i,y:s});break;case"M":i=o[1],s=o[2],n=i,r=s;break;case"C":e.push(...Pv(i,s,o[1],o[2],o[3],o[4],o[5],o[6])),i=o[5],s=o[6];break;case"Q":e.push(...Pv(i,s,o[1],o[2],o[1],o[2],o[3],o[4])),i=o[3],s=o[4];break;case"Z":i=n,s=r}return vi(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return{...e,pathOffset:new ie(e.left+e.width/2,e.top+e.height/2)}}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,n,r){const{d:i,...s}=Ii(e,this.ATTRIBUTE_NAMES,r);return new this(i,{...s,...n,left:void 0,top:void 0})}}X(bs,"type","Path"),X(bs,"cacheProperties",[...Di,"path","fillRule"]),X(bs,"ATTRIBUTE_NAMES",[...os,"d"]),Fe.setClass(bs),Fe.setSVGClass(bs);const J2=["radius","startAngle","endAngle","counterClockwise"];class ii extends cn{static getDefaults(){return{...super.getDefaults(),...ii.ownDefaults}}constructor(e){super(),Object.assign(this,ii.ownDefaults),this.setOptions(e)}_set(e,n){return super._set(e,n),e==="radius"&&this.setRadius(n),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,It(this.startAngle),It(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(On)}getRadiusY(){return this.get("radius")*this.get(sr)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...J2,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',`${this.radius}`,`" />
`];{const{radius:n}=this,r=It(this.startAngle),i=It(this.endAngle),s=Ci(r)*n,o=Ti(r)*n,a=Ci(i)*n,l=Ti(i)*n;return[`<path d="M ${s} ${o} A ${n} ${n} 0 ${e>180?1:0} ${this.counterClockwise?0:1} ${a} ${l}" `,"COMMON_PARTS",` />
`]}}static async fromElement(e,n,r){const{left:i=0,top:s=0,radius:o=0,...a}=Ii(e,this.ATTRIBUTE_NAMES,r);return new this({...a,radius:o,left:i-o,top:s-o})}static fromObject(e){return super._fromObject(e)}}X(ii,"type","Circle"),X(ii,"cacheProperties",[...Di,...J2]),X(ii,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),X(ii,"ATTRIBUTE_NAMES",["cx","cy","r",...os]),Fe.setClass(ii),Fe.setSVGClass(ii);const Jd=["x1","x2","y1","y2"];class _s extends cn{constructor(){let[e,n,r,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,_s.ownDefaults),this.setOptions(s),this.x1=e,this.x2=r,this.y1=n,this.y2=i,this._setWidthHeight();const{left:o,top:a}=s;typeof o=="number"&&this.set(ft,o),typeof a=="number"&&this.set(En,a)}_setWidthHeight(){const{x1:e,y1:n,x2:r,y2:i}=this;this.width=Math.abs(r-e),this.height=Math.abs(i-n);const{left:s,top:o,width:a,height:l}=vi([{x:e,y:n},{x:r,y:i}]),c=new ie(s+a/2,o+l/2);this.setPositionByOrigin(c,We,We)}_set(e,n){return super._set(e,n),Jd.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const n=this.calcLinePoints();e.moveTo(n.x1,n.y1),e.lineTo(n.x2,n.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var i;Zn(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new ie((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return{...super.toObject(e),...this.calcLinePoints()}}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:n,y1:r,y2:i,width:s,height:o}=this,a=e<=n?-1:1,l=r<=i?-1:1;return{x1:a*s/2,x2:a*-s/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:e,x2:n,y1:r,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",`x1="${e}" y1="${r}" x2="${n}" y2="${i}" />
`]}static async fromElement(e,n,r){const{x1:i=0,y1:s=0,x2:o=0,y2:a=0,...l}=Ii(e,this.ATTRIBUTE_NAMES,r);return new this([i,s,o,a],l)}static fromObject(e){let{x1:n,y1:r,x2:i,y2:s,...o}=e;return this._fromObject({...o,points:[n,r,i,s]},{extraParam:"points"})}}X(_s,"type","Line"),X(_s,"cacheProperties",[...Di,...Jd]),X(_s,"ATTRIBUTE_NAMES",os.concat(Jd)),Fe.setClass(_s),Fe.setSVGClass(_s);class Ts extends cn{static getDefaults(){return{...super.getDefaults(),...Ts.ownDefaults}}constructor(e){super(),Object.assign(this,Ts.ownDefaults),this.setOptions(e)}_render(e){const n=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-n,r),e.lineTo(0,-r),e.lineTo(n,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,n=this.height/2;return["<polygon ","COMMON_PARTS",'points="',`${-e} ${n},0 ${-n},${e} ${n}`,'" />']}}X(Ts,"type","Triangle"),X(Ts,"ownDefaults",{width:100,height:100}),Fe.setClass(Ts),Fe.setSVGClass(Ts);const Q2=["rx","ry"];class si extends cn{static getDefaults(){return{...super.getDefaults(),...si.ownDefaults}}constructor(e){super(),Object.assign(this,si.ownDefaults),this.setOptions(e)}_set(e,n){switch(super._set(e,n),e){case"rx":this.rx=n,this.set("width",2*n);break;case"ry":this.ry=n,this.set("height",2*n)}return this}getRx(){return this.get("rx")*this.get(On)}getRy(){return this.get("ry")*this.get(sr)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Q2,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",`cx="0" cy="0" rx="${this.rx}" ry="${this.ry}" />
`]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,No,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,n,r){const i=Ii(e,this.ATTRIBUTE_NAMES,r);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}X(si,"type","Ellipse"),X(si,"cacheProperties",[...Di,...Q2]),X(si,"ownDefaults",{rx:0,ry:0}),X(si,"ATTRIBUTE_NAMES",[...os,"cx","cy","rx","ry"]),Fe.setClass(si),Fe.setSVGClass(si);const eS={exactBoundingBox:!1};class hr extends cn{static getDefaults(){return{...super.getDefaults(),...hr.ownDefaults}}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),X(this,"strokeDiff",void 0),Object.assign(this,hr.ownDefaults),this.setOptions(n),this.points=e;const{left:r,top:i}=n;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(ft,r),typeof i=="number"&&this.set(En,i)}isOpen(){return!0}_projectStrokeOnPoints(e){return U8(this.points,e,this.isOpen())}_calcDimensions(e){e={scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth,...e||{}};const n=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(c=>c.projectedPoint):this.points;if(n.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new ie,strokeOffset:new ie,strokeDiff:new ie};const r=vi(n),i=Cf({...e,scaleX:1,scaleY:1}),s=vi(this.points.map(c=>xn(c,i,!0))),o=new ie(this.scaleX,this.scaleY);let a=r.left+r.width/2,l=r.top+r.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(It(this.skewX)),l-=a*Math.tan(It(this.skewY))),{...r,pathOffset:new ie(a,l),strokeOffset:new ie(s.left,s.top).subtract(new ie(r.left,r.top)).multiply(o),strokeDiff:new ie(r.width,r.height).subtract(new ie(s.width,s.height)).multiply(o)}}_findCenterFromElement(){const e=vi(this.points);return new ie(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:n,top:r,width:i,height:s,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:i,height:s,pathOffset:o,strokeOffset:a,strokeDiff:l}),e&&this.setPositionByOrigin(new ie(n+i/2,r+s/2),We,We)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new ie(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var n,r;const{width:a,height:l}=this._calcDimensions(e);o=new ie((n=e.width)!==null&&n!==void 0?n:a,(r=e.height)!==null&&r!==void 0?r:l)}else{var i,s;o=new ie((i=e.width)!==null&&i!==void 0?i:this.width,(s=e.height)!==null&&s!==void 0?s:this.height)}return o.multiply(new ie(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,n){const r=this.initialized&&this[e]!==n,i=super._set(e,n);return this.exactBoundingBox&&r&&((e===On||e===sr)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),i}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return{...super.toObject(e),points:this.points.map(n=>{let{x:r,y:i}=n;return{x:r,y:i}})}}_toSVG(){const e=[],n=this.pathOffset.x,r=this.pathOffset.y,i=rt.NUM_FRACTION_DIGITS;for(let s=0,o=this.points.length;s<o;s++)e.push(Ct(this.points[s].x-n,i),",",Ct(this.points[s].y-r,i)," ");return[`<${this.constructor.type.toLowerCase()} `,"COMMON_PARTS",`points="${e.join("")}" />
`]}_render(e){const n=this.points.length,r=this.pathOffset.x,i=this.pathOffset.y;if(n&&!isNaN(this.points[n-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-i);for(let s=0;s<n;s++){const o=this.points[s];e.lineTo(o.x-r,o.y-i)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,n,r){const i=(function(l){if(!l)return[];const c=l.replace(/,/g," ").trim().split(/\s+/),u=[];for(let f=0;f<c.length;f+=2)u.push({x:parseFloat(c[f]),y:parseFloat(c[f+1])});return u})(e.getAttribute("points")),{left:s,top:o,...a}=Ii(e,this.ATTRIBUTE_NAMES,r);return new this(i,{...a,...n})}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}X(hr,"ownDefaults",eS),X(hr,"type","Polyline"),X(hr,"layoutProperties",[Qo,ea,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),X(hr,"cacheProperties",[...Di,"points"]),X(hr,"ATTRIBUTE_NAMES",[...os]),Fe.setClass(hr),Fe.setSVGClass(hr);class Ql extends hr{isOpen(){return!1}}X(Ql,"ownDefaults",eS),X(Ql,"type","Polygon"),Fe.setClass(Ql),Fe.setSVGClass(Ql);class tS extends cn{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const n=e===void 0?this.styles:{line:this.styles[e]};for(const r in n)for(const i in n[r])for(const s in n[r][i])return!1;return!0}styleHas(e,n){if(!this.styles||n!==void 0&&!this.styles[n])return!1;const r=n===void 0?this.styles:{0:this.styles[n]};for(const i in r)for(const s in r[i])if(r[i][s][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const n=this.styles;let r,i,s=0,o=!0,a=0;for(const l in n){r=0;for(const c in n[l]){const u=n[l][c]||{};s++,u[e]!==void 0?(i?u[e]!==i&&(o=!1):i=u[e],u[e]===this[e]&&delete u[e]):o=!1,Object.keys(u).length!==0?r++:delete n[l][c]}r===0&&delete n[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&s===a&&(this[e]=i,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const n=this.styles;let r,i,s;for(i in n){for(s in r=n[i],r)delete r[s][e],Object.keys(r[s]).length===0&&delete r[s];Object.keys(r).length===0&&delete n[i]}}_extendStyles(e,n){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const s=wg({...this._getStyleDeclaration(r,i),...n},o=>o!==void 0);this._setStyleDeclaration(r,i,s)}getSelectionStyles(e,n,r){const i=[];for(let s=e;s<(n||e);s++)i.push(this.getStyleAtPosition(s,r));return i}getStyleAtPosition(e,n){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e);return n?this.getCompleteStyleDeclaration(r,i):this._getStyleDeclaration(r,i)}setSelectionStyles(e,n,r){for(let i=n;i<(r||n);i++)this._extendStyles(i,e);this._forceClearCache=!0}_getStyleDeclaration(e,n){var r;const i=this.styles&&this.styles[e];return i&&(r=i[n])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,n){return{...na(this,this.constructor._styleProperties),...this._getStyleDeclaration(e,n)}}_setStyleDeclaration(e,n,r){this.styles[e][n]=r}_deleteStyleDeclaration(e,n){delete this.styles[e][n]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}X(tS,"_styleProperties",f8);const zL=/  +/g,$L=/"/g;function mh(t,e,n,r,i){return`		${(function(s,o){let{left:a,top:l,width:c,height:u}=o,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rt.NUM_FRACTION_DIGITS;const d=gl(Wt,s,!1),[h,g,p,v]=[a,l,c,u].map(m=>Ct(m,f));return`<rect ${d} x="${h}" y="${g}" width="${p}" height="${v}"></rect>`})(t,{left:e,top:n,width:r,height:i})}
`}let vh;class rn extends tS{static getDefaults(){return{...super.getDefaults(),...rn.ownDefaults}}constructor(e,n){super(),X(this,"__charBounds",[]),Object.assign(this,rn.ownDefaults),this.setOptions(n),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=W2(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Nr)&&this.enlargeSpaces()}enlargeSpaces(){let e,n,r,i,s,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===Nr||l!==c-1&&!this.isEndOfWrapping(l))&&(i=0,s=this._textLines[l],n=this.getLineWidth(l),n<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-n)/r;for(let u=0;u<=s.length;u++)o=this.__charBounds[l][u],this._reSpaceAndTab.test(s[u])?(o.width+=e,o.kernedWidth+=e,o.left+=i,i+=e):o.left+=i}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,n){const r=n?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<r.length;i++){if(e<=r[i].length)return{lineIndex:i,charIndex:e};e-=r[i].length+this.missingNewlineOffset(i,n)}return{lineIndex:i-1,charIndex:r[i-1].length<e?r[i-1].length:e}}toString(){return`#<Text (${this.complexity()}): { "text": "${this.text}", "fontFamily": "${this.fontFamily}" }>`}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),n=this.fontSize;return e.width+=n*e.zoomX,e.height+=n*e.zoomY,e}_render(e){const n=this.path;n&&!n.isNotVisible()&&n._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Gn?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,n,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case We:e.textBaseline="middle";break;case"ascender":e.textBaseline=En;break;case"descender":e.textBaseline=$d}e.font=this._getFontDeclaration(n,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let n=1,r=this._textLines.length;n<r;n++){const i=this.getLineWidth(n);i>e&&(e=i)}return e}_renderTextLine(e,n,r,i,s,o){this._renderChars(e,n,r,i,s,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const n=e.fillStyle,r=this._getLeftOffset();let i=this._getTopOffset();for(let s=0,o=this._textLines.length;s<o;s++){const a=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){i+=a;continue}const l=this._textLines[s].length,c=this._getLineLeftOffset(s);let u,f,d=0,h=0,g=this.getValueOfPropertyAt(s,0,"textBackgroundColor");const p=this.getHeightOfLineImpl(s);for(let v=0;v<l;v++){const m=this.__charBounds[s][v];f=this.getValueOfPropertyAt(s,v,"textBackgroundColor"),this.path?(e.save(),e.translate(m.renderLeft,m.renderTop),e.rotate(m.angle),e.fillStyle=f,f&&e.fillRect(-m.width/2,-p*(1-this._fontSizeFraction),m.width,p),e.restore()):f!==g?(u=r+c+h,this.direction===ni&&(u=this.width-u-d),e.fillStyle=g,g&&e.fillRect(u,i,d,p),h=m.left,d=m.width,g=f):d+=m.kernedWidth}f&&!this.path&&(u=r+c+h,this.direction===ni&&(u=this.width-u-d),e.fillStyle=f,e.fillRect(u,i,d,p)),i+=a}e.fillStyle=n,this._removeShadow(e)}_measureChar(e,n,r,i){const s=$a.getFontCache(n),o=this._getFontDeclaration(n),a=r?r+e:e,l=r&&o===this._getFontDeclaration(i),c=n.fontSize/this.CACHE_FONT_SIZE;let u,f,d,h;if(r&&s.has(r)&&(d=s.get(r)),s.has(e)&&(h=u=s.get(e)),l&&s.has(a)&&(f=s.get(a),h=f-d),u===void 0||d===void 0||f===void 0){const g=(function(){return vh||(vh=or({width:0,height:0}).getContext("2d")),vh})();this._setTextStyles(g,n,!0),u===void 0&&(h=u=g.measureText(e).width,s.set(e,u)),d===void 0&&l&&r&&(d=g.measureText(r).width,s.set(r,d)),l&&f===void 0&&(f=g.measureText(a).width,s.set(a,f),h=f-d)}return{width:u*c,kernedWidth:h*c}}getHeightOfChar(e,n){return this.getValueOfPropertyAt(e,n,"fontSize")}measureLine(e){const n=this._measureLine(e);return this.charSpacing!==0&&(n.width-=this._getWidthOfCharSpacing()),n.width<0&&(n.width=0),n}_measureLine(e){let n,r,i=0;const s=this.pathSide===Ft,o=this.path,a=this._textLines[e],l=a.length,c=new Array(l);this.__charBounds[e]=c;for(let u=0;u<l;u++){const f=a[u];r=this._getGraphemeBox(f,e,u,n),c[u]=r,i+=r.kernedWidth,n=f}if(c[l]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let u=0;const f=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case ft:u=s?f-i:0;break;case We:u=(f-i)/2;break;case Ft:u=s?0:f-i}u+=this.pathStartOffset*(s?-1:1);for(let d=s?l-1:0;s?d>=0:d<l;s?d--:d++)r=c[d],u>f?u%=f:u<0&&(u+=f),this._setGraphemeOnPath(u,r),u+=r.kernedWidth}return{width:i,numOfSpaces:0}}_setGraphemeOnPath(e,n){const r=e+n.kernedWidth/2,i=this.path,s=CL(i.path,r,i.segmentsInfo);n.renderLeft=s.x-i.pathOffset.x,n.renderTop=s.y-i.pathOffset.y,n.angle=s.angle+(this.pathSide===Ft?Math.PI:0)}_getGraphemeBox(e,n,r,i,s){const o=this.getCompleteStyleDeclaration(n,r),a=i?this.getCompleteStyleDeclaration(n,r-1):{},l=this._measureChar(e,o,i,a);let c,u=l.kernedWidth,f=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),f+=c,u+=c);const d={width:f,left:0,height:o.fontSize,kernedWidth:u,deltaY:o.deltaY};if(r>0&&!s){const h=this.__charBounds[n][r-1];d.left=h.left+h.width+l.kernedWidth-l.width}return d}getHeightOfLineImpl(e){const n=this.__lineHeights;if(n[e])return n[e];let r=this.getHeightOfChar(e,0);for(let i=1,s=this._textLines[e].length;i<s;i++)r=Math.max(this.getHeightOfChar(e,i),r);return n[e]=r*this._fontSizeMult}getHeightOfLine(e){return this.getHeightOfLineImpl(e)*this.lineHeight}calcTextHeight(){let e=0;for(let n=0,r=this._textLines.length;n<r;n++)e+=n===r-1?this.getHeightOfLineImpl(n):this.getHeightOfLine(n);return e}_getLeftOffset(){return this.direction===vs?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,n){e.save();let r=0;const i=this._getLeftOffset(),s=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++)this._renderTextLine(n,e,this._textLines[o],i+this._getLineLeftOffset(o),s+r+this.getHeightOfLineImpl(o),o),r+=this.getHeightOfLine(o);e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Wt))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,n,r,i,s,o){const a=this.textAlign.includes(Nr),l=this.path,c=!a&&this.charSpacing===0&&this.isEmptyStyles(o)&&!l,u=this.direction===vs,f=this.direction===vs?1:-1,d=n.direction;let h,g,p,v,m,y="",_=0;if(n.save(),d!==this.direction&&(n.canvas.setAttribute("dir",u?vs:ni),n.direction=u?vs:ni,n.textAlign=u?ft:Ft),s-=this.getHeightOfLineImpl(o)*this._fontSizeFraction,c)return this._renderChar(e,n,o,0,r.join(""),i,s),void n.restore();for(let b=0,x=r.length-1;b<=x;b++)v=b===x||this.charSpacing||l,y+=r[b],p=this.__charBounds[o][b],_===0?(i+=f*(p.kernedWidth-p.width),_+=p.width):_+=p.kernedWidth,a&&!v&&this._reSpaceAndTab.test(r[b])&&(v=!0),v||(h=h||this.getCompleteStyleDeclaration(o,b),g=this.getCompleteStyleDeclaration(o,b+1),v=Ag(h,g,!1)),v&&(l?(n.save(),n.translate(p.renderLeft,p.renderTop),n.rotate(p.angle),this._renderChar(e,n,o,b,y,-_/2,0),n.restore()):(m=i,this._renderChar(e,n,o,b,y,m,s)),y="",h=g,i+=f*_,_=0);n.restore()}_applyPatternGradientTransformText(e){const n=this.width+this.strokeWidth,r=this.height+this.strokeWidth,i=or({width:n,height:r}),s=i.getContext("2d");return i.width=n,i.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(n,0),s.lineTo(n,r),s.lineTo(0,r),s.closePath(),s.translate(n/2,r/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(i,"no-repeat")}handleFiller(e,n,r){let i,s;return Zn(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(i=-this.width/2,s=-this.height/2,e.translate(i,s),e[n]=this._applyPatternGradientTransformText(r),{offsetX:i,offsetY:s}):(e[n]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[n]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,n){let{stroke:r,strokeWidth:i}=n;return e.lineWidth=i,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,n){let{fill:r}=n;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,n,r,i,s,o,a){const l=this._getStyleDeclaration(r,i),c=this.getCompleteStyleDeclaration(r,i),u=e==="fillText"&&c.fill,f=e==="strokeText"&&c.stroke&&c.strokeWidth;if(f||u){if(n.save(),n.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(n),l.deltaY&&(a+=l.deltaY),u){const d=this._setFillStyles(n,c);n.fillText(s,o-d.offsetX,a-d.offsetY)}if(f){const d=this._setStrokeStyles(n,c);n.strokeText(s,o-d.offsetX,a-d.offsetY)}n.restore()}}setSuperscript(e,n){this._setScript(e,n,this.superscript)}setSubscript(e,n){this._setScript(e,n,this.subscript)}_setScript(e,n,r){const i=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),a={fontSize:s*r.size,deltaY:o+s*r.baseline};this.setSelectionStyles(a,e,n)}_getLineLeftOffset(e){const n=this.getLineWidth(e),r=this.width-n,i=this.textAlign,s=this.direction,o=this.isEndOfWrapping(e);let a=0;return i===Nr||i===Va&&!o||i===Ha&&!o||i===ju&&!o?0:(i===We&&(a=r/2),i===Ft&&(a=r),i===Va&&(a=r/2),i===Ha&&(a=r),s===ni&&(i===Ft||i===Ha?a=0:i===ft||i===ju?a=-r:i!==We&&i!==Va||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:n}=this.measureLine(e);return this.__lineWidths[e]=n,n}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,n,r){var i;return(i=this._getStyleDeclaration(e,n)[r])!==null&&i!==void 0?i:this[r]}_renderTextDecoration(e,n){if(!this[n]&&!this.styleHas(n))return;let r=this._getTopOffset();const i=this._getLeftOffset(),s=this.path,o=this._getWidthOfCharSpacing(),a=n==="linethrough"?.5:n==="overline"?1:0,l=this.offsets[n];for(let c=0,u=this._textLines.length;c<u;c++){const f=this.getHeightOfLine(c);if(!this[n]&&!this.styleHas(n,c)){r+=f;continue}const d=this._textLines[c],h=f/this.lineHeight,g=this._getLineLeftOffset(c);let p=0,v=0,m=this.getValueOfPropertyAt(c,0,n),y=this.getValueOfPropertyAt(c,0,Wt),_=this.getValueOfPropertyAt(c,0,Ls),b=m,x=y,E=_;const T=r+h*(1-this._fontSizeFraction);let O=this.getHeightOfChar(c,0),k=this.getValueOfPropertyAt(c,0,"deltaY");for(let C=0,P=d.length;C<P;C++){const S=this.__charBounds[c][C];b=this.getValueOfPropertyAt(c,C,n),x=this.getValueOfPropertyAt(c,C,Wt),E=this.getValueOfPropertyAt(c,C,Ls);const $=this.getHeightOfChar(c,C),Z=this.getValueOfPropertyAt(c,C,"deltaY");if(s&&b&&x){const H=this.fontSize*E/1e3;e.save(),e.fillStyle=y,e.translate(S.renderLeft,S.renderTop),e.rotate(S.angle),e.fillRect(-S.kernedWidth/2,l*$+Z-a*H,S.kernedWidth,H),e.restore()}else if((b!==m||x!==y||$!==O||E!==_||Z!==k)&&v>0){const H=this.fontSize*_/1e3;let K=i+g+p;this.direction===ni&&(K=this.width-K-v),m&&y&&_&&(e.fillStyle=y,e.fillRect(K,T+l*O+k-a*H,v,H)),p=S.left,v=S.width,m=b,_=E,y=x,O=$,k=Z}else v+=S.kernedWidth}let I=i+g+p;this.direction===ni&&(I=this.width-I-v),e.fillStyle=x;const R=this.fontSize*E/1e3;b&&x&&E&&e.fillRect(I,T+l*O+k-a*R,v-o,R),r+=f}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:n=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||rn.genericFonts.includes(e.toLowerCase())?e:`"${e}"`;return[n,r,`${s?this.CACHE_FONT_SIZE:i}px`,o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return Og(e)}_splitTextIntoLines(e){const n=e.split(this._reNewline),r=new Array(n.length),i=[`
`];let s=[];for(let o=0;o<n.length;o++)r[o]=this.graphemeSplit(n[o]),s=s.concat(r[o],i);return s.pop(),{_unwrappedLines:r,lines:n,graphemeText:s,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return{...super.toObject([...P2,...e]),styles:W8(this.styles,this.text),...this.path?{path:this.path.toObject()}:{}}}set(e,n){const{textLayoutProperties:r}=this.constructor;super.set(e,n);let i=!1,s=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),i=i||r.includes(o),s=s||o==="path";else i=r.includes(e),s=e==="path";return s&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,n,r){const i=Ii(e,rn.ATTRIBUTE_NAMES,r),{textAnchor:s=ft,textDecoration:o="",dx:a=0,dy:l=0,top:c=0,left:u=0,fontSize:f=gg,strokeWidth:d=1,...h}={...n,...i},g=new this(Bu(e.textContent||"").trim(),{left:u+a,top:c+l,underline:o.includes("underline"),overline:o.includes("overline"),linethrough:o.includes("line-through"),strokeWidth:0,fontSize:f,...h}),p=g.getScaledHeight()/g.height,v=((g.height+g.strokeWidth)*g.lineHeight-g.height)*p,m=g.getScaledHeight()+v;let y=0;return s===We&&(y=g.getScaledWidth()/2),s===Ft&&(y=g.getScaledWidth()),g.set({left:g.left-y,top:g.top-(m-g.fontSize*(.07+g._fontSizeFraction))/g.lineHeight,strokeWidth:d}),g}static fromObject(e){return this._fromObject({...e,styles:X8(e.styles||{},e.text)},{extraParam:"text"})}}X(rn,"textLayoutProperties",A2),X(rn,"cacheProperties",[...Di,...P2]),X(rn,"ownDefaults",h8),X(rn,"type","Text"),X(rn,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),X(rn,"ATTRIBUTE_NAMES",os.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),B2(rn,[class extends E2{_toSVG(){const t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(t){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0}),n=this.path;return n?e+n._createBaseSVGMarkup(n._toSVG(),{reviver:t,withShadow:!0,additionalTransform:pl(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(t){let{textBgRects:e,textSpans:n}=t;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',`font-family="${this.fontFamily.replace($L,"'")}" `,`font-size="${this.fontSize}" `,this.fontStyle?`font-style="${this.fontStyle}" `:"",this.fontWeight?`font-weight="${this.fontWeight}" `:"",r?`text-decoration="${r}" `:"",this.direction==="rtl"?`direction="${this.direction}" `:"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",n.join(""),`</text>
`]}_getSVGTextAndBg(t,e){const n=[],r=[];let i,s=t;this.backgroundColor&&r.push(...mh(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)i=this._getLineLeftOffset(o),this.direction==="rtl"&&(i+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,e+i,s),this._setSVGTextLineText(n,o,e+i,s),s+=this.getHeightOfLine(o);return{textSpans:n,textBgRects:r}}_createTextCharSpan(t,e,n,r,i){const s=rt.NUM_FRACTION_DIGITS,o=this.getSvgSpanStyles(e,t!==t.trim()||!!t.match(zL)),a=o?`style="${o}"`:"",l=e.deltaY,c=l?` dy="${Ct(l,s)}" `:"",{angle:u,renderLeft:f,renderTop:d,width:h}=i;let g="";if(f!==void 0){const p=h/2;u&&(g=` rotate="${Ct(ns(u),s)}"`);const v=ta({angle:ns(u)});v[4]=f,v[5]=d;const m=new ie(-p,0).transform(v);n=m.x,r=m.y}return`<tspan x="${Ct(n,s)}" y="${Ct(r,s)}" ${c}${g}${a}>${H8(t)}</tspan>`}_setSVGTextLineText(t,e,n,r){const i=this.getHeightOfLine(e),s=this.textAlign.includes(Nr),o=this._textLines[e];let a,l,c,u,f,d="",h=0;r+=i*(1-this._fontSizeFraction)/this.lineHeight;for(let g=0,p=o.length-1;g<=p;g++)f=g===p||this.charSpacing||this.path,d+=o[g],c=this.__charBounds[e][g],h===0?(n+=c.kernedWidth-c.width,h+=c.width):h+=c.kernedWidth,s&&!f&&this._reSpaceAndTab.test(o[g])&&(f=!0),f||(a=a||this.getCompleteStyleDeclaration(e,g),l=this.getCompleteStyleDeclaration(e,g+1),f=Ag(a,l,!0)),f&&(u=this._getStyleDeclaration(e,g),t.push(this._createTextCharSpan(d,u,n,r,c)),d="",a=l,this.direction==="rtl"?n-=h:n+=h,h=0)}_setSVGTextLineBg(t,e,n,r){const i=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let u=0;u<i.length;u++){const{left:f,width:d,kernedWidth:h}=this.__charBounds[e][u];o=this.getValueOfPropertyAt(e,u,"textBackgroundColor"),o!==c?(c&&t.push(...mh(c,n+l,r,a,s)),l=f,a=d,c=o):a+=h}o&&t.push(...mh(c,n+l,r,a,s))}getSvgStyles(t){return`${super.getSvgStyles(t)} text-decoration-thickness: ${Ct(this.textDecorationThickness*this.getObjectScaling().y/10,rt.NUM_FRACTION_DIGITS)}%; white-space: pre;`}getSvgSpanStyles(t,e){const{fontFamily:n,strokeWidth:r,stroke:i,fill:s,fontSize:o,fontStyle:a,fontWeight:l,textDecorationThickness:c,linethrough:u,overline:f,underline:d}=t,h=this.getSvgTextDecoration({underline:d??this.underline,overline:f??this.overline,linethrough:u??this.linethrough}),g=c||this.textDecorationThickness;return[i?gl(Gn,i):"",r?`stroke-width: ${r}; `:"",n?`font-family: ${n.includes("'")||n.includes('"')?n:`'${n}'`}; `:"",o?`font-size: ${o}px; `:"",a?`font-style: ${a}; `:"",l?`font-weight: ${l}; `:"",h?`text-decoration: ${h}; text-decoration-thickness: ${Ct(g*this.getObjectScaling().y/10,rt.NUM_FRACTION_DIGITS)}%; `:"",s?gl(Wt,s):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(t){return["overline","underline","line-through"].filter(e=>t[e.replace("-","")]).join(" ")}}]),Fe.setClass(rn),Fe.setSVGClass(rn);class UL{constructor(e){X(this,"target",void 0),X(this,"__mouseDownInPlace",!1),X(this,"__dragStartFired",!1),X(this,"__isDraggingOver",!1),X(this,"__dragStartSelection",void 0),X(this,"__dragImageDisposer",void 0),X(this,"_dispose",void 0),this.target=e;const n=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{n.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const n=this.target,r=n.getSelectionStartFromPointer(e);return n.isEditing&&r>=n.selectionStart&&r<=n.selectionEnd&&n.selectionStart<n.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const n=this.isActive();return n&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,n}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,n){var r;let{selectionStart:i,selectionEnd:s}=n;const o=this.target,a=o.canvas,l=new ie(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(i),u=new ie(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),f=a.getScenePoint(e).subtract(u),d=o.getCanvasRetinaScaling(),h=o.getBoundingRect(),g=u.subtract(new ie(h.left,h.top)),p=a.viewportTransform,v=g.add(f).transform(p,!0),m=o.backgroundColor,y=kg(o.styles);o.backgroundColor="";const _={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(_,0,i),o.setSelectionStyles(_,s,o.text.length),o.dirty=!0;const b=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=m,o.styles=y,o.dirty=!0,qd(b,{position:"fixed",left:-b.width+"px",border:kn,width:b.width/d+"px",height:b.height/d+"px"}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{b.remove()},mr(e.target||this.target.hiddenTextarea).body.appendChild(b),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(b,v.x,v.y)}onDragStart(e){this.__dragStartFired=!0;const n=this.target,r=this.isActive();if(r&&e.dataTransfer){const i=this.__dragStartSelection={selectionStart:n.selectionStart,selectionEnd:n.selectionEnd},s=n._text.slice(i.selectionStart,i.selectionEnd).join(""),o={text:n.text,value:s,...i};e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:n.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return n.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const n=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return n<r.selectionStart||n>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:n}=e;const r=this.targetCanDrop(n);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:n}=e,r=this.targetCanDrop(n);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(n.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var n;const{e:r}=e,i=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=(n=r.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain");if(s&&!i){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(r);const{styles:c}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},u=s[Math.max(0,s.length-1)],f=0;if(this.__dragStartSelection){const d=this.__dragStartSelection.selectionStart,h=this.__dragStartSelection.selectionEnd;l>d&&l<=h?l=d:l>h&&(l-=h-d),o.removeChars(d,h),delete this.__dragStartSelection}o._reNewline.test(u)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(s,c,l),a.setActiveObject(o),o.enterEditing(r),o.selectionStart=Math.min(l+f,o._text.length),o.selectionEnd=Math.min(o.selectionStart+s.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(Pu,{index:l+f,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:n}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const i=this.target,s=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((r=n.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||kn;l===kn?(i.selectionStart=o,i.selectionEnd=a,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),l==="move"&&(i.removeChars(o,a),i.selectionStart=i.selectionEnd=o,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire(Pu,{index:o,action:"dragend"}),s.fire("text:changed",{target:i}),s.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Iv=/[ \n\.,;!\?\-]/;class HL extends rn{constructor(){super(...arguments),X(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:n,duration:r,delay:i,onComplete:s}=e;return F2({startValue:this._currentCursorOpacity,endValue:n,duration:r,delay:i,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(n=>{n&&!n.isDone()&&(e=!0,n.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let n=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)n++,r--;for(;/\S/.test(this._text[r])&&r>-1;)n++,r--;return e-n}findWordBoundaryRight(e){let n=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)n++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)n++,r++;return e+n}findLineBoundaryLeft(e){let n=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)n++,r--;return e-n}findLineBoundaryRight(e){let n=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)n++,r++;return e+n}searchWordBoundary(e,n){const r=this._text;let i=e>0&&this._reSpace.test(r[e])&&(n===-1||!mg.test(r[e-1]))?e-1:e,s=r[i];for(;i>0&&i<r.length&&!Iv.test(s);)i+=n,s=r[i];return n===-1&&Iv.test(s)&&i++,i}selectWord(e){e=e??this.selectionStart;const n=this.searchWordBoundary(e,-1),r=Math.max(n,this.searchWordBoundary(e,1));this.selectionStart=n,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e??this.selectionStart;const n=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);this.selectionStart=n,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const n=this.hiddenTextarea;mr(n).activeElement!==n&&n.focus();const r=this.getSelectionStartFromPointer(e),i=this.selectionStart,s=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&i!==s||i!==r&&s!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,n,r){const i=r.slice(0,e),s=this.graphemeSplit(i).length;if(e===n)return{selectionStart:s,selectionEnd:s};const o=r.slice(e,n);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,n,r){const i=r.slice(0,e).join("").length;return e===n?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+r.slice(e,n).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){const{hiddenTextarea:e,direction:n,textAlign:r,inCompositionMode:i}=this;if(!e)return;const s=r!==Nr?r.replace("justify-",""):n===vs?ft:Ft,o=this.getPositionByOrigin(s,"top");this.cursorOffsetCache={},this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setPositionByOrigin(o,s,"top"),this.setCoords();const a=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=a.selectionEnd,i||(this.selectionStart=a.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,n=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),i=r.lineIndex,s=r.charIndex,o=this.getValueOfPropertyAt(i,s,"fontSize")*this.lineHeight,a=n.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,u=c.width/l,f=c.height/l,d=u-o,h=f-o,g=new ie(n.left+a,n.top+n.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new ie(c.clientWidth/u,c.clientHeight/f));return g.x<0&&(g.x=0),g.x>d&&(g.x=d),g.y<0&&(g.y=0),g.y>h&&(g.y=h),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:`${g.x}px`,top:`${g.y}px`,fontSize:`${o}px`,charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}exitEditingImpl(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(Fu),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,n){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:o}=this.get2DCursorLocation(n,!0);if(r!==s){if(this.styles[r])for(let a=i;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[s])for(let a=o;a<this._unwrappedTextLines[s].length;a++){const l=this.styles[s][a];l&&(this.styles[r]||(this.styles[r]={}),this.styles[r][i+a-o]=l)}for(let a=r+1;a<=s;a++)delete this.styles[a];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const a=this.styles[r],l=o-i;for(let c=i;c<o;c++)delete a[c];for(const c in this.styles[r]){const u=parseInt(c,10);u>=o&&(a[u-l]=a[c],delete a[c])}}}shiftLineStyles(e,n){const r=Object.assign({},this.styles);for(const i in this.styles){const s=parseInt(i,10);s>e&&(this.styles[s+n]=r[s],r[s-n]||delete this.styles[s])}}insertNewlineStyleObject(e,n,r,i){const s={},o=this._unwrappedTextLines[e].length,a=o===n;let l=!1;r||(r=1),this.shiftLineStyles(e,r);const c=this.styles[e]?this.styles[e][n===0?n:n-1]:void 0;for(const f in this.styles[e]){const d=parseInt(f,10);d>=n&&(l=!0,s[d-n]=this.styles[e][f],a&&n===0||delete this.styles[e][f])}let u=!1;for(l&&!a&&(this.styles[e+r]=s,u=!0),(u||o>n)&&r--;r>0;)i&&i[r-1]?this.styles[e+r]={0:{...i[r-1]}}:c?this.styles[e+r]={0:{...c}}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,n,r,i){this.styles||(this.styles={});const s=this.styles[e],o=s?{...s}:{};r||(r=1);for(const l in o){const c=parseInt(l,10);c>=n&&(s[c+r]=o[c],o[c-r]||delete s[c])}if(this._forceClearCache=!0,i){for(;r--;)Object.keys(i[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][n+r]={...i[r]});return}if(!s)return;const a=s[n?n-1:1];for(;a&&r--;)this.styles[e][n+r]={...a}}insertNewStyleBlock(e,n,r){const i=this.get2DCursorLocation(n,!0),s=[0];let o,a=0;for(let l=0;l<e.length;l++)e[l]===`
`?(a++,s[a]=0):s[a]++;for(s[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),a&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+s[0],a),o=1;o<a;o++)s[o]>0?this.insertCharStyleObject(i.lineIndex+o,0,s[o],r):r&&this.styles[i.lineIndex+o]&&r[0]&&(this.styles[i.lineIndex+o][0]=r[0]),r=r&&r.slice(s[o]+1);s[o]>0&&this.insertCharStyleObject(i.lineIndex+o,0,s[o],r)}removeChars(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,n),this._text.splice(e,n-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;i>r&&this.removeStyleFromTo(r,i);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,r,n),this._text=[...this._text.slice(0,r),...s,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,n,r){r<=e?(n===e?this._selectionDirection=ft:this._selectionDirection===Ft&&(this._selectionDirection=ft,this.selectionEnd=e),this.selectionStart=r):r>e&&r<n?this._selectionDirection===Ft?this.selectionEnd=r:this.selectionStart=r:(n===e?this._selectionDirection=Ft:this._selectionDirection===ft&&(this._selectionDirection=Ft,this.selectionStart=n),this.selectionEnd=r)}}class VL extends HL{initHiddenTextarea(){const e=this.canvas&&mr(this.canvas.getElement())||Jo(),n=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off",name:"fabricTextarea"}).map(o=>{let[a,l]=o;return n.setAttribute(a,l)});const{top:r,left:i,fontSize:s}=this._calcTextareaPosition();n.style.cssText=`position: absolute; top: ${r}; left: ${i}; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ${s};`,(this.hiddenTextareaContainer||e.body).appendChild(n),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return n.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=n}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const n=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in n)this[n[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const n=this.fromPaste,{value:r,selectionStart:i,selectionEnd:s}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const o=()=>{this.updateFromTextArea(),this.fire(Pu),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void o();const a=this._splitTextIntoLines(r).graphemeText,l=this._text.length,c=a.length,u=this.selectionStart,f=this.selectionEnd,d=u!==f;let h,g,p,v,m=c-l;const y=this.fromStringToGraphemeSelection(i,s,r),_=u>y.selectionStart;d?(g=this._text.slice(u,f),m+=f-u):c<l&&(g=_?this._text.slice(f+m,f):this._text.slice(u,u-m));const b=a.slice(y.selectionEnd-m,y.selectionEnd);if(g&&g.length&&(b.length&&(h=this.getSelectionStyles(u,u+1,!1),h=b.map(()=>h[0])),d?(p=u,v=f):_?(p=f-g.length,v=f):(p=f,v=f+g.length),this.removeStyleFromTo(p,v)),b.length){const{copyPasteData:x}=Gr();n&&b.join("")===x.copiedText&&!rt.disableStyleCopyPaste&&(h=x.copiedTextStyle),this.insertNewStyleBlock(b,u,h)}o()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:n}=e;const{selectionStart:r,selectionEnd:i}=n;this.compositionStart=r,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Gr();e.copiedText=this.getSelectedText(),rt.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,n){let r,i=this._getLineLeftOffset(e);return n>0&&(r=this.__charBounds[e][n-1],i+=r.left+r.width),i}getDownCursorOffset(e,n){const r=this._getSelectionForOffset(e,n),i=this.get2DCursorLocation(r),s=i.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s+1,a);return this._textLines[s].slice(o).length+l+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,n){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&n?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,n){const r=this._getSelectionForOffset(e,n),i=this.get2DCursorLocation(r),s=i.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-r;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s-1,a),c=this._textLines[s].slice(0,o),u=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+l-c.length+(1-u)}_getIndexOnLine(e,n){const r=this._textLines[e];let i,s,o=this._getLineLeftOffset(e),a=0;for(let l=0,c=r.length;l<c;l++)if(i=this.__charBounds[e][l].width,o+=i,o>n){s=!0;const u=o-i,f=o,d=Math.abs(u-n);a=Math.abs(f-n)<d?l:l-1;break}return s||(a=r.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,n){const r=this[`get${e}CursorOffset`](n,this._selectionDirection===Ft);if(n.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const i=this.text.length;this.selectionStart=$o(0,this.selectionStart,i),this.selectionEnd=$o(0,this.selectionEnd,i),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const n=this._selectionDirection===ft?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,n),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,n,r){let i;if(e.altKey)i=this[`findWordBoundary${r}`](this[n]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[n]+=r==="Left"?-1:1,!0;i=this[`findLineBoundary${r}`](this[n])}return i!==void 0&&this[n]!==i&&(this[n]=i,!0)}_moveLeft(e,n){return this._move(e,n,"Left")}_moveRight(e,n){return this._move(e,n,"Right")}moveCursorLeftWithoutShift(e){let n=!0;return this._selectionDirection=ft,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(n=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,n}moveCursorLeftWithShift(e){return this._selectionDirection===Ft&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=ft,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,n){const r=`moveCursor${e}${n.shiftKey?"WithShift":"WithoutShift"}`;this._currentCursorOpacity=1,this[r](n)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===ft&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Ft,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let n=!0;return this._selectionDirection=Ft,this.selectionStart===this.selectionEnd?(n=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,n}}const Mv=t=>!!t.button;class GL extends VL{constructor(){super(...arguments),X(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new UL(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:n,alreadySelected:r}=e;this.canvas&&this.editable&&!Mv(n)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(n)||(this.canvas.textEditingManager.register(this),r&&(this.inCompositionMode=!1,this.setCursorByClick(n)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=r||this.isEditing)))}mouseUpHandler(e){let{e:n,transform:r}=e;const i=this.draggableTextDelegate.end(n);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||Mv(n)||i||this.selected&&!this.getActiveControl()&&(this.enterEditing(n),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const n=this.getSelectionStartFromPointer(e),r=this.selectionStart,i=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,i,n):(this.selectionStart=n,this.selectionEnd=n),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const n=this.canvas.getScenePoint(e).transform(vr(this.calcTransformMatrix())).add(new ie(-this._getLeftOffset(),-this._getTopOffset()));let r=0,i=0,s=0;for(let c=0;c<this._textLines.length&&r<=n.y;c++)r+=this.getHeightOfLine(c),s=c,c>0&&(i+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let o=Math.abs(this._getLineLeftOffset(s));const a=this._textLines[s].length,l=this.__charBounds[s];for(let c=0;c<a;c++){const u=o+l[c].kernedWidth;if(n.x<=u){Math.abs(n.x-u)<=Math.abs(n.x-o)&&i++;break}o=u,i++}return Math.min(this.flipX?a-i:i,this._text.length)}}const ec="moveCursorUp",tc="moveCursorDown",nc="moveCursorLeft",rc="moveCursorRight",ic="exitEditing",Rv=(t,e)=>{const n=e.getRetinaScaling();t.setTransform(n,0,0,n,0,0);const r=e.viewportTransform;t.transform(r[0],r[1],r[2],r[3],r[4],r[5])},WL={selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:ic,27:ic,33:ec,34:tc,35:rc,36:nc,37:nc,38:ec,39:rc,40:tc},keysMapRtl:{9:ic,27:ic,33:ec,34:tc,35:nc,36:rc,37:rc,38:ec,39:nc,40:tc},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"},_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1};class zr extends GL{static getDefaults(){return{...super.getDefaults(),...zr.ownDefaults}}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,n){super(e,{...zr.ownDefaults,...n}),this.initBehavior()}_set(e,n){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=n,this):(e==="canvas"&&(this.canvas instanceof Zd&&this.canvas.textEditingManager.remove(this),n instanceof Zd&&n.textEditingManager.add(this)),super._set(e,n))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,n){this[e]!==n&&(this._fireSelectionChanged(),this[e]=n),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,n,r)}setSelectionStyles(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,n,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,n=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,n)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const n=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=n,r}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const n=this._getCursorBoundaries(),r=this.findAncestorsWithClipPath(),i=r.length>0;let s,o=e;if(i){s=or(e.canvas),o=s.getContext("2d"),Rv(o,this.canvas);const a=this.calcTransformMatrix();o.transform(a[0],a[1],a[2],a[3],a[4],a[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(o,n):this.renderCursor(o,n),i)for(const a of r){const l=a.clipPath,c=or(e.canvas),u=c.getContext("2d");if(Rv(u,this.canvas),!l.absolutePositioned){const f=a.calcTransformMatrix();u.transform(f[0],f[1],f[2],f[3],f[4],f[5])}l.transform(u),l.drawObject(u,!0,{}),this.drawClipPathOnCache(o,l,c)}i&&(e.setTransform(1,0,0,1,0,0),e.drawImage(s,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let n=this;for(;n;)n.clipPath&&e.push(n),n=n.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,n=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),i=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,n);return{left:r,top:i,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,n){return n?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let n=0,r=0;const{charIndex:i,lineIndex:s}=this.get2DCursorLocation(e),{textAlign:o,direction:a}=this;for(let f=0;f<s;f++)n+=this.getHeightOfLine(f);const l=this._getLineLeftOffset(s),c=this.__charBounds[s][i];c&&(r=c.left),this.charSpacing!==0&&i===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());let u=l+(r>0?r:0);return a===ni&&(o===Ft||o===Nr||o===Ha?u*=-1:o===ft||o===ju?u=l-(r>0?r:0):o!==We&&o!==Va||(u=l-(r>0?r:0))),{top:n,left:u}}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,n){this._renderCursor(e,n,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),i=r.lineIndex,s=r.charIndex>0?r.charIndex-1:0,o=this.getValueOfPropertyAt(i,s,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,c=this.getValueOfPropertyAt(i,s,"deltaY"),u=n.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(i,s,"fill"),opacity:this._currentCursorOpacity,left:n.left+n.leftOffset-l/2,top:u+n.top+c,width:l,height:o}}_renderCursor(e,n,r){const{color:i,opacity:s,left:o,top:a,width:l,height:c}=this.getCursorRenderingData(r,n);e.fillStyle=i,e.globalAlpha=s,e.fillRect(o,a,l,c)}renderSelection(e,n){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,n)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const n=this.getSelectionStartFromPointer(e);this.renderCursorAt(n)}_renderSelection(e,n,r){const{textAlign:i,direction:s}=this,o=n.selectionStart,a=n.selectionEnd,l=i.includes(Nr),c=this.get2DCursorLocation(o),u=this.get2DCursorLocation(a),f=c.lineIndex,d=u.lineIndex,h=c.charIndex<0?0:c.charIndex,g=u.charIndex<0?0:u.charIndex;for(let p=f;p<=d;p++){const v=this._getLineLeftOffset(p)||0;let m=this.getHeightOfLine(p),y=0,_=0,b=0;if(p===f&&(_=this.__charBounds[f][h].left),p>=f&&p<d)b=l&&!this.isEndOfWrapping(p)?this.width:this.getLineWidth(p)||5;else if(p===d)if(g===0)b=this.__charBounds[d][g].left;else{const k=this._getWidthOfCharSpacing();b=this.__charBounds[d][g-1].left+this.__charBounds[d][g-1].width-k}y=m,(this.lineHeight<1||p===d&&this.lineHeight>1)&&(m/=this.lineHeight);let x=r.left+v+_,E=m,T=0;const O=b-_;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",E=1,T=m):e.fillStyle=this.selectionColor,s===ni&&(i===Ft||i===Nr||i===Ha?x=this.width-x-O:i===ft||i===ju?x=r.left+v-b:i!==We&&i!==Va||(x=r.left+v-b)),e.fillRect(x,r.top+r.topOffset+T,O,E),r.topOffset+=y}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Wt)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),n=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:n}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}X(zr,"ownDefaults",WL),X(zr,"type","IText"),Fe.setClass(zr),Fe.setClass(zr,"i-text");class Es extends zr{static getDefaults(){return{...super.getDefaults(),...Es.ownDefaults}}constructor(e,n){super(e,{...Es.ownDefaults,...n})}static createControls(){return{controls:N8()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Nr)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let n=0,r=0,i=0;const s={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[i]===`
`&&o>0?(r=0,i++,n++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[i])&&o>0&&(r++,i++),s[o]={line:n,offset:r},i+=e.graphemeLines[o].length,r+=e.graphemeLines[o].length;return s}styleHas(e,n){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[n];r&&(n=r.line)}return super.styleHas(e,n)}isEmptyStyles(e){if(!this.styles)return!0;let n,r=0,i=e+1,s=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,r=o.offset),a&&(i=a.line,s=i===e,n=a.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const c in l)for(const u in l[c]){const f=parseInt(u,10);if(f>=r&&(!s||f<n))for(const d in l[c][u])return!1}return!0}_getStyleDeclaration(e,n){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,n=r.offset+n}return super._getStyleDeclaration(e,n)}_setStyleDeclaration(e,n,r){const i=this._styleMap[e];super._setStyleDeclaration(i.line,i.offset+n,r)}_deleteStyleDeclaration(e,n){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+n)}_getLineStyle(e){const n=this._styleMap[e];return!!this.styles[n.line]}_setLineStyle(e){const n=this._styleMap[e];super._setLineStyle(n.line)}_wrapText(e,n){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),i=[];for(let s=0;s<r.wordsData.length;s++)i.push(...this._wrapLine(s,n,r));return this.isWrapping=!1,i}getGraphemeDataForRender(e){const n=this.splitByGrapheme,r=n?"":" ";let i=0;return{wordsData:e.map((s,o)=>{let a=0;const l=n?this.graphemeSplit(s):this.wordSplit(s);return l.length===0?[{word:[],width:0}]:l.map(c=>{const u=n?[c]:this.graphemeSplit(c),f=this._measureWord(u,o,a);return i=Math.max(f,i),a+=u.length+r.length,{word:u,width:f}})}),largestWordWidth:i}}_measureWord(e,n){let r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let o=0,a=e.length;o<a;o++)s+=this._getGraphemeBox(e[o],n,o+i,r,!0).kernedWidth,r=e[o];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,n,r){let{largestWordWidth:i,wordsData:s}=r,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],u=l?"":" ";let f=0,d=[],h=0,g=0,p=!0;n-=o;const v=Math.max(n,i,this.dynamicMinWidth),m=s[e];let y;for(h=0,y=0;y<m.length;y++){const{word:_,width:b}=m[y];h+=_.length,f+=g+b-a,f>v&&!p?(c.push(d),d=[],f=b,p=!0):f+=a,p||l||d.push(u),d=d.concat(_),g=l?0:this._measureWord([u],e,h),h++,p=!1}return y&&c.push(d),i+o>this.dynamicMinWidth&&(this.dynamicMinWidth=i-a+o),c}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,n){return this.splitByGrapheme&&!n?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const n=super._splitTextIntoLines(e),r=this._wrapText(n.lines,this.width),i=new Array(r.length);for(let s=0;s<r.length;s++)i[s]=r[s].join("");return n.lines=i,n.graphemeLines=r,n}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const n in this._styleMap){const r=parseInt(n,10);if(this._textLines[r]){const i=this._styleMap[n].line;e.set(`${i}`,!0)}}for(const n in this.styles)e.has(n)||delete this.styles[n]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}X(Es,"type","Textbox"),X(Es,"textLayoutProperties",[...zr.textLayoutProperties,"width"]),X(Es,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),Fe.setClass(Es);class Lv extends Af{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,n){const{target:r}=e,{clipPath:i,group:s}=r;if(!i||!this.shouldPerformLayout(e))return;const{width:o,height:a}=vi(z2(r,i)),l=new ie(o,a);if(i.absolutePositioned)return{center:zo(i.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:l};{const c=i.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:u=new ie,correction:f=new ie}=this.calcBoundingBox(n,e)||{};return{center:u.add(c),correction:f.subtract(c),size:l}}return{center:r.getRelativeCenterPoint().add(c),size:l}}}}X(Lv,"type","clip-path"),Fe.setClass(Lv);class Bv extends Af{getInitialSize(e,n){let{target:r}=e,{size:i}=n;return new ie(r.width||i.x,r.height||i.y)}}X(Bv,"type","fixed"),Fe.setClass(Bv);class XL extends vl{subscribeTargets(e){const n=e.target;e.targets.reduce((r,i)=>(i.parent&&r.add(i.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[n]})})}unsubscribeTargets(e){const n=e.target,r=n.getObjects();e.targets.reduce((i,s)=>(s.parent&&i.add(s.parent),i),new Set).forEach(i=>{!r.some(s=>s.parent===i)&&i.layoutManager.unsubscribeTargets({target:i,targets:[n]})})}}class ks extends Is{static getDefaults(){return{...super.getDefaults(),...ks.ownDefaults}}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ks.ownDefaults),this.setOptions(n);const{left:r,top:i,layoutManager:s}=n;this.groupInit(e,{left:r,top:i,layoutManager:s??new XL})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...n):n.forEach(i=>{const s=this._objects.findIndex(a=>a.isInFrontOf(i)),o=s===-1?this.size():s;this.insertAt(o,i)})}canEnterGroup(e){return this.getObjects().some(n=>n.isDescendantOf(e)||e.isDescendantOf(n))?(es("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,n){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,n)}exitGroup(e,n){this._exitGroup(e,n),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,n){super._onAfterObjectsChange(e,n);const r=new Set;n.forEach(i=>{const{parent:s}=i;s&&r.add(s)}),e===Fg?r.forEach(i=>{i._onAfterObjectsChange(Nu,n)}):r.forEach(i=>{i._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return`#<ActiveSelection: (${this.complexity()})>`}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,n,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const i={hasControls:!1,...r,forActiveSelection:!0};for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,i);super._renderControls(e,n),e.restore()}}X(ks,"type","ActiveSelection"),X(ks,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),Fe.setClass(ks),Fe.setClass(ks,"activeSelection");class YL{constructor(){X(this,"resources",{})}applyFilters(e,n,r,i,s){const o=s.getContext("2d",{willReadFrequently:!0,desynchronized:!0});if(!o)return;o.drawImage(n,0,0,r,i);const a={sourceWidth:r,sourceHeight:i,imageData:o.getImageData(0,0,r,i),originalEl:n,originalImageData:o.getImageData(0,0,r,i),canvasEl:s,ctx:o,filterBackend:this};e.forEach(c=>{c.applyTo(a)});const{imageData:l}=a;return l.width===r&&l.height===i||(s.width=l.width,s.height=l.height),o.putImageData(l,0,0),a}}class nS{constructor(){let{tileSize:e=rt.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};X(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),X(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,n){this.dispose(),this.createWebGLCanvas(e,n)}createWebGLCanvas(e,n){const r=or({width:e,height:n}),i=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});i&&(i.clearColor(0,0,0,0),this.canvas=r,this.gl=i)}applyFilters(e,n,r,i,s,o){const a=this.gl,l=s.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,n));const u={originalWidth:n.width||n.naturalWidth||0,originalHeight:n.height||n.naturalHeight||0,sourceWidth:r,sourceHeight:i,destinationWidth:r,destinationHeight:i,context:a,sourceTexture:this.createTexture(a,r,i,c?void 0:n),targetTexture:this.createTexture(a,r,i),originalTexture:c||this.createTexture(a,r,i,c?void 0:n),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},f=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,f),e.forEach(d=>{d&&d.applyTo(u)}),(function(d){const h=d.targetCanvas,g=h.width,p=h.height,v=d.destinationWidth,m=d.destinationHeight;g===v&&p===m||(h.width=v,h.height=m)})(u),this.copyGLTo2D(a,u),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(u.sourceTexture),a.deleteTexture(u.targetTexture),a.deleteFramebuffer(f),l.setTransform(1,0,0,1,0,0),u}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,n,r,i,s){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:u,TEXTURE_MAG_FILTER:f,TEXTURE_MIN_FILTER:d,TEXTURE_WRAP_S:h,TEXTURE_WRAP_T:g}=e,p=e.createTexture();return e.bindTexture(a,p),e.texParameteri(a,f,s||o),e.texParameteri(a,d,s||o),e.texParameteri(a,h,u),e.texParameteri(a,g,u),i?e.texImage2D(a,0,l,l,c,i):e.texImage2D(a,0,l,n,r,0,l,c,null),p}getCachedTexture(e,n,r){const{textureCache:i}=this;if(i[e])return i[e];{const s=this.createTexture(this.gl,n.width,n.height,n,r);return s&&(i[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,n){const r=e.canvas,i=n.targetCanvas,s=i.getContext("2d");if(!s)return;s.translate(0,i.height),s.scale(1,-1);const o=r.height-i.height;s.drawImage(r,0,o,i.width,i.height,0,0,i.width,i.height)}copyGLTo2DPutImageData(e,n){const r=n.targetCanvas.getContext("2d"),i=n.destinationWidth,s=n.destinationHeight,o=i*s*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,i,s,e.RGBA,e.UNSIGNED_BYTE,a);const c=new ImageData(l,i,s);r.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,n={renderer:"",vendor:""};if(!e)return n;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const i=e.getParameter(r.UNMASKED_RENDERER_WEBGL),s=e.getParameter(r.UNMASKED_VENDOR_WEBGL);i&&(n.renderer=i.toLowerCase()),s&&(n.vendor=s.toLowerCase())}return this.gpuInfo=n,n}}let yh;function KL(){const{WebGLProbe:t}=Gr();return t.queryWebGL(Ei()),rt.enableGLFiltering&&t.isSupported(rt.textureSize)?new nS({tileSize:rt.textureSize}):new YL}function bh(){return!yh&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(yh=KL()),yh}const rS=["cropX","cropY"];class Bn extends cn{static getDefaults(){return{...super.getDefaults(),...Bn.ownDefaults}}constructor(e,n){super(),X(this,"_lastScaleX",1),X(this,"_lastScaleY",1),X(this,"_filterScalingX",1),X(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Bn.ownDefaults),this.setOptions(n),this.cacheKey=`texture${ts()}`,this.setElement(typeof e=="string"?(this.canvas&&mr(this.canvas.getElement())||Jo()).getElementById(e):e,n)}getElement(){return this._element}setElement(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture(`${this.cacheKey}_filtered`),this._element=e,this._originalElement=e,this._setWidthHeight(n),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const n=bh(!1);n instanceof nS&&n.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture(`${this.cacheKey}_filtered`),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const n=this[e];n&&Gr().dispose(n),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const n=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-n,-r),e.lineTo(n,-r),e.lineTo(n,r),e.lineTo(-n,r),e.lineTo(-n,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=[];return this.filters.forEach(r=>{r&&n.push(r.toObject())}),{...super.toObject([...rS,...e]),src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:n,...this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{}}}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],n=this._element,r=-this.width/2,i=-this.height/2;let s=[],o=[],a="",l="";if(!n)return[];if(this.hasCrop()){const c=ts();s.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+r+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",`xlink:href="${this.getSvgSrc(!0)}" x="${r-this.cropX}" y="${i-this.cropY}" width="${n.width||n.naturalWidth}" height="${n.height||n.naturalHeight}"${l}${a}></image>
`),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=[`	<rect x="${r}" y="${i}" width="${this.width}" height="${this.height}" style="${this.getSvgStyles()}" />
`],this.fill=c}return s=this.paintFirst!==Wt?s.concat(o,e):s.concat(e,o),s}getSrc(e){const n=e?this._element:this._originalElement;return n?n.toDataURL?n.toDataURL():this.srcFromAttribute?n.getAttribute("src")||"":n.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:n,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return iu(e,{crossOrigin:n,signal:r}).then(i=>{n!==void 0&&this.set({crossOrigin:n}),this.setElement(i)})}toString(){return`#<Image: { src: "${this.getSrc()}" }>`}applyResizeFilters(){const e=this.resizeFilter,n=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),i=r.x,s=r.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||i>n&&s>n)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=s);const a=or(o),{width:l,height:c}=o;this._element=a,this._lastScaleX=e.scaleX=i,this._lastScaleY=e.scaleY=s,bh().applyFilters([e],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture(`${this.cacheKey}_filtered`),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const n=this._originalElement,r=n.naturalWidth||n.width,i=n.naturalHeight||n.height;if(this._element===this._originalElement){const s=or({width:r,height:i});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,i),this._lastScaleX=1,this._lastScaleY=1);bh().applyFilters(e,this._originalElement,r,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const n=this._element;if(!n)return;const r=this._filterScalingX,i=this._filterScalingY,s=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=n.naturalWidth||n.width,u=n.naturalHeight||n.height,f=a*r,d=l*i,h=Math.min(s*r,c-f),g=Math.min(o*i,u-d),p=-s/2,v=-o/2,m=Math.min(s,c/r-a),y=Math.min(o,u/i-l);n&&e.drawImage(n,f,d,h,g,p,v,m,y)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=n||r.height}parsePreserveAspectRatioAttribute(){const e=u8(this.preserveAspectRatio||""),n=this.width,r=this.height,i={width:n,height:r};let s,o=this._element.width,a=this._element.height,l=1,c=1,u=0,f=0,d=0,h=0;return!e||e.alignX===kn&&e.alignY===kn?(l=n/o,c=r/a):(e.meetOrSlice==="meet"&&(l=c=dL(this._element,i),s=(n-o*l)/2,e.alignX==="Min"&&(u=-s),e.alignX==="Max"&&(u=s),s=(r-a*c)/2,e.alignY==="Min"&&(f=-s),e.alignY==="Max"&&(f=s)),e.meetOrSlice==="slice"&&(l=c=pL(this._element,i),s=o-n/l,e.alignX==="Mid"&&(d=s/2),e.alignX==="Max"&&(d=s),s=a-r/c,e.alignY==="Mid"&&(h=s/2),e.alignY==="Max"&&(h=s),o=n/l,a=r/c)),{width:o,height:a,scaleX:l,scaleY:c,offsetLeft:u,offsetTop:f,cropX:d,cropY:h}}static fromObject(e,n){let{filters:r,resizeFilter:i,src:s,crossOrigin:o,type:a,...l}=e;return Promise.all([iu(s,{...n,crossOrigin:o}),r&&dl(r,n),i?dl([i],n):[],Tf(l,n)]).then(c=>{let[u,f=[],[d],h={}]=c;return new this(u,{...l,src:s,filters:f,resizeFilter:d,...h})})}static fromURL(e){let{crossOrigin:n=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return iu(e,{crossOrigin:n,signal:r}).then(s=>new this(s,i))}static async fromElement(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const i=Ii(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(i["xlink:href"]||i.href,n,i).catch(s=>(es("log","Unable to parse Image",s),null))}}X(Bn,"type","Image"),X(Bn,"cacheProperties",[...Di,...rS]),X(Bn,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),X(Bn,"ATTRIBUTE_NAMES",[...os,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),Fe.setClass(Bn),Fe.setSVGClass(Bn);kf(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Ff=t=>t.webgl!==void 0,Dg="precision highp float",qL=`
    ${Dg};
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`,ZL=new RegExp(Dg,"g");class Nt{get type(){return this.constructor.type}constructor(){let{type:e,...n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,this.constructor.defaults,n)}getFragmentSource(){return qL}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:i="highp"}}=Gr();i!=="highp"&&(n=n.replace(ZL,Dg.replace("highp",i)));const s=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!s||!o||!a)throw new jr("Vertex, fragment shader or program creation error");if(e.shaderSource(s,r),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new jr(`Vertex shader compile error for ${this.type}: ${e.getShaderInfoLog(s)}`);if(e.shaderSource(o,n),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new jr(`Fragment shader compile error for ${this.type}: ${e.getShaderInfoLog(o)}`);if(e.attachShader(a,s),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new jr(`Shader link error for "${this.type}" ${e.getProgramInfoLog(a)}`);const l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,n){return{aPosition:e.getAttribLocation(n,"aPosition")}}getUniformLocations(e,n){const r=this.constructor.uniformLocations,i={};for(let s=0;s<r.length;s++)i[r[s]]=e.getUniformLocation(n,r[s]);return i}sendAttributeData(e,n,r){const i=n.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const n=e.context;if(e.passes>1){const r=e.destinationWidth,i=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===i||(n.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(n,r,i)),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e.targetTexture,0)}else n.bindFramebuffer(n.FRAMEBUFFER,null),n.finish()}_swapTextures(e){e.passes--,e.pass++;const n=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=n}isNeutralState(e){return!1}applyTo(e){Ff(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const n=this.getCacheKey();return e.programCache[n]||(e.programCache[n]=this.createProgram(e.context)),e.programCache[n]}applyToWebGL(e){const n=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?n.bindTexture(n.TEXTURE_2D,e.originalTexture):n.bindTexture(n.TEXTURE_2D,e.sourceTexture),n.useProgram(r.program),this.sendAttributeData(n,r.attributeLocations,e.aPosition),n.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),n.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(n,r.uniformLocations),n.viewport(0,0,e.destinationWidth,e.destinationHeight),n.drawArrays(n.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,n,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,n),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,n){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:n,sourceHeight:r}=e,i=or({width:n,height:r});e.helpLayer=i}}toObject(){const e=Object.keys(this.constructor.defaults||{});return{type:this.type,...e.reduce((n,r)=>(n[r]=this[r],n),{})}}toJSON(){return this.toObject()}static async fromObject(e,n){let{type:r,...i}=e;return new this(i)}}X(Nt,"type","BaseFilter"),X(Nt,"uniformLocations",[]);const JL={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class sc extends Nt{getCacheKey(){return`${this.type}_${this.mode}`}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          ${JL[this.mode]}
        }
      }
      `}applyTo2d(e){let{imageData:{data:n}}=e;const r=new yt(this.color).getSource(),i=this.alpha,s=r[0]*i,o=r[1]*i,a=r[2]*i,l=1-i;for(let c=0;c<n.length;c+=4){const u=n[c],f=n[c+1],d=n[c+2];let h,g,p;switch(this.mode){case"multiply":h=u*s/255,g=f*o/255,p=d*a/255;break;case"screen":h=255-(255-u)*(255-s)/255,g=255-(255-f)*(255-o)/255,p=255-(255-d)*(255-a)/255;break;case"add":h=u+s,g=f+o,p=d+a;break;case"difference":h=Math.abs(u-s),g=Math.abs(f-o),p=Math.abs(d-a);break;case"subtract":h=u-s,g=f-o,p=d-a;break;case"darken":h=Math.min(u,s),g=Math.min(f,o),p=Math.min(d,a);break;case"lighten":h=Math.max(u,s),g=Math.max(f,o),p=Math.max(d,a);break;case"overlay":h=s<128?2*u*s/255:255-2*(255-u)*(255-s)/255,g=o<128?2*f*o/255:255-2*(255-f)*(255-o)/255,p=a<128?2*d*a/255:255-2*(255-d)*(255-a)/255;break;case"exclusion":h=s+u-2*s*u/255,g=o+f-2*o*f/255,p=a+d-2*a*d/255;break;case"tint":h=s+u*l,g=o+f*l,p=a+d*l}n[c]=h,n[c+1]=g,n[c+2]=p}}sendUniformData(e,n){const r=new yt(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(n.uColor,r)}}X(sc,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),X(sc,"type","BlendColor"),X(sc,"uniformLocations",["uColor"]),Fe.setClass(sc);const QL={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `};class oc extends Nt{getCacheKey(){return`${this.type}_${this.mode}`}getFragmentSource(){return QL[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const n=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(n,r,n.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(n,n.TEXTURE1)}createTexture(e,n){return e.getCachedTexture(n.cacheKey,n.getElement())}calculateMatrix(){const e=this.image,{width:n,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/n,-e.top/r,1]}applyTo2d(e){let{imageData:{data:n,width:r,height:i},filterBackend:{resources:s}}=e;const o=this.image;s.blendImage||(s.blendImage=Ei());const a=s.blendImage,l=a.getContext("2d");a.width!==r||a.height!==i?(a.width=r,a.height=i):l.clearRect(0,0,r,i),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,r,i);const c=l.getImageData(0,0,r,i).data;for(let u=0;u<n.length;u+=4){const f=n[u],d=n[u+1],h=n[u+2],g=n[u+3],p=c[u],v=c[u+1],m=c[u+2],y=c[u+3];switch(this.mode){case"multiply":n[u]=f*p/255,n[u+1]=d*v/255,n[u+2]=h*m/255,n[u+3]=g*y/255;break;case"mask":n[u+3]=y}}}sendUniformData(e,n){const r=this.calculateMatrix();e.uniform1i(n.uImage,1),e.uniformMatrix3fv(n.uTransformMatrix,!1,r)}toObject(){return{...super.toObject(),image:this.image&&this.image.toObject()}}static async fromObject(e,n){let{type:r,image:i,...s}=e;return Bn.fromObject(i,n).then(o=>new this({...s,image:o}))}}X(oc,"type","BlendImage"),X(oc,"defaults",{mode:"multiply",alpha:1}),X(oc,"uniformLocations",["uTransformMatrix","uImage"]),Fe.setClass(oc);class ac extends Nt{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){Ff(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:n,width:r,height:i}}=e;this.aspectRatio=r/i,this.horizontal=!0;let s=this.getBlurValue()*r;const o=new Uint8ClampedArray(n),a=15,l=4*r;for(let c=0;c<n.length;c+=4){let u=0,f=0,d=0,h=0,g=0;const p=c-c%l,v=p+l;for(let m=-14;m<a;m++){const y=m/a,_=4*Math.floor(s*y),b=1-Math.abs(y);let x=c+_;x<p?x=p:x>v&&(x=v);const E=n[x+3]*b;u+=n[x]*E,f+=n[x+1]*E,d+=n[x+2]*E,h+=E,g+=b}o[c]=u/h,o[c+1]=f/h,o[c+2]=d/h,o[c+3]=h/g}this.horizontal=!1,s=this.getBlurValue()*i;for(let c=0;c<o.length;c+=4){let u=0,f=0,d=0,h=0,g=0;const p=c%l,v=o.length-l+p;for(let m=-14;m<a;m++){const y=m/a,_=Math.floor(s*y)*l,b=1-Math.abs(y);let x=c+_;x<p?x=p:x>v&&(x=v);const E=o[x+3]*b;u+=o[x]*E,f+=o[x+1]*E,d+=o[x+2]*E,h+=E,g+=b}n[c]=u/h,n[c+1]=f/h,n[c+2]=d/h,n[c+3]=h/g}}sendUniformData(e,n){const r=this.chooseRightDelta();e.uniform2fv(n.uDelta,r)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:n,aspectRatio:r}=this;return n?r>1&&(e=1/r):r<1&&(e=r),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}X(ac,"type","Blur"),X(ac,"defaults",{blur:0}),X(ac,"uniformLocations",["uDelta"]),Fe.setClass(ac);class lc extends Nt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:n}}=e;const r=Math.round(255*this.brightness);for(let i=0;i<n.length;i+=4)n[i]+=r,n[i+1]+=r,n[i+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,n){e.uniform1f(n.uBrightness,this.brightness)}}X(lc,"type","Brightness"),X(lc,"defaults",{brightness:0}),X(lc,"uniformLocations",["uBrightness"]),Fe.setClass(lc);const iS={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class ho extends Nt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const n=e.imageData.data,r=this.matrix,i=this.colorsOnly;for(let s=0;s<n.length;s+=4){const o=n[s],a=n[s+1],l=n[s+2];if(n[s]=o*r[0]+a*r[1]+l*r[2]+255*r[4],n[s+1]=o*r[5]+a*r[6]+l*r[7]+255*r[9],n[s+2]=o*r[10]+a*r[11]+l*r[12]+255*r[14],!i){const c=n[s+3];n[s]+=c*r[3],n[s+1]+=c*r[8],n[s+2]+=c*r[13],n[s+3]=o*r[15]+a*r[16]+l*r[17]+c*r[18]+255*r[19]}}}sendUniformData(e,n){const r=this.matrix,i=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(n.uColorMatrix,!1,i),e.uniform4fv(n.uConstants,s)}toObject(){return{...super.toObject(),matrix:[...this.matrix]}}}function Hs(t,e){var n;const r=(X(n=class extends ho{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",t),X(n,"defaults",{colorsOnly:!1,matrix:e}),n);return Fe.setClass(r,t),r}X(ho,"type","ColorMatrix"),X(ho,"defaults",iS),X(ho,"uniformLocations",["uColorMatrix","uConstants"]),Fe.setClass(ho);Hs("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Hs("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Hs("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Hs("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Hs("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Hs("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Hs("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class jv extends Nt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Ff(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(n=>{n.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,n){return Promise.all((e.subFilters||[]).map(r=>Fe.getClass(r.type).fromObject(r,n))).then(r=>new this({subFilters:r}))}}X(jv,"type","Composed"),Fe.setClass(jv);class cc extends Nt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:n}}=e;const r=Math.floor(255*this.contrast),i=259*(r+255)/(255*(259-r));for(let s=0;s<n.length;s+=4)n[s]=i*(n[s]-128)+128,n[s+1]=i*(n[s+1]-128)+128,n[s+2]=i*(n[s+2]-128)+128}sendUniformData(e,n){e.uniform1f(n.uContrast,this.contrast)}}X(cc,"type","Contrast"),X(cc,"defaults",{contrast:0}),X(cc,"uniformLocations",["uContrast"]),Fe.setClass(cc);const e6={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class uc extends Nt{getCacheKey(){return`${this.type}_${Math.sqrt(this.matrix.length)}_${this.opaque?1:0}`}getFragmentSource(){return e6[this.getCacheKey()]}applyTo2d(e){const n=e.imageData,r=n.data,i=this.matrix,s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),a=n.width,l=n.height,c=e.ctx.createImageData(a,l),u=c.data,f=this.opaque?1:0;let d,h,g,p,v,m,y,_,b,x,E,T,O;for(E=0;E<l;E++)for(x=0;x<a;x++){for(v=4*(E*a+x),d=0,h=0,g=0,p=0,O=0;O<s;O++)for(T=0;T<s;T++)y=E+O-o,m=x+T-o,y<0||y>=l||m<0||m>=a||(_=4*(y*a+m),b=i[O*s+T],d+=r[_]*b,h+=r[_+1]*b,g+=r[_+2]*b,f||(p+=r[_+3]*b));u[v]=d,u[v+1]=h,u[v+2]=g,u[v+3]=f?r[v+3]:p}e.imageData=c}sendUniformData(e,n){e.uniform1fv(n.uMatrix,this.matrix)}toObject(){return{...super.toObject(),opaque:this.opaque,matrix:[...this.matrix]}}}X(uc,"type","Convolute"),X(uc,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),X(uc,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),Fe.setClass(uc);const sS="Gamma";class fc extends Nt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:n}}=e;const r=this.gamma,i=1/r[0],s=1/r[1],o=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,i),a.g[l]=255*Math.pow(l/255,s),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<n.length;l+=4)n[l]=a.r[n[l]],n[l+1]=a.g[n[l+1]],n[l+2]=a.b[n[l+2]]}sendUniformData(e,n){e.uniform3fv(n.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:sS,gamma:this.gamma.concat()}}}X(fc,"type",sS),X(fc,"defaults",{gamma:[1,1,1]}),X(fc,"uniformLocations",["uGamma"]),Fe.setClass(fc);const t6={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class hc extends Nt{applyTo2d(e){let{imageData:{data:n}}=e;for(let r,i=0;i<n.length;i+=4){const s=n[i],o=n[i+1],a=n[i+2];switch(this.mode){case"average":r=(s+o+a)/3;break;case"lightness":r=(Math.min(s,o,a)+Math.max(s,o,a))/2;break;case"luminosity":r=.21*s+.72*o+.07*a}n[i+2]=n[i+1]=n[i]=r}}getCacheKey(){return`${this.type}_${this.mode}`}getFragmentSource(){return t6[this.mode]}sendUniformData(e,n){e.uniform1i(n.uMode,1)}isNeutralState(){return!1}}X(hc,"type","Grayscale"),X(hc,"defaults",{mode:"average"}),X(hc,"uniformLocations",["uMode"]),Fe.setClass(hc);const n6={...iS,rotation:0};class _h extends ho{calculateMatrix(){const e=this.rotation*Math.PI,n=Ci(e),r=Ti(e),i=1/3,s=Math.sqrt(i)*r,o=1-n;this.matrix=[n+o/3,i*o-s,i*o+s,0,0,i*o+s,n+i*o,i*o-s,0,0,i*o-s,i*o+s,n+i*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}X(_h,"type","HueRotation"),X(_h,"defaults",n6),Fe.setClass(_h);class dc extends Nt{applyTo2d(e){let{imageData:{data:n}}=e;for(let r=0;r<n.length;r+=4)n[r]=255-n[r],n[r+1]=255-n[r+1],n[r+2]=255-n[r+2],this.alpha&&(n[r+3]=255-n[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,n){e.uniform1i(n.uInvert,Number(this.invert)),e.uniform1i(n.uAlpha,Number(this.alpha))}}X(dc,"type","Invert"),X(dc,"defaults",{alpha:!1,invert:!0}),X(dc,"uniformLocations",["uInvert","uAlpha"]),Fe.setClass(dc);class pc extends Nt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:n}}=e;const r=this.noise;for(let i=0;i<n.length;i+=4){const s=(.5-Math.random())*r;n[i]+=s,n[i+1]+=s,n[i+2]+=s}}sendUniformData(e,n){e.uniform1f(n.uNoise,this.noise/255),e.uniform1f(n.uSeed,Math.random())}isNeutralState(){return this.noise===0}}X(pc,"type","Noise"),X(pc,"defaults",{noise:0}),X(pc,"uniformLocations",["uNoise","uSeed"]),Fe.setClass(pc);class gc extends Nt{applyTo2d(e){let{imageData:{data:n,width:r,height:i}}=e;for(let s=0;s<i;s+=this.blocksize)for(let o=0;o<r;o+=this.blocksize){const a=4*s*r+4*o,l=n[a],c=n[a+1],u=n[a+2],f=n[a+3];for(let d=s;d<Math.min(s+this.blocksize,i);d++)for(let h=o;h<Math.min(o+this.blocksize,r);h++){const g=4*d*r+4*h;n[g]=l,n[g+1]=c,n[g+2]=u,n[g+3]=f}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,n){e.uniform1f(n.uBlocksize,this.blocksize)}}X(gc,"type","Pixelate"),X(gc,"defaults",{blocksize:4}),X(gc,"uniformLocations",["uBlocksize"]),Fe.setClass(gc);class mc extends Nt{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:n}}=e;const r=255*this.distance,i=new yt(this.color).getSource(),s=[i[0]-r,i[1]-r,i[2]-r],o=[i[0]+r,i[1]+r,i[2]+r];for(let a=0;a<n.length;a+=4){const l=n[a],c=n[a+1],u=n[a+2];l>s[0]&&c>s[1]&&u>s[2]&&l<o[0]&&c<o[1]&&u<o[2]&&(n[a+3]=0)}}sendUniformData(e,n){const r=new yt(this.color).getSource(),i=this.distance,s=[0+r[0]/255-i,0+r[1]/255-i,0+r[2]/255-i,1],o=[r[0]/255+i,r[1]/255+i,r[2]/255+i,1];e.uniform4fv(n.uLow,s),e.uniform4fv(n.uHigh,o)}}X(mc,"type","RemoveColor"),X(mc,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),X(mc,"uniformLocations",["uLow","uHigh"]),Fe.setClass(mc);class vc extends Nt{sendUniformData(e,n){e.uniform2fv(n.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(n.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return`${this.type}_${e}`}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),n=this.tempScale,r=this.getFilterWindow(),i=new Array(r);for(let s=1;s<=r;s++)i[s-1]=e(s*n);return i}generateShader(e){const n=new Array(e);for(let r=1;r<=e;r++)n[r-1]=`${r}.0 * uDelta`;return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[${e}];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        ${n.map((r,i)=>`
              color += texture2D(uTexture, vTexCoord + ${r}) * uTaps[${i}] + texture2D(uTexture, vTexCoord - ${r}) * uTaps[${i}];
              sum += 2.0 * uTaps[${i}];
            `).join(`
`)}
        gl_FragColor = color / sum;
      }
    `}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Ff(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return n=>{if(n>=e||n<=-e)return 0;if(n<11920929e-14&&n>-11920929e-14)return 1;const r=(n*=Math.PI)/e;return Math.sin(n)/n*Math.sin(r)/r}}applyTo2d(e){const n=e.imageData,r=this.scaleX,i=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/i;const s=n.width,o=n.height,a=Math.round(s*r),l=Math.round(o*i);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(e,s,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(e,s,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,s,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(e,s,o,a,l):new ImageData(a,l),e.imageData=c}sliceByTwo(e,n,r,i,s){const o=e.imageData,a=.5;let l=!1,c=!1,u=n*a,f=r*a;const d=e.filterBackend.resources;let h=0,g=0;const p=n;let v=0;d.sliceByTwo||(d.sliceByTwo=Ei());const m=d.sliceByTwo;(m.width<1.5*n||m.height<r)&&(m.width=1.5*n,m.height=r);const y=m.getContext("2d");for(y.clearRect(0,0,1.5*n,r),y.putImageData(o,0,0),i=Math.floor(i),s=Math.floor(s);!l||!c;)n=u,r=f,i<Math.floor(u*a)?u=Math.floor(u*a):(u=i,l=!0),s<Math.floor(f*a)?f=Math.floor(f*a):(f=s,c=!0),y.drawImage(m,h,g,n,r,p,v,u,f),h=p,g=v,v+=f;return y.getImageData(h,g,i,s)}lanczosResize(e,n,r,i,s){const o=e.imageData.data,a=e.ctx.createImageData(i,s),l=a.data,c=this.lanczosCreate(this.lanczosLobes),u=this.rcpScaleX,f=this.rcpScaleY,d=2/this.rcpScaleX,h=2/this.rcpScaleY,g=Math.ceil(u*this.lanczosLobes/2),p=Math.ceil(f*this.lanczosLobes/2),v={},m={x:0,y:0},y={x:0,y:0};return(function _(b){let x,E,T,O,k,I,R,C,P,S,$;for(m.x=(b+.5)*u,y.x=Math.floor(m.x),x=0;x<s;x++){for(m.y=(x+.5)*f,y.y=Math.floor(m.y),k=0,I=0,R=0,C=0,P=0,E=y.x-g;E<=y.x+g;E++)if(!(E<0||E>=n)){S=Math.floor(1e3*Math.abs(E-m.x)),v[S]||(v[S]={});for(let Z=y.y-p;Z<=y.y+p;Z++)Z<0||Z>=r||($=Math.floor(1e3*Math.abs(Z-m.y)),v[S][$]||(v[S][$]=c(Math.sqrt(Math.pow(S*d,2)+Math.pow($*h,2))/1e3)),T=v[S][$],T>0&&(O=4*(Z*n+E),k+=T,I+=T*o[O],R+=T*o[O+1],C+=T*o[O+2],P+=T*o[O+3]))}O=4*(x*i+b),l[O]=I/k,l[O+1]=R/k,l[O+2]=C/k,l[O+3]=P/k}return++b<i?_(b):a})(0)}bilinearFiltering(e,n,r,i,s){let o,a,l,c,u,f,d,h,g,p,v,m,y,_=0;const b=this.rcpScaleX,x=this.rcpScaleY,E=4*(n-1),T=e.imageData.data,O=e.ctx.createImageData(i,s),k=O.data;for(d=0;d<s;d++)for(h=0;h<i;h++)for(u=Math.floor(b*h),f=Math.floor(x*d),g=b*h-u,p=x*d-f,y=4*(f*n+u),v=0;v<4;v++)o=T[y+v],a=T[y+4+v],l=T[y+E+v],c=T[y+E+4+v],m=o*(1-g)*(1-p)+a*g*(1-p)+l*p*(1-g)+c*g*p,k[_++]=m;return O}hermiteFastResize(e,n,r,i,s){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),u=e.imageData.data,f=e.ctx.createImageData(i,s),d=f.data;for(let h=0;h<s;h++)for(let g=0;g<i;g++){const p=4*(g+h*i);let v=0,m=0,y=0,_=0,b=0,x=0,E=0;const T=(h+.5)*a;for(let O=Math.floor(h*a);O<(h+1)*a;O++){const k=Math.abs(T-(O+.5))/c,I=(g+.5)*o,R=k*k;for(let C=Math.floor(g*o);C<(g+1)*o;C++){let P=Math.abs(I-(C+.5))/l;const S=Math.sqrt(R+P*P);S>1&&S<-1||(v=2*S*S*S-3*S*S+1,v>0&&(P=4*(C+O*n),E+=v*u[P+3],y+=v,u[P+3]<255&&(v=v*u[P+3]/250),_+=v*u[P],b+=v*u[P+1],x+=v*u[P+2],m+=v))}}d[p]=_/m,d[p+1]=b/m,d[p+2]=x/m,d[p+3]=E/y}return f}}X(vc,"type","Resize"),X(vc,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),X(vc,"uniformLocations",["uDelta","uTaps"]),Fe.setClass(vc);class yc extends Nt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:n}}=e;const r=-this.saturation;for(let i=0;i<n.length;i+=4){const s=n[i],o=n[i+1],a=n[i+2],l=Math.max(s,o,a);n[i]+=l!==s?(l-s)*r:0,n[i+1]+=l!==o?(l-o)*r:0,n[i+2]+=l!==a?(l-a)*r:0}}sendUniformData(e,n){e.uniform1f(n.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}X(yc,"type","Saturation"),X(yc,"defaults",{saturation:0}),X(yc,"uniformLocations",["uSaturation"]),Fe.setClass(yc);class bc extends Nt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:n}}=e;const r=-this.vibrance;for(let i=0;i<n.length;i+=4){const s=n[i],o=n[i+1],a=n[i+2],l=Math.max(s,o,a),c=(s+o+a)/3,u=2*Math.abs(l-c)/255*r;n[i]+=l!==s?(l-s)*u:0,n[i+1]+=l!==o?(l-o)*u:0,n[i+2]+=l!==a?(l-a)*u:0}}sendUniformData(e,n){e.uniform1f(n.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}X(bc,"type","Vibrance"),X(bc,"defaults",{vibrance:0}),X(bc,"uniformLocations",["uVibrance"]),Fe.setClass(bc);function sa(t){let e=t.length;for(;--e>=0;)t[e]=0}const r6=3,i6=258,oS=29,s6=256,o6=s6+1+oS,aS=30,a6=512,l6=new Array((o6+2)*2);sa(l6);const c6=new Array(aS*2);sa(c6);const u6=new Array(a6);sa(u6);const f6=new Array(i6-r6+1);sa(f6);const h6=new Array(oS);sa(h6);const d6=new Array(aS);sa(d6);const p6=(t,e,n,r)=>{let i=t&65535|0,s=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+e[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var Qd=p6;const g6=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},m6=new Uint32Array(g6()),v6=(t,e,n,r)=>{const i=m6,s=r+n;t^=-1;for(let o=r;o<s;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var Fr=v6,ep={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},lS={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const y6=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var b6=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)y6(n,r)&&(t[r]=n[r])}}return t},_6=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,s=t.length;r<s;r++){let o=t[r];n.set(o,i),i+=o.length}return n},cS={assign:b6,flattenChunks:_6};let uS=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{uS=!1}const yl=new Uint8Array(256);for(let t=0;t<256;t++)yl[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;yl[254]=yl[254]=1;var w6=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,s,o=t.length,a=0;for(i=0;i<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e};const S6=(t,e)=>{if(e<65534&&t.subarray&&uS)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var x6=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let o=t[r++];if(o<128){s[i++]=o;continue}let a=yl[o];if(a>4){s[i++]=65533,r+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&r<n;)o=o<<6|t[r++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return S6(s,i)},C6=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+yl[t[n]]>e?n:e},tp={string2buf:w6,buf2string:x6,utf8border:C6};function T6(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var E6=T6;const _c=16209,k6=16191;var O6=function(e,n){let r,i,s,o,a,l,c,u,f,d,h,g,p,v,m,y,_,b,x,E,T,O,k,I;const R=e.state;r=e.next_in,k=e.input,i=r+(e.avail_in-5),s=e.next_out,I=e.output,o=s-(n-e.avail_out),a=s+(e.avail_out-257),l=R.dmax,c=R.wsize,u=R.whave,f=R.wnext,d=R.window,h=R.hold,g=R.bits,p=R.lencode,v=R.distcode,m=(1<<R.lenbits)-1,y=(1<<R.distbits)-1;e:do{g<15&&(h+=k[r++]<<g,g+=8,h+=k[r++]<<g,g+=8),_=p[h&m];t:for(;;){if(b=_>>>24,h>>>=b,g-=b,b=_>>>16&255,b===0)I[s++]=_&65535;else if(b&16){x=_&65535,b&=15,b&&(g<b&&(h+=k[r++]<<g,g+=8),x+=h&(1<<b)-1,h>>>=b,g-=b),g<15&&(h+=k[r++]<<g,g+=8,h+=k[r++]<<g,g+=8),_=v[h&y];n:for(;;){if(b=_>>>24,h>>>=b,g-=b,b=_>>>16&255,b&16){if(E=_&65535,b&=15,g<b&&(h+=k[r++]<<g,g+=8,g<b&&(h+=k[r++]<<g,g+=8)),E+=h&(1<<b)-1,E>l){e.msg="invalid distance too far back",R.mode=_c;break e}if(h>>>=b,g-=b,b=s-o,E>b){if(b=E-b,b>u&&R.sane){e.msg="invalid distance too far back",R.mode=_c;break e}if(T=0,O=d,f===0){if(T+=c-b,b<x){x-=b;do I[s++]=d[T++];while(--b);T=s-E,O=I}}else if(f<b){if(T+=c+f-b,b-=f,b<x){x-=b;do I[s++]=d[T++];while(--b);if(T=0,f<x){b=f,x-=b;do I[s++]=d[T++];while(--b);T=s-E,O=I}}}else if(T+=f-b,b<x){x-=b;do I[s++]=d[T++];while(--b);T=s-E,O=I}for(;x>2;)I[s++]=O[T++],I[s++]=O[T++],I[s++]=O[T++],x-=3;x&&(I[s++]=O[T++],x>1&&(I[s++]=O[T++]))}else{T=s-E;do I[s++]=I[T++],I[s++]=I[T++],I[s++]=I[T++],x-=3;while(x>2);x&&(I[s++]=I[T++],x>1&&(I[s++]=I[T++]))}}else if((b&64)===0){_=v[(_&65535)+(h&(1<<b)-1)];continue n}else{e.msg="invalid distance code",R.mode=_c;break e}break}}else if((b&64)===0){_=p[(_&65535)+(h&(1<<b)-1)];continue t}else if(b&32){R.mode=k6;break e}else{e.msg="invalid literal/length code",R.mode=_c;break e}break}}while(r<i&&s<a);x=g>>3,r-=x,g-=x<<3,h&=(1<<g)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<a?257+(a-s):257-(s-a),R.hold=h,R.bits=g};const Zs=15,Nv=852,zv=592,$v=0,wh=1,Uv=2,A6=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),P6=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),F6=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),D6=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),I6=(t,e,n,r,i,s,o,a)=>{const l=a.bits;let c=0,u=0,f=0,d=0,h=0,g=0,p=0,v=0,m=0,y=0,_,b,x,E,T,O=null,k;const I=new Uint16Array(Zs+1),R=new Uint16Array(Zs+1);let C=null,P,S,$;for(c=0;c<=Zs;c++)I[c]=0;for(u=0;u<r;u++)I[e[n+u]]++;for(h=l,d=Zs;d>=1&&I[d]===0;d--);if(h>d&&(h=d),d===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(f=1;f<d&&I[f]===0;f++);for(h<f&&(h=f),v=1,c=1;c<=Zs;c++)if(v<<=1,v-=I[c],v<0)return-1;if(v>0&&(t===$v||d!==1))return-1;for(R[1]=0,c=1;c<Zs;c++)R[c+1]=R[c]+I[c];for(u=0;u<r;u++)e[n+u]!==0&&(o[R[e[n+u]]++]=u);if(t===$v?(O=C=o,k=20):t===wh?(O=A6,C=P6,k=257):(O=F6,C=D6,k=0),y=0,u=0,c=f,T=s,g=h,p=0,x=-1,m=1<<h,E=m-1,t===wh&&m>Nv||t===Uv&&m>zv)return 1;for(;;){P=c-p,o[u]+1<k?(S=0,$=o[u]):o[u]>=k?(S=C[o[u]-k],$=O[o[u]-k]):(S=96,$=0),_=1<<c-p,b=1<<g,f=b;do b-=_,i[T+(y>>p)+b]=P<<24|S<<16|$|0;while(b!==0);for(_=1<<c-1;y&_;)_>>=1;if(_!==0?(y&=_-1,y+=_):y=0,u++,--I[c]===0){if(c===d)break;c=e[n+o[u]]}if(c>h&&(y&E)!==x){for(p===0&&(p=h),T+=f,g=c-p,v=1<<g;g+p<d&&(v-=I[g+p],!(v<=0));)g++,v<<=1;if(m+=1<<g,t===wh&&m>Nv||t===Uv&&m>zv)return 1;x=y&E,i[x]=h<<24|g<<16|T-s|0}}return y!==0&&(i[T+y]=c-p<<24|64<<16|0),a.bits=h,0};var Ga=I6;const M6=0,fS=1,hS=2,{Z_FINISH:Hv,Z_BLOCK:R6,Z_TREES:wc,Z_OK:js,Z_STREAM_END:L6,Z_NEED_DICT:B6,Z_STREAM_ERROR:ar,Z_DATA_ERROR:dS,Z_MEM_ERROR:pS,Z_BUF_ERROR:j6,Z_DEFLATED:Vv}=lS,Df=16180,Gv=16181,Wv=16182,Xv=16183,Yv=16184,Kv=16185,qv=16186,Zv=16187,Jv=16188,Qv=16189,Uu=16190,qr=16191,Sh=16192,ey=16193,xh=16194,ty=16195,ny=16196,ry=16197,iy=16198,Sc=16199,xc=16200,sy=16201,oy=16202,ay=16203,ly=16204,cy=16205,Ch=16206,uy=16207,fy=16208,Ot=16209,gS=16210,mS=16211,N6=852,z6=592,$6=15,U6=$6,hy=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function H6(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Vs=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Df||e.mode>mS?1:0},vS=t=>{if(Vs(t))return ar;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Df,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(N6),e.distcode=e.distdyn=new Int32Array(z6),e.sane=1,e.back=-1,js},yS=t=>{if(Vs(t))return ar;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,vS(t)},bS=(t,e)=>{let n;if(Vs(t))return ar;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ar:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,yS(t))},_S=(t,e)=>{if(!t)return ar;const n=new H6;t.state=n,n.strm=t,n.window=null,n.mode=Df;const r=bS(t,e);return r!==js&&(t.state=null),r},V6=t=>_S(t,U6);let dy=!0,Th,Eh;const G6=t=>{if(dy){Th=new Int32Array(512),Eh=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Ga(fS,t.lens,0,288,Th,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Ga(hS,t.lens,0,32,Eh,0,t.work,{bits:5}),dy=!1}t.lencode=Th,t.lenbits=9,t.distcode=Eh,t.distbits=5},wS=(t,e,n,r)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},W6=(t,e)=>{let n,r,i,s,o,a,l,c,u,f,d,h,g,p,v=0,m,y,_,b,x,E,T,O;const k=new Uint8Array(4);let I,R;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Vs(t)||!t.output||!t.input&&t.avail_in!==0)return ar;n=t.state,n.mode===qr&&(n.mode=Sh),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,c=n.hold,u=n.bits,f=a,d=l,O=js;e:for(;;)switch(n.mode){case Df:if(n.wrap===0){n.mode=Sh;break}for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,k[0]=c&255,k[1]=c>>>8&255,n.check=Fr(n.check,k,2,0),c=0,u=0,n.mode=Gv;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=Ot;break}if((c&15)!==Vv){t.msg="unknown compression method",n.mode=Ot;break}if(c>>>=4,u-=4,T=(c&15)+8,n.wbits===0&&(n.wbits=T),T>15||T>n.wbits){t.msg="invalid window size",n.mode=Ot;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=c&512?Qv:qr,c=0,u=0;break;case Gv:for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==Vv){t.msg="unknown compression method",n.mode=Ot;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Ot;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(k[0]=c&255,k[1]=c>>>8&255,n.check=Fr(n.check,k,2,0)),c=0,u=0,n.mode=Wv;case Wv:for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(k[0]=c&255,k[1]=c>>>8&255,k[2]=c>>>16&255,k[3]=c>>>24&255,n.check=Fr(n.check,k,4,0)),c=0,u=0,n.mode=Xv;case Xv:for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(k[0]=c&255,k[1]=c>>>8&255,n.check=Fr(n.check,k,2,0)),c=0,u=0,n.mode=Yv;case Yv:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(k[0]=c&255,k[1]=c>>>8&255,n.check=Fr(n.check,k,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=Kv;case Kv:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+h),T)),n.flags&512&&n.wrap&4&&(n.check=Fr(n.check,r,h,s)),a-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=qv;case qv:if(n.flags&2048){if(a===0)break e;h=0;do T=r[s+h++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T));while(T&&h<a);if(n.flags&512&&n.wrap&4&&(n.check=Fr(n.check,r,h,s)),a-=h,s+=h,T)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Zv;case Zv:if(n.flags&4096){if(a===0)break e;h=0;do T=r[s+h++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T));while(T&&h<a);if(n.flags&512&&n.wrap&4&&(n.check=Fr(n.check,r,h,s)),a-=h,s+=h,T)break e}else n.head&&(n.head.comment=null);n.mode=Jv;case Jv:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.wrap&4&&c!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Ot;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=qr;break;case Qv:for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}t.adler=n.check=hy(c),c=0,u=0,n.mode=Uu;case Uu:if(n.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,B6;t.adler=n.check=1,n.mode=qr;case qr:if(e===R6||e===wc)break e;case Sh:if(n.last){c>>>=u&7,u-=u&7,n.mode=Ch;break}for(;u<3;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=ey;break;case 1:if(G6(n),n.mode=Sc,e===wc){c>>>=2,u-=2;break e}break;case 2:n.mode=ny;break;case 3:t.msg="invalid block type",n.mode=Ot}c>>>=2,u-=2;break;case ey:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Ot;break}if(n.length=c&65535,c=0,u=0,n.mode=xh,e===wc)break e;case xh:n.mode=ty;case ty:if(h=n.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;i.set(r.subarray(s,s+h),o),a-=h,s+=h,l-=h,o+=h,n.length-=h;break}n.mode=qr;break;case ny:for(;u<14;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Ot;break}n.have=0,n.mode=ry;case ry:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.lens[C[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[C[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},O=Ga(M6,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,O){t.msg="invalid code lengths set",n.mode=Ot;break}n.have=0,n.mode=iy;case iy:for(;n.have<n.nlen+n.ndist;){for(;v=n.lencode[c&(1<<n.lenbits)-1],m=v>>>24,y=v>>>16&255,_=v&65535,!(m<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(_<16)c>>>=m,u-=m,n.lens[n.have++]=_;else{if(_===16){for(R=m+2;u<R;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(c>>>=m,u-=m,n.have===0){t.msg="invalid bit length repeat",n.mode=Ot;break}T=n.lens[n.have-1],h=3+(c&3),c>>>=2,u-=2}else if(_===17){for(R=m+3;u<R;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=m,u-=m,T=0,h=3+(c&7),c>>>=3,u-=3}else{for(R=m+7;u<R;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=m,u-=m,T=0,h=11+(c&127),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Ot;break}for(;h--;)n.lens[n.have++]=T}}if(n.mode===Ot)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Ot;break}if(n.lenbits=9,I={bits:n.lenbits},O=Ga(fS,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,O){t.msg="invalid literal/lengths set",n.mode=Ot;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},O=Ga(hS,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,O){t.msg="invalid distances set",n.mode=Ot;break}if(n.mode=Sc,e===wc)break e;case Sc:n.mode=xc;case xc:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,O6(t,d),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,c=n.hold,u=n.bits,n.mode===qr&&(n.back=-1);break}for(n.back=0;v=n.lencode[c&(1<<n.lenbits)-1],m=v>>>24,y=v>>>16&255,_=v&65535,!(m<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(y&&(y&240)===0){for(b=m,x=y,E=_;v=n.lencode[E+((c&(1<<b+x)-1)>>b)],m=v>>>24,y=v>>>16&255,_=v&65535,!(b+m<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=m,u-=m,n.back+=m,n.length=_,y===0){n.mode=cy;break}if(y&32){n.back=-1,n.mode=qr;break}if(y&64){t.msg="invalid literal/length code",n.mode=Ot;break}n.extra=y&15,n.mode=sy;case sy:if(n.extra){for(R=n.extra;u<R;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=oy;case oy:for(;v=n.distcode[c&(1<<n.distbits)-1],m=v>>>24,y=v>>>16&255,_=v&65535,!(m<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if((y&240)===0){for(b=m,x=y,E=_;v=n.distcode[E+((c&(1<<b+x)-1)>>b)],m=v>>>24,y=v>>>16&255,_=v&65535,!(b+m<=u);){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=m,u-=m,n.back+=m,y&64){t.msg="invalid distance code",n.mode=Ot;break}n.offset=_,n.extra=y&15,n.mode=ay;case ay:if(n.extra){for(R=n.extra;u<R;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Ot;break}n.mode=ly;case ly:if(l===0)break e;if(h=d-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Ot;break}h>n.wnext?(h-=n.wnext,g=n.wsize-h):g=n.wnext-h,h>n.length&&(h=n.length),p=n.window}else p=i,g=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do i[o++]=p[g++];while(--h);n.length===0&&(n.mode=xc);break;case cy:if(l===0)break e;i[o++]=n.length,l--,n.mode=xc;break;case Ch:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=r[s++]<<u,u+=8}if(d-=l,t.total_out+=d,n.total+=d,n.wrap&4&&d&&(t.adler=n.check=n.flags?Fr(n.check,i,d,o-d):Qd(n.check,i,d,o-d)),d=l,n.wrap&4&&(n.flags?c:hy(c))!==n.check){t.msg="incorrect data check",n.mode=Ot;break}c=0,u=0}n.mode=uy;case uy:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=r[s++]<<u,u+=8}if(n.wrap&4&&c!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Ot;break}c=0,u=0}n.mode=fy;case fy:O=L6;break e;case Ot:O=dS;break e;case gS:return pS;case mS:default:return ar}return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,(n.wsize||d!==t.avail_out&&n.mode<Ot&&(n.mode<Ch||e!==Hv))&&wS(t,t.output,t.next_out,d-t.avail_out),f-=t.avail_in,d-=t.avail_out,t.total_in+=f,t.total_out+=d,n.total+=d,n.wrap&4&&d&&(t.adler=n.check=n.flags?Fr(n.check,i,d,t.next_out-d):Qd(n.check,i,d,t.next_out-d)),t.data_type=n.bits+(n.last?64:0)+(n.mode===qr?128:0)+(n.mode===Sc||n.mode===xh?256:0),(f===0&&d===0||e===Hv)&&O===js&&(O=j6),O},X6=t=>{if(Vs(t))return ar;let e=t.state;return e.window&&(e.window=null),t.state=null,js},Y6=(t,e)=>{if(Vs(t))return ar;const n=t.state;return(n.wrap&2)===0?ar:(n.head=e,e.done=!1,js)},K6=(t,e)=>{const n=e.length;let r,i,s;return Vs(t)||(r=t.state,r.wrap!==0&&r.mode!==Uu)?ar:r.mode===Uu&&(i=1,i=Qd(i,e,n,0),i!==r.check)?dS:(s=wS(t,e,n,n),s?(r.mode=gS,pS):(r.havedict=1,js))};var q6=yS,Z6=bS,J6=vS,Q6=V6,eB=_S,tB=W6,nB=X6,rB=Y6,iB=K6,sB="pako inflate (from Nodeca project)",oi={inflateReset:q6,inflateReset2:Z6,inflateResetKeep:J6,inflateInit:Q6,inflateInit2:eB,inflate:tB,inflateEnd:nB,inflateGetHeader:rB,inflateSetDictionary:iB,inflateInfo:sB};function oB(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var aB=oB;const SS=Object.prototype.toString,{Z_NO_FLUSH:lB,Z_FINISH:cB,Z_OK:bl,Z_STREAM_END:kh,Z_NEED_DICT:Oh,Z_STREAM_ERROR:uB,Z_DATA_ERROR:py,Z_MEM_ERROR:fB}=lS;function If(t){this.options=cS.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new E6,this.strm.avail_out=0;let n=oi.inflateInit2(this.strm,e.windowBits);if(n!==bl)throw new Error(ep[n]);if(this.header=new aB,oi.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=tp.string2buf(e.dictionary):SS.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=oi.inflateSetDictionary(this.strm,e.dictionary),n!==bl)))throw new Error(ep[n])}If.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?cB:lB,SS.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=oi.inflate(n,o),s===Oh&&i&&(s=oi.inflateSetDictionary(n,i),s===bl?s=oi.inflate(n,o):s===py&&(s=Oh));n.avail_in>0&&s===kh&&n.state.wrap>0&&t[n.next_in]!==0;)oi.inflateReset(n),s=oi.inflate(n,o);switch(s){case uB:case py:case Oh:case fB:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===kh))if(this.options.to==="string"){let l=tp.utf8border(n.output,n.next_out),c=n.next_out-l,u=tp.buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===bl&&a===0)){if(s===kh)return s=oi.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};If.prototype.onData=function(t){this.chunks.push(t)};If.prototype.onEnd=function(t){t===bl&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=cS.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function hB(t,e){const n=new If(e);if(n.push(t),n.err)throw n.msg||ep[n.err];return n.result}var dB=hB,pB={inflate:dB};const{inflate:gB}=pB;var mB=gB,Wa=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),Cc=4017,Tc=799,Ec=3406,kc=2276,Oc=1567,Ac=3784,Js=5793,Pc=2896,vB=100,gy=64*1024*1024,np=0;function xo(t){var e=np+t;if(e>gy){var n=Math.ceil((e-gy)/1024/1024);throw new Error("Max memory limit exceeded by at least ".concat(n,"MB"))}np=e}function yB(t,e){for(var n=16;n>0&&!t[n-1];)n--;for(var r=[{children:[],index:0}],i=0,s=r[0],o=0;o<n;o++){for(var a=0;a<t[o];a++){for(s=r.pop(),s.children[s.index]=e[i];s.index>0;){if(r.length===0)throw new Error("Could not recreate Huffman Table");s=r.pop()}for(s.index++,r.push(s);r.length<=o;){var l={children:[],index:0};r.push(l),s.children[s.index]=l.children,s=l}i++}if(o+1<n){var l={children:[],index:0};r.push(l),s.children[s.index]=l.children,s=l}}return r[0].children}function bB(t,e,n,r,i,s,o,a,l){var c=n.mcusPerLine,u=n.progressive,f=e,d=0,h=0;function g(){if(h>0)return h--,d>>h&1;if(d=t[e++],d==255){var re=t[e++];if(re)throw new Error("unexpected marker: ".concat((d<<8|re).toString(16)))}return h=7,d>>>7}function p(re){for(var te=re;;){if(te=te[g()],typeof te=="number")return te;if(te===void 0)throw new Error("invalid huffman sequence")}}function v(re){for(var te=0;re>0;)te=te<<1|g(),re--;return te}function m(re){var te=v(re);return te>=1<<re-1?te:te+(-1<<re)+1}function y(re,te){var Ce=p(re.huffmanTableDC),q=Ce===0?0:m(Ce);te[0]=re.pred+=q;for(var ne=1;ne<64;){var se=p(re.huffmanTableAC),de=se&15,_e=se>>4;if(de===0){if(_e<15)break;ne+=16;continue}ne+=_e;var L=Wa[ne];te[L]=m(de),ne++}}function _(re,te){var Ce=p(re.huffmanTableDC),q=Ce===0?0:m(Ce)<<l;te[0]=re.pred+=q}function b(re,te){te[0]|=g()<<l}var x=0;function E(re,te){if(x>0){x--;return}for(var Ce=s,q=o;Ce<=q;){var ne=p(re.huffmanTableAC),se=ne&15,de=ne>>4;if(se===0){if(de<15){x=v(de)+(1<<de)-1;break}Ce+=16;continue}Ce+=de;var _e=Wa[Ce];te[_e]=m(se)*(1<<l),Ce++}}var T=0,O=0;function k(re,te){for(var Ce=s,q=o,ne=0;Ce<=q;){var se=Wa[Ce],de=te[se]<0?-1:1;switch(T){case 0:var _e=p(re.huffmanTableAC),L=_e&15;if(ne=_e>>4,L===0)ne<15?(x=v(ne)+(1<<ne),T=4):(ne=16,T=1);else{if(L!==1)throw new Error("invalid ACn encoding");O=m(L),T=ne?2:3}continue;case 1:case 2:te[se]?te[se]+=(g()<<l)*de:(ne--,ne===0&&(T=T==2?3:0));break;case 3:te[se]?te[se]+=(g()<<l)*de:(te[se]=O<<l,T=0);break;case 4:te[se]&&(te[se]+=(g()<<l)*de);break}Ce++}T===4&&(x--,x===0&&(T=0))}function I(re,te,Ce,q,ne){var se=Ce/c|0,de=Ce%c,_e=se*re.v+q,L=de*re.h+ne;re.blocks[_e]!==void 0&&te(re,re.blocks[_e][L])}function R(re,te,Ce){var q=Ce/re.blocksPerLine|0,ne=Ce%re.blocksPerLine;re.blocks[q]!==void 0&&te(re,re.blocks[q][ne])}var C=r.length,P,S;u?s===0?S=a===0?_:b:S=a===0?E:k:S=y;var $=0,Z;C==1?Z=r[0].blocksPerLine*r[0].blocksPerColumn:Z=c*n.mcusPerColumn,i||(i=Z);for(var H,K,Q;$<Z;){for(var ce=0;ce<C;ce++)r[ce].pred=0;if(x=0,C==1){P=r[0];for(var Y=0;Y<i;Y++)R(P,S,$),$++}else for(var Y=0;Y<i;Y++){for(var ce=0;ce<C;ce++){P=r[ce],H=P.h,K=P.v;for(var U=0;U<K;U++)for(var he=0;he<H;he++)I(P,S,$,U,he)}if($++,$===Z)break}if($===Z)do{if(t[e]===255&&t[e+1]!==0)break;e+=1}while(e<t.length-2);if(h=0,Q=t[e]<<8|t[e+1],Q<65280)throw new Error("marker was not found");if(Q>=65488&&Q<=65495)e+=2;else break}return e-f}function _B(t){var e=[],n=t.blocksPerLine,r=t.blocksPerColumn,i=n<<3,s=new Int32Array(64),o=new Uint8Array(64);function a(v,m,y){for(var _=t.quantizationTable,b=y,x=0;x<64;x++)b[x]=v[x]*_[x];for(var x=0;x<8;++x){var E=8*x;if(b[1+E]==0&&b[2+E]==0&&b[3+E]==0&&b[4+E]==0&&b[5+E]==0&&b[6+E]==0&&b[7+E]==0){var T=Js*b[0+E]+512>>10;b[0+E]=T,b[1+E]=T,b[2+E]=T,b[3+E]=T,b[4+E]=T,b[5+E]=T,b[6+E]=T,b[7+E]=T;continue}var O=Js*b[0+E]+128>>8,k=Js*b[4+E]+128>>8,I=b[2+E],R=b[6+E],C=Pc*(b[1+E]-b[7+E])+128>>8,P=Pc*(b[1+E]+b[7+E])+128>>8,S=b[3+E]<<4,$=b[5+E]<<4,Z=O-k+1>>1;O=O+k+1>>1,k=Z,Z=I*Ac+R*Oc+128>>8,I=I*Oc-R*Ac+128>>8,R=Z,Z=C-$+1>>1,C=C+$+1>>1,$=Z,Z=P+S+1>>1,S=P-S+1>>1,P=Z,Z=O-R+1>>1,O=O+R+1>>1,R=Z,Z=k-I+1>>1,k=k+I+1>>1,I=Z,Z=C*kc+P*Ec+2048>>12,C=C*Ec-P*kc+2048>>12,P=Z,Z=S*Tc+$*Cc+2048>>12,S=S*Cc-$*Tc+2048>>12,$=Z,b[0+E]=O+P,b[7+E]=O-P,b[1+E]=k+$,b[6+E]=k-$,b[2+E]=I+S,b[5+E]=I-S,b[3+E]=R+C,b[4+E]=R-C}for(var x=0;x<8;++x){var H=x;if(b[8+H]==0&&b[16+H]==0&&b[24+H]==0&&b[32+H]==0&&b[40+H]==0&&b[48+H]==0&&b[56+H]==0){var K=Js*y[x+0]+8192>>14;b[0+H]=K,b[8+H]=K,b[16+H]=K,b[24+H]=K,b[32+H]=K,b[40+H]=K,b[48+H]=K,b[56+H]=K;continue}var O=Js*b[0+H]+2048>>12,k=Js*b[32+H]+2048>>12,I=b[16+H],R=b[48+H],C=Pc*(b[8+H]-b[56+H])+2048>>12,P=Pc*(b[8+H]+b[56+H])+2048>>12,S=b[24+H],$=b[40+H],Z=O-k+1>>1;O=O+k+1>>1,k=Z,Z=I*Ac+R*Oc+2048>>12,I=I*Oc-R*Ac+2048>>12,R=Z,Z=C-$+1>>1,C=C+$+1>>1,$=Z,Z=P+S+1>>1,S=P-S+1>>1,P=Z,Z=O-R+1>>1,O=O+R+1>>1,R=Z,Z=k-I+1>>1,k=k+I+1>>1,I=Z,Z=C*kc+P*Ec+2048>>12,C=C*Ec-P*kc+2048>>12,P=Z,Z=S*Tc+$*Cc+2048>>12,S=S*Cc-$*Tc+2048>>12,$=Z,b[0+H]=O+P,b[56+H]=O-P,b[8+H]=k+$,b[48+H]=k-$,b[16+H]=I+S,b[40+H]=I-S,b[24+H]=R+C,b[32+H]=R-C}for(var x=0;x<64;++x){var Q=128+(b[x]+8>>4);m[x]=Q<0?0:Q>255?255:Q}}xo(i*r*8);for(var l=0;l<r;l++){for(var c=l<<3,u=0;u<8;u++)e.push(new Uint8Array(i));for(var f=0;f<n;f++){a(t.blocks[l][f],o,s);for(var d=0,h=f<<3,g=0;g<8;g++)for(var p=e[c+g],u=0;u<8;u++)p[h+u]=o[d++]}}return e}function ai(t){return t<0?0:t>255?255:t}function wB(t){var e={width:0,height:0,comments:[],adobe:void 0,components:[],exifBuffer:void 0,jfif:void 0},n=vB*1e3*1e3,r=0;function i(){var N=t[r]<<8|t[r+1];return r+=2,N}function s(){var N=i(),j=t.subarray(r,r+N-2);return r+=j.length,j}function o(N){var j=0,A=0;for(var F in N.components)if(N.components.hasOwnProperty(F)){var B=N.components[F];j<B.h&&(j=B.h),A<B.v&&(A=B.v)}var W=Math.ceil(N.samplesPerLine/8/j),G=Math.ceil(N.scanLines/8/A);for(var F in N.components)if(N.components.hasOwnProperty(F)){var B=N.components[F],V=Math.ceil(Math.ceil(N.samplesPerLine/8)*B.h/j),J=Math.ceil(Math.ceil(N.scanLines/8)*B.v/A),ue=W*B.h,oe=G*B.v,ge=oe*ue,ee=[];xo(ge*256);for(var fe=0;fe<oe;fe++){for(var Re=[],ct=0;ct<ue;ct++)Re.push(new Int32Array(64));ee.push(Re)}B.blocksPerLine=V,B.blocksPerColumn=J,B.blocks=ee}N.maxH=j,N.maxV=A,N.mcusPerLine=W,N.mcusPerColumn=G}var a=null,l=null,c=void 0,u=0,f=[],d=[],h=[],g=[],p=i(),v=-1;if(p!=65496)throw new Error("SOI not found");for(p=i();p!=65497;){switch(p){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{var m=s();if(p===65534){for(var y="",_=0;_<m.byteLength;_++)y+=String.fromCharCode(m[_]);e.comments.push(y)}p===65504&&m[0]===74&&m[1]===70&&m[2]===73&&m[3]===70&&m[4]===0&&(a={version:{major:m[5],minor:m[6]},densityUnits:m[7],xDensity:m[8]<<8|m[9],yDensity:m[10]<<8|m[11],thumbWidth:m[12],thumbHeight:m[13],thumbData:m.subarray(14,14+3*m[12]*m[13])}),p===65505&&m[0]===69&&m[1]===120&&m[2]===105&&m[3]===102&&m[4]===0&&(e.exifBuffer=m.subarray(5,m.length)),p===65518&&m[0]===65&&m[1]===100&&m[2]===111&&m[3]===98&&m[4]===101&&m[5]===0&&(l={version:m[6],flags0:m[7]<<8|m[8],flags1:m[9]<<8|m[10],transformCode:m[11]});break}case 65499:{for(var b=i(),x=b+r-2;r<x;){var E=t[r++];xo(256);var T=new Int32Array(64);if(E>>4===0)for(var O=0;O<64;O++){var k=Wa[O];T[k]=t[r++]}else if(E>>4===1)for(var O=0;O<64;O++){var k=Wa[O];T[k]=i()}else throw new Error("DQT: invalid table spec");f[E&15]=T}break}case 65472:case 65473:case 65474:{i(),c={extended:p===65473,progressive:p===65474,precision:t[r++],scanLines:i(),samplesPerLine:i(),components:{},componentsOrder:[],maxH:0,maxV:0,mcusPerLine:0,mcusPerColumn:0};var I=c.scanLines*c.samplesPerLine;if(I>n){var R=Math.ceil((I-n)/1e6);throw new Error("maxResolutionInMP limit exceeded by ".concat(R,"MP"))}for(var C=t[r++],P=0;P<C;P++){var S=t[r],$=t[r+1]>>4,Z=t[r+1]&15,H=t[r+2];c.componentsOrder.push(S),c.components[S]={h:$,v:Z,quantizationIdx:H,blocksPerColumn:0,blocksPerLine:0,blocks:[],pred:0},r+=3}o(c),d.push(c);break}case 65476:{for(var K=i(),P=2;P<K;){for(var Q=t[r++],ce=new Uint8Array(16),Y=0,O=0;O<16;O++,r++)Y+=ce[O]=t[r];xo(16+Y);for(var U=new Uint8Array(Y),O=0;O<Y;O++,r++)U[O]=t[r];P+=17+Y;var he=Q&15,re=Q>>4===0?g:h;re[he]=yB(ce,U)}break}case 65501:i(),u=i();break;case 65500:i(),i();break;case 65498:{i();for(var te=t[r++],Ce=[],P=0;P<te;P++){var q=c.components[t[r++]],ne=t[r++];q.huffmanTableDC=g[ne>>4],q.huffmanTableAC=h[ne&15],Ce.push(q)}var se=t[r++],de=t[r++],_e=t[r++],L=bB(t,r,c,Ce,u,se,de,_e>>4,_e&15);r+=L;break}case 65535:t[r]!==255&&r--;break;default:{if(t[r-3]==255&&t[r-2]>=192&&t[r-2]<=254){r-=3;break}else if(p===224||p==225){if(v!==-1)throw new Error("first unknown JPEG marker at offset ".concat(v.toString(16),", second unknown JPEG marker ").concat(p.toString(16)," at offset ").concat((r-1).toString(16)));v=r-1;var z=i();if(t[r+z-2]===255){r+=z-2;break}}throw new Error("unknown JPEG marker "+p.toString(16))}}p=i()}if(d.length!=1)throw new Error("only single frame JPEGs supported");for(var P=0;P<d.length;P++){var w=d[P].components;for(var O in w)w[O].quantizationTable=f[w[O].quantizationIdx],delete w[O].quantizationIdx}e.width=c.samplesPerLine,e.height=c.scanLines,e.jfif=a,e.adobe=l,e.components=[];for(var P=0;P<c.componentsOrder.length;P++){var q=c.components[c.componentsOrder[P]];e.components.push({lines:_B(q),scaleX:q.h/c.maxH,scaleY:q.v/c.maxV})}return e}function SB(t){var e=0,n=!1,r=t.width,i=t.height,s=r*i*t.components.length;xo(s);var o=new Uint8Array(s);switch(t.components.length){case 1:{for(var a=t.components[0],l=0;l<i;l++)for(var c=a.lines[0|l*a.scaleY],u=0;u<r;u++){var f=c[0|u*a.scaleX];o[e++]=f}break}case 2:{for(var a=t.components[0],d=t.components[1],l=0;l<i;l++)for(var c=a.lines[0|l*a.scaleY],h=d.lines[0|l*d.scaleY],u=0;u<r;u++){var g=c[0|u*a.scaleX];o[e++]=g;var p=h[0|u*d.scaleX];o[e++]=p}break}case 3:{n=!0,t.adobe&&t.adobe.transformCode&&(n=!0);for(var a=t.components[0],d=t.components[1],v=t.components[2],l=0;l<i;l++)for(var c=a.lines[0|l*a.scaleY],h=d.lines[0|l*d.scaleY],m=v.lines[0|l*v.scaleY],u=0;u<r;u++){var f=void 0,y=void 0,_=void 0,b=void 0,x=void 0,E=void 0;n?(f=c[0|u*a.scaleX],y=h[0|u*d.scaleX],_=m[0|u*v.scaleX],b=ai(f+1.402*(_-128)),x=ai(f-.3441363*(y-128)-.71413636*(_-128)),E=ai(f+1.772*(y-128))):(b=c[0|u*a.scaleX],x=h[0|u*d.scaleX],E=m[0|u*v.scaleX]),o[e++]=b,o[e++]=x,o[e++]=E}break}case 4:{if(!t.adobe)throw new Error("Unsupported color mode (4 components)");n=!1,t.adobe&&t.adobe.transformCode&&(n=!0);for(var a=t.components[0],d=t.components[1],v=t.components[2],T=t.components[3],l=0;l<i;l++)for(var c=a.lines[0|l*a.scaleY],h=d.lines[0|l*d.scaleY],m=v.lines[0|l*v.scaleY],O=T.lines[0|l*T.scaleY],u=0;u<r;u++){var f=void 0,y=void 0,_=void 0,k=void 0,I=void 0,R=void 0,C=void 0;n?(f=c[0|u*a.scaleX],y=h[0|u*d.scaleX],_=m[0|u*v.scaleX],k=O[0|u*T.scaleX],I=255-ai(f+1.402*(_-128)),R=255-ai(f-.3441363*(y-128)-.71413636*(_-128)),C=255-ai(f+1.772*(y-128))):(I=c[0|u*a.scaleX],R=h[0|u*d.scaleX],C=m[0|u*v.scaleX],k=O[0|u*T.scaleX]),o[e++]=255-I,o[e++]=255-R,o[e++]=255-C,o[e++]=255-k}break}default:throw new Error("Unsupported color mode")}return o}function xB(t,e){if(np=0,t.length===0)throw new Error("Empty jpeg buffer");var n=wB(t);xo(n.width*n.height*4);var r=SB(n),i=e(n.width,n.height),s=i.width,o=i.height,a=i.data,l=0,c=0;switch(n.components.length){case 1:for(var u=0;u<o;u++)for(var f=0;f<s;f++){var d=r[l++];a[c++]=d,a[c++]=d,a[c++]=d,a[c++]=255}break;case 3:for(var u=0;u<o;u++)for(var f=0;f<s;f++){var h=r[l++],g=r[l++],p=r[l++];a[c++]=h,a[c++]=g,a[c++]=p,a[c++]=255}break;case 4:for(var u=0;u<o;u++)for(var f=0;f<s;f++){var v=r[l++],m=r[l++],d=r[l++],y=r[l++],h=255-ai(v*(1-y/255)+y),g=255-ai(m*(1-y/255)+y),p=255-ai(d*(1-y/255)+y);a[c++]=h,a[c++]=g,a[c++]=p,a[c++]=255}break;default:throw new Error("Unsupported color mode")}return i}var xS={},Uo={pass:"pass through",norm:"normal",diss:"dissolve",dark:"darken","mul ":"multiply",idiv:"color burn",lbrn:"linear burn",dkCl:"darker color",lite:"lighten",scrn:"screen","div ":"color dodge",lddg:"linear dodge",lgCl:"lighter color",over:"overlay",sLit:"soft light",hLit:"hard light",vLit:"vivid light",lLit:"linear light",pLit:"pin light",hMix:"hard mix",diff:"difference",smud:"exclusion",fsub:"subtract",fdiv:"divide","hue ":"hue","sat ":"saturation",colr:"color","lum ":"luminosity"};Object.keys(Uo).forEach(function(t){return xS[Uo[t]]=t});var my=["none","red","orange","yellow","green","blue","violet","gray"],CB=["LMsk","Lr16","Lr32","Layr","Mt16","Mt32","Mtrn","Alph","FMsk","lnk2","FEid","FXid","PxSD","cinf"];function TB(t){var e={};return Object.keys(t).forEach(function(n){return e[t[n]]=n}),e}function Be(t,e,n){var r=TB(n),i=function(o){var a=o.split(".")[1];if(a&&!r[a])throw new Error("Unrecognized value for enum: '".concat(o,"'"));return r[a]||e},s=function(o){if(o&&!n[o])throw new Error("Invalid value for enum: '".concat(o,"'"));return"".concat(t,".").concat(n[o]||n[e])};return{decode:i,encode:s}}var vy;(function(t){t[t.RGB=0]="RGB",t[t.HSB=1]="HSB",t[t.CMYK=2]="CMYK",t[t.Lab=7]="Lab",t[t.Grayscale=8]="Grayscale"})(vy||(vy={}));var yy;(function(t){t[t.PositionRelativeToLayer=1]="PositionRelativeToLayer",t[t.LayerMaskDisabled=2]="LayerMaskDisabled",t[t.InvertLayerMaskWhenBlending=4]="InvertLayerMaskWhenBlending",t[t.LayerMaskFromRenderingOtherData=8]="LayerMaskFromRenderingOtherData",t[t.MaskHasParametersAppliedToIt=16]="MaskHasParametersAppliedToIt"})(yy||(yy={}));var by;(function(t){t[t.UserMaskDensity=1]="UserMaskDensity",t[t.UserMaskFeather=2]="UserMaskFeather",t[t.VectorMaskDensity=4]="VectorMaskDensity",t[t.VectorMaskFeather=8]="VectorMaskFeather"})(by||(by={}));var _y;(function(t){t[t.Color0=0]="Color0",t[t.Color1=1]="Color1",t[t.Color2=2]="Color2",t[t.Color3=3]="Color3",t[t.Transparency=-1]="Transparency",t[t.UserMask=-2]="UserMask",t[t.RealUserMask=-3]="RealUserMask"})(_y||(_y={}));var wy;(function(t){t[t.RawData=0]="RawData",t[t.RleCompressed=1]="RleCompressed",t[t.ZipWithoutPrediction=2]="ZipWithoutPrediction",t[t.ZipWithPrediction=3]="ZipWithPrediction"})(wy||(wy={}));function EB(t,e){switch(t){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return e?3:t+1;case-1:return e?4:3;default:return t+1}}function CS(t,e,n){return t<e?e:t>n?n:t}function rp(t){for(var e=t.data,n=e instanceof Float32Array?1:e instanceof Uint16Array?65535:255,r=0,i=e.length|0;r<i;r=r+4|0)e[r+0]=0,e[r+1]=0,e[r+2]=0,e[r+3]=n}function ip(t){var e=Mf(t.width,t.height),n;if(t.data instanceof Uint8ClampedArray)n=t;else{n=Ig(t.width,t.height);var r=t.data,i=n.data;if(r instanceof Float32Array)for(var s=0,o=r.length;s<o;s+=4)i[s+0]=Math.round(Math.pow(r[s+0],1/2.2)*255),i[s+1]=Math.round(Math.pow(r[s+1],1/2.2)*255),i[s+2]=Math.round(Math.pow(r[s+2],1/2.2)*255),i[s+3]=Math.round(r[s+3]*255);else for(var a=r instanceof Uint16Array?8:0,s=0,o=r.length;s<o;s++)i[s]=r[s]>>>a}return e.getContext("2d").putImageData(n,0,0),e}function kB(t,e,n,r){if(!(t instanceof Uint8Array||t instanceof Uint8ClampedArray))throw new Error("Invalid bit depth");for(var i=0,s=0,o=0;i<r;i++)for(var a=0;a<n;)for(var l=t[o++],c=0;c<8&&a<n;c++,a++,s+=4){var u=l&128?0:255;l=l<<1,e[s+0]=u,e[s+1]=u,e[s+2]=u,e[s+3]=255}}function OB(t){var e=Mf(100,100);try{var n=e.getContext("2d"),r=xB(t,function(i,s){return n.createImageData(i,s)});e.width=r.width,e.height=r.height,n.putImageData(r,0,0)}catch(i){console.error("JPEG decompression error",i.message)}return e}var Mf=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvas method")},Ah=void 0,Ig=function(t,e){return Ah||(Ah=Mf(1,1)),Ah.getContext("2d").createImageData(t,e)};typeof document<"u"&&(Mf=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n});var ya={},Sy;function AB(){if(Sy)return ya;Sy=1,ya.byteLength=a,ya.toByteArray=c,ya.fromByteArray=d;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)t[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function o(h){var g=h.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=h.indexOf("=");p===-1&&(p=g);var v=p===g?0:4-p%4;return[p,v]}function a(h){var g=o(h),p=g[0],v=g[1];return(p+v)*3/4-v}function l(h,g,p){return(g+p)*3/4-p}function c(h){var g,p=o(h),v=p[0],m=p[1],y=new n(l(h,v,m)),_=0,b=m>0?v-4:v,x;for(x=0;x<b;x+=4)g=e[h.charCodeAt(x)]<<18|e[h.charCodeAt(x+1)]<<12|e[h.charCodeAt(x+2)]<<6|e[h.charCodeAt(x+3)],y[_++]=g>>16&255,y[_++]=g>>8&255,y[_++]=g&255;return m===2&&(g=e[h.charCodeAt(x)]<<2|e[h.charCodeAt(x+1)]>>4,y[_++]=g&255),m===1&&(g=e[h.charCodeAt(x)]<<10|e[h.charCodeAt(x+1)]<<4|e[h.charCodeAt(x+2)]>>2,y[_++]=g>>8&255,y[_++]=g&255),y}function u(h){return t[h>>18&63]+t[h>>12&63]+t[h>>6&63]+t[h&63]}function f(h,g,p){for(var v,m=[],y=g;y<p;y+=3)v=(h[y]<<16&16711680)+(h[y+1]<<8&65280)+(h[y+2]&255),m.push(u(v));return m.join("")}function d(h){for(var g,p=h.length,v=p%3,m=[],y=16383,_=0,b=p-v;_<b;_+=y)m.push(f(h,_,_+y>b?b:_+y));return v===1?(g=h[p-1],m.push(t[g>>2]+t[g<<4&63]+"==")):v===2&&(g=(h[p-2]<<8)+h[p-1],m.push(t[g>>10]+t[g>>4&63]+t[g<<2&63]+"=")),m.join("")}return ya}var sp=AB();function op(t){return(t&4294967168)===0?1:(t&4294965248)===0?2:(t&4294901760)===0?3:4}function PB(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r>=55296&&r<=56319){if(n+1<t.length){var i=t.charCodeAt(n+1);(i&64512)===56320&&(n++,e+=op(((r&1023)<<10)+(i&1023)+65536))}}else e+=op(r)}return e}function xy(t,e,n){var r=op(n);switch(r){case 1:t[e]=n;break;case 2:t[e]=n>>6&31|192,t[e+1]=n&63|128;break;case 3:t[e]=n>>12&15|224,t[e+1]=n>>6&63|128,t[e+2]=n&63|128;break;default:t[e]=n>>18&7|240,t[e+1]=n>>12&63|128,t[e+2]=n>>6&63|128,t[e+3]=n&63|128;break}return r}function FB(t,e,n){for(var r=0;r<n.length;r++){var i=n.charCodeAt(r);if(i>=55296&&i<=56319){if(r+1<n.length){var s=n.charCodeAt(r+1);if((s&64512)===56320){r++;var o=((i&1023)<<10)+(s&1023)+65536;e+=xy(t,e,o)}}}else e+=xy(t,e,i)}return e}function TS(t){if(t.length>1e3&&typeof TextEncoder<"u")return new TextEncoder().encode(t);var e=new Uint8Array(PB(t));return FB(e,0,t),e}function Qs(t,e){if(e>=t.length)throw Error("Invalid byte index");var n=t[e];if((n&192)===128)return n&63;throw Error("Invalid continuation byte")}function ES(t){if(t.byteLength>1e3&&typeof TextDecoder<"u")return new TextDecoder().decode(t);for(var e=[],n=0;n<t.length;){var r=t[n++],i=void 0;if((r&128)===0)i=r;else if((r&224)===192){var s=Qs(t,n++);if(i=(r&31)<<6|s,i<128)throw Error("Invalid continuation byte")}else if((r&240)===224){var s=Qs(t,n++),o=Qs(t,n++);if(i=(r&15)<<12|s<<6|o,i<2048)throw Error("Invalid continuation byte");if(i>=55296&&i<=57343)throw Error("Lone surrogate U+".concat(i.toString(16).toUpperCase()," is not a scalar value"))}else if((r&248)===240){var s=Qs(t,n++),o=Qs(t,n++),a=Qs(t,n++);if(i=(r&15)<<18|s<<12|o<<6|a,i<65536||i>1114111)throw Error("Invalid continuation byte")}else throw Error("Invalid UTF-8 detected");i>65535&&(i-=65536,e.push(String.fromCharCode(i>>>10&1023|55296)),i=56320|i&1023),e.push(String.fromCharCode(i))}return e.join("")}var hi=function(){return hi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},hi.apply(this,arguments)},DB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function IB(t){var e={};return Object.keys(t).forEach(function(n){return e[t[n]]=n}),e}var ka={"#Ang":"Angle","#Rsl":"Density","#Rlt":"Distance","#Nne":"None","#Prc":"Percent","#Pxl":"Pixels","#Mlm":"Millimeters","#Pnt":"Points",RrPi:"Picas",RrIn:"Inches",RrCm:"Centimeters"},Fc=IB(ka);function we(t,e){return{name:t,classID:e}}var qe=we("","null"),kS={strokeStyleContent:we("","solidColorLayer"),printProofSetup:we("Proof Setup","proofSetup"),Grad:we("Gradient","Grdn"),Trnf:we("Transform","Trnf"),patternFill:we("","patternFill"),ebbl:we("","ebbl"),SoFi:we("","SoFi"),GrFl:we("","GrFl"),sdwC:we("","RGBC"),hglC:we("","RGBC"),"Clr ":we("","RGBC"),tintColor:we("","RGBC"),Ofst:we("","Pnt "),ChFX:we("","ChFX"),MpgS:we("","ShpC"),DrSh:we("","DrSh"),IrSh:we("","IrSh"),OrGl:we("","OrGl"),IrGl:we("","IrGl"),TrnS:we("","ShpC"),Ptrn:we("","Ptrn"),FrFX:we("","FrFX"),phase:we("","Pnt "),frameStep:qe,duration:qe,workInTime:qe,workOutTime:qe,audioClipGroupList:qe,bounds:we("","Rctn"),customEnvelopeWarp:we("","customEnvelopeWarp"),warp:we("","warp"),"Sz  ":we("","Pnt "),origin:we("","Pnt "),autoExpandOffset:we("","Pnt "),keyOriginShapeBBox:we("","unitRect"),Vrsn:qe,psVersion:qe,docDefaultNewArtboardBackgroundColor:we("","RGBC"),artboardRect:we("","classFloatRect"),keyOriginRRectRadii:we("","radii"),keyOriginBoxCorners:qe,rectangleCornerA:we("","Pnt "),rectangleCornerB:we("","Pnt "),rectangleCornerC:we("","Pnt "),rectangleCornerD:we("","Pnt "),compInfo:qe,quiltWarp:we("","quiltWarp"),generatorSettings:qe,crema:qe,FrIn:qe,blendOptions:qe,FXRf:qe,Lefx:qe,time:qe,animKey:qe,timeScope:qe,inTime:qe,outTime:qe,sheetStyle:qe,translation:qe,Skew:qe,boundingBox:we("","boundingBox"),"Lnk ":we("","ExternalFileLink"),frameReader:we("","FrameReader"),effectParams:we("","motionTrackEffectParams"),Impr:we("None","none"),Anch:we("","Pnt "),"Fwd ":we("","Pnt "),"Bwd ":we("","Pnt "),FlrC:we("","Pnt "),meshBoundaryPath:we("","pathClass"),filterFX:we("","filterFXStyle"),Fltr:we("","rigidTransform"),FrgC:we("","RGBC"),BckC:we("","RGBC"),sdwM:we("Parameters","adaptCorrectTones"),hglM:we("Parameters","adaptCorrectTones"),customShape:we("","customShape"),origFXRefPoint:qe,FXRefPoint:qe,ClMg:we("","ClMg")},OS={"Crv ":we("","CrPt"),Clrs:we("","Clrt"),Trns:we("","TrnS"),keyDescriptorList:qe,solidFillMulti:we("","SoFi"),gradientFillMulti:we("","GrFl"),dropShadowMulti:we("","DrSh"),innerShadowMulti:we("","IrSh"),frameFXMulti:we("","FrFX"),FrIn:qe,FSts:qe,LaSt:qe,sheetTimelineOptions:qe,trackList:we("","animationTrack"),globalTrackList:we("","animationTrack"),keyList:qe,audioClipGroupList:qe,audioClipList:qe,countObjectList:we("","countObject"),countGroupList:we("","countGroup"),slices:we("","slice"),"Pts ":we("","Pthp"),SbpL:we("","SbpL"),pathComponents:we("","PaCm"),filterFXList:we("","filterFX"),puppetShapeList:we("","puppetShape"),channelDenoise:we("","channelDenoiseParams"),ShrP:we("","Pnt "),layerSettings:qe,list:qe,Adjs:we("","CrvA")},Cy={TEXT:["Txt ","printerName","Nm  ","Idnt","blackAndWhitePresetFileName","LUT3DFileName","presetFileName","curvesPresetFileName","mixerPresetFileName","placed","description","reason","artboardPresetName","json","clipID","relPath","fullPath","mediaDescriptor","Msge","altTag","url","cellText","preset","KnNm","FPth","comment","originalPath"],tdta:["EngineData","LUT3DFileData","indexArray","originalVertexArray","deformedVertexArray","LqMe"],long:["TextIndex","RndS","Mdpn","Smth","Lctn","strokeStyleVersion","LaID","Vrsn","Cnt ","Brgh","Cntr","means","vibrance","Strt","bwPresetKind","comp","compID","originalCompID","curvesPresetKind","mixerPresetKind","uOrder","vOrder","PgNm","totalPages","Crop","numerator","denominator","frameCount","Annt","keyOriginType","unitValueQuadVersion","keyOriginIndex","major","minor","fix","docDefaultNewArtboardBackgroundType","artboardBackgroundType","numModifyingFX","deformNumRows","deformNumCols","FrID","FrDl","FsID","LCnt","AFrm","AFSt","numBefore","numAfter","Spcn","minOpacity","maxOpacity","BlnM","sheetID","gblA","globalAltitude","descVersion","frameReaderType","LyrI","zoomOrigin","fontSize","Rds ","sliceID","topOutset","leftOutset","bottomOutset","rightOutset","filterID","meshQuality","meshExpansion","meshRigidity","VrsM","VrsN","NmbG","WLMn","WLMx","AmMn","AmMx","SclH","SclV","Lvl ","TlNm","TlOf","FlRs","Thsh","ShrS","ShrE","FlRs","Vrnc","Strg","ExtS","ExtD","HrzS","VrtS","NmbR","EdgF","Ang1","Ang2","Ang3","Ang4","lastAppliedComp","capturedInfo"],enum:["textGridding","Ornt","warpStyle","warpRotate","Inte","Bltn","ClrS","BlrQ","bvlT","bvlS","bvlD","Md  ","glwS","GrdF","GlwT","RplS","BlrM","SmBM","strokeStyleLineCapType","strokeStyleLineJoinType","strokeStyleLineAlignment","strokeStyleBlendMode","PntT","Styl","lookupType","LUTFormat","dataOrder","tableOrder","enableCompCore","enableCompCoreGPU","compCoreSupport","compCoreGPUSupport","Engn","enableCompCoreThreads","gs99","FrDs","trackID","animInterpStyle","horzAlign","vertAlign","bgColorType","shapeOperation","UndA","Wvtp","Drct","WndM","Edg ","FlCl","IntE","IntC","Cnvr","Fl  ","Dstr","MztT","Lns ","ExtT","DspM","ExtR","ZZTy","SphM","SmBQ","placedLayerOCIOConversion","gradientsInterpolationMethod"],bool:["PstS","printSixteenBit","masterFXSwitch","enab","uglg","antialiasGloss","useShape","useTexture","uglg","antialiasGloss","useShape","Vsbl","useTexture","Algn","Rvrs","Dthr","Invr","VctC","ShTr","layerConceals","strokeEnabled","fillEnabled","strokeStyleScaleLock","strokeStyleStrokeAdjust","hardProof","MpBl","paperWhite","useLegacy","Auto","Lab ","useTint","keyShapeInvalidated","autoExpandEnabled","autoNestEnabled","autoPositionEnabled","shrinkwrapOnSaveEnabled","present","showInDialog","overprint","sheetDisclosed","lightsDisclosed","meshesDisclosed","materialsDisclosed","hasMotion","muted","Effc","selected","autoScope","fillCanvas","cellTextIsHTML","Smoo","Clsp","validAtPosition","rigidType","hasoptions","filterMaskEnable","filterMaskLinked","filterMaskExtendWithWhite","removeJPEGArtifact","Mnch","ExtF","ExtM","moreAccurate","GpuY","LIWy","Cnty"],doub:["warpValue","warpPerspective","warpPerspectiveOther","Intr","Wdth","Hght","strokeStyleMiterLimit","strokeStyleResolution","layerTime","keyOriginResolution","xx","xy","yx","yy","tx","ty","FrGA","frameRate","audioLevel","rotation","X   ","Y   ","redFloat","greenFloat","blueFloat","imageResolution","PuX0","PuX1","PuX2","PuX3","PuY0","PuY1","PuY2","PuY3"],UntF:["sdwO","hglO","lagl","Lald","srgR","blur","Sftn","Opct","Dstn","Angl","Ckmt","Nose","Inpr","ShdN","strokeStyleLineWidth","strokeStyleLineDashOffset","strokeStyleOpacity","H   ","Top ","Left","Btom","Rght","Rslt","topRight","topLeft","bottomLeft","bottomRight","ClNs","Shrp"],VlLs:["Crv ","Clrs","Mnm ","Mxm ","Trns","pathList","strokeStyleLineDashSet","FrLs","slices","LaSt","Trnf","nonAffineTransform","keyDescriptorList","guideIndeces","gradientFillMulti","solidFillMulti","frameFXMulti","innerShadowMulti","dropShadowMulti","FrIn","FSts","FsFr","sheetTimelineOptions","audioClipList","trackList","globalTrackList","keyList","audioClipList","warpValues","selectedPin","Pts ","SbpL","pathComponents","pinOffsets","posFinalPins","pinVertexIndices","PinP","PnRt","PnOv","PnDp","filterFXList","puppetShapeList","ShrP","channelDenoise","Mtrx","layerSettings","list","compList","Adjs"],ObAr:["meshPoints","quiltSliceX","quiltSliceY"],"obj ":["null","Chnl"],"Pth ":["DspF"]},MB=["Rd  ","Grn ","Bl  ","Yllw","Ylw ","Cyn ","Mgnt","Blck","Gry ","Lmnc","A   ","B   "],AS={"Mnm ":"long","Mxm ":"long",FrLs:"long",strokeStyleLineDashSet:"UntF",Trnf:"doub",nonAffineTransform:"doub",keyDescriptorList:"Objc",gradientFillMulti:"Objc",solidFillMulti:"Objc",frameFXMulti:"Objc",innerShadowMulti:"Objc",dropShadowMulti:"Objc",LaSt:"Objc",FrIn:"Objc",FSts:"Objc",FsFr:"long",blendOptions:"Objc",sheetTimelineOptions:"Objc",keyList:"Objc",warpValues:"doub",selectedPin:"long","Pts ":"Objc",SbpL:"Objc",pathComponents:"Objc",pinOffsets:"doub",posFinalPins:"doub",pinVertexIndices:"long",PinP:"doub",PnRt:"long",PnOv:"bool",PnDp:"doub",filterFXList:"Objc",puppetShapeList:"Objc",ShrP:"Objc",channelDenoise:"Objc",Mtrx:"long",compList:"long",Chnl:"enum"},Hu={};for(var Ph=0,Ty=Object.keys(Cy);Ph<Ty.length;Ph++)for(var Ey=Ty[Ph],Fh=0,ky=Cy[Ey];Fh<ky.length;Fh++){var Ho=ky[Fh];Hu[Ho]=Ey}for(var Dh=0,Oy=Object.keys(kS);Dh<Oy.length;Dh++){var Ho=Oy[Dh];Hu[Ho]||(Hu[Ho]="Objc")}for(var Ih=0,Ay=Object.keys(OS);Ih<Ay.length;Ih++){var Ho=Ay[Ih];AS[Ho]="Objc"}function RB(t,e,n,r){return t==="presetKind"?typeof e=="string"?"enum":"long":t==="null"&&n==="slices"?"TEXT":t==="groupID"?n==="slices"?"long":"TEXT":t==="Sz  "?"Wdth"in e?"Objc":"units"in e?"UntF":"doub":t==="Type"?typeof e=="string"?"enum":"long":t==="AntA"?typeof e=="string"?"enum":"bool":(t==="Hrzn"||t==="Vrtc")&&(r.Type==="keyType.Pstn"||r._classID==="Ofst")?"long":t==="Hrzn"||t==="Vrtc"||t==="Top "||t==="Left"||t==="Btom"||t==="Rght"?n==="slices"?"long":typeof e=="number"?"doub":"UntF":t==="Vrsn"?typeof e=="number"?"long":"Objc":t==="Rd  "||t==="Grn "||t==="Bl  "?n==="artd"?"long":"doub":t==="Trnf"?Array.isArray(e)?"VlLs":"Objc":Hu[t]}function di(t){var e=Ie(t);return Bf(t,e||4)}function pi(t,e){if(e.length===4&&e!=="warp"&&e!=="time"&&e!=="hold"&&e!=="list")He(t,0),Ue(t,e);else{He(t,e.length);for(var n=0;n<e.length;n++)Oe(t,e.charCodeAt(n))}}function PS(t,e){for(var n=ws(t),r=e?{_name:n.name,_classID:n.classID}:{},i=ve(t),s=0;s<i;s++){var o=di(t),a=dt(t),l=DS(t,a,e);r[o]=l}return r}function FS(t,e,n,r,i){Ns(t,e),pi(t,n);var s=Object.keys(r),o=s.length;"_name"in r&&o--,"_classID"in r&&o--,Se(t,o);for(var a=0,l=s;a<l.length;a++){var c=l[a];if(!(c==="_name"||c==="_classID")){var u=RB(c,r[c],i,r),f=kS[c];c==="bounds"&&i==="text"?f=we("","bounds"):c==="origin"?u=i==="slices"?"enum":"Objc":(c==="Cyn "||c==="Mgnt"||c==="Ylw "||c==="Blck")&&r._classID==="CMYC"?u="doub":/^PN[a-z][a-z]$/.test(c)?u="TEXT":/^PT[a-z][a-z]$/.test(c)?u="long":/^PF[a-z][a-z]$/.test(c)||(c==="Rds "||c==="Thsh")&&typeof r[c]=="number"&&r._classID==="SmrB"?u="doub":c==="ClSz"||c==="Rds "||c==="Amnt"?u=typeof r[c]=="number"?"long":"UntF":(c==="sdwM"||c==="hglM")&&typeof r[c]=="string"||c==="blur"&&typeof r[c]=="string"?u="enum":c==="Hght"&&typeof r[c]=="number"&&r._classID==="Embs"||c==="Angl"&&typeof r[c]=="number"&&(r._classID==="Embs"||r._classID==="smartSharpen"||r._classID==="Twrl"||r._classID==="MtnB")?u="long":c==="Angl"&&typeof r[c]=="number"?u="doub":c==="bounds"&&i==="slices"?(u="Objc",f=we("","Rct1")):c==="Scl "?typeof r[c]=="object"&&"Hrzn"in r[c]?(u="Objc",f=qe):typeof r[c]=="number"?u="long":u="UntF":c==="audioClipGroupList"&&s.length===1?u="VlLs":(c==="Strt"||c==="Brgh")&&"H   "in r?u="doub":c==="Wdth"&&typeof r[c]=="object"?u="UntF":c==="Ofst"&&typeof r[c]=="number"?u="long":c==="Strt"&&typeof r[c]=="object"?(u="Objc",f=qe):MB.indexOf(c)!==-1?u=n==="RGBC"&&i!=="artd"?"doub":"long":c==="profile"?u=n==="printOutput"?"TEXT":"tdta":c==="strokeStyleContent"?r[c]["Clr "]?f=we("","solidColorLayer"):r[c].Grad?f=we("","gradientLayer"):r[c].Ptrn&&(f=we("","patternLayer")):c==="bounds"&&i==="quiltWarp"&&(f=we("","classFloatRect")),f&&f.classID==="RGBC"&&"H   "in r[c]&&(f={classID:"HSBC",name:""}),pi(t,c),Ue(t,u||"long"),IS(t,u||"long",r[c],c,f,i)}}}function DS(t,e,n){switch(e){case"obj ":return BB(t);case"Objc":case"GlbO":return PS(t,n);case"VlLs":{for(var r=Ie(t),i=[],s=0;s<r;s++){var o=dt(t);i.push(DS(t,o,n))}return i}case"doub":return tr(t);case"UntF":{var a=dt(t),l=tr(t);if(!ka[a])throw new Error("Invalid units: ".concat(a));return{units:ka[a],value:l}}case"UnFl":{var a=dt(t),l=yr(t);if(!ka[a])throw new Error("Invalid units: ".concat(a));return{units:ka[a],value:l}}case"TEXT":return Ht(t);case"enum":{var c=di(t),l=di(t);return"".concat(c,".").concat(l)}case"long":return Ie(t);case"comp":{var u=ve(t),f=ve(t);return{low:u,high:f}}case"bool":return!!xe(t);case"type":case"GlbC":return ws(t);case"alis":{var d=Ie(t);return Bf(t,d)}case"tdta":{var h=Ie(t);return Qt(t,h)}case"ObAr":{Ie(t),Ht(t),di(t);for(var g=Ie(t),i=[],s=0;s<g;s++){var p=di(t);dt(t),dt(t);for(var v=Ie(t),m=[],y=0;y<v;y++)m.push(tr(t));i.push({type:p,values:m})}return i}case"Pth ":{Ie(t);var _=dt(t);rb(t);var b=rb(t),x=YB(t,b);return{sig:_,path:x}}default:throw new Error("Invalid TySh descriptor OSType: ".concat(e," at ").concat(t.offset.toString(16)))}}var LB={meshPoints:"rationalPoint",quiltSliceX:"UntF",quiltSliceY:"UntF"};function IS(t,e,n,r,i,s){switch(e){case"obj ":jB(t,r,n);break;case"Objc":case"GlbO":{if(typeof n!="object")throw new Error("Invalid struct value: ".concat(JSON.stringify(n),", key: ").concat(r));if(!i)throw new Error("Missing ext type for: '".concat(r,"' (").concat(JSON.stringify(n),")"));var o=n._name||i.name,a=n._classID||i.classID;FS(t,o,a,n,s);break}case"VlLs":if(!Array.isArray(n))throw new Error("Invalid list value: ".concat(JSON.stringify(n),", key: ").concat(r));He(t,n.length);for(var l=0;l<n.length;l++){var c=AS[r];Ue(t,c||"long"),IS(t,c||"long",n[l],"".concat(r,"[]"),OS[r],s)}break;case"doub":if(typeof n!="number")throw new Error("Invalid number value: ".concat(JSON.stringify(n),", key: ").concat(r));Hr(t,n);break;case"UntF":if(!Fc[n.units])throw new Error("Invalid units: ".concat(n.units," in ").concat(r));Ue(t,Fc[n.units]),Hr(t,n.value);break;case"UnFl":if(!Fc[n.units])throw new Error("Invalid units: ".concat(n.units," in ").concat(r));Ue(t,Fc[n.units]),br(t,n.value);break;case"TEXT":Ns(t,n);break;case"enum":{if(typeof n!="string")throw new Error("Invalid enum value: ".concat(JSON.stringify(n),", key: ").concat(r));var u=n.split("."),f=u[0],d=u[1];pi(t,f),pi(t,d);break}case"long":if(typeof n!="number")throw new Error("Invalid integer value: ".concat(JSON.stringify(n),", key: ").concat(r));He(t,n);break;case"bool":if(typeof n!="boolean")throw new Error("Invalid boolean value: ".concat(JSON.stringify(n),", key: ").concat(r));Oe(t,n?1:0);break;case"tdta":He(t,n.byteLength),ki(t,n);break;case"ObAr":{He(t,16),Ns(t,"");var h=LB[r];if(!h)throw new Error("Not implemented ObArType for: ".concat(r));pi(t,h),He(t,n.length);for(var l=0;l<n.length;l++){pi(t,n[l].type),Ue(t,"UnFl"),Ue(t,"#Pxl"),He(t,n[l].values.length);for(var g=0;g<n[l].values.length;g++)Hr(t,n[l].values[g])}break}case"Pth ":{var p=12+n.path.length*2;He(t,p),Ue(t,n.sig),bb(t,p),bb(t,n.path.length),Mj(t,n.path);break}default:throw new Error("Not implemented descriptor OSType: ".concat(e))}}function BB(t){for(var e=Ie(t),n=[],r=0;r<e;r++){var i=dt(t);switch(i){case"prop":{ws(t);var s=di(t);n.push(s);break}case"Clss":n.push(ws(t));break;case"Enmr":{ws(t);var o=di(t),a=di(t);n.push("".concat(o,".").concat(a));break}case"rele":{ws(t),n.push(ve(t));break}case"Idnt":n.push(Ie(t));break;case"indx":n.push(Ie(t));break;case"name":{ws(t),n.push(Ht(t));break}default:throw new Error("Invalid descriptor reference type: ".concat(i))}}return n}function jB(t,e,n){He(t,n.length);for(var r=0;r<n.length;r++){var i=n[r],s="unknown";switch(typeof i=="string"&&(/^[a-z ]+\.[a-z ]+$/i.test(i)?s="Enmr":s="name"),Ue(t,s),s){case"Enmr":{var o=i.split("."),a=o[0],l=o[1];Py(t,"\0",a),pi(t,a),pi(t,l);break}case"name":{Py(t,"\0","Lyr "),Ln(t,i+"\0");break}default:throw new Error("Invalid descriptor reference type: ".concat(s))}}return n}function ws(t){var e=Ht(t),n=di(t);return{name:e,classID:n}}function Py(t,e,n){Ln(t,e),pi(t,n)}function Xe(t,e){e===void 0&&(e=!1);var n=ve(t);if(n!==16)throw new Error("Invalid descriptor version: ".concat(n));var r=PS(t,e);return r}function Ye(t,e,n,r,i){i===void 0&&(i=""),Se(t,16),FS(t,e,n,r,i)}function Xa(t){return{x:t.Hrzn,y:t.Vrtc}}function Ya(t){return{Hrzn:t.x,Vrtc:t.y}}function Fy(t){return{top:st(t["Top "]),left:st(t.Left),right:st(t.Rght),bottom:st(t.Btom)}}function Dy(t){var e;return e={Left:_t(t.left,"bounds.left")},e["Top "]=_t(t.top,"bounds.top"),e.Rght=_t(t.right,"bounds.right"),e.Btom=_t(t.bottom,"bounds.bottom"),e}function Iy(t){var e={enabled:!!t.enab,position:Lf.decode(t.Styl),fillType:KS.decode(t.PntT),blendMode:er.decode(t["Md  "]),opacity:ht(t.Opct),size:st(t["Sz  "])};return t.present!==void 0&&(e.present=t.present),t.showInDialog!==void 0&&(e.showInDialog=t.showInDialog),t.overprint!==void 0&&(e.overprint=t.overprint),t["Clr "]&&(e.color=xr(t["Clr "])),t.Grad&&(e.gradient=jS(t)),t.Ptrn&&(e.pattern=NS(t)),e}function My(t){var e={};return e.enab=!!t.enabled,t.present!==void 0&&(e.present=!!t.present),t.showInDialog!==void 0&&(e.showInDialog=!!t.showInDialog),e.Styl=Lf.encode(t.position),e.PntT=KS.encode(t.fillType),e["Md  "]=er.encode(t.blendMode),e.Opct=$t(t.opacity),e["Sz  "]=_t(t.size,"size"),t.color&&(e["Clr "]=Cr(t.color)),t.gradient&&(e=hi(hi({},e),zS(t.gradient))),t.pattern&&(e=hi(hi({},e),$S(t.pattern))),t.overprint!==void 0&&(e.overprint=!!t.overprint),e}function Ol(t,e,n){for(var r,i,s,o=n?{"Scl ":qn((r=t.scale)!==null&&r!==void 0?r:1),masterFXSwitch:!t.disabled}:{masterFXSwitch:!t.disabled,"Scl ":qn((i=t.scale)!==null&&i!==void 0?i:1)},a=["dropShadow","innerShadow","solidFill","gradientOverlay","stroke"],l=0,c=a;l<c.length;l++){var u=c[l];if(t[u]&&!Array.isArray(t[u]))throw new Error("".concat(u," should be an array"))}var f=function(_){return!!_&&_.length>1&&n},d=function(_){return!!_&&_.length>=1&&(!n||_.length===1)};if(d(t.dropShadow)&&(o.DrSh=Fn(t.dropShadow[0],"dropShadow",e)),f(t.dropShadow)&&(o.dropShadowMulti=t.dropShadow.map(function(_){return Fn(_,"dropShadow",e)})),d(t.innerShadow)&&(o.IrSh=Fn(t.innerShadow[0],"innerShadow",e)),f(t.innerShadow)&&(o.innerShadowMulti=t.innerShadow.map(function(_){return Fn(_,"innerShadow",e)})),t.outerGlow&&(o.OrGl=Fn(t.outerGlow,"outerGlow",e)),f(t.solidFill)&&(o.solidFillMulti=t.solidFill.map(function(_){return Fn(_,"solidFill",e)})),f(t.gradientOverlay)&&(o.gradientFillMulti=t.gradientOverlay.map(function(_){return Fn(_,"gradientOverlay",e)})),f(t.stroke)&&(o.frameFXMulti=t.stroke.map(function(_){return My(_)})),t.innerGlow&&(o.IrGl=Fn(t.innerGlow,"innerGlow",e)),t.bevel&&(o.ebbl=Fn(t.bevel,"bevel",e)),d(t.solidFill)&&(o.SoFi=Fn(t.solidFill[0],"solidFill",e)),t.patternOverlay&&(o.patternFill=Fn(t.patternOverlay,"patternOverlay",e)),d(t.gradientOverlay)&&(o.GrFl=Fn(t.gradientOverlay[0],"gradientOverlay",e)),t.satin&&(o.ChFX=Fn(t.satin,"satin",e)),d(t.stroke)&&(o.FrFX=My((s=t.stroke)===null||s===void 0?void 0:s[0])),n){o.numModifyingFX=0;for(var h=0,g=Object.keys(t);h<g.length;h++){var u=g[h],p=t[u];if(Array.isArray(p))for(var v=0,m=p;v<m.length;v++){var y=m[v];y.enabled&&o.numModifyingFX++}else p.enabled&&o.numModifyingFX++}}return o}function Al(t,e){var n={},r=t.masterFXSwitch,i=t.DrSh,s=t.dropShadowMulti,o=t.IrSh,a=t.innerShadowMulti,l=t.OrGl,c=t.IrGl,u=t.ebbl,f=t.SoFi,d=t.solidFillMulti,h=t.patternFill,g=t.GrFl,p=t.gradientFillMulti,v=t.ChFX,m=t.FrFX,y=t.frameFXMulti;t.numModifyingFX;var _=DB(t,["masterFXSwitch","DrSh","dropShadowMulti","IrSh","innerShadowMulti","OrGl","IrGl","ebbl","SoFi","solidFillMulti","patternFill","GrFl","gradientFillMulti","ChFX","FrFX","frameFXMulti","numModifyingFX"]);return r||(n.disabled=!0),t["Scl "]&&(n.scale=ht(t["Scl "])),i&&(n.dropShadow=[Pn(i,e)]),s&&(n.dropShadow=s.map(function(b){return Pn(b,e)})),o&&(n.innerShadow=[Pn(o,e)]),a&&(n.innerShadow=a.map(function(b){return Pn(b,e)})),l&&(n.outerGlow=Pn(l,e)),c&&(n.innerGlow=Pn(c,e)),u&&(n.bevel=Pn(u,e)),f&&(n.solidFill=[Pn(f,e)]),d&&(n.solidFill=d.map(function(b){return Pn(b,e)})),h&&(n.patternOverlay=Pn(h,e)),g&&(n.gradientOverlay=[Pn(g,e)]),p&&(n.gradientOverlay=p.map(function(b){return Pn(b,e)})),v&&(n.satin=Pn(v,e)),m&&(n.stroke=[Iy(m)]),y&&(n.stroke=y.map(function(b){return Iy(b)})),e&&Object.keys(_).length>1&&console.log("Unhandled effect keys:",_),n}function Ry(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],s=i.time,o=s.denominator,a=s.numerator,l=i.selected,c=i.animKey,u={numerator:a,denominator:o},f=XS.decode(i.animInterpStyle);switch(c.Type){case"keyType.Opct":n.push({interpolation:f,time:u,selected:l,type:"opacity",value:ht(c.Opct)});break;case"keyType.Pstn":n.push({interpolation:f,time:u,selected:l,type:"position",x:c.Hrzn,y:c.Vrtc});break;case"keyType.Trnf":n.push({interpolation:f,time:u,selected:l,type:"transform",scale:Xa(c["Scl "]),skew:Xa(c.Skew),rotation:c.rotation,translation:Xa(c.translation)});break;case"keyType.sheetStyle":{var d={interpolation:f,time:u,selected:l,type:"style"};c.sheetStyle.Lefx&&(d.style=Al(c.sheetStyle.Lefx,e)),n.push(d);break}case"keyType.globalLighting":{n.push({interpolation:f,time:u,selected:l,type:"globalLighting",globalAngle:c.gblA,globalAltitude:c.globalAltitude});break}default:throw new Error("Unsupported keyType value")}}return n}function Ly(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=r.time,s=r.selected,o=s===void 0?!1:s,a=r.interpolation,l=XS.encode(a),c=void 0;switch(r.type){case"opacity":c={Type:"keyType.Opct",Opct:$t(r.value)};break;case"position":c={Type:"keyType.Pstn",Hrzn:r.x,Vrtc:r.y};break;case"transform":c={Type:"keyType.Trnf","Scl ":Ya(r.scale),Skew:Ya(r.skew),rotation:r.rotation,translation:Ya(r.translation)};break;case"style":c={Type:"keyType.sheetStyle",sheetStyle:{Vrsn:1,blendOptions:{}}},r.style&&(c.sheetStyle={Vrsn:1,Lefx:Ol(r.style,!1,!1),blendOptions:{}});break;case"globalLighting":{c={Type:"keyType.globalLighting",gblA:r.globalAngle,globalAltitude:r.globalAltitude};break}default:throw new Error("Unsupported keyType value")}e.push({Vrsn:1,animInterpStyle:l,time:i,animKey:c,selected:o})}return e}function MS(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],s={type:YS.decode(i.trackID),enabled:i.enab,keys:Ry(i.keyList,e)};i.effectParams&&(s.effectParams={fillCanvas:i.effectParams.fillCanvas,zoomOrigin:i.effectParams.zoomOrigin,keys:Ry(i.effectParams.keyList,e)}),n.push(s)}return n}function RS(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(hi(hi({trackID:YS.encode(r.type),Vrsn:1,enab:!!r.enabled,Effc:!!r.effectParams},r.effectParams?{effectParams:{keyList:Ly(r.keys),fillCanvas:r.effectParams.fillCanvas,zoomOrigin:r.effectParams.zoomOrigin}}:{}),{keyList:Ly(r.keys)}))}return e}function Pn(t,e){for(var n={},r=0,i=Object.keys(t);r<i.length;r++){var s=i[r],o=t[s];switch(s){case"enab":n.enabled=!!o;break;case"uglg":n.useGlobalLight=!!o;break;case"AntA":n.antialiased=!!o;break;case"Algn":n.align=!!o;break;case"Dthr":n.dither=!!o;break;case"Invr":n.invert=!!o;break;case"Rvrs":n.reverse=!!o;break;case"Clr ":n.color=xr(o);break;case"hglC":n.highlightColor=xr(o);break;case"sdwC":n.shadowColor=xr(o);break;case"Styl":n.position=Lf.decode(o);break;case"Md  ":n.blendMode=er.decode(o);break;case"hglM":n.highlightBlendMode=er.decode(o);break;case"sdwM":n.shadowBlendMode=er.decode(o);break;case"bvlS":n.style=US.decode(o);break;case"bvlD":n.direction=VS.decode(o);break;case"bvlT":n.technique=HS.decode(o);break;case"GlwT":n.technique=GS.decode(o);break;case"glwS":n.source=WS.decode(o);break;case"Type":n.type=Rf.decode(o);break;case"gs99":n.interpolationMethod=Vo.decode(o);break;case"Opct":n.opacity=ht(o);break;case"hglO":n.highlightOpacity=ht(o);break;case"sdwO":n.shadowOpacity=ht(o);break;case"lagl":n.angle=ou(o);break;case"Angl":n.angle=ou(o);break;case"Lald":n.altitude=ou(o);break;case"Sftn":n.soften=st(o);break;case"srgR":n.strength=ht(o);break;case"blur":n.size=st(o);break;case"Nose":n.noise=ht(o);break;case"Inpr":n.range=ht(o);break;case"Ckmt":n.choke=st(o);break;case"ShdN":n.jitter=ht(o);break;case"Dstn":n.distance=st(o);break;case"Scl ":n.scale=ht(o);break;case"Ptrn":n.pattern={name:o["Nm  "],id:o.Idnt};break;case"phase":n.phase={x:o.Hrzn,y:o.Vrtc};break;case"Ofst":n.offset={x:ht(o.Hrzn),y:ht(o.Vrtc)};break;case"MpgS":case"TrnS":n.contour={name:o["Nm  "],curve:o["Crv "].map(function(a){return{x:a.Hrzn,y:a.Vrtc}})};break;case"Grad":n.gradient=LS(o);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":n[s]=o;break;case"_name":case"_classID":break;default:e&&console.log("Invalid effect key: '".concat(s,"', value:"),o)}}return n}function Fn(t,e,n){var r={enab:!1};e==="dropShadow"&&(r.TrnS={"Nm  ":"","Crv ":[]});for(var i=0,s=Object.keys(t);i<s.length;i++){var o=s[i],a=o,l=t[a];switch(a){case"enabled":r.enab=!!l;break;case"useGlobalLight":r.uglg=!!l;break;case"antialiased":r.AntA=!!l;break;case"align":r.Algn=!!l;break;case"dither":r.Dthr=!!l;break;case"invert":r.Invr=!!l;break;case"reverse":r.Rvrs=!!l;break;case"color":r["Clr "]=Cr(l);break;case"highlightColor":r.hglC=Cr(l);break;case"shadowColor":r.sdwC=Cr(l);break;case"position":r.Styl=Lf.encode(l);break;case"blendMode":r["Md  "]=er.encode(l);break;case"highlightBlendMode":r.hglM=er.encode(l);break;case"shadowBlendMode":r.sdwM=er.encode(l);break;case"style":r.bvlS=US.encode(l);break;case"direction":r.bvlD=VS.encode(l);break;case"technique":e==="bevel"?r.bvlT=HS.encode(l):r.GlwT=GS.encode(l);break;case"source":r.glwS=WS.encode(l);break;case"type":r.Type=Rf.encode(l);break;case"interpolationMethod":r.gs99=Vo.encode(l);break;case"opacity":r.Opct=$t(l);break;case"highlightOpacity":r.hglO=$t(l);break;case"shadowOpacity":r.sdwO=$t(l);break;case"angle":e==="gradientOverlay"||e==="patternFill"?r.Angl=Ka(l):r.lagl=Ka(l);break;case"altitude":r.Lald=Ka(l);break;case"soften":r.Sftn=_t(l,a);break;case"strength":r.srgR=$t(l);break;case"size":r.blur=_t(l,a);break;case"noise":r.Nose=$t(l);break;case"range":r.Inpr=$t(l);break;case"choke":r.Ckmt=_t(l,a);break;case"jitter":r.ShdN=$t(l);break;case"distance":r.Dstn=_t(l,a);break;case"scale":r["Scl "]=$t(l);break;case"pattern":r.Ptrn={"Nm  ":l.name,Idnt:l.id};break;case"phase":r.phase={Hrzn:l.x,Vrtc:l.y};break;case"offset":r.Ofst={Hrzn:$t(l.x),Vrtc:$t(l.y)};break;case"contour":{r[e==="satin"?"MpgS":"TrnS"]={"Nm  ":l.name,"Crv ":l.curve.map(function(c){return{Hrzn:c.x,Vrtc:c.y}})};break}case"gradient":r.Grad=BS(l);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":r[a]=l;break;default:n&&console.log("Invalid effect key: '".concat(a,"', value:"),l)}}return r}function LS(t){if(t.GrdF==="GrdF.CstS"){var e=t.Intr||4096;return{type:"solid",name:t["Nm  "],smoothness:t.Intr/4096,colorStops:t.Clrs.map(function(n){return{color:xr(n["Clr "]),location:n.Lctn/e,midpoint:n.Mdpn/100}}),opacityStops:t.Trns.map(function(n){return{opacity:ht(n.Opct),location:n.Lctn/e,midpoint:n.Mdpn/100}})}}else return{type:"noise",name:t["Nm  "],roughness:t.Smth/4096,colorModel:Vu.decode(t.ClrS),randomSeed:t.RndS,restrictColors:!!t.VctC,addTransparency:!!t.ShTr,min:t["Mnm "].map(function(n){return n/100}),max:t["Mxm "].map(function(n){return n/100})}}function BS(t){var e,n;if(t.type==="solid"){var r=Math.round(((e=t.smoothness)!==null&&e!==void 0?e:1)*4096);return{"Nm  ":t.name||"",GrdF:"GrdF.CstS",Intr:r,Clrs:t.colorStops.map(function(i){var s;return{"Clr ":Cr(i.color),Type:"Clry.UsrS",Lctn:Math.round(i.location*r),Mdpn:Math.round(((s=i.midpoint)!==null&&s!==void 0?s:.5)*100)}}),Trns:t.opacityStops.map(function(i){var s;return{Opct:$t(i.opacity),Lctn:Math.round(i.location*r),Mdpn:Math.round(((s=i.midpoint)!==null&&s!==void 0?s:.5)*100)}})}}else return{GrdF:"GrdF.ClNs","Nm  ":t.name||"",ShTr:!!t.addTransparency,VctC:!!t.restrictColors,ClrS:Vu.encode(t.colorModel),RndS:t.randomSeed||0,Smth:Math.round(((n=t.roughness)!==null&&n!==void 0?n:1)*4096),"Mnm ":(t.min||[0,0,0,0]).map(function(i){return i*100}),"Mxm ":(t.max||[1,1,1,1]).map(function(i){return i*100})}}function jS(t){var e=LS(t.Grad);return e.style=Rf.decode(t.Type),t.Dthr!==void 0&&(e.dither=t.Dthr),t.gradientsInterpolationMethod!==void 0&&(e.interpolationMethod=Vo.decode(t.gradientsInterpolationMethod)),t.Rvrs!==void 0&&(e.reverse=t.Rvrs),t.Angl!==void 0&&(e.angle=ou(t.Angl)),t["Scl "]!==void 0&&(e.scale=ht(t["Scl "])),t.Algn!==void 0&&(e.align=t.Algn),t.Ofst!==void 0&&(e.offset={x:ht(t.Ofst.Hrzn),y:ht(t.Ofst.Vrtc)}),e}function NS(t){var e={name:t.Ptrn["Nm  "],id:t.Ptrn.Idnt};return t.Lnkd!==void 0&&(e.linked=t.Lnkd),t.phase!==void 0&&(e.phase={x:t.phase.Hrzn,y:t.phase.Vrtc}),e}function Pl(t){if("Grad"in t)return jS(t);if("Ptrn"in t)return hi({type:"pattern"},NS(t));if("Clr "in t)return{type:"color",color:xr(t["Clr "])};throw new Error("Invalid vector content")}function zS(t){var e={};return t.dither!==void 0&&(e.Dthr=t.dither),t.interpolationMethod!==void 0&&(e.gradientsInterpolationMethod=Vo.encode(t.interpolationMethod)),t.reverse!==void 0&&(e.Rvrs=t.reverse),t.angle!==void 0&&(e.Angl=Ka(t.angle)),e.Type=Rf.encode(t.style),t.align!==void 0&&(e.Algn=t.align),t.scale!==void 0&&(e["Scl "]=$t(t.scale)),t.offset&&(e.Ofst={Hrzn:$t(t.offset.x),Vrtc:$t(t.offset.y)}),e.Grad=BS(t),e}function $S(t){var e={Ptrn:{"Nm  ":t.name||"",Idnt:t.id||""}};return t.linked!==void 0&&(e.Lnkd=!!t.linked),t.phase!==void 0&&(e.phase={Hrzn:t.phase.x,Vrtc:t.phase.y}),e}function Fl(t){return t.type==="color"?{key:"SoCo",descriptor:{"Clr ":Cr(t.color)}}:t.type==="pattern"?{key:"PtFl",descriptor:$S(t)}:{key:"GdFl",descriptor:zS(t)}}function xr(t){if("H   "in t)return{h:NB(t["H   "]),s:t.Strt,b:t.Brgh};if("Rd  "in t)return{r:t["Rd  "],g:t["Grn "],b:t["Bl  "]};if("Cyn "in t)return{c:t["Cyn "],m:t.Mgnt,y:t["Ylw "],k:t.Blck};if("Gry "in t)return{k:t["Gry "]};if("Lmnc"in t)return{l:t.Lmnc,a:t["A   "],b:t["B   "]};if("redFloat"in t)return{fr:t.redFloat,fg:t.greenFloat,fb:t.blueFloat};throw new Error("Unsupported color descriptor")}function Cr(t){if(t){if("r"in t)return{_name:"",_classID:"RGBC","Rd  ":t.r||0,"Grn ":t.g||0,"Bl  ":t.b||0};if("fr"in t)return{_name:"",_classID:"RGBC",redFloat:t.fr,greenFloat:t.fg,blueFloat:t.fb};if("h"in t)return{_name:"",_classID:"HSBC","H   ":Ka(t.h*360),Strt:t.s||0,Brgh:t.b||0};if("c"in t)return{_name:"",_classID:"CMYC","Cyn ":t.c||0,Mgnt:t.m||0,"Ylw ":t.y||0,Blck:t.k||0};if("l"in t)return{_name:"",_classID:"LABC",Lmnc:t.l||0,"A   ":t.a||0,"B   ":t.b||0};if("k"in t)return{_name:"",_classID:"GRYC","Gry ":t.k};throw new Error("Invalid color value")}else return{_name:"",_classID:"RGBC","Rd  ":0,"Grn ":0,"Bl  ":0}}function ou(t){if(t===void 0)return 0;if(t.units!=="Angle")throw new Error("Invalid units: ".concat(t.units));return t.value}function ht(t){if(t===void 0)return 1;if(t.units!=="Percent")throw new Error("Invalid units: ".concat(t.units));return t.value/100}function NB(t){if(t===void 0)return 1;if(t.units==="Percent")return t.value/100;if(t.units==="Angle")return t.value/360;throw new Error("Invalid units: ".concat(t.units))}function st(t){var e=t.units,n=t.value;if(e!=="Pixels"&&e!=="Millimeters"&&e!=="Points"&&e!=="None"&&e!=="Picas"&&e!=="Inches"&&e!=="Centimeters"&&e!=="Density")throw new Error("Invalid units: ".concat(JSON.stringify({units:e,value:n})));return{value:n,units:e}}function Ki(t,e){return e===void 0&&(e="Pixels"),typeof t=="number"?{value:t,units:e}:st(t)}function Ka(t){return{units:"Angle",value:t||0}}function $t(t){return{units:"Percent",value:Math.round((t||0)*100)}}function qn(t){return{units:"Percent",value:(t||0)*100}}function _t(t,e){if(t==null)return{units:"Pixels",value:0};if(typeof t!="object")throw new Error("Invalid value: ".concat(JSON.stringify(t)," (key: ").concat(e,") (should have value and units)"));var n=t.units,r=t.value;if(typeof r!="number")throw new Error("Invalid value in ".concat(JSON.stringify(t)," (key: ").concat(e,")"));if(n!=="Pixels"&&n!=="Millimeters"&&n!=="Points"&&n!=="None"&&n!=="Picas"&&n!=="Inches"&&n!=="Centimeters"&&n!=="Density")throw new Error("Invalid units in ".concat(JSON.stringify(t)," (key: ").concat(e,")"));return{units:n,value:r}}function mn(t){var e=t.numerator,n=t.denominator;return{numerator:e,denominator:n}}var By=Be("textGridding","none",{none:"None",round:"Rnd "}),qa=Be("Ornt","horizontal",{horizontal:"Hrzn",vertical:"Vrtc"}),jy=Be("Annt","sharp",{none:"Anno",sharp:"antiAliasSharp",crisp:"AnCr",strong:"AnSt",smooth:"AnSm",platform:"antiAliasPlatformGray",platformLCD:"antiAliasPlatformLCD"}),Mg=Be("warpStyle","none",{none:"warpNone",arc:"warpArc",arcLower:"warpArcLower",arcUpper:"warpArcUpper",arch:"warpArch",bulge:"warpBulge",shellLower:"warpShellLower",shellUpper:"warpShellUpper",flag:"warpFlag",wave:"warpWave",fish:"warpFish",rise:"warpRise",fisheye:"warpFisheye",inflate:"warpInflate",squeeze:"warpSqueeze",twist:"warpTwist",cylinder:"warpCylinder",custom:"warpCustom"}),er=Be("BlnM","normal",{normal:"Nrml",dissolve:"Dslv",darken:"Drkn",multiply:"Mltp","color burn":"CBrn","linear burn":"linearBurn","darker color":"darkerColor",lighten:"Lghn",screen:"Scrn","color dodge":"CDdg","linear dodge":"linearDodge","lighter color":"lighterColor",overlay:"Ovrl","soft light":"SftL","hard light":"HrdL","vivid light":"vividLight","linear light":"linearLight","pin light":"pinLight","hard mix":"hardMix",difference:"Dfrn",exclusion:"Xclu",subtract:"blendSubtraction",divide:"blendDivide",hue:"H   ",saturation:"Strt",color:"Clr ",luminosity:"Lmns","linear height":"linearHeight",height:"Hght",subtraction:"Sbtr"}),US=Be("BESl","inner bevel",{"inner bevel":"InrB","outer bevel":"OtrB",emboss:"Embs","pillow emboss":"PlEb","stroke emboss":"strokeEmboss"}),HS=Be("bvlT","smooth",{smooth:"SfBL","chisel hard":"PrBL","chisel soft":"Slmt"}),VS=Be("BESs","up",{up:"In  ",down:"Out "}),GS=Be("BETE","softer",{softer:"SfBL",precise:"PrBL"}),WS=Be("IGSr","edge",{edge:"SrcE",center:"SrcC"}),Rf=Be("GrdT","linear",{linear:"Lnr ",radial:"Rdl ",angle:"Angl",reflected:"Rflc",diamond:"Dmnd"}),XS=Be("animInterpStyle","linear",{linear:"Lnr ",hold:"hold"}),YS=Be("stdTrackID","opacity",{opacity:"opacityTrack",style:"styleTrack",sheetTransform:"sheetTransformTrack",sheetPosition:"sheetPositionTrack",globalLighting:"globalLightingTrack"}),Vo=Be("gradientInterpolationMethodType","perceptual",{perceptual:"Perc",linear:"Lnr ",classic:"Gcls",smooth:"Smoo"}),Vu=Be("ClrS","rgb",{rgb:"RGBC",hsb:"HSBl",lab:"LbCl",hsl:"HSLC"}),Lf=Be("FStl","outside",{outside:"OutF",center:"CtrF",inside:"InsF"}),KS=Be("FrFl","color",{color:"SClr",gradient:"GrFl",pattern:"Ptrn"}),Ny=Be("ESliceType","image",{image:"Img ",noImage:"noImage"}),zy=Be("ESliceHorzAlign","default",{default:"default"}),$y=Be("ESliceVertAlign","default",{default:"default"}),Uy=Be("ESliceOrigin","userGenerated",{userGenerated:"userGenerated",autoGenerated:"autoGenerated",layer:"layer"}),Hy=Be("ESliceBGColorType","none",{none:"None",matte:"matte",color:"Clr "}),Vy=Be("strokeStyleLineCapType","butt",{butt:"strokeStyleButtCap",round:"strokeStyleRoundCap",square:"strokeStyleSquareCap"}),Gy=Be("strokeStyleLineJoinType","miter",{miter:"strokeStyleMiterJoin",round:"strokeStyleRoundJoin",bevel:"strokeStyleBevelJoin"}),Wy=Be("strokeStyleLineAlignment","inside",{inside:"strokeStyleAlignInside",center:"strokeStyleAlignCenter",outside:"strokeStyleAlignOutside"}),qS=Be("BlrM","ispinmage",{spin:"Spn ",zoom:"Zm  "}),ZS=Be("BlrQ","good",{draft:"Drft",good:"Gd  ",best:"Bst "}),JS=Be("SmBM","normal",{normal:"SBMN","edge only":"SBME","overlay edge":"SBMO"}),QS=Be("SmBQ","medium",{low:"SBQL",medium:"SBQM",high:"SBQH"}),ex=Be("DspM","stretch to fit",{"stretch to fit":"StrF",tile:"Tile"}),Co=Be("UndA","repeat edge pixels",{"wrap around":"WrpA","repeat edge pixels":"RptE"}),tx=Be("Cnvr","rectangular to polar",{"rectangular to polar":"RctP","polar to rectangular":"PlrR"}),nx=Be("RplS","medium",{small:"Sml ",medium:"Mdm ",large:"Lrg "}),rx=Be("SphM","normal",{normal:"Nrml","horizontal only":"HrzO","vertical only":"VrtO"}),ix=Be("Wvtp","sine",{sine:"WvSn",triangle:"WvTr",square:"WvSq"}),sx=Be("ZZTy","pond ripples",{"around center":"ArnC","out from center":"OtFr","pond ripples":"PndR"}),ox=Be("Dstr","uniform",{uniform:"Unfr",gaussian:"Gsn "}),Za=Be("Chnl","composite",{red:"Rd  ",green:"Grn ",blue:"Bl  ",composite:"Cmps"}),ax=Be("MztT","fine dots",{"fine dots":"FnDt","medium dots":"MdmD","grainy dots":"GrnD","coarse dots":"CrsD","short lines":"ShrL","medium lines":"MdmL","long lines":"LngL","short strokes":"ShSt","medium strokes":"MdmS","long strokes":"LngS"}),lx=Be("Lns ","50-300mm zoom",{"50-300mm zoom":"Zm  ","32mm prime":"Nkn ","105mm prime":"Nkn1","movie prime":"PnVs"}),cx=Be("blurType","gaussian blur",{"gaussian blur":"GsnB","lens blur":"lensBlur","motion blur":"MtnB"}),ux=Be("DfsM","normal",{normal:"Nrml","darken only":"DrkO","lighten only":"LghO",anisotropic:"anisotropic"}),fx=Be("ExtT","blocks",{blocks:"Blks",pyramids:"Pyrm"}),hx=Be("ExtR","random",{random:"Rndm","level-based":"LvlB"}),dx=Be("FlCl","background color",{"background color":"FlBc","foreground color":"FlFr","inverse image":"FlIn","unaltered image":"FlSm"}),px=Be("CntE","upper",{lower:"Lwr ",upper:"Upr "}),gx=Be("WndM","wind",{wind:"Wnd ",blast:"Blst",stagger:"Stgr"}),mx=Be("Drct","from the right",{left:"Left",right:"Rght"}),vx=Be("IntE","odd lines",{"odd lines":"ElmO","even lines":"ElmE"}),yx=Be("IntC","interpolation",{duplication:"CrtD",interpolation:"CrtI"}),bx=Be("FlMd","wrap around",{"set to transparent":"Bckg","repeat edge pixels":"Rpt ","wrap around":"Wrp "});Be("prjM","fisheye",{fisheye:"fisP",perspective:"perP",auto:"auto","full spherical":"fusP"});var _x=Be("presetKindType","presetKindCustom",{custom:"presetKindCustom",default:"presetKindDefault"}),po=function(){return po=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},po.apply(this,arguments)},wx={};function Qe(t,e,n,r){var i={key:t,has:e,read:n,write:r};wx[i.key]=i}var Dc=[void 0,"PPI","PPCM"],Ic=[void 0,"Inches","Centimeters","Points","Picas","Columns"],Xy="0123456789abcdef";function Yy(t){return t<=57?t-48:t-87}function zB(t,e){return Yy(t.charCodeAt(e))<<4|Yy(t.charCodeAt(e+1))}function Rg(t,e){var n=Qt(t,e);return ES(n)}function Lg(t,e){var n=TS(e);ki(t,n)}function $B(t){for(var e=xe(t),n=Qt(t,e),r=!1,i=0;i<n.byteLength;i++)if(n[i]&128){r=!0;break}if(r){var s=new TextDecoder("gbk");return s.decode(n)}else return ES(n)}function UB(t,e){for(var n="",r=0,i=e.codePointAt(r++);i!==void 0;i=e.codePointAt(r++))n+=i>127?"?":String.fromCodePoint(i);var s=TS(n);Oe(t,s.byteLength),ki(t,s)}Qe(1061,function(t){return t.captionDigest!==void 0},function(t,e){for(var n="",r=0;r<16;r++){var i=xe(t);n+=Xy[i>>4],n+=Xy[i&15]}e.captionDigest=n},function(t,e){for(var n=0;n<16;n++)Oe(t,zB(e.captionDigest,n*2))});Qe(1060,function(t){return t.xmpMetadata!==void 0},function(t,e,n){e.xmpMetadata=Rg(t,n())},function(t,e){Lg(t,e.xmpMetadata)});var Mc=Be("Inte","perceptual",{perceptual:"Img ",saturation:"Grp ","relative colorimetric":"Clrm","absolute colorimetric":"AClr"});Qe(1082,function(t){return t.printInformation!==void 0},function(t,e){var n,r,i=Xe(t);e.printInformation={printerName:i.printerName||"",renderingIntent:Mc.decode((n=i.Inte)!==null&&n!==void 0?n:"Inte.Img ")};var s=e.printInformation;i.PstS!==void 0&&(s.printerManagesColors=i.PstS),i["Nm  "]!==void 0&&(s.printerProfile=i["Nm  "]),i.MpBl!==void 0&&(s.blackPointCompensation=i.MpBl),i.printSixteenBit!==void 0&&(s.printSixteenBit=i.printSixteenBit),i.hardProof!==void 0&&(s.hardProof=i.hardProof),i.printProofSetup&&("Bltn"in i.printProofSetup?s.proofSetup={builtin:i.printProofSetup.Bltn.split(".")[1]}:s.proofSetup={profile:i.printProofSetup.profile,renderingIntent:Mc.decode((r=i.printProofSetup.Inte)!==null&&r!==void 0?r:"Inte.Img "),blackPointCompensation:!!i.printProofSetup.MpBl,paperWhite:!!i.printProofSetup.paperWhite})},function(t,e){var n,r,i=e.printInformation,s={};i.printerManagesColors?s.PstS=!0:(i.hardProof!==void 0&&(s.hardProof=!!i.hardProof),s.ClrS="ClrS.RGBC",s["Nm  "]=(n=i.printerProfile)!==null&&n!==void 0?n:"CIE RGB"),s.Inte=Mc.encode(i.renderingIntent),i.printerManagesColors||(s.MpBl=!!i.blackPointCompensation),s.printSixteenBit=!!i.printSixteenBit,s.printerName=i.printerName||"",i.proofSetup&&"profile"in i.proofSetup?s.printProofSetup={profile:i.proofSetup.profile||"",Inte:Mc.encode(i.proofSetup.renderingIntent),MpBl:!!i.proofSetup.blackPointCompensation,paperWhite:!!i.proofSetup.paperWhite}:s.printProofSetup={Bltn:!((r=i.proofSetup)===null||r===void 0)&&r.builtin?"builtinProof.".concat(i.proofSetup.builtin):"builtinProof.proofCMYK"},Ye(t,"","printOutput",s)});Qe(1005,function(t){return t.resolutionInfo!==void 0},function(t,e){var n=In(t),r=me(t),i=me(t),s=In(t),o=me(t),a=me(t);e.resolutionInfo={horizontalResolution:n,horizontalResolutionUnit:Dc[r]||"PPI",widthUnit:Ic[i]||"Inches",verticalResolution:s,verticalResolutionUnit:Dc[o]||"PPI",heightUnit:Ic[a]||"Inches"}},function(t,e){var n=e.resolutionInfo;Rn(t,n.horizontalResolution||0),pe(t,Math.max(1,Dc.indexOf(n.horizontalResolutionUnit))),pe(t,Math.max(1,Ic.indexOf(n.widthUnit))),Rn(t,n.verticalResolution||0),pe(t,Math.max(1,Dc.indexOf(n.verticalResolutionUnit))),pe(t,Math.max(1,Ic.indexOf(n.heightUnit)))});var Ky=["centered","size to fit","user defined"];Qe(1062,function(t){return t.printScale!==void 0},function(t,e){e.printScale={style:Ky[Ke(t)],x:yr(t),y:yr(t),scale:yr(t)}},function(t,e){var n=e.printScale,r=n.style,i=n.x,s=n.y,o=n.scale;nt(t,Math.max(0,Ky.indexOf(r))),br(t,i||0),br(t,s||0),br(t,o||0)});Qe(1006,function(t){return t.alphaChannelNames!==void 0},function(t,e,n){if(e.alphaChannelNames)Te(t,n());else for(e.alphaChannelNames=[];n()>0;){var r=$B(t);e.alphaChannelNames.push(r)}},function(t,e){for(var n=0,r=e.alphaChannelNames;n<r.length;n++){var i=r[n];UB(t,i)}});Qe(1045,function(t){return t.alphaChannelNames!==void 0},function(t,e,n){for(e.alphaChannelNames=[];n()>0;)e.alphaChannelNames.push(Ht(t))},function(t,e){for(var n=0,r=e.alphaChannelNames;n<r.length;n++){var i=r[n];Ns(t,i)}});Qe(1053,function(t){return t.alphaIdentifiers!==void 0},function(t,e,n){for(e.alphaIdentifiers=[];n()>=4;)e.alphaIdentifiers.push(ve(t))},function(t,e){for(var n=0,r=e.alphaIdentifiers;n<r.length;n++){var i=r[n];Se(t,i)}});Qe(1010,function(t){return t.backgroundColor!==void 0},function(t,e){return e.backgroundColor=zt(t)},function(t,e){return Ut(t,e.backgroundColor)});Qe(1037,function(t){return t.globalAngle!==void 0},function(t,e){return e.globalAngle=Ie(t)},function(t,e){return He(t,e.globalAngle)});Qe(1049,function(t){return t.globalAltitude!==void 0},function(t,e){return e.globalAltitude=ve(t)},function(t,e){return Se(t,e.globalAltitude)});Qe(1011,function(t){return t.printFlags!==void 0},function(t,e){e.printFlags={labels:!!xe(t),cropMarks:!!xe(t),colorBars:!!xe(t),registrationMarks:!!xe(t),negative:!!xe(t),flip:!!xe(t),interpolate:!!xe(t),caption:!!xe(t),printFlags:!!xe(t)}},function(t,e){var n=e.printFlags;Oe(t,n.labels?1:0),Oe(t,n.cropMarks?1:0),Oe(t,n.colorBars?1:0),Oe(t,n.registrationMarks?1:0),Oe(t,n.negative?1:0),Oe(t,n.flip?1:0),Oe(t,n.interpolate?1:0),Oe(t,n.caption?1:0),Oe(t,n.printFlags?1:0)});Qe(1034,function(t){return t.copyrighted!==void 0},function(t,e){e.copyrighted=!!xe(t)},function(t,e){Oe(t,e.copyrighted?1:0)});Qe(1035,function(t){return t.url!==void 0},function(t,e,n){e.url=Bf(t,n())},function(t,e){Dj(t,e.url)});Qe(1080,function(t){return t.countInformation!==void 0},function(t,e){var n=Xe(t);e.countInformation=n.countGroupList.map(function(r){return{color:{r:r["Rd  "],g:r["Grn "],b:r["Bl  "]},name:r["Nm  "],size:r["Rds "],fontSize:r.fontSize,visible:r.Vsbl,points:r.countObjectList.map(function(i){return{x:i["X   "],y:i["Y   "]}})}})},function(t,e){var n={Vrsn:1,countGroupList:e.countInformation.map(function(r){return{"Rd  ":r.color.r,"Grn ":r.color.g,"Bl  ":r.color.b,"Nm  ":r.name,"Rds ":r.size,fontSize:r.fontSize,Vsbl:r.visible,countObjectList:r.points.map(function(i){return{"X   ":i.x,"Y   ":i.y}})}})};Ye(t,"","Cnt ",n)});Qe(1024,function(t){return t.layerState!==void 0},function(t,e){return e.layerState=me(t)},function(t,e){return pe(t,e.layerState)});Qe(1026,function(t){return t.layersGroup!==void 0},function(t,e,n){for(e.layersGroup=[];n()>0;)e.layersGroup.push(me(t))},function(t,e){for(var n=0,r=e.layersGroup;n<r.length;n++){var i=r[n];pe(t,i)}});Qe(1072,function(t){return t.layerGroupsEnabledId!==void 0},function(t,e,n){for(e.layerGroupsEnabledId=[];n()>0;)e.layerGroupsEnabledId.push(xe(t))},function(t,e){for(var n=0,r=e.layerGroupsEnabledId;n<r.length;n++){var i=r[n];Oe(t,i)}});Qe(1069,function(t){return t.layerSelectionIds!==void 0},function(t,e){var n=me(t);for(e.layerSelectionIds=[];n--;)e.layerSelectionIds.push(ve(t))},function(t,e){pe(t,e.layerSelectionIds.length);for(var n=0,r=e.layerSelectionIds;n<r.length;n++){var i=r[n];Se(t,i)}});Qe(1032,function(t){return t.gridAndGuidesInformation!==void 0},function(t,e){var n=ve(t),r=ve(t),i=ve(t),s=ve(t);if(n!==1)throw new Error("Invalid 1032 resource version: ".concat(n));e.gridAndGuidesInformation={grid:{horizontal:r,vertical:i},guides:[]};for(var o=0;o<s;o++)e.gridAndGuidesInformation.guides.push({location:ve(t)/32,direction:xe(t)?"horizontal":"vertical"})},function(t,e){var n=e.gridAndGuidesInformation,r=n.grid||{horizontal:576,vertical:576},i=n.guides||[];Se(t,1),Se(t,r.horizontal),Se(t,r.vertical),Se(t,i.length);for(var s=0,o=i;s<o.length;s++){var a=o[s];Se(t,a.location*32),Oe(t,a.direction==="horizontal"?1:0)}});Qe(1065,function(t){return t.layerComps!==void 0},function(t,e){var n=Xe(t,!0);e.layerComps={list:[]};for(var r=0,i=n.list;r<i.length;r++){var s=i[r];e.layerComps.list.push({id:s.compID,name:s["Nm  "],capturedInfo:s.capturedInfo}),"comment"in s&&(e.layerComps.list[e.layerComps.list.length-1].comment=s.comment)}"lastAppliedComp"in n&&(e.layerComps.lastApplied=n.lastAppliedComp)},function(t,e){for(var n=e.layerComps,r={list:[]},i=0,s=n.list;i<s.length;i++){var o=s[i],a={};a._classID="Comp",a["Nm  "]=o.name,"comment"in o&&(a.comment=o.comment),a.compID=o.id,a.capturedInfo=o.capturedInfo,r.list.push(a)}"lastApplied"in n&&(r.lastAppliedComp=n.lastApplied),Ye(t,"","CompList",r)});var qy=["normal",void 0,void 0,void 0,void 0,void 0,void 0,"multiply","screen",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"difference"];Qe(1078,function(t){return t.onionSkins!==void 0},function(t,e){var n=Xe(t);e.onionSkins={enabled:n.enab,framesBefore:n.numBefore,framesAfter:n.numAfter,frameSpacing:n.Spcn,minOpacity:n.minOpacity/100,maxOpacity:n.maxOpacity/100,blendMode:qy[n.BlnM]||"normal"}},function(t,e){var n=e.onionSkins,r={Vrsn:1,enab:n.enabled,numBefore:n.framesBefore,numAfter:n.framesAfter,Spcn:n.frameSpacing,minOpacity:n.minOpacity*100|0,maxOpacity:n.maxOpacity*100|0,BlnM:Math.max(0,qy.indexOf(n.blendMode))};Ye(t,"","null",r)});Qe(1075,function(t){return t.timelineInformation!==void 0},function(t,e){var n,r,i=Xe(t);e.timelineInformation={enabled:i.enab,frameStep:mn(i.frameStep),frameRate:i.frameRate,time:mn(i.time),duration:mn(i.duration),workInTime:mn(i.workInTime),workOutTime:mn(i.workOutTime),repeats:i.LCnt,hasMotion:i.hasMotion,globalTracks:MS(i.globalTrackList,!!t.logMissingFeatures)},!((r=(n=i.audioClipGroupList)===null||n===void 0?void 0:n.audioClipGroupList)===null||r===void 0)&&r.length&&(e.timelineInformation.audioClipGroups=i.audioClipGroupList.audioClipGroupList.map(function(s){return{id:s.groupID,muted:s.muted,audioClips:s.audioClipList.map(function(o){var a=o.clipID,l=o.timeScope,c=o.muted,u=o.audioLevel,f=o.frameReader;return{id:a,start:mn(l.Strt),duration:mn(l.duration),inTime:mn(l.inTime),outTime:mn(l.outTime),muted:c,audioLevel:u,frameReader:{type:f.frameReaderType,mediaDescriptor:f.mediaDescriptor,link:{name:f["Lnk "]["Nm  "],fullPath:f["Lnk "].fullPath,relativePath:f["Lnk "].relPath}}}})}}))},function(t,e){var n,r=e.timelineInformation,i={Vrsn:1,enab:r.enabled,frameStep:r.frameStep,frameRate:r.frameRate,time:r.time,duration:r.duration,workInTime:r.workInTime,workOutTime:r.workOutTime,LCnt:r.repeats,globalTrackList:RS(r.globalTracks),audioClipGroupList:{audioClipGroupList:(n=r.audioClipGroups)===null||n===void 0?void 0:n.map(function(s){return{groupID:s.id,muted:s.muted,audioClipList:s.audioClips.map(function(o){return{clipID:o.id,timeScope:{Vrsn:1,Strt:o.start,duration:o.duration,inTime:o.inTime,outTime:o.outTime},frameReader:{frameReaderType:o.frameReader.type,descVersion:1,"Lnk ":{descVersion:1,"Nm  ":o.frameReader.link.name,fullPath:o.frameReader.link.fullPath,relPath:o.frameReader.link.relativePath},mediaDescriptor:o.frameReader.mediaDescriptor},muted:o.muted,audioLevel:o.audioLevel}})}})},hasMotion:r.hasMotion};Ye(t,"","null",i,"anim")});Qe(1076,function(t){return t.sheetDisclosure!==void 0},function(t,e){var n=Xe(t);e.sheetDisclosure={},n.sheetTimelineOptions&&(e.sheetDisclosure.sheetTimelineOptions=n.sheetTimelineOptions.map(function(r){return{sheetID:r.sheetID,sheetDisclosed:r.sheetDisclosed,lightsDisclosed:r.lightsDisclosed,meshesDisclosed:r.meshesDisclosed,materialsDisclosed:r.materialsDisclosed}}))},function(t,e){var n=e.sheetDisclosure,r={Vrsn:1};n.sheetTimelineOptions&&(r.sheetTimelineOptions=n.sheetTimelineOptions.map(function(i){return{Vrsn:2,sheetID:i.sheetID,sheetDisclosed:i.sheetDisclosed,lightsDisclosed:i.lightsDisclosed,meshesDisclosed:i.meshesDisclosed,materialsDisclosed:i.materialsDisclosed}})),Ye(t,"","null",r)});Qe(1054,function(t){return t.urlsList!==void 0},function(t,e){var n=ve(t);e.urlsList=[];for(var r=0;r<n;r++){var i=dt(t);if(i!=="slic"&&t.throwForMissingFeatures)throw new Error("Unknown long");var s=ve(t),o=Ht(t);e.urlsList.push({id:s,url:o,ref:"slice"})}},function(t,e){var n=e.urlsList;Se(t,n.length);for(var r=0;r<n.length;r++)Ue(t,"slic"),Se(t,n[r].id),Ln(t,n[r].url)});function Zy(t){return{"Top ":t.top,Left:t.left,Btom:t.bottom,Rght:t.right}}function Jy(t){return{top:t["Top "],left:t.Left,bottom:t.Btom,right:t.Rght}}function Rc(t,e){return t[Math.max(0,Math.min(t.length-1,e))]}var Qy=["autoGenerated","layer","userGenerated"],eb=["noImage","image"],Lc=["default"];Qe(1050,function(t){return t.slices?t.slices.length:0},function(t,e){var n=ve(t);if(n===6){e.slices||(e.slices=[]);var r=Ie(t),i=Ie(t),s=Ie(t),o=Ie(t),a=Ht(t),l=ve(t);e.slices.push({bounds:{top:r,left:i,bottom:s,right:o},groupName:a,slices:[]});for(var c=e.slices[e.slices.length-1].slices,u=0;u<l;u++){var f=ve(t),d=ve(t),h=Rc(Qy,ve(t)),g=h=="layer"?ve(t):0,p=Ht(t),v=Rc(eb,ve(t)),m=Ie(t),y=Ie(t),_=Ie(t),b=Ie(t),x=Ht(t),E=Ht(t),T=Ht(t),O=Ht(t),k=!!xe(t),I=Ht(t),R=Rc(Lc,ve(t)),C=Rc(Lc,ve(t)),P=xe(t),S=xe(t),$=xe(t),Z=xe(t),H=P+S+$+Z===0?"none":P===0?"matte":"color";c.push({id:f,groupId:d,origin:h,associatedLayerId:g,name:p,target:E,message:T,altTag:O,cellTextIsHTML:k,cellText:I,horizontalAlignment:R,verticalAlignment:C,type:v,url:x,bounds:{top:y,left:m,bottom:b,right:_},backgroundColorType:H,backgroundColor:{r:S,g:$,b:Z,a:P}})}var K=Xe(t);K.slices.forEach(function(Q){var ce=c.find(function(Y){return Q.sliceID==Y.id});ce&&(ce.topOutset=Q.topOutset,ce.leftOutset=Q.leftOutset,ce.bottomOutset=Q.bottomOutset,ce.rightOutset=Q.rightOutset)})}else if(n===7||n===8){var K=Xe(t);e.slices||(e.slices=[]),e.slices.push({groupName:K.baseName,bounds:Jy(K.bounds),slices:K.slices.map(function(ce){return po(po({},ce["Nm  "]?{name:ce["Nm  "]}:{}),{id:ce.sliceID,groupId:ce.groupID,associatedLayerId:0,origin:Uy.decode(ce.origin),type:Ny.decode(ce.Type),bounds:Jy(ce.bounds),url:ce.url,target:ce.null,message:ce.Msge,altTag:ce.altTag,cellTextIsHTML:ce.cellTextIsHTML,cellText:ce.cellText,horizontalAlignment:zy.decode(ce.horzAlign),verticalAlignment:$y.decode(ce.vertAlign),backgroundColorType:Hy.decode(ce.bgColorType),backgroundColor:ce.bgColor?{r:ce.bgColor["Rd  "],g:ce.bgColor["Grn "],b:ce.bgColor["Bl  "],a:ce.bgColor.alpha}:{r:0,g:0,b:0,a:0},topOutset:ce.topOutset||0,leftOutset:ce.leftOutset||0,bottomOutset:ce.bottomOutset||0,rightOutset:ce.rightOutset||0})})})}else throw new Error("Invalid slices version (".concat(n,")"))},function(t,e,n){var r=e.slices[n],i=r.bounds,s=r.groupName,o=r.slices;Se(t,6),He(t,i.top),He(t,i.left),He(t,i.bottom),He(t,i.right),Ln(t,s),Se(t,o.length);for(var a=0;a<o.length;a++){var l=o[a],c=l.backgroundColor,u=c.a,f=c.r,d=c.g,h=c.b;l.backgroundColorType==="none"?u=f=d=h=0:l.backgroundColorType==="matte"&&(u=0,f=d=h=255),Se(t,l.id),Se(t,l.groupId),Se(t,Qy.indexOf(l.origin)),l.origin==="layer"&&Se(t,l.associatedLayerId),Ln(t,l.name||""),Se(t,eb.indexOf(l.type)),He(t,l.bounds.left),He(t,l.bounds.top),He(t,l.bounds.right),He(t,l.bounds.bottom),Ln(t,l.url),Ln(t,l.target),Ln(t,l.message),Ln(t,l.altTag),Oe(t,l.cellTextIsHTML?1:0),Ln(t,l.cellText),Se(t,Lc.indexOf(l.horizontalAlignment)),Se(t,Lc.indexOf(l.verticalAlignment)),Oe(t,u),Oe(t,f),Oe(t,d),Oe(t,h)}var g={bounds:Zy(i),slices:[]};o.forEach(function(p){var v=po(po({sliceID:p.id,groupID:p.groupId,origin:Uy.encode(p.origin),Type:Ny.encode(p.type),bounds:Zy(p.bounds)},p.name?{"Nm  ":p.name}:{}),{url:p.url,null:p.target,Msge:p.message,altTag:p.altTag,cellTextIsHTML:p.cellTextIsHTML,cellText:p.cellText,horzAlign:zy.encode(p.horizontalAlignment),vertAlign:$y.encode(p.verticalAlignment),bgColorType:Hy.encode(p.backgroundColorType)});if(p.backgroundColorType==="color"){var m=p.backgroundColor,y=m.r,_=m.g,b=m.b,x=m.a;v.bgColor={"Rd  ":y,"Grn ":_,"Bl  ":b,alpha:x}}v.topOutset=p.topOutset||0,v.leftOutset=p.leftOutset||0,v.bottomOutset=p.bottomOutset||0,v.rightOutset=p.rightOutset||0,g.slices.push(v)}),Ye(t,"","null",g,"slices")});Qe(1064,function(t){return t.pixelAspectRatio!==void 0},function(t,e){if(ve(t)>2)throw new Error("Invalid pixelAspectRatio version");e.pixelAspectRatio={aspect:tr(t)}},function(t,e){Se(t,2),Hr(t,e.pixelAspectRatio.aspect)});Qe(1041,function(t){return t.iccUntaggedProfile!==void 0},function(t,e){e.iccUntaggedProfile=!!xe(t)},function(t,e){Oe(t,e.iccUntaggedProfile?1:0)});Qe(1044,function(t){return t.idsSeedNumber!==void 0},function(t,e){return e.idsSeedNumber=ve(t)},function(t,e){return Se(t,e.idsSeedNumber)});Qe(1036,function(t){return t.thumbnail!==void 0||t.thumbnailRaw!==void 0},function(t,e,n){var r=ve(t),i=ve(t),s=ve(t);ve(t),ve(t),ve(t);var o=me(t),a=me(t);if(r!==1||o!==24||a!==1){t.logMissingFeatures&&t.log("Invalid thumbnail data (format: ".concat(r,", bitsPerPixel: ").concat(o,", planes: ").concat(a,")")),Te(t,n());return}var l=n(),c=Qt(t,l);t.useRawThumbnail?e.thumbnailRaw={width:i,height:s,data:c}:c.byteLength&&(e.thumbnail=OB(c))},function(t,e){var n,r=0,i=0,s=new Uint8Array(0);if(e.thumbnailRaw)r=e.thumbnailRaw.width,i=e.thumbnailRaw.height,s=e.thumbnailRaw.data;else try{var o=(n=e.thumbnail.toDataURL("image/jpeg",1))===null||n===void 0?void 0:n.substring(23);o&&(s=sp.toByteArray(o),r=e.thumbnail.width,i=e.thumbnail.height)}catch{}var a=24,l=Math.floor((r*a+31)/32)*4,c=1,u=l*i*c,f=s.length;Se(t,1),Se(t,r),Se(t,i),Se(t,l),Se(t,u),Se(t,f),pe(t,a),pe(t,c),ki(t,s)});Qe(1057,function(t){return t.versionInfo!==void 0},function(t,e,n){var r=ve(t);if(r!==1)throw new Error("Invalid versionInfo version");e.versionInfo={hasRealMergedData:!!xe(t),writerName:Ht(t),readerName:Ht(t),fileVersion:ve(t)},Te(t,n())},function(t,e){var n=e.versionInfo;Se(t,1),Oe(t,n.hasRealMergedData?1:0),Ln(t,n.writerName),Ln(t,n.readerName),Se(t,n.fileVersion)});Qe(7e3,function(t){return t.imageReadyVariables!==void 0},function(t,e,n){e.imageReadyVariables=Rg(t,n())},function(t,e){Lg(t,e.imageReadyVariables)});Qe(7001,function(t){return t.imageReadyDataSets!==void 0},function(t,e,n){e.imageReadyDataSets=Rg(t,n())},function(t,e){Lg(t,e.imageReadyDataSets)});Qe(1088,function(t){return t.pathSelectionState!==void 0},function(t,e,n){var r=Xe(t);e.pathSelectionState=r.null},function(t,e){var n={null:e.pathSelectionState};Ye(t,"","null",n)});var tb=Be("FrmD","",{auto:"Auto",none:"None",dispose:"Disp"});Qe(4e3,function(t){return t.animations!==void 0},function(t,e,n){var r=dt(t);if(r==="mani")rs(t,"IRFR"),Nn(t,1,function(s){for(var o=function(){rs(t,"8BIM");var a=dt(t);Nn(t,1,function(l){if(a==="AnDs"){var c=Xe(t);e.animations={frames:c.FrIn.map(function(f){return{id:f.FrID,delay:(f.FrDl||0)/100,dispose:f.FrDs?tb.decode(f.FrDs):"auto"}}),animations:c.FSts.map(function(f){return{id:f.FsID,frames:f.FsFr,repeats:f.LCnt,activeFrame:f.AFrm||0}})}}else if(a==="Roll"){var u=Qt(t,l());t.logDevFeatures&&t.log("#4000 Roll",u)}else t.logMissingFeatures&&t.log("Unhandled subsection in #4000",a)})};s()>0;)o()});else if(r==="mopt"){var i=Qt(t,n());t.logDevFeatures&&t.log("#4000 mopt",i)}else t.logMissingFeatures&&t.log("Unhandled key in #4000:",r)},function(t,e){e.animations&&(Ue(t,"mani"),Ue(t,"IRFR"),Ss(t,1,function(){Ue(t,"8BIM"),Ue(t,"AnDs"),Ss(t,1,function(){for(var n={FrIn:[],FSts:[]},r=0;r<e.animations.frames.length;r++){var i=e.animations.frames[r],s={FrID:i.id};i.delay&&(s.FrDl=i.delay*100|0),s.FrDs=tb.encode(i.dispose),n.FrIn.push(s)}for(var r=0;r<e.animations.animations.length;r++){var o=e.animations.animations[r],a={FsID:o.id,AFrm:o.activeFrame|0,FsFr:o.frames,LCnt:o.repeats|0};n.FSts.push(a)}Ye(t,"","null",n)})}))});var HB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Sx=[0,1,3,2],VB=["bitmap","grayscale","indexed","RGB","CMYK","multichannel","duotone","lab"];function ap(t){for(var e=t.width*t.height*4,n=0;n<e;n+=4){var r=t.data[n];t.data[n+1]=r,t.data[n+2]=r}}function nb(t,e,n){var r=new DataView(t,e,n);return{view:r,offset:0,strict:!1,debug:!1,large:!1,globalAlpha:!1,log:console.log}}function lp(t,e){if(t.strict)throw new Error(e);t.debug&&t.log(e)}function xe(t){return t.offset+=1,t.view.getUint8(t.offset-1)}function GB(t){return t.view.getUint8(t.offset)}function Ke(t){return t.offset+=2,t.view.getInt16(t.offset-2,!1)}function me(t){return t.offset+=2,t.view.getUint16(t.offset-2,!1)}function WB(t){return t.offset+=2,t.view.getUint16(t.offset-2,!0)}function Ie(t){return t.offset+=4,t.view.getInt32(t.offset-4,!1)}function rb(t){return t.offset+=4,t.view.getInt32(t.offset-4,!0)}function ve(t){return t.offset+=4,t.view.getUint32(t.offset-4,!1)}function yr(t){return t.offset+=4,t.view.getFloat32(t.offset-4,!1)}function tr(t){return t.offset+=8,t.view.getFloat64(t.offset-8,!1)}function In(t){return Ie(t)/65536}function pr(t){return Ie(t)/(1<<24)}function Qt(t,e){var n=t.view.byteOffset+t.offset;if(t.offset+=e,n+e>t.view.buffer.byteLength){if(lp(t,"Reading bytes exceeding buffer length"),e>100*1024*1024)throw new Error("Reading past end of file");var r=new Uint8Array(e),i=Math.min(e,t.view.byteLength-n);return i>0&&r.set(new Uint8Array(t.view.buffer,n,i)),r}else return new Uint8Array(t.view.buffer,n,e)}function dt(t){return xx(t,4)}function XB(t,e){var n=String.fromCharCode(t.view.getUint8(e))+String.fromCharCode(t.view.getUint8(e+1))+String.fromCharCode(t.view.getUint8(e+2))+String.fromCharCode(t.view.getUint8(e+3));return n=="8BIM"||n=="8B64"}function Ji(t,e){for(var n=xe(t),r=n?xx(t,n):"";++n%e;)t.offset++;return r}function Ht(t){var e=ve(t);return Bg(t,e)}function Bg(t,e){for(var n="";e--;){var r=me(t);(r||e>0)&&(n+=String.fromCharCode(r))}return n}function YB(t,e){for(var n="";e--;){var r=WB(t);(r||e>0)&&(n+=String.fromCharCode(r))}return n}function Bf(t,e){for(var n="";e--;)n+=String.fromCharCode(xe(t));return n}function Te(t,e){t.offset+=e}function rs(t,e,n){var r=t.offset,i=dt(t);if(i!==e&&i!==n)throw new Error("Invalid signature: '".concat(i,"' at 0x").concat(r.toString(16)))}function xx(t,e){for(var n=Qt(t,e),r="",i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}function KB(t){return t==="8BIM"||t==="MeSa"||t==="AgHg"||t==="PHUT"||t==="DCSR"}function qB(t,e){var n;e===void 0&&(e={}),rs(t,"8BPS");var r=me(t);if(r!==1&&r!==2)throw new Error("Invalid PSD file version: ".concat(r));Te(t,6);var i=me(t),s=ve(t),o=ve(t),a=me(t),l=me(t),c=r===1?3e4:3e5;if(o>c||s>c)throw new Error("Invalid size: ".concat(o,"x").concat(s));if(i>16)throw new Error("Invalid channel count: ".concat(i));if(![1,8,16,32].includes(a))throw new Error("Invalid bitsPerChannel: ".concat(a));if(Sx.indexOf(l)===-1)throw new Error("Color mode not supported: ".concat((n=VB[l])!==null&&n!==void 0?n:l));var u={width:o,height:s,channels:i,bitsPerChannel:a,colorMode:l};Object.assign(t,e),t.large=r===2,t.globalAlpha=!1,Nn(t,1,function(p){if(p()){if(l===2){if(p()!=768)throw new Error("Invalid color palette size");u.palette=[];for(var v=0;v<256;v++)u.palette.push({r:xe(t),g:0,b:0});for(var v=0;v<256;v++)u.palette[v].g=xe(t);for(var v=0;v<256;v++)u.palette[v].b=xe(t)}Te(t,p())}});var f={};Nn(t,1,function(p){for(var v=function(){Cx(t,KB);var m=me(t);Ji(t,2),Nn(t,2,function(y){var _=wx[m],b=m===1036&&!!t.skipThumbnail;if(_&&!b)try{_.read(t,f,y)}catch(x){if(t.throwForMissingFeatures)throw x;Te(t,y())}else Te(t,y())})};p()>0;)v()}),f.layersGroup,f.layerGroupsEnabledId;var d=HB(f,["layersGroup","layerGroupsEnabledId"]);Object.keys(d)&&(u.imageResources=d),Nn(t,1,function(p){if(Nn(t,2,function(m){jg(t,u,f),Te(t,m())},void 0,t.large),p()>0){var v=tj(t);v&&(u.globalLayerMaskInfo=v)}else Te(t,p());for(;p()>0;){for(;p()&&GB(t)===0;)Te(t,1);p()>=12?Tx(t,u,u,f):Te(t,p())}},void 0,t.large);var h=u.children&&u.children.length,g=t.skipCompositeImageData&&(t.skipLayerImageData||h);return g||ij(t,u),u}function jg(t,e,n){var r,i,s=n.layersGroup,o=s===void 0?[]:s,a=n.layerGroupsEnabledId,l=a===void 0?[]:a,c=Ke(t);c<0&&(t.globalAlpha=!0,c=-c);for(var u=[],f=[],d=0;d<c;d++){var h=ZB(t,e,n),g=h.layer,p=h.channels;o[d]!==void 0&&(g.linkGroup=o[d]),l[d]!==void 0&&(g.linkGroupEnabled=!!l[d]),u.push(g),f.push(p)}if(!t.skipLayerImageData)for(var d=0;d<c;d++)ej(t,e,u[d],f[d]);e.children||(e.children=[]);for(var v=[e],d=u.length-1;d>=0;d--){var m=u[d],y=m.sectionDivider?m.sectionDivider.type:0;y===1||y===2?(m.opened=y===1,m.children=[],!((r=m.sectionDivider)===null||r===void 0)&&r.key&&(m.blendMode=(i=Uo[m.sectionDivider.key])!==null&&i!==void 0?i:m.blendMode),v[v.length-1].children.unshift(m),v.push(m)):y===3?v.pop():v[v.length-1].children.unshift(m)}}function ZB(t,e,n){var r={};r.top=Ie(t),r.left=Ie(t),r.bottom=Ie(t),r.right=Ie(t);for(var i=me(t),s=[],o=0;o<i;o++){var a=Ke(t),l=ve(t);if(t.large){if(l!==0)throw new Error("Sizes larger than 4GB are not supported");l=ve(t)}s.push({id:a,length:l})}rs(t,"8BIM");var c=dt(t);if(!Uo[c])throw new Error("Invalid blend mode: '".concat(c,"'"));r.blendMode=Uo[c],r.opacity=xe(t)/255,r.clipping=xe(t)===1;var u=xe(t);return r.transparencyProtected=(u&1)!==0,r.hidden=(u&2)!==0,u&32&&(r.effectsOpen=!0),Te(t,1),Nn(t,1,function(f){JB(t,r);var d=QB(t);for(d&&(r.blendingRanges=d),r.name=Ji(t,1);f()>4&&!XB(t,t.offset);)t.offset++;for(;f()>=12;)Tx(t,r,e,n);Te(t,f())}),{layer:r,channels:s}}function JB(t,e){return Nn(t,1,function(n){if(n()){var r={};e.mask=r,r.top=Ie(t),r.left=Ie(t),r.bottom=Ie(t),r.right=Ie(t),r.defaultColor=xe(t);var i=xe(t);if(r.positionRelativeToLayer=(i&1)!==0,r.disabled=(i&2)!==0,r.fromVectorData=(i&8)!==0,n()>=18){var s={};e.realMask=s;var o=xe(t);s.positionRelativeToLayer=(o&1)!==0,s.disabled=(o&2)!==0,s.fromVectorData=(o&8)!==0,s.defaultColor=xe(t),s.top=Ie(t),s.left=Ie(t),s.bottom=Ie(t),s.right=Ie(t)}if(i&16){var a=xe(t);a&1&&(r.userMaskDensity=xe(t)/255),a&2&&(r.userMaskFeather=tr(t)),a&4&&(r.vectorMaskDensity=xe(t)/255),a&8&&(r.vectorMaskFeather=tr(t))}Te(t,n())}})}function Bc(t){return[xe(t),xe(t),xe(t),xe(t)]}function QB(t){return Nn(t,1,function(e){for(var n=Bc(t),r=Bc(t),i=[];e()>0;){var s=Bc(t),o=Bc(t);i.push({sourceRange:s,destRange:o})}return{compositeGrayBlendSource:n,compositeGraphBlendDestinationRange:r,ranges:i}})}function ej(t,e,n,r){var i,s,o,a,l=(n.right||0)-(n.left||0),c=(n.bottom||0)-(n.top||0),u=e.colorMode===4,f;if(l&&c)if(u){if(e.bitsPerChannel!==8)throw new Error("bitsPerChannel Not supproted");f={width:l,height:c,data:new Uint8ClampedArray(l*c*5)};for(var d=4;d<f.data.byteLength;d+=5)f.data[d]=255}else f=cp(l,c,(i=e.bitsPerChannel)!==null&&i!==void 0?i:8),rp(f);for(var h=0,g=r;h<g.length;h++){var p=g[h];if(p.length!==0){if(p.length<2)throw new Error("Invalid channel length");var v=t.offset,m=me(t);if(m>3&&(t.offset-=1,m=me(t)),m>3&&(t.offset-=3,m=me(t)),m>3)throw new Error("Invalid compression: ".concat(m));if(p.id===-2||p.id===-3){var y=p.id===-2?n.mask:n.realMask;if(!y)throw new Error("Missing layer ".concat(p.id===-2?"mask":"real mask"," data"));var _=(y.right||0)-(y.left||0),b=(y.bottom||0)-(y.top||0);if(_<0||b<0||_>3e4||b>3e4)throw new Error("Invalid mask size");if(_&&b){var x=cp(_,b,(s=e.bitsPerChannel)!==null&&s!==void 0?s:8);rp(x),t.offset,ib(t,p.length,x,m,_,b,(o=e.bitsPerChannel)!==null&&o!==void 0?o:8,0,t.large,4),ap(x),t.useImageData?y.imageData=x:y.canvas=ip(x)}}else{var E=EB(p.id,u),T=f;if(E<0&&(T=void 0,t.throwForMissingFeatures))throw new Error("Channel not supported: ".concat(p.id));ib(t,p.length,T,m,l,c,(a=e.bitsPerChannel)!==null&&a!==void 0?a:8,E,t.large,u?5:4),t.offset=v+p.length,T&&e.colorMode===1&&ap(T)}}}if(f){if(u){var O=f;f=Ig(O.width,O.height),Ex(O,f,!1)}t.useImageData?n.imageData=f:n.canvas=ip(f)}}function ib(t,e,n,r,i,s,o,a,l,c){if(r===0)Ox(t,n,i,s,o,c,a);else if(r===1)Oa(t,n,i,s,o,c,[a],l);else if(r===2)sb(t,e,n,i,s,o,c,a,!1);else if(r===3)sb(t,e,n,i,s,o,c,a,!0);else throw new Error("Invalid Compression type: ".concat(r))}function tj(t){return Nn(t,1,function(e){if(e()){var n=me(t),r=me(t),i=me(t),s=me(t),o=me(t),a=me(t)/255,l=xe(t);return Te(t,e()),{overlayColorSpace:n,colorSpace1:r,colorSpace2:i,colorSpace3:s,colorSpace4:o,opacity:a,kind:l}}})}var nj=[0,1,-1,2,-2,3,-3,4,-4];function Cx(t,e){for(var n=t.offset,r="",i=0,s=nj;i<s.length;i++){var o=s[i];try{t.offset=n+o,r=dt(t)}catch{}if(e(r))break}if(!e(r))throw new Error("Invalid signature: '".concat(r,"' at 0x").concat(n.toString(16)));return r}function rj(t){return t==="8BIM"||t==="8B64"}function Tx(t,e,n,r){var i=Cx(t,rj),s=dt(t),o=i==="8B64"||t.large&&CB.indexOf(s)!==-1;Nn(t,2,function(a){var l=Gu[s];if(l)try{l.read(t,e,a,n,r)}catch(c){if(t.throwForMissingFeatures)throw c}else t.logMissingFeatures&&t.log("Unhandled additional info: ".concat(s)),Te(t,a());a()&&(t.logMissingFeatures&&t.log("Unread ".concat(a()," bytes left for additional info: ").concat(s)),Te(t,a()))},!1,o)}function cp(t,e,n,r){if(r===void 0&&(r=4),n===1||n===8)return r===4?Ig(t,e):{width:t,height:e,data:new Uint8ClampedArray(t*e*r)};if(n===16)return{width:t,height:e,data:new Uint16Array(t*e*r)};if(n===32)return{width:t,height:e,data:new Float32Array(t*e*r)};throw new Error("Invalid bitDepth (".concat(n,")"))}function ij(t,e){var n,r=me(t),i=(n=e.bitsPerChannel)!==null&&n!==void 0?n:8;if(Sx.indexOf(e.colorMode)===-1)throw new Error("Color mode not supported: ".concat(e.colorMode));if(r!==0&&r!==1)throw new Error("Compression type not supported: ".concat(r));var s=cp(e.width,e.height,i);switch(rp(s),e.colorMode){case 0:{if(i!==1)throw new Error("Invalid bitsPerChannel for bitmap color mode");var o=void 0;if(r===0)o=Qt(t,Math.ceil(e.width/8)*e.height);else if(r===1)o=new Uint8Array(e.width*e.height),Oa(t,{data:o,width:e.width,height:e.height},e.width,e.height,8,1,[0],t.large);else throw new Error("Bitmap compression not supported: ".concat(r));kB(o,s.data,e.width,e.height);break}case 3:case 1:{var a=e.colorMode===1?[0]:[0,1,2];if(e.channels&&e.channels>3)for(var l=3;l<e.channels;l++)a.push(l);else t.globalAlpha&&a.push(3);if(r===0)for(var l=0;l<a.length;l++)Ox(t,s,e.width,e.height,i,4,a[l]);else r===1&&(t.offset,Oa(t,s,e.width,e.height,i,4,a,t.large));e.colorMode===1&&ap(s);break}case 2:{if(i!==8)throw new Error("bitsPerChannel Not supproted");if(e.channels!==1)throw new Error("Invalid channel count");if(!e.palette)throw new Error("Missing color palette");if(r===0)throw new Error("Not implemented");if(r===1){var c={width:s.width,height:s.height,data:new Uint8Array(s.width*s.height)};Oa(t,c,e.width,e.height,i,1,[0],t.large),sj(c,s,e.palette)}else throw new Error("Not implemented");break}case 4:{if(i!==8)throw new Error("bitsPerChannel Not supproted");if(e.channels!==4)throw new Error("Invalid channel count");var a=[0,1,2,3];if(t.globalAlpha&&a.push(4),r===0)throw new Error("Not implemented");if(r===1){var u={width:s.width,height:s.height,data:new Uint8Array(s.width*s.height*5)};t.offset,Oa(t,u,e.width,e.height,i,5,a,t.large),Ex(u,s,!0)}else throw new Error("Not implemented");break}default:throw new Error("Color mode not supported: ".concat(e.colorMode))}if(t.globalAlpha){if(e.bitsPerChannel!==8)throw new Error("bitsPerChannel Not supproted");for(var f=s.data,d=s.width*s.height*4,l=0;l<d;l+=4){var h=f[l+3];if(h!=0&&h!=255){var g=h/255,p=1/g,v=255*(1-p);f[l+0]=f[l+0]*p+v,f[l+1]=f[l+1]*p+v,f[l+2]=f[l+2]*p+v}}}t.useImageData?e.imageData=s:e.canvas=ip(s)}function Ex(t,e,n){for(var r=e.width*e.height*4,i=t.data,s=e.data,o=0,a=0;a<r;o+=5,a+=4){var l=i[o],c=i[o+1],u=i[o+2],f=i[o+3];s[a]=(l*f|0)/255|0,s[a+1]=(c*f|0)/255|0,s[a+2]=(u*f|0)/255|0,s[a+3]=n?255-i[o+4]:i[o+4]}}function sj(t,e,n){for(var r=t.width*t.height,i=t.data,s=e.data,o=0,a=0;o<r;o++,a+=4){var l=n[i[o]];s[a+0]=l.r,s[a+1]=l.g,s[a+2]=l.b,s[a+3]=255}}function oj(t,e){if(t.byteLength/t.length!==e.byteLength/e.length)throw new Error("Invalid array types")}function kx(t,e){if(e===8)return t;if(e===16)if(t.byteOffset%2){var n=new Uint16Array(t.byteLength/2);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength).set(t),n}else return new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);else if(e===32)if(t.byteOffset%4){var n=new Float32Array(t.byteLength/4);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength).set(t),n}else return new Float32Array(t.buffer,t.byteOffset,t.byteLength/4);else throw new Error("Invalid bitDepth (".concat(e,")"))}function up(t,e,n,r){oj(t.data,e);for(var i=t.width*t.height,s=t.data,o=0,a=n|0;o<i;o++,a=a+r|0)s[a]=e[o]}function Ox(t,e,n,r,i,s,o){var a=Qt(t,n*r*Math.floor(i/8));if(i==32)for(var l=0;l<a.byteLength;l+=4){var c=a[l+0],u=a[l+1],f=a[l+2],d=a[l+3];a[l+0]=d,a[l+1]=f,a[l+2]=u,a[l+3]=c}var h=kx(a,i);e&&o<s&&up(e,h,o,s)}function Mh(t,e,n,r){for(var i=0;i<n;i++)for(var s=i*e,o=1,a=s+1;o<e;o++,a++)t[a]=(t[a-1]+t[a])%r}function sb(t,e,n,r,i,s,o,a,l){var c=Qt(t,e),u=mB(c);if(n&&a<o){var f=kx(u,s);if(s===8)l&&Mh(u,r,i,256),up(n,u,a,o);else if(s===16)l&&Mh(f,r,i,65536),up(n,f,a,o);else if(s===32){l&&Mh(u,r*4,i,256);for(var d=a,h=new Uint32Array(n.data.buffer,n.data.byteOffset,n.data.length),g=0;g<i;g++)for(var p=r*4*g,v=0;v<r;v++,p++,d+=o){var m=p+r,y=m+r,_=y+r;h[d]=(u[p]<<24|u[m]<<16|u[y]<<8|u[_])>>>0}}else throw new Error("Invalid bitDepth")}}function Oa(t,e,n,r,i,s,o,a){var l=e&&e.data,c;if(a){c=new Uint32Array(o.length*r);for(var u=0,f=0;u<o.length;u++)for(var d=0;d<r;d++,f++)c[f]=ve(t)}else{c=new Uint16Array(o.length*r);for(var u=0,f=0;u<o.length;u++)for(var d=0;d<r;d++,f++)c[f]=me(t)}if(i!==1&&i!==8)throw new Error("Invalid bit depth (".concat(i,")"));for(var h=s-1|0,g=0,f=0;g<o.length;g++){var p=o[g]|0,v=g>h||p>h;if(!l||v)for(var d=0;d<r;d++,f++)Te(t,c[f]);else for(var d=0,m=p|0;d<r;d++,f++)for(var y=c[f],_=Qt(t,y),b=0,x=0;b<y;b++){var E=_[b];if(E>128){var T=_[++b];E=256-E|0;for(var O=0;O<=E&&x<n;O=O+1|0,x=x+1|0)l[m]=T,m=m+s|0}else if(E<128)for(var O=0;O<=E&&x<n;O=O+1|0,x=x+1|0)l[m]=_[++b],m=m+s|0}}}function Nn(t,e,n,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1);var s=ve(t);if(i){if(s!==0)throw new Error("Sizes larger than 4GB are not supported");s=ve(t)}if(!(s<=0&&r)){var o=t.offset+s;if(o>t.view.byteLength)throw new Error("Section exceeds file size");var a=n(function(){return o-t.offset});for(t.offset!==o&&(t.offset>o?lp(t,"Exceeded section limits"):lp(t,"Unread section data"));s%e;)s++,o++;return t.offset=o,a}}function zt(t){var e=me(t);switch(e){case 0:{var n=me(t)/257,r=me(t)/257,i=me(t)/257;return Te(t,2),{r:n,g:r,b:i}}case 1:{var s=me(t)/65535,o=me(t)/65535,i=me(t)/65535;return Te(t,2),{h:s,s:o,b:i}}case 2:{var a=me(t)/257,l=me(t)/257,c=me(t)/257,u=me(t)/257;return{c:a,m:l,y:c,k:u}}case 7:{var f=Ke(t)/1e4,d=Ke(t),h=Ke(t),g=d<0?d/12800:d/12700,i=h<0?h/12800:h/12700;return Te(t,2),{l:f,a:g,b:i}}case 8:{var u=me(t)*255/1e4;return Te(t,6),{k:u}}default:throw new Error("Invalid color space")}}var Ax=[void 0,"outer bevel","inner bevel","emboss","pillow emboss","stroke emboss"];function eo(t){return rs(t,"8BIM"),Uo[dt(t)]||"normal"}function ao(t,e){Ue(t,"8BIM"),Ue(t,xS[e]||"norm")}function to(t){return xe(t)/255}function lo(t,e){Oe(t,Math.round(e*255)|0)}function aj(t){var e=me(t);if(e!==0)throw new Error("Invalid effects layer version: ".concat(e));for(var n=me(t),r={},i=0;i<n;i++){rs(t,"8BIM");var s=dt(t);switch(s){case"cmnS":{var o=ve(t),a=ve(t),l=!!xe(t);if(Te(t,2),o!==7||a!==0||!l)throw new Error("Invalid effects common state");break}case"dsdw":case"isdw":{var c=ve(t),u=ve(t);if(c!==41&&c!==51)throw new Error("Invalid shadow size: ".concat(c));if(u!==0&&u!==2)throw new Error("Invalid shadow version: ".concat(u));var o=In(t);In(t);var f=In(t),d=In(t),h=zt(t),g=eo(t),p=!!xe(t),v=!!xe(t),m=to(t);c>=51&&zt(t);var y={size:{units:"Pixels",value:o},distance:{units:"Pixels",value:d},angle:f,color:h,blendMode:g,enabled:p,useGlobalLight:v,opacity:m};s==="dsdw"?r.dropShadow=[y]:r.innerShadow=[y];break}case"oglw":{var c=ve(t),_=ve(t);if(c!==32&&c!==42)throw new Error("Invalid outer glow size: ".concat(c));if(_!==0&&_!==2)throw new Error("Invalid outer glow version: ".concat(_));var o=In(t);In(t);var h=zt(t),g=eo(t),p=!!xe(t),m=to(t);c>=42&&zt(t),r.outerGlow={size:{units:"Pixels",value:o},color:h,blendMode:g,enabled:p,opacity:m};break}case"iglw":{var c=ve(t),b=ve(t);if(c!==32&&c!==43)throw new Error("Invalid inner glow size: ".concat(c));if(b!==0&&b!==2)throw new Error("Invalid inner glow version: ".concat(b));var o=In(t);In(t);var h=zt(t),g=eo(t),p=!!xe(t),m=to(t);c>=43&&(xe(t),zt(t)),r.innerGlow={size:{units:"Pixels",value:o},color:h,blendMode:g,enabled:p,opacity:m};break}case"bevl":{var c=ve(t),x=ve(t);if(c!==58&&c!==78)throw new Error("Invalid bevel size: ".concat(c));if(x!==0&&x!==2)throw new Error("Invalid bevel version: ".concat(x));var f=In(t),E=In(t),o=In(t),T=eo(t),O=eo(t),k=zt(t),I=zt(t),R=Ax[xe(t)]||"inner bevel",C=to(t),P=to(t),p=!!xe(t),v=!!xe(t),S=xe(t)?"down":"up";c>=78&&(zt(t),zt(t)),r.bevel={size:{units:"Pixels",value:o},angle:f,strength:E,highlightBlendMode:T,shadowBlendMode:O,highlightColor:k,shadowColor:I,style:R,highlightOpacity:C,shadowOpacity:P,enabled:p,useGlobalLight:v,direction:S};break}case"sofi":{var o=ve(t),$=ve(t);if(o!==34)throw new Error("Invalid effects solid fill info size: ".concat(o));if($!==2)throw new Error("Invalid effects solid fill info version: ".concat($));var g=eo(t),h=zt(t),m=to(t),p=!!xe(t);zt(t),r.solidFill=[{blendMode:g,color:h,opacity:m,enabled:p}];break}default:throw new Error("Invalid effect type: '".concat(s,"'"))}}return r}function ob(t,e){var n;Se(t,51),Se(t,2),Rn(t,e.size&&e.size.value||0),Rn(t,0),Rn(t,e.angle||0),Rn(t,e.distance&&e.distance.value||0),Ut(t,e.color),ao(t,e.blendMode),Oe(t,e.enabled?1:0),Oe(t,e.useGlobalLight?1:0),lo(t,(n=e.opacity)!==null&&n!==void 0?n:1),Ut(t,e.color)}function lj(t,e){var n,r,i,s,o,a,l=(n=e.dropShadow)===null||n===void 0?void 0:n[0],c=(r=e.innerShadow)===null||r===void 0?void 0:r[0],u=e.outerGlow,f=e.innerGlow,d=e.bevel,h=(i=e.solidFill)===null||i===void 0?void 0:i[0],g=1;if(l&&g++,c&&g++,u&&g++,f&&g++,d&&g++,h&&g++,pe(t,0),pe(t,g),Ue(t,"8BIM"),Ue(t,"cmnS"),Se(t,7),Se(t,0),Oe(t,1),ot(t,2),l&&(Ue(t,"8BIM"),Ue(t,"dsdw"),ob(t,l)),c&&(Ue(t,"8BIM"),Ue(t,"isdw"),ob(t,c)),u&&(Ue(t,"8BIM"),Ue(t,"oglw"),Se(t,42),Se(t,2),Rn(t,((s=u.size)===null||s===void 0?void 0:s.value)||0),Rn(t,0),Ut(t,u.color),ao(t,u.blendMode),Oe(t,u.enabled?1:0),lo(t,u.opacity||0),Ut(t,u.color)),f&&(Ue(t,"8BIM"),Ue(t,"iglw"),Se(t,43),Se(t,2),Rn(t,((o=f.size)===null||o===void 0?void 0:o.value)||0),Rn(t,0),Ut(t,f.color),ao(t,f.blendMode),Oe(t,f.enabled?1:0),lo(t,f.opacity||0),Oe(t,0),Ut(t,f.color)),d){Ue(t,"8BIM"),Ue(t,"bevl"),Se(t,78),Se(t,2),Rn(t,d.angle||0),Rn(t,d.strength||0),Rn(t,((a=d.size)===null||a===void 0?void 0:a.value)||0),ao(t,d.highlightBlendMode),ao(t,d.shadowBlendMode),Ut(t,d.highlightColor),Ut(t,d.shadowColor);var p=Ax.indexOf(d.style);Oe(t,p<=0?1:p),lo(t,d.highlightOpacity||0),lo(t,d.shadowOpacity||0),Oe(t,d.enabled?1:0),Oe(t,d.useGlobalLight?1:0),Oe(t,d.direction==="down"?1:0),Ut(t,d.highlightColor),Ut(t,d.shadowColor)}h&&(Ue(t,"8BIM"),Ue(t,"sofi"),Se(t,34),Se(t,2),ao(t,h.blendMode),Ut(t,h.color),lo(t,h.opacity||0),Oe(t,h.enabled?1:0),Ut(t,h.color))}function ab(t){return t===32||t===10||t===13||t===9}function lb(t){return t>=48&&t<=57||t===46||t===45}function Px(t){var e=0;function n(){for(;e<t.length&&ab(t[e]);)e++}function r(){var y=t[e];return e++,y===92&&(y=t[e],e++),y}function i(){var y="";if(t[e]===41)return e++,y;if(t[e]!==254||t[e+1]!==255)throw new Error("Invalid utf-16 BOM");for(e+=2;e<t.length&&t[e]!==41;){var _=r(),b=r(),x=_<<8|b;y+=String.fromCharCode(x)}return e++,y}var s=null,o=[];function a(y){o.length?(l(y),o.push(y)):(o.push(y),s=y)}function l(y){if(!o.length)throw new Error("Invalid data");var _=o[o.length-1];if(typeof _=="string")o[o.length-2][_]=y,u();else if(Array.isArray(_))_.push(y);else throw new Error("Invalid data")}function c(y){o.length||a({});var _=o[o.length-1];if(_&&typeof _=="string")l(y==="nil"?null:"/".concat(y));else if(_&&typeof _=="object")o.push(y);else throw new Error("Invalid data")}function u(){if(!o.length)throw new Error("Invalid data");o.pop()}n();for(var f=t.length;f>0&&t[f-1]===0;)f--;for(;e<f;){var d=e,h=t[d];if(h===60&&t[d+1]===60)e+=2,a({});else if(h===62&&t[d+1]===62)e+=2,u();else if(h===47){e+=1;for(var g=e;e<t.length&&!ab(t[e]);)e++;for(var p="",v=g;v<e;v++)p+=String.fromCharCode(t[v]);c(p)}else if(h===40)e+=1,l(i());else if(h===91)e+=1,a([]);else if(h===93)e+=1,u();else if(h===110&&t[d+1]===117&&t[d+2]===108&&t[d+3]===108)e+=4,l(null);else if(h===116&&t[d+1]===114&&t[d+2]===117&&t[d+3]===101)e+=4,l(!0);else if(h===102&&t[d+1]===97&&t[d+2]===108&&t[d+3]===115&&t[d+4]===101)e+=5,l(!1);else if(lb(h)){for(var m="";e<t.length&&lb(t[e]);)m+=String.fromCharCode(t[e]),e++;l(parseFloat(m))}else e+=1,console.log("Invalid token '".concat(String.fromCharCode(h),"' (").concat(h,") at ").concat(e));n()}return s}var cj=["Axis","XY","Zone","WordSpacing","FirstLineIndent","GlyphSpacing","StartIndent","EndIndent","SpaceBefore","SpaceAfter","LetterSpacing","Values","GridSize","GridLeading","PointBase","BoxBounds","TransformPoint0","TransformPoint1","TransformPoint2","FontSize","Leading","HorizontalScale","VerticalScale","BaselineShift","Tsume","OutlineWidth","AutoLeading"],uj=["RunLengthArray"];function fj(t,e){e===void 0&&(e=!1);var n=new Uint8Array(1024),r=0,i=0;function s(y){if(r>=n.length){var _=new Uint8Array(n.length*2);_.set(n),n=_}n[r]=y,r++}function o(y){for(var _=0;_<y.length;_++)s(y.charCodeAt(_))}function a(){if(e)o(" ");else for(var y=0;y<i;y++)o("	")}function l(y,_){a(),o("/".concat(y)),g(_,y,!0),e||o(`
`)}function c(y){return y.toString()}function u(y){return y.toFixed(5).replace(/(\d)0+$/g,"$1").replace(/^0+\.([1-9])/g,".$1").replace(/^-0+\.0(\d)/g,"-.0$1")}function f(y,_){var b=_&&cj.indexOf(_)!==-1||(y|0)!==y;return b?u(y):c(y)}function d(y){var _=Object.keys(y);return _.indexOf("98")!==-1&&_.unshift.apply(_,_.splice(_.indexOf("99"),1)),_.indexOf("99")!==-1&&_.unshift.apply(_,_.splice(_.indexOf("99"),1)),_}function h(y){(y===40||y===41||y===92)&&s(92),s(y)}function g(y,_,b){b===void 0&&(b=!1);function x(){b?o(" "):a()}if(y===null)x(),o(e?"/nil":"null");else if(typeof y=="number")x(),o(f(y,_));else if(typeof y=="boolean")x(),o(y?"true":"false");else if(typeof y=="string")if(x(),(_==="99"||_==="98")&&y.charAt(0)==="/")o(y);else{o("("),s(254),s(255);for(var E=0;E<y.length;E++){var T=y.charCodeAt(E);h(T>>8&255),h(T&255)}o(")")}else if(Array.isArray(y))if(x(),y.every(function(H){return typeof H=="number"})){o("[");for(var O=uj.indexOf(_)!==-1,k=0,I=y;k<I.length;k++){var R=I[k];o(" "),o(O?f(R):u(R))}o(" ]")}else{o("["),e||o(`
`);for(var C=0,P=y;C<P.length;C++){var R=P[C];g(R,_),e||o(`
`)}a(),o("]")}else if(typeof y=="object"){b&&!e&&o(`
`),a(),o("<<"),e||o(`
`),i++;for(var S=0,$=d(y);S<$.length;S++){var Z=$[S];l(Z,y[Z])}i--,a(),o(">>")}}if(e){if(typeof t=="object")for(var p=0,v=d(t);p<v.length;p++){var m=v[p];l(m,t[m])}}else o(`

`),g(t);return n.slice(0,r)}var Rt=function(){return Rt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Rt.apply(this,arguments)},Fx={name:"MyriadPro-Regular",script:0,type:0,synthetic:0},jc={justification:"left",firstLineIndent:0,startIndent:0,endIndent:0,spaceBefore:0,spaceAfter:0,autoHyphenate:!0,hyphenatedWordSize:6,preHyphen:2,postHyphen:2,consecutiveHyphens:8,zone:36,wordSpacing:[.8,1,1.33],letterSpacing:[0,0,0],glyphSpacing:[1,1,1],autoLeading:1.2,leadingType:0,hanging:!1,burasagari:!1,kinsokuOrder:0,everyLineComposer:!1},hj={font:Fx,fontSize:12,fauxBold:!1,fauxItalic:!1,autoLeading:!0,leading:0,horizontalScale:1,verticalScale:1,tracking:0,autoKerning:!0,kerning:0,baselineShift:0,fontCaps:0,fontBaseline:0,underline:!1,strikethrough:!1,ligatures:!0,dLigatures:!1,baselineDirection:2,tsume:0,styleRunAlignment:2,language:0,noBreak:!1,fillColor:{r:0,g:0,b:0},strokeColor:{r:0,g:0,b:0},fillFlag:!0,strokeFlag:!1,fillFirst:!0,yUnderline:1,outlineWidth:1,characterDirection:0,hindiNumbers:!1,kashida:1,diacriticPos:2},dj={isOn:!1,show:!1,size:18,leading:22,color:{r:0,g:0,b:255},leadingFillColor:{r:0,g:0,b:255},alignLineHeightToGridFlags:!1},Ng=["justification","firstLineIndent","startIndent","endIndent","spaceBefore","spaceAfter","autoHyphenate","hyphenatedWordSize","preHyphen","postHyphen","consecutiveHyphens","zone","wordSpacing","letterSpacing","glyphSpacing","autoLeading","leadingType","hanging","burasagari","kinsokuOrder","everyLineComposer"],zg=["font","fontSize","fauxBold","fauxItalic","autoLeading","leading","horizontalScale","verticalScale","tracking","autoKerning","kerning","baselineShift","fontCaps","fontBaseline","underline","strikethrough","ligatures","dLigatures","baselineDirection","tsume","styleRunAlignment","language","noBreak","fillColor","strokeColor","fillFlag","strokeFlag","fillFirst","yUnderline","outlineWidth","characterDirection","hindiNumbers","kashida","diacriticPos"],Dx=["none","crisp","strong","smooth","sharp"],Ix=["left","right","center","justify-left","justify-right","justify-center","justify-all"];function Mx(t){return t.substring(0,1).toUpperCase()+t.substring(1)}function pj(t){var e=t.Values;switch(t.Type){case 0:return{k:e[1]*255};case 1:return e[0]===1?{r:e[1]*255,g:e[2]*255,b:e[3]*255}:{r:e[1]*255,g:e[2]*255,b:e[3]*255,a:e[0]*255};case 2:return{c:e[1]*255,m:e[2]*255,y:e[3]*255,k:e[4]*255};default:throw new Error("Unknown color type in text layer")}}function fp(t){if(t){if("r"in t)return{Type:1,Values:["a"in t?t.a/255:1,t.r/255,t.g/255,t.b/255]};if("c"in t)return{Type:2,Values:[1,t.c/255,t.m/255,t.y/255,t.k/255]};if("k"in t)return{Type:0,Values:[1,t.k/255]};throw new Error("Invalid color type in text layer")}else return{Type:1,Values:[0,0,0,0]}}function cb(t,e){if(!t||!e||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ub(t,e){if(!t||!e)return!1;for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];if(t[i]!==e[i])return!1}for(var s=0,o=Object.keys(e);s<o.length;s++){var i=o[s];if(t[i]!==e[i])return!1}return!0}function gj(t,e){for(var n=0;n<t.length;n++)if(t[n].name===e.name)return n;return t.push(e),t.length-1}function Rx(t,e,n){for(var r={},i=0,s=e;i<s.length;i++){var o=s[i],a=Mx(o);t[a]!==void 0&&(o==="justification"?r[o]=Ix[t[a]]:o==="font"?r[o]=n[t[a]]:o==="fillColor"||o==="strokeColor"?r[o]=pj(t[a]):r[o]=t[a])}return r}function Lx(t,e,n){for(var r,i={},s=0,o=e;s<o.length;s++){var a=o[s],l=Mx(a);t[a]!==void 0&&(a==="justification"?i[l]=Ix.indexOf((r=t[a])!==null&&r!==void 0?r:"left"):a==="font"?i[l]=gj(n,t[a]):a==="fillColor"||a==="strokeColor"?i[l]=fp(t[a]):i[l]=t[a])}return i}function mj(t,e){return Rx(t,Ng,e)}function vj(t,e){return Rx(t,zg,e)}function Nc(t,e){return Lx(t,Ng,e)}function Rh(t,e){return Lx(t,zg,e)}function fb(t,e,n){if(e.length){for(var r=function(a){var l=e[0].style[a];if(l!==void 0){var c=!1;Array.isArray(l)?c=e.every(function(p){return cb(p.style[a],l)}):typeof l=="object"?c=e.every(function(p){return ub(p.style[a],l)}):c=e.every(function(p){return p.style[a]===l}),c&&(t[a]=l)}var u=t[a];if(u!==void 0)for(var f=0,d=e;f<d.length;f++){var h=d[f],g=!1;Array.isArray(l)?g=cb(h.style[a],l):typeof l=="object"?g=ub(h.style[a],l):g=h.style[a]===l,g&&delete h.style[a]}},i=0,s=n;i<s.length;i++){var o=s[i];r(o)}e.every(function(a){return Object.keys(a.style).length===0})&&(e.length=0)}}function yj(t){for(var e,n,r,i,s,o,a=t.EngineDict,l=t.ResourceDict,c=l.FontSet.map(function(E){return{name:E.Name,script:E.Script,type:E.FontType,synthetic:E.Synthetic}}),u=a.Editor.Text.replace(/\r/g,`
`),f=0;/\n$/.test(u);)u=u.substring(0,u.length-1),f++;var d={text:u,antiAlias:(e=Dx[a.AntiAlias])!==null&&e!==void 0?e:"smooth",useFractionalGlyphWidths:!!a.UseFractionalGlyphWidths,superscriptSize:l.SuperscriptSize,superscriptPosition:l.SuperscriptPosition,subscriptSize:l.SubscriptSize,subscriptPosition:l.SubscriptPosition,smallCapSize:l.SmallCapSize},h=(o=(s=(i=(r=(n=a.Rendered)===null||n===void 0?void 0:n.Shapes)===null||r===void 0?void 0:r.Children)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.Cookie)===null||o===void 0?void 0:o.Photoshop;h&&(d.shapeType=h.ShapeType===1?"box":"point",h.PointBase&&(d.pointBase=h.PointBase),h.BoxBounds&&(d.boxBounds=h.BoxBounds));var g=a.ParagraphRun;d.paragraphStyle={},d.paragraphStyleRuns=[];for(var p=0;p<g.RunArray.length;p++){var v=g.RunArray[p],m=g.RunLengthArray[p],y=mj(v.ParagraphSheet.Properties,c);d.paragraphStyleRuns.push({length:m,style:y})}for(var _=f;d.paragraphStyleRuns.length&&_>0;_--)--d.paragraphStyleRuns[d.paragraphStyleRuns.length-1].length===0&&d.paragraphStyleRuns.pop();fb(d.paragraphStyle,d.paragraphStyleRuns,Ng),d.paragraphStyleRuns.length||delete d.paragraphStyleRuns;var b=a.StyleRun;d.style={},d.styleRuns=[];for(var p=0;p<b.RunArray.length;p++){var x=b.RunLengthArray[p],y=vj(b.RunArray[p].StyleSheet.StyleSheetData,c);y.font||(y.font=c[0]),d.styleRuns.push({length:x,style:y})}for(var _=f;d.styleRuns.length&&_>0;_--)--d.styleRuns[d.styleRuns.length-1].length===0&&d.styleRuns.pop();return fb(d.style,d.styleRuns,zg),d.styleRuns.length||delete d.styleRuns,d}function bj(t){var e,n,r,i,s,o,a,l,c,u,f,d,h="".concat((t.text||"").replace(/\r?\n/g,"\r"),"\r"),g=[{name:"AdobeInvisFont",script:0,type:0,synthetic:0}],p=((e=t.style)===null||e===void 0?void 0:e.font)||((r=(n=t.styleRuns)===null||n===void 0?void 0:n.find(function(te){return te.style.font}))===null||r===void 0?void 0:r.style.font)||Fx,v=[],m=[],y=t.paragraphStyleRuns;if(y&&y.length){for(var _=h.length,b=0,x=y;b<x.length;b++){var E=x[b],T=Math.min(E.length,_);_-=T,T&&(_===1&&E===y[y.length-1]&&(T++,_--),m.push(T),v.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Nc(Rt(Rt(Rt({},jc),t.paragraphStyle),E.style),g)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}_&&(m.push(_),v.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Nc(Rt(Rt({},jc),t.paragraphStyle),g)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}else for(var O=0,k=0;O<h.length;O++)h.charCodeAt(O)===13&&(m.push(O-k+1),v.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Nc(Rt(Rt({},jc),t.paragraphStyle),g)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}),k=O+1);for(var I=Rh(Rt(Rt({},hj),{font:p}),g),R=t.styleRuns||[{length:h.length,style:t.style||{}}],C=[],P=[],S=h.length,$=0,Z=R;$<Z.length;$++){var H=Z[$],T=Math.min(H.length,S);S-=T,T&&(S===1&&H===R[R.length-1]&&(T++,S--),P.push(T),C.push({StyleSheet:{StyleSheetData:Rh(Rt(Rt({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},t.style),H.style),g)}}))}S&&R.length&&(P.push(S),C.push({StyleSheet:{StyleSheetData:Rh(Rt({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},t.style),g)}}));var K=Rt(Rt({},dj),t.gridInfo),Q=t.orientation==="vertical"?2:0,ce=t.orientation==="vertical"?1:0,Y=t.shapeType==="box"?1:0,U={ShapeType:Y};Y===0?U.PointBase=t.pointBase||[0,0]:U.BoxBounds=t.boxBounds||[0,0,0,0],U.Base={ShapeType:Y,TransformPoint0:[1,0],TransformPoint1:[0,1],TransformPoint2:[0,0]};var he={KinsokuSet:[{Name:"PhotoshopKinsokuHard",NoStart:"?!)]},.:;",NoEnd:"([{",Keep:"",Hanging:".,"},{Name:"PhotoshopKinsokuSoft",NoStart:"",NoEnd:"",Keep:"",Hanging:".,"}],MojiKumiSet:[{InternalName:"Photoshop6MojiKumiSet1"},{InternalName:"Photoshop6MojiKumiSet2"},{InternalName:"Photoshop6MojiKumiSet3"},{InternalName:"Photoshop6MojiKumiSet4"}],TheNormalStyleSheet:0,TheNormalParagraphSheet:0,ParagraphSheetSet:[{Name:"Normal RGB",DefaultStyleSheet:0,Properties:Nc(Rt(Rt({},jc),t.paragraphStyle),g)}],StyleSheetSet:[{Name:"Normal RGB",StyleSheetData:I}],FontSet:g.map(function(te){return{Name:te.name,Script:te.script||0,FontType:te.type||0,Synthetic:te.synthetic||0}}),SuperscriptSize:(i=t.superscriptSize)!==null&&i!==void 0?i:.583,SuperscriptPosition:(s=t.superscriptPosition)!==null&&s!==void 0?s:.333,SubscriptSize:(o=t.subscriptSize)!==null&&o!==void 0?o:.583,SubscriptPosition:(a=t.subscriptPosition)!==null&&a!==void 0?a:.333,SmallCapSize:(l=t.smallCapSize)!==null&&l!==void 0?l:.7},re={EngineDict:{Editor:{Text:h},ParagraphRun:{DefaultRunData:{ParagraphSheet:{DefaultStyleSheet:0,Properties:{}},Adjustments:{Axis:[1,0,1],XY:[0,0]}},RunArray:v,RunLengthArray:m,IsJoinable:1},StyleRun:{DefaultRunData:{StyleSheet:{StyleSheetData:{}}},RunArray:C,RunLengthArray:P,IsJoinable:2},GridInfo:{GridIsOn:!!K.isOn,ShowGrid:!!K.show,GridSize:(c=K.size)!==null&&c!==void 0?c:18,GridLeading:(u=K.leading)!==null&&u!==void 0?u:22,GridColor:fp(K.color),GridLeadingFillColor:fp(K.color),AlignLineHeightToGridFlags:!!K.alignLineHeightToGridFlags},AntiAlias:Dx.indexOf((f=t.antiAlias)!==null&&f!==void 0?f:"sharp"),UseFractionalGlyphWidths:(d=t.useFractionalGlyphWidths)!==null&&d!==void 0?d:!0,Rendered:{Version:1,Shapes:{WritingDirection:Q,Children:[{ShapeType:Y,Procession:ce,Lines:{WritingDirection:Q,Children:[]},Cookie:{Photoshop:U}}]}}},ResourceDict:Rt({},he),DocumentResources:Rt({},he)};return re}var Lh={0:{uproot:!0,children:{0:{name:"Type"},1:{name:"Values"}}}},$g={0:{name:"Font"},1:{name:"FontSize"},2:{name:"FauxBold"},3:{name:"FauxItalic"},4:{name:"AutoLeading"},5:{name:"Leading"},6:{name:"HorizontalScale"},7:{name:"VerticalScale"},8:{name:"Tracking"},9:{name:"BaselineShift"},11:{name:"Kerning?"},12:{name:"FontCaps"},13:{name:"FontBaseline"},15:{name:"Strikethrough?"},16:{name:"Underline?"},18:{name:"Ligatures"},19:{name:"DLigatures"},23:{name:"Fractions"},24:{name:"Ordinals"},28:{name:"StylisticAlternates"},30:{name:"OldStyle?"},35:{name:"BaselineDirection"},38:{name:"Language"},52:{name:"NoBreak"},53:{name:"FillColor",children:Lh},54:{name:"StrokeColor",children:Lh},55:{children:{99:{uproot:!0}}},79:{children:Lh}},Bh={0:{name:"Justification"},1:{name:"FirstLineIndent"},2:{name:"StartIndent"},3:{name:"EndIndent"},4:{name:"SpaceBefore"},5:{name:"SpaceAfter"},7:{name:"AutoLeading"},9:{name:"AutoHyphenate"},10:{name:"HyphenatedWordSize"},11:{name:"PreHyphen"},12:{name:"PostHyphen"},13:{name:"ConsecutiveHyphens?"},14:{name:"Zone"},15:{name:"HypenateCapitalizedWords"},17:{name:"WordSpacing"},18:{name:"LetterSpacing"},19:{name:"GlyphSpacing"},32:{name:"StyleSheet",children:$g}},hb={name:"StyleSheetData",children:$g},_j={0:{name:"ResourceDict",children:{1:{name:"FontSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},2:{name:"FontType"}}}}}}}}},2:{name:"2",children:{}},3:{name:"MojiKumiSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"InternalName"}}}}}}},4:{name:"KinsokuSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{uproot:!0,children:{0:{name:"NoStart"},1:{name:"NoEnd"},2:{name:"Keep"},3:{name:"Hanging"},4:{name:"Name"}}}}}}}}},5:{name:"StyleSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},6:hb}}}}}},6:{name:"ParagraphSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{name:"Properties",children:Bh},6:{name:"DefaultStyleSheet"}}}}}}},8:{name:"TextFrameSet",children:{0:{uproot:!0,children:{0:{name:"path",children:{0:{name:"name"},1:{name:"bezierCurve",children:{0:{name:"controlPoints"}}},2:{name:"data",children:{0:{name:"type"},1:{name:"orientation"},2:{name:"frameMatrix"},4:{name:"4"},6:{name:"textRange"},7:{name:"rowGutter"},8:{name:"columnGutter"},9:{name:"9"},10:{name:"baselineAlignment",children:{0:{name:"flag"},1:{name:"min"}}},11:{name:"pathData",children:{1:{name:"1"},0:{name:"reversed"},2:{name:"2"},3:{name:"3"},4:{name:"spacing"},5:{name:"5"},6:{name:"6"},7:{name:"7"},18:{name:"18"}}},12:{name:"12"},13:{name:"13"}}},3:{name:"3"},97:{name:"uuid"}}}}}}},9:{name:"Predefined",children:{0:{children:{0:{uproot:!0}}},1:{children:{0:{uproot:!0}}}}}}},1:{name:"EngineDict",children:{0:{name:"0",children:{3:{name:"SuperscriptSize"},4:{name:"SuperscriptPosition"},5:{name:"SubscriptSize"},6:{name:"SubscriptPosition"},7:{name:"SmallCapSize"},8:{name:"UseFractionalGlyphWidths"},15:{children:{0:{uproot:!0}}}}},1:{name:"Editors?",children:{0:{name:"Editor",children:{0:{name:"Text"},5:{name:"ParagraphRun",children:{0:{name:"RunArray",children:{0:{name:"ParagraphSheet",children:{0:{uproot:!0,children:{0:{name:"0"},5:{name:"5",children:Bh},6:{name:"6"}}}}},1:{name:"RunLength"}}}}},6:{name:"StyleRun",children:{0:{name:"RunArray",children:{0:{name:"StyleSheet",children:{0:{uproot:!0,children:{6:hb}}}},1:{name:"RunLength"}}}}}}},1:{name:"FontVectorData ???"}}},2:{name:"StyleSheet",children:$g},3:{name:"ParagraphSheet",children:Bh}}}};function Aa(t,e){var n,r;if(t===null)return t;if(Array.isArray(t))return t.map(function(l){return Aa(l,e)});if(typeof t!="object")return t;for(var i={},s=0,o=Object.keys(t);s<o.length;s++){var a=o[s];if(e[a])if(e[a].uproot){a!=="99"&&(i=Aa(t[a],(n=e[a].children)!==null&&n!==void 0?n:{})),t[99]&&(i._type=t[99]);break}else i[e[a].name||a]=Aa(t[a],(r=e[a].children)!==null&&r!==void 0?r:{});else a==="99"?i._type=t[a]:i[a]=Aa(t[a],{})}return i}function wj(t){return Aa(t,_j)}var M=function(){return M=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},M.apply(this,arguments)},Mn="abcdefghijklmnopqrstuvwxyz",Gu={};function Le(t,e,n,r){var i={key:t,has:e,read:n,write:r};Gu[i.key]=i}function oa(t,e){Gu[t]=Gu[e]}function lt(t){return function(e){return e[t]!==void 0}}function jh(t){if(ve(t))throw new Error("Resource size above 4 GB limit at ".concat(t.offset.toString(16)));return ve(t)}function Nh(t,e){Se(t,0),Se(t,e)}Le("TySh",lt("text"),function(t,e,n){if(Ke(t)!==1)throw new Error("Invalid TySh version");for(var r=[],i=0;i<6;i++)r.push(tr(t));if(Ke(t)!==50)throw new Error("Invalid TySh text version");var s=Xe(t);if(Ke(t)!==1)throw new Error("Invalid TySh warp version");var o=Xe(t);if(e.text={transform:r,left:yr(t),top:yr(t),right:yr(t),bottom:yr(t),text:s["Txt "].replace(/\r/g,`
`),index:s.TextIndex||0,gridding:By.decode(s.textGridding),antiAlias:jy.decode(s.AntA),orientation:qa.decode(s.Ornt),warp:{style:Mg.decode(o.warpStyle),value:o.warpValue||0,perspective:o.warpPerspective||0,perspectiveOther:o.warpPerspectiveOther||0,rotate:qa.decode(o.warpRotate)}},s.bounds&&(e.text.bounds=Fy(s.bounds)),s.boundingBox&&(e.text.boundingBox=Fy(s.boundingBox)),s.EngineData){var a=Px(s.EngineData),l=yj(a);e.text=M(M({},e.text),l)}Te(t,n())},function(t,e){var n=e.text,r=n.warp||{},i=n.transform||[1,0,0,1,0,0],s=M(M(M({"Txt ":(n.text||"").replace(/\r?\n/g,"\r"),textGridding:By.encode(n.gridding),Ornt:qa.encode(n.orientation),AntA:jy.encode(n.antiAlias)},n.bounds?{bounds:Dy(n.bounds)}:{}),n.boundingBox?{boundingBox:Dy(n.boundingBox)}:{}),{TextIndex:n.index||0,EngineData:fj(bj(n))});nt(t,1);for(var o=0;o<6;o++)Hr(t,i[o]);nt(t,50),Ye(t,"","TxLr",s,"text"),nt(t,1),Ye(t,"","warp",Wu(r)),br(t,n.left),br(t,n.top),br(t,n.right),br(t,n.bottom)});Le("SoCo",function(t){return t.vectorFill!==void 0&&t.vectorStroke===void 0&&t.vectorFill.type==="color"},function(t,e){var n=Xe(t);e.vectorFill=Pl(n)},function(t,e){var n=Fl(e.vectorFill).descriptor;Ye(t,"","null",n)});Le("GdFl",function(t){return t.vectorFill!==void 0&&t.vectorStroke===void 0&&(t.vectorFill.type==="solid"||t.vectorFill.type==="noise")},function(t,e,n){var r=Xe(t);e.vectorFill=Pl(r),Te(t,n())},function(t,e){var n=Fl(e.vectorFill).descriptor;Ye(t,"","null",n)});Le("PtFl",function(t){return t.vectorFill!==void 0&&t.vectorStroke===void 0&&t.vectorFill.type==="pattern"},function(t,e){var n=Xe(t);e.vectorFill=Pl(n)},function(t,e){var n=Fl(e.vectorFill).descriptor;Ye(t,"","null",n)});Le("vscg",function(t){return t.vectorFill!==void 0&&t.vectorStroke!==void 0},function(t,e,n){dt(t);var r=Xe(t);e.vectorFill=Pl(r),Te(t,n())},function(t,e){var n=Fl(e.vectorFill),r=n.descriptor,i=n.key;Ue(t,i),Ye(t,"","null",r)});function Sj(t,e,n){var r=pr(t)*n,i=pr(t)*e,s=pr(t)*n,o=pr(t)*e,a=pr(t)*n,l=pr(t)*e;return[i,r,o,s,l,a]}function xj(t,e,n,r){gr(t,e[1]/r),gr(t,e[0]/n),gr(t,e[3]/r),gr(t,e[2]/n),gr(t,e[5]/r),gr(t,e[4]/n)}var Bx=["exclude","combine","subtract","intersect"];function Cj(t,e,n,r,i){for(var s=t.offset+i,o=e.paths,a=void 0;s-t.offset>=26;){var l=me(t);switch(l){case 0:case 3:{me(t);var c=Ke(t),u=me(t);Te(t,18),a={open:l===3,knots:[],fillRule:u===2?"non-zero":"even-odd"},c!==-1&&(a.operation=Bx[c]),o.push(a);break}case 1:case 2:case 4:case 5:a.knots.push({linked:l===1||l===4,points:Sj(t,n,r)});break;case 6:Te(t,24);break;case 7:{var f=pr(t),d=pr(t),h=pr(t),g=pr(t),p=pr(t);Te(t,4),e.clipboard={top:f,left:d,bottom:h,right:g,resolution:p};break}case 8:e.fillStartsWithAllPixels=!!me(t),Te(t,22);break;default:throw new Error("Invalid vmsk section")}}return o}Le("vmsk",lt("vectorMask"),function(t,e,n,r){var i=r.width,s=r.height;if(ve(t)!==3)throw new Error("Invalid vmsk version");e.vectorMask={paths:[]};var o=e.vectorMask,a=ve(t);o.invert=(a&1)!==0,o.notLink=(a&2)!==0,o.disable=(a&4)!==0,Cj(t,o,i,s,n()),Te(t,n())},function(t,e,n){var r=n.width,i=n.height,s=e.vectorMask,o=(s.invert?1:0)|(s.notLink?2:0)|(s.disable?4:0);Se(t,3),Se(t,o),pe(t,6),ot(t,24);var a=s.clipboard;a&&(pe(t,7),gr(t,a.top),gr(t,a.left),gr(t,a.bottom),gr(t,a.right),gr(t,a.resolution),ot(t,4)),pe(t,8),pe(t,s.fillStartsWithAllPixels?1:0),ot(t,22);for(var l=0,c=s.paths;l<c.length;l++){var u=c[l];pe(t,u.open?3:0),pe(t,u.knots.length),pe(t,u.operation?Bx.indexOf(u.operation):-1),pe(t,u.fillRule==="non-zero"?2:1),ot(t,18);for(var f=u.open?4:1,d=u.open?5:2,h=0,g=u.knots;h<g.length;h++){var p=g[h],v=p.linked,m=p.points;pe(t,v?f:d),xj(t,m,r,i)}}});oa("vsms","vmsk");Le("vowv",lt("vowv"),function(t,e){e.vowv=ve(t)},function(t,e){Se(t,e.vowv)});Le("vogk",lt("vectorOrigination"),function(t,e,n){if(Ie(t)!==1)throw new Error("Invalid vogk version");var r=Xe(t);e.vectorOrigination={keyDescriptorList:[]};for(var i=0,s=r.keyDescriptorList;i<s.length;i++){var o=s[i],a={};o.keyShapeInvalidated!=null&&(a.keyShapeInvalidated=o.keyShapeInvalidated),o.keyOriginType!=null&&(a.keyOriginType=o.keyOriginType),o.keyOriginResolution!=null&&(a.keyOriginResolution=o.keyOriginResolution),o.keyOriginShapeBBox&&(a.keyOriginShapeBoundingBox={top:Ki(o.keyOriginShapeBBox["Top "]),left:Ki(o.keyOriginShapeBBox.Left),bottom:Ki(o.keyOriginShapeBBox.Btom),right:Ki(o.keyOriginShapeBBox.Rght)});var l=o.keyOriginRRectRadii;l&&(a.keyOriginRRectRadii={topRight:st(l.topRight),topLeft:st(l.topLeft),bottomLeft:st(l.bottomLeft),bottomRight:st(l.bottomRight)});var c=o.keyOriginBoxCorners;c&&(a.keyOriginBoxCorners=[{x:c.rectangleCornerA.Hrzn,y:c.rectangleCornerA.Vrtc},{x:c.rectangleCornerB.Hrzn,y:c.rectangleCornerB.Vrtc},{x:c.rectangleCornerC.Hrzn,y:c.rectangleCornerC.Vrtc},{x:c.rectangleCornerD.Hrzn,y:c.rectangleCornerD.Vrtc}]);var u=o.Trnf;u&&(a.transform=[u.xx,u.xy,u.yx,u.yy,u.tx,u.ty]),e.vectorOrigination.keyDescriptorList.push(a)}Te(t,n())},function(t,e){for(var n=e.vectorOrigination,r={keyDescriptorList:[]},i=0;i<n.keyDescriptorList.length;i++){var s=n.keyDescriptorList[i];r.keyDescriptorList.push({});var o=r.keyDescriptorList[r.keyDescriptorList.length-1];s.keyOriginType!=null&&(o.keyOriginType=s.keyOriginType),s.keyOriginResolution!=null&&(o.keyOriginResolution=s.keyOriginResolution);var a=s.keyOriginRRectRadii;a&&(o.keyOriginRRectRadii={unitValueQuadVersion:1,topRight:_t(a.topRight,"topRight"),topLeft:_t(a.topLeft,"topLeft"),bottomLeft:_t(a.bottomLeft,"bottomLeft"),bottomRight:_t(a.bottomRight,"bottomRight")});var l=s.keyOriginShapeBoundingBox;l&&(o.keyOriginShapeBBox={unitValueQuadVersion:1,"Top ":_t(l.top,"top"),Left:_t(l.left,"left"),Btom:_t(l.bottom,"bottom"),Rght:_t(l.right,"right")});var c=s.keyOriginBoxCorners;c&&c.length===4&&(o.keyOriginBoxCorners={rectangleCornerA:{Hrzn:c[0].x,Vrtc:c[0].y},rectangleCornerB:{Hrzn:c[1].x,Vrtc:c[1].y},rectangleCornerC:{Hrzn:c[2].x,Vrtc:c[2].y},rectangleCornerD:{Hrzn:c[3].x,Vrtc:c[3].y}});var u=s.transform;u&&u.length===6&&(o.Trnf={xx:u[0],xy:u[1],yx:u[2],yy:u[3],tx:u[4],ty:u[5]}),s.keyShapeInvalidated!=null&&(o.keyShapeInvalidated=s.keyShapeInvalidated),o.keyOriginIndex=i}He(t,1),Ye(t,"","null",r)});Le("lmfx",function(t){return t.effects!==void 0&&$x(t.effects)},function(t,e,n){var r=ve(t);if(r!==0)throw new Error("Invalid lmfx version");var i=Xe(t);e.effects=Al(i,!!t.logMissingFeatures),Te(t,n())},function(t,e,n,r){var i=Ol(e.effects,!!r.logMissingFeatures,!0);Se(t,0),Ye(t,"","null",i)});Le("lrFX",lt("effects"),function(t,e,n){e.effects||(e.effects=aj(t)),Te(t,n())},function(t,e){lj(t,e.effects)});Le("luni",lt("name"),function(t,e,n){if(n()>4){var r=ve(t);n()>=r*2?e.name=Bg(t,r):t.logDevFeatures&&t.log("name in luni section is too long")}else t.logDevFeatures&&t.log("empty luni section");Te(t,n())},function(t,e){Ln(t,e.name)});Le("lnsr",lt("nameSource"),function(t,e){return e.nameSource=dt(t)},function(t,e){return Ue(t,e.nameSource)});Le("lyid",lt("id"),function(t,e){e.id=ve(t)},function(t,e,n,r){for(var i=e.id;r.layerIds.has(i);)i+=100;Se(t,i),r.layerIds.add(i),r.layerToId.set(e,i)});Le("lsct",lt("sectionDivider"),function(t,e,n){e.sectionDivider={type:ve(t)},n()&&(rs(t,"8BIM"),e.sectionDivider.key=dt(t)),n()&&(e.sectionDivider.subType=ve(t))},function(t,e){Se(t,e.sectionDivider.type),e.sectionDivider.key&&(Ue(t,"8BIM"),Ue(t,e.sectionDivider.key),e.sectionDivider.subType!==void 0&&Se(t,e.sectionDivider.subType))});oa("lsdk","lsct");Le("clbl",lt("blendClippendElements"),function(t,e){e.blendClippendElements=!!xe(t),Te(t,3)},function(t,e){Oe(t,e.blendClippendElements?1:0),ot(t,3)});Le("infx",lt("blendInteriorElements"),function(t,e){e.blendInteriorElements=!!xe(t),Te(t,3)},function(t,e){Oe(t,e.blendInteriorElements?1:0),ot(t,3)});Le("knko",lt("knockout"),function(t,e){e.knockout=!!xe(t),Te(t,3)},function(t,e){Oe(t,e.knockout?1:0),ot(t,3)});Le("lmgm",lt("layerMaskAsGlobalMask"),function(t,e){e.layerMaskAsGlobalMask=!!xe(t),Te(t,3)},function(t,e){Oe(t,e.layerMaskAsGlobalMask?1:0),ot(t,3)});Le("lspf",lt("protected"),function(t,e){var n=ve(t);e.protected={transparency:(n&1)!==0,composite:(n&2)!==0,position:(n&4)!==0},n&8&&(e.protected.artboards=!0)},function(t,e){var n=(e.protected.transparency?1:0)|(e.protected.composite?2:0)|(e.protected.position?4:0)|(e.protected.artboards?8:0);Se(t,n)});Le("lclr",lt("layerColor"),function(t,e){var n=me(t);Te(t,6),e.layerColor=my[n]},function(t,e){var n=my.indexOf(e.layerColor);pe(t,n===-1?0:n),ot(t,6)});Le("shmd",function(t){return t.timestamp!==void 0||t.animationFrames!==void 0||t.animationFrameFlags!==void 0||t.timeline!==void 0||t.comps!==void 0},function(t,e,n){for(var r=ve(t),i=function(o){rs(t,"8BIM");var a=dt(t);xe(t),Te(t,3),Nn(t,1,function(l){if(a==="cust"){var c=Xe(t);c.layerTime!==void 0&&(e.timestamp=c.layerTime)}else if(a==="mlst"){var c=Xe(t);e.animationFrames=[];for(var u=0;u<c.LaSt.length;u++){var f=c.LaSt[u],d={frames:f.FrLs};f.enab!==void 0&&(d.enable=f.enab),f.Ofst&&(d.offset=Xa(f.Ofst)),f.FXRf&&(d.referencePoint=Xa(f.FXRf)),f.Lefx&&(d.effects=Al(f.Lefx,!!t.logMissingFeatures)),f.blendOptions&&f.blendOptions.Opct&&(d.opacity=ht(f.blendOptions.Opct)),e.animationFrames.push(d)}}else if(a==="mdyn"){me(t);var h=xe(t),g=xe(t);e.animationFrameFlags={propagateFrameOne:!h,unifyLayerPosition:(g&1)!==0,unifyLayerStyle:(g&2)!==0,unifyLayerVisibility:(g&4)!==0}}else if(a==="tmln"){var c=Xe(t),p=c.timeScope,v={start:mn(p.Strt),duration:mn(p.duration),inTime:mn(p.inTime),outTime:mn(p.outTime),autoScope:c.autoScope,audioLevel:c.audioLevel};c.trackList&&(v.tracks=MS(c.trackList,!!t.logMissingFeatures)),e.timeline=v}else if(a==="cmls"){var c=Xe(t);e.comps={settings:[]},c.origFXRefPoint&&(e.comps.originalEffectsReferencePoint={x:c.origFXRefPoint.Hrzn,y:c.origFXRefPoint.Vrtc});for(var m=0,y=c.layerSettings;m<y.length;m++){var _=y[m];e.comps.settings.push({compList:_.compList});var b=e.comps.settings[e.comps.settings.length-1];"enab"in _&&(b.enabled=_.enab),_.Ofst&&(b.offset={x:_.Ofst.Hrzn,y:_.Ofst.Vrtc}),_.FXRefPoint&&(b.effectsReferencePoint={x:_.FXRefPoint.Hrzn,y:_.FXRefPoint.Vrtc})}}else if(a==="extn"){var c=Xe(t);t.logMissingFeatures&&t.log('Unhandled "shmd" section key',a)}else t.logMissingFeatures&&t.log('Unhandled "shmd" section key',a);Te(t,l())})},s=0;s<r;s++)i();Te(t,n())},function(t,e,n,r){var i=e.animationFrames,s=e.animationFrameFlags,o=e.timestamp,a=e.timeline,l=e.comps,c=0;i&&c++,s&&c++,a&&c++,o!==void 0&&c++,l&&c++,Se(t,c),i&&(Ue(t,"8BIM"),Ue(t,"mlst"),Oe(t,0),ot(t,3),Ss(t,2,function(){for(var u,f={LaID:(u=e.id)!==null&&u!==void 0?u:0,LaSt:[]},d=0;d<i.length;d++){var h=i[d],g={};h.enable!==void 0&&(g.enab=h.enable),g.FrLs=h.frames,h.offset&&(g.Ofst=Ya(h.offset)),h.referencePoint&&(g.FXRf=Ya(h.referencePoint)),h.effects&&(g.Lefx=Ol(h.effects,!1,!1)),h.opacity!==void 0&&(g.blendOptions={Opct:$t(h.opacity)}),f.LaSt.push(g)}Ye(t,"","null",f)},!0)),s&&(Ue(t,"8BIM"),Ue(t,"mdyn"),Oe(t,0),ot(t,3),Ss(t,2,function(){pe(t,0),Oe(t,s.propagateFrameOne?0:15),Oe(t,(s.unifyLayerPosition?1:0)|(s.unifyLayerStyle?2:0)|(s.unifyLayerVisibility?4:0))})),a&&(Ue(t,"8BIM"),Ue(t,"tmln"),Oe(t,0),ot(t,3),Ss(t,2,function(){var u={Vrsn:1,timeScope:{Vrsn:1,Strt:a.start,duration:a.duration,inTime:a.inTime,outTime:a.outTime},autoScope:a.autoScope,audioLevel:a.audioLevel};a.tracks&&(u.trackList=RS(a.tracks));var f=r.layerToId.get(e)||e.id;if(!f)throw new Error("You need to provide layer.id value whan writing document with animations");u.LyrI=f,Ye(t,"","null",u,"anim")},!0)),o!==void 0&&(Ue(t,"8BIM"),Ue(t,"cust"),Oe(t,0),ot(t,3),Ss(t,2,function(){var u={layerTime:o};Ye(t,"","metadata",u)},!0)),l&&(Ue(t,"8BIM"),Ue(t,"cmls"),Oe(t,0),ot(t,3),Ss(t,2,function(){var u=r.layerToId.get(e)||e.id;if(!u)throw new Error("You need to provide layer.id value whan writing document with layer comps");var f={};l.originalEffectsReferencePoint&&(f.origFXRefPoint={Hrzn:l.originalEffectsReferencePoint.x,Vrtc:l.originalEffectsReferencePoint.y}),f.LyrI=u,f.layerSettings=[];for(var d=0,h=l.settings;d<h.length;d++){var g=h[d],p={};g.enabled!==void 0&&(p.enab=g.enabled),g.offset&&(p.Ofst={Hrzn:g.offset.x,Vrtc:g.offset.y}),g.effectsReferencePoint&&(p.FXRefPoint={Hrzn:g.effectsReferencePoint.x,Vrtc:g.effectsReferencePoint.y}),p.compList=g.compList,f.layerSettings.push(p)}Ye(t,"","null",f)},!0))});Le("PxSc",function(){return!1},function(t,e){var n=Xe(t,!0);n.pixelSourceType===1986285651?e.pixelSource={type:"vdPS",origin:{x:n.origin.Hrzn,y:n.origin.Vrtc},interpretation:{interpretAlpha:n.interpretation.interpretAlpha.split(".")[1],profile:n.interpretation.profile},frameReader:{type:"QTFR",link:{name:n.frameReader["Lnk "]["Nm  "],fullPath:n.frameReader["Lnk "].fullPath,originalPath:n.frameReader["Lnk "].originalPath,relativePath:n.frameReader["Lnk "].relPath,alias:n.frameReader["Lnk "].alis},mediaDescriptor:n.frameReader.mediaDescriptor},showAlteredVideo:n.showAlteredVideo}:t.log("Unknown pixelSourceType")},function(t,e){var n=e.pixelSource,r={_name:"",_classID:"PixelSource",pixelSourceType:1986285651,descVersion:1,origin:{Hrzn:n.origin.x,Vrtc:n.origin.y},interpretation:{_name:"",_classID:"footageInterpretation",Vrsn:1,interpretAlpha:"alphaInterpretation.".concat(n.interpretation.interpretAlpha),profile:n.interpretation.profile},frameReader:{_name:"",_classID:"FrameReader",frameReaderType:1364477522,descVersion:1,"Lnk ":{_name:"",_classID:"ExternalFileLink",descVersion:2,"Nm  ":n.frameReader.link.name,fullPath:n.frameReader.link.fullPath,originalPath:n.frameReader.link.originalPath,alis:n.frameReader.link.alias,relPath:n.frameReader.link.relativePath},mediaDescriptor:n.frameReader.mediaDescriptor},showAlteredVideo:n.showAlteredVideo};Ye(t,"","PixelSource",r)});Le("vstk",lt("vectorStroke"),function(t,e,n){var r=Xe(t);e.vectorStroke={strokeEnabled:r.strokeEnabled,fillEnabled:r.fillEnabled,lineWidth:st(r.strokeStyleLineWidth),lineDashOffset:st(r.strokeStyleLineDashOffset),miterLimit:r.strokeStyleMiterLimit,lineCapType:Vy.decode(r.strokeStyleLineCapType),lineJoinType:Gy.decode(r.strokeStyleLineJoinType),lineAlignment:Wy.decode(r.strokeStyleLineAlignment),scaleLock:r.strokeStyleScaleLock,strokeAdjust:r.strokeStyleStrokeAdjust,lineDashSet:r.strokeStyleLineDashSet.map(st),blendMode:er.decode(r.strokeStyleBlendMode),opacity:ht(r.strokeStyleOpacity),content:Pl(r.strokeStyleContent),resolution:r.strokeStyleResolution},Te(t,n())},function(t,e){var n,r,i,s=e.vectorStroke,o={strokeStyleVersion:2,strokeEnabled:!!s.strokeEnabled,fillEnabled:!!s.fillEnabled,strokeStyleLineWidth:s.lineWidth||{value:3,units:"Points"},strokeStyleLineDashOffset:s.lineDashOffset||{value:0,units:"Points"},strokeStyleMiterLimit:(n=s.miterLimit)!==null&&n!==void 0?n:100,strokeStyleLineCapType:Vy.encode(s.lineCapType),strokeStyleLineJoinType:Gy.encode(s.lineJoinType),strokeStyleLineAlignment:Wy.encode(s.lineAlignment),strokeStyleScaleLock:!!s.scaleLock,strokeStyleStrokeAdjust:!!s.strokeAdjust,strokeStyleLineDashSet:s.lineDashSet||[],strokeStyleBlendMode:er.encode(s.blendMode),strokeStyleOpacity:$t((r=s.opacity)!==null&&r!==void 0?r:1),strokeStyleContent:Fl(s.content||{type:"color",color:{r:0,g:0,b:0}}).descriptor,strokeStyleResolution:(i=s.resolution)!==null&&i!==void 0?i:72};Ye(t,"","strokeStyle",o)});Le("artb",lt("artboard"),function(t,e,n){var r=Xe(t),i=r.artboardRect;e.artboard={rect:{top:i["Top "],left:i.Left,bottom:i.Btom,right:i.Rght},guideIndices:r.guideIndeces,presetName:r.artboardPresetName,color:xr(r["Clr "]),backgroundType:r.artboardBackgroundType},Te(t,n())},function(t,e){var n,r=e.artboard,i=r.rect,s={artboardRect:{"Top ":i.top,Left:i.left,Btom:i.bottom,Rght:i.right},guideIndeces:r.guideIndices||[],artboardPresetName:r.presetName||"","Clr ":Cr(r.color),artboardBackgroundType:(n=r.backgroundType)!==null&&n!==void 0?n:1};Ye(t,"","artboard",s)});Le("sn2P",lt("usingAlignedRendering"),function(t,e){return e.usingAlignedRendering=!!ve(t)},function(t,e){return Se(t,e.usingAlignedRendering?1:0)});var go=["unknown","vector","raster","image stack"];function jx(t){var e,n,r,i,s,o,a=M(M({style:Mg.decode(t.warpStyle)},t.warpValues?{values:t.warpValues}:{value:t.warpValue||0}),{perspective:t.warpPerspective||0,perspectiveOther:t.warpPerspectiveOther||0,rotate:qa.decode(t.warpRotate),bounds:t.bounds&&{top:Ki(t.bounds["Top "]),left:Ki(t.bounds.Left),bottom:Ki(t.bounds.Btom),right:Ki(t.bounds.Rght)},uOrder:t.uOrder,vOrder:t.vOrder});(t.deformNumRows!=null||t.deformNumCols!=null)&&(a.deformNumRows=t.deformNumRows,a.deformNumCols=t.deformNumCols);var l=t.customEnvelopeWarp;if(l){a.customEnvelopeWarp={meshPoints:[]};for(var c=((e=l.meshPoints.find(function(d){return d.type==="Hrzn"}))===null||e===void 0?void 0:e.values)||[],u=((n=l.meshPoints.find(function(d){return d.type==="Vrtc"}))===null||n===void 0?void 0:n.values)||[],f=0;f<c.length;f++)a.customEnvelopeWarp.meshPoints.push({x:c[f],y:u[f]});(l.quiltSliceX||l.quiltSliceY)&&(a.customEnvelopeWarp.quiltSliceX=((i=(r=l.quiltSliceX)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.values)||[],a.customEnvelopeWarp.quiltSliceY=((o=(s=l.quiltSliceY)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.values)||[])}return a}function Ug(t){var e,n;return t.deformNumCols!=null||t.deformNumRows!=null||((e=t.customEnvelopeWarp)===null||e===void 0?void 0:e.quiltSliceX)||((n=t.customEnvelopeWarp)===null||n===void 0?void 0:n.quiltSliceY)}function Wu(t){var e=t.bounds,n=M(M({warpStyle:Mg.encode(t.style)},t.values?{warpValues:t.values}:{warpValue:t.value||0}),{warpPerspective:t.perspective||0,warpPerspectiveOther:t.perspectiveOther||0,warpRotate:qa.encode(t.rotate),bounds:{"Top ":_t(e&&e.top||{units:"Pixels",value:0},"bounds.top"),Left:_t(e&&e.left||{units:"Pixels",value:0},"bounds.left"),Btom:_t(e&&e.bottom||{units:"Pixels",value:0},"bounds.bottom"),Rght:_t(e&&e.right||{units:"Pixels",value:0},"bounds.right")},uOrder:t.uOrder||0,vOrder:t.vOrder||0}),r=Ug(t);if(r){var i=n;i.deformNumRows=t.deformNumRows||0,i.deformNumCols=t.deformNumCols||0}var s=t.customEnvelopeWarp;if(s){var o=s.meshPoints||[];if(r){var i=n;i.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",quiltSliceX:[{type:"quiltSliceX",values:s.quiltSliceX||[]}],quiltSliceY:[{type:"quiltSliceY",values:s.quiltSliceY||[]}],meshPoints:[{type:"Hrzn",values:o.map(function(l){return l.x})},{type:"Vrtc",values:o.map(function(l){return l.y})}]}}else n.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",meshPoints:[{type:"Hrzn",values:o.map(function(a){return a.x})},{type:"Vrtc",values:o.map(function(a){return a.y})}]}}return n}Le("PlLd",lt("placedLayer"),function(t,e,n){if(dt(t)!=="plcL")throw new Error("Invalid PlLd signature");if(Ie(t)!==3)throw new Error("Invalid PlLd version");var r=Ji(t,1),i=Ie(t),s=Ie(t);Ie(t);var o=Ie(t);if(!go[o])throw new Error("Invalid PlLd type");for(var a=[],l=0;l<8;l++)a.push(tr(t));var c=Ie(t);if(c!==0)throw new Error("Invalid Warp version ".concat(c));var u=Xe(t);e.placedLayer=e.placedLayer||{id:r,type:go[o],pageNumber:i,totalPages:s,transform:a,warp:jx(u)},Te(t,n())},function(t,e){var n=e.placedLayer;if(Ue(t,"plcL"),He(t,3),!n.id||typeof n.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(n.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if(To(t,n.id,1),He(t,1),He(t,1),He(t,16),go.indexOf(n.type)===-1)throw new Error("Invalid placedLayer type");He(t,go.indexOf(n.type));for(var r=0;r<8;r++)Hr(t,n.transform[r]);He(t,0);var i=Nx(n),s=Ug(i),o=s?"quiltWarp":"warp";Ye(t,"",o,Wu(i),o)});function Tj(t){return new Float32Array(t.buffer.slice(t.byteOffset),0,t.byteLength/4)}function Ej(t){return new Uint32Array(t.buffer.slice(t.byteOffset),0,t.byteLength/4)}function zh(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}function au(t){for(var e=[],n=0;n<t.length;n+=2)e.push({x:t[n],y:t[n+1]});return e}function ba(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].x,t[n].y);return e}function db(t){return au(Tj(t))}function _a(t){return{x:st(t.Hrzn),y:st(t.Vrtc)}}function wa(t){return{_name:"",_classID:"Pnt ",Hrzn:_t(t.x,"x"),Vrtc:_t(t.y,"y")}}function kj(t,e){var n={name:t["Nm  "],opacity:ht(t.blendOptions.Opct),blendMode:er.decode(t.blendOptions["Md  "]),enabled:t.enab,hasOptions:t.hasoptions,foregroundColor:xr(t.FrgC),backgroundColor:xr(t.BckC)};if("Fltr"in t)switch(t.Fltr._classID){case"boxblur":return M(M({},n),{type:"box blur",filter:{radius:st(t.Fltr["Rds "])}});case"GsnB":return M(M({},n),{type:"gaussian blur",filter:{radius:st(t.Fltr["Rds "])}});case"MtnB":return M(M({},n),{type:"motion blur",filter:{angle:t.Fltr.Angl,distance:st(t.Fltr.Dstn)}});case"RdlB":return M(M({},n),{type:"radial blur",filter:{amount:t.Fltr.Amnt,method:qS.decode(t.Fltr.BlrM),quality:ZS.decode(t.Fltr.BlrQ)}});case"shapeBlur":return M(M({},n),{type:"shape blur",filter:{radius:st(t.Fltr["Rds "]),customShape:{name:t.Fltr.customShape["Nm  "],id:t.Fltr.customShape.Idnt}}});case"SmrB":return M(M({},n),{type:"smart blur",filter:{radius:t.Fltr["Rds "],threshold:t.Fltr.Thsh,quality:QS.decode(t.Fltr.SmBQ),mode:JS.decode(t.Fltr.SmBM)}});case"surfaceBlur":return M(M({},n),{type:"surface blur",filter:{radius:st(t.Fltr["Rds "]),threshold:t.Fltr.Thsh}});case"Dspl":return M(M({},n),{type:"displace",filter:{horizontalScale:t.Fltr.HrzS,verticalScale:t.Fltr.VrtS,displacementMap:ex.decode(t.Fltr.DspM),undefinedAreas:Co.decode(t.Fltr.UndA),displacementFile:{signature:t.Fltr.DspF.sig,path:t.Fltr.DspF.path}}});case"Pnch":return M(M({},n),{type:"pinch",filter:{amount:t.Fltr.Amnt}});case"Plr ":return M(M({},n),{type:"polar coordinates",filter:{conversion:tx.decode(t.Fltr.Cnvr)}});case"Rple":return M(M({},n),{type:"ripple",filter:{amount:t.Fltr.Amnt,size:nx.decode(t.Fltr.RplS)}});case"Shr ":return M(M({},n),{type:"shear",filter:{shearPoints:t.Fltr.ShrP.map(function(a){return{x:a.Hrzn,y:a.Vrtc}}),shearStart:t.Fltr.ShrS,shearEnd:t.Fltr.ShrE,undefinedAreas:Co.decode(t.Fltr.UndA)}});case"Sphr":return M(M({},n),{type:"spherize",filter:{amount:t.Fltr.Amnt,mode:rx.decode(t.Fltr.SphM)}});case"Twrl":return M(M({},n),{type:"twirl",filter:{angle:t.Fltr.Angl}});case"Wave":return M(M({},n),{type:"wave",filter:{numberOfGenerators:t.Fltr.NmbG,type:ix.decode(t.Fltr.Wvtp),wavelength:{min:t.Fltr.WLMn,max:t.Fltr.WLMx},amplitude:{min:t.Fltr.AmMn,max:t.Fltr.AmMx},scale:{x:t.Fltr.SclH,y:t.Fltr.SclV},randomSeed:t.Fltr.RndS,undefinedAreas:Co.decode(t.Fltr.UndA)}});case"ZgZg":return M(M({},n),{type:"zigzag",filter:{amount:t.Fltr.Amnt,ridges:t.Fltr.NmbR,style:sx.decode(t.Fltr.ZZTy)}});case"AdNs":return M(M({},n),{type:"add noise",filter:{amount:ht(t.Fltr.Nose),distribution:ox.decode(t.Fltr.Dstr),monochromatic:t.Fltr.Mnch,randomSeed:t.Fltr.FlRs}});case"DstS":return M(M({},n),{type:"dust and scratches",filter:{radius:t.Fltr["Rds "],threshold:t.Fltr.Thsh}});case"Mdn ":return M(M({},n),{type:"median",filter:{radius:st(t.Fltr["Rds "])}});case"denoise":return M(M({},n),{type:"reduce noise",filter:{preset:t.Fltr.preset,removeJpegArtifact:t.Fltr.removeJPEGArtifact,reduceColorNoise:ht(t.Fltr.ClNs),sharpenDetails:ht(t.Fltr.Shrp),channelDenoise:t.Fltr.channelDenoise.map(function(a){return M({channels:a.Chnl.map(Za.decode),amount:a.Amnt},a.EdgF?{preserveDetails:a.EdgF}:{})})}});case"ClrH":return M(M({},n),{type:"color halftone",filter:{radius:t.Fltr["Rds "],angle1:t.Fltr.Ang1,angle2:t.Fltr.Ang2,angle3:t.Fltr.Ang3,angle4:t.Fltr.Ang4}});case"Crst":return M(M({},n),{type:"crystallize",filter:{cellSize:t.Fltr.ClSz,randomSeed:t.Fltr.FlRs}});case"Mztn":return M(M({},n),{type:"mezzotint",filter:{type:ax.decode(t.Fltr.MztT),randomSeed:t.Fltr.FlRs}});case"Msc ":return M(M({},n),{type:"mosaic",filter:{cellSize:st(t.Fltr.ClSz)}});case"Pntl":return M(M({},n),{type:"pointillize",filter:{cellSize:t.Fltr.ClSz,randomSeed:t.Fltr.FlRs}});case"Clds":return M(M({},n),{type:"clouds",filter:{randomSeed:t.Fltr.FlRs}});case"DfrC":return M(M({},n),{type:"difference clouds",filter:{randomSeed:t.Fltr.FlRs}});case"Fbrs":return M(M({},n),{type:"fibers",filter:{variance:t.Fltr.Vrnc,strength:t.Fltr.Strg,randomSeed:t.Fltr.RndS}});case"LnsF":return M(M({},n),{type:"lens flare",filter:{brightness:t.Fltr.Brgh,position:{x:t.Fltr.FlrC.Hrzn,y:t.Fltr.FlrC.Vrtc},lensType:lx.decode(t.Fltr["Lns "])}});case"smartSharpen":return M(M({},n),{type:"smart sharpen",filter:{amount:ht(t.Fltr.Amnt),radius:st(t.Fltr["Rds "]),threshold:t.Fltr.Thsh,angle:t.Fltr.Angl,moreAccurate:t.Fltr.moreAccurate,blur:cx.decode(t.Fltr.blur),preset:t.Fltr.preset,shadow:{fadeAmount:ht(t.Fltr.sdwM.Amnt),tonalWidth:ht(t.Fltr.sdwM.Wdth),radius:t.Fltr.sdwM["Rds "]},highlight:{fadeAmount:ht(t.Fltr.hglM.Amnt),tonalWidth:ht(t.Fltr.hglM.Wdth),radius:t.Fltr.hglM["Rds "]}}});case"UnsM":return M(M({},n),{type:"unsharp mask",filter:{amount:ht(t.Fltr.Amnt),radius:st(t.Fltr["Rds "]),threshold:t.Fltr.Thsh}});case"Dfs ":return M(M({},n),{type:"diffuse",filter:{mode:ux.decode(t.Fltr["Md  "]),randomSeed:t.Fltr.FlRs}});case"Embs":return M(M({},n),{type:"emboss",filter:{angle:t.Fltr.Angl,height:t.Fltr.Hght,amount:t.Fltr.Amnt}});case"Extr":return M(M({},n),{type:"extrude",filter:{type:fx.decode(t.Fltr.ExtT),size:t.Fltr.ExtS,depth:t.Fltr.ExtD,depthMode:hx.decode(t.Fltr.ExtR),randomSeed:t.Fltr.FlRs,solidFrontFaces:t.Fltr.ExtF,maskIncompleteBlocks:t.Fltr.ExtM}});case"Tls ":return M(M({},n),{type:"tiles",filter:{numberOfTiles:t.Fltr.TlNm,maximumOffset:t.Fltr.TlOf,fillEmptyAreaWith:dx.decode(t.Fltr.FlCl),randomSeed:t.Fltr.FlRs}});case"TrcC":return M(M({},n),{type:"trace contour",filter:{level:t.Fltr["Lvl "],edge:px.decode(t.Fltr["Edg "])}});case"Wnd ":return M(M({},n),{type:"wind",filter:{method:gx.decode(t.Fltr.WndM),direction:mx.decode(t.Fltr.Drct)}});case"Dntr":return M(M({},n),{type:"de-interlace",filter:{eliminate:vx.decode(t.Fltr.IntE),newFieldsBy:yx.decode(t.Fltr.IntC)}});case"Cstm":return M(M({},n),{type:"custom",filter:{scale:t.Fltr["Scl "],offset:t.Fltr.Ofst,matrix:t.Fltr.Mtrx}});case"HghP":return M(M({},n),{type:"high pass",filter:{radius:st(t.Fltr["Rds "])}});case"Mxm ":return M(M({},n),{type:"maximum",filter:{radius:st(t.Fltr["Rds "])}});case"Mnm ":return M(M({},n),{type:"minimum",filter:{radius:st(t.Fltr["Rds "])}});case"Ofst":return M(M({},n),{type:"offset",filter:{horizontal:t.Fltr.Hrzn,vertical:t.Fltr.Vrtc,undefinedAreas:bx.decode(t.Fltr["Fl  "])}});case"rigidTransform":return M(M({},n),{type:"puppet",filter:{rigidType:t.Fltr.rigidType,bounds:[{x:t.Fltr.PuX0,y:t.Fltr.PuY0},{x:t.Fltr.PuX1,y:t.Fltr.PuY1},{x:t.Fltr.PuX2,y:t.Fltr.PuY2},{x:t.Fltr.PuX3,y:t.Fltr.PuY3}],puppetShapeList:t.Fltr.puppetShapeList.map(function(a){return{rigidType:a.rigidType,originalVertexArray:db(a.originalVertexArray),deformedVertexArray:db(a.deformedVertexArray),indexArray:Array.from(Ej(a.indexArray)),pinOffsets:au(a.pinOffsets),posFinalPins:au(a.posFinalPins),pinVertexIndices:a.pinVertexIndices,selectedPin:a.selectedPin,pinPosition:au(a.PinP),pinRotation:a.PnRt,pinOverlay:a.PnOv,pinDepth:a.PnDp,meshQuality:a.meshQuality,meshExpansion:a.meshExpansion,meshRigidity:a.meshRigidity,imageResolution:a.imageResolution,meshBoundaryPath:{pathComponents:a.meshBoundaryPath.pathComponents.map(function(l){return{shapeOperation:l.shapeOperation.split(".")[1],paths:l.SbpL.map(function(c){return{closed:c.Clsp,points:c["Pts "].map(function(u){return{anchor:_a(u.Anch),forward:_a(u["Fwd "]),backward:_a(u["Bwd "]),smooth:u.Smoo}})}})}})}}})}});case"PbPl":{for(var r=[],i=t.Fltr,s=0;s<Mn.length&&i["PN".concat(Mn[s],"a")];s++)for(var o=0;o<Mn.length&&i["PN".concat(Mn[s]).concat(Mn[o])];o++)r.push({name:i["PN".concat(Mn[s]).concat(Mn[o])],value:i["PF".concat(Mn[s]).concat(Mn[o])]});return M(M({},n),{type:"oil paint plugin",filter:{name:t.Fltr.KnNm,gpu:t.Fltr.GpuY,lighting:t.Fltr.LIWy,parameters:r}})}case"HsbP":return M(M({},n),{type:"hsb/hsl",filter:{inputMode:Vu.decode(t.Fltr.Inpt),rowOrder:Vu.decode(t.Fltr.Otpt)}});case"oilPaint":return M(M({},n),{type:"oil paint",filter:{lightingOn:t.Fltr.lightingOn,stylization:t.Fltr.stylization,cleanliness:t.Fltr.cleanliness,brushScale:t.Fltr.brushScale,microBrush:t.Fltr.microBrush,lightDirection:t.Fltr.LghD,specularity:t.Fltr.specularity}});case"LqFy":return M(M({},n),{type:"liquify",filter:{liquifyMesh:t.Fltr.LqMe}});case"perspectiveWarpTransform":return M(M({},n),{type:"perspective warp",filter:{vertices:t.Fltr.vertices.map(_a),warpedVertices:t.Fltr.warpedVertices.map(_a),quads:t.Fltr.quads.map(function(a){return a.indices})}});case"Crvs":return M(M({},n),{type:"curves",filter:M({presetKind:_x.decode(t.Fltr.presetKind)},t.Fltr.Adjs?{adjustments:t.Fltr.Adjs.map(function(a){var l=a.Chnl.map(Za.decode);if(a["Crv "])return{channels:l,curve:a["Crv "].map(function(c){var u={x:c.Hrzn,y:c.Vrtc};return c.Cnty&&(u.curved=!0),u})};if(a.Mpng)return{channels:l,values:a.Mpng};throw new Error("Unknown curve adjustment")})}:{})});case"BrgC":return M(M({},n),{type:"brightness/contrast",filter:{brightness:t.Fltr.Brgh,contrast:t.Fltr.Cntr,useLegacy:!!t.Fltr.useLegacy}});default:if(e.throwForMissingFeatures)throw new Error("Unknown filter classId: ".concat(t.Fltr._classID));return}else switch(t.filterID){case 1098281575:return M(M({},n),{type:"average"});case 1114403360:return M(M({},n),{type:"blur"});case 1114403405:return M(M({},n),{type:"blur more"});case 1148416099:return M(M({},n),{type:"despeckle"});case 1180922912:return M(M({},n),{type:"facet"});case 1181902701:return M(M({},n),{type:"fragment"});case 1399353968:return M(M({},n),{type:"sharpen"});case 1399353925:return M(M({},n),{type:"sharpen edges"});case 1399353933:return M(M({},n),{type:"sharpen more"});case 1181639749:return M(M({},n),{type:"find edges"});case 1399616122:return M(M({},n),{type:"solarize"});case 1314149187:return M(M({},n),{type:"ntsc colors"});case 1231976050:return M(M({},n),{type:"invert"});default:if(e.throwForMissingFeatures)throw new Error("Unknown filterID: ".concat(t.filterID))}}function Oj(t,e){return{enabled:t.enab,validAtPosition:t.validAtPosition,maskEnabled:t.filterMaskEnable,maskLinked:t.filterMaskLinked,maskExtendWithWhite:t.filterMaskExtendWithWhite,list:t.filterFXList.map(function(n){return kj(n,e)}).filter(function(n){return!!n})}}function Dr(t){return _t(t.radius,"radius")}function Aj(t){var e={_name:"",_classID:"filterFX","Nm  ":t.name,blendOptions:{_name:"",_classID:"blendOptions",Opct:qn(t.opacity),"Md  ":er.encode(t.blendMode)},enab:t.enabled,hasoptions:t.hasOptions,FrgC:Cr(t.foregroundColor),BckC:Cr(t.backgroundColor)};switch(t.type){case"average":return M(M({},e),{filterID:1098281575});case"blur":return M(M({},e),{filterID:1114403360});case"blur more":return M(M({},e),{filterID:1114403405});case"box blur":return M(M({},e),{Fltr:{_name:"Box Blur",_classID:"boxblur","Rds ":Dr(t.filter)},filterID:697});case"gaussian blur":return M(M({},e),{Fltr:{_name:"Gaussian Blur",_classID:"GsnB","Rds ":Dr(t.filter)},filterID:1198747202});case"motion blur":return M(M({},e),{Fltr:{_name:"Motion Blur",_classID:"MtnB",Angl:t.filter.angle,Dstn:_t(t.filter.distance,"distance")},filterID:1299476034});case"radial blur":return M(M({},e),{Fltr:{_name:"Radial Blur",_classID:"RdlB",Amnt:t.filter.amount,BlrM:qS.encode(t.filter.method),BlrQ:ZS.encode(t.filter.quality)},filterID:1382313026});case"shape blur":return M(M({},e),{Fltr:{_name:"Shape Blur",_classID:"shapeBlur","Rds ":Dr(t.filter),customShape:{_name:"",_classID:"customShape","Nm  ":t.filter.customShape.name,Idnt:t.filter.customShape.id}},filterID:702});case"smart blur":return M(M({},e),{Fltr:{_name:"Smart Blur",_classID:"SmrB","Rds ":t.filter.radius,Thsh:t.filter.threshold,SmBQ:QS.encode(t.filter.quality),SmBM:JS.encode(t.filter.mode)},filterID:1399681602});case"surface blur":return M(M({},e),{Fltr:{_name:"Surface Blur",_classID:"surfaceBlur","Rds ":Dr(t.filter),Thsh:t.filter.threshold},filterID:701});case"displace":return M(M({},e),{Fltr:{_name:"Displace",_classID:"Dspl",HrzS:t.filter.horizontalScale,VrtS:t.filter.verticalScale,DspM:ex.encode(t.filter.displacementMap),UndA:Co.encode(t.filter.undefinedAreas),DspF:{sig:t.filter.displacementFile.signature,path:t.filter.displacementFile.path}},filterID:1148416108});case"pinch":return M(M({},e),{Fltr:{_name:"Pinch",_classID:"Pnch",Amnt:t.filter.amount},filterID:1349411688});case"polar coordinates":return M(M({},e),{Fltr:{_name:"Polar Coordinates",_classID:"Plr ",Cnvr:tx.encode(t.filter.conversion)},filterID:1349284384});case"ripple":return M(M({},e),{Fltr:{_name:"Ripple",_classID:"Rple",Amnt:t.filter.amount,RplS:nx.encode(t.filter.size)},filterID:1383099493});case"shear":return M(M({},e),{Fltr:{_name:"Shear",_classID:"Shr ",ShrP:t.filter.shearPoints.map(function(l){return{_name:"",_classID:"Pnt ",Hrzn:l.x,Vrtc:l.y}}),UndA:Co.encode(t.filter.undefinedAreas),ShrS:t.filter.shearStart,ShrE:t.filter.shearEnd},filterID:1399353888});case"spherize":return M(M({},e),{Fltr:{_name:"Spherize",_classID:"Sphr",Amnt:t.filter.amount,SphM:rx.encode(t.filter.mode)},filterID:1399875698});case"twirl":return M(M({},e),{Fltr:{_name:"Twirl",_classID:"Twrl",Angl:t.filter.angle},filterID:1417114220});case"wave":return M(M({},e),{Fltr:{_name:"Wave",_classID:"Wave",Wvtp:ix.encode(t.filter.type),NmbG:t.filter.numberOfGenerators,WLMn:t.filter.wavelength.min,WLMx:t.filter.wavelength.max,AmMn:t.filter.amplitude.min,AmMx:t.filter.amplitude.max,SclH:t.filter.scale.x,SclV:t.filter.scale.y,UndA:Co.encode(t.filter.undefinedAreas),RndS:t.filter.randomSeed},filterID:1466005093});case"zigzag":return M(M({},e),{Fltr:{_name:"ZigZag",_classID:"ZgZg",Amnt:t.filter.amount,NmbR:t.filter.ridges,ZZTy:sx.encode(t.filter.style)},filterID:1516722791});case"add noise":return M(M({},e),{Fltr:{_name:"Add Noise",_classID:"AdNs",Dstr:ox.encode(t.filter.distribution),Nose:qn(t.filter.amount),Mnch:t.filter.monochromatic,FlRs:t.filter.randomSeed},filterID:1097092723});case"despeckle":return M(M({},e),{filterID:1148416099});case"dust and scratches":return M(M({},e),{Fltr:{_name:"Dust & Scratches",_classID:"DstS","Rds ":t.filter.radius,Thsh:t.filter.threshold},filterID:1148417107});case"median":return M(M({},e),{Fltr:{_name:"Median",_classID:"Mdn ","Rds ":Dr(t.filter)},filterID:1298427424});case"reduce noise":return M(M({},e),{Fltr:{_name:"Reduce Noise",_classID:"denoise",ClNs:qn(t.filter.reduceColorNoise),Shrp:qn(t.filter.sharpenDetails),removeJPEGArtifact:t.filter.removeJpegArtifact,channelDenoise:t.filter.channelDenoise.map(function(l){return M({_name:"",_classID:"channelDenoiseParams",Chnl:l.channels.map(function(c){return Za.encode(c)}),Amnt:l.amount},l.preserveDetails?{EdgF:l.preserveDetails}:{})}),preset:t.filter.preset},filterID:633});case"color halftone":return M(M({},e),{Fltr:{_name:"Color Halftone",_classID:"ClrH","Rds ":t.filter.radius,Ang1:t.filter.angle1,Ang2:t.filter.angle2,Ang3:t.filter.angle3,Ang4:t.filter.angle4},filterID:1131180616});case"crystallize":return M(M({},e),{Fltr:{_name:"Crystallize",_classID:"Crst",ClSz:t.filter.cellSize,FlRs:t.filter.randomSeed},filterID:1131574132});case"facet":return M(M({},e),{filterID:1180922912});case"fragment":return M(M({},e),{filterID:1181902701});case"mezzotint":return M(M({},e),{Fltr:{_name:"Mezzotint",_classID:"Mztn",MztT:ax.encode(t.filter.type),FlRs:t.filter.randomSeed},filterID:1299870830});case"mosaic":return M(M({},e),{Fltr:{_name:"Mosaic",_classID:"Msc ",ClSz:_t(t.filter.cellSize,"cellSize")},filterID:1299407648});case"pointillize":return M(M({},e),{Fltr:{_name:"Pointillize",_classID:"Pntl",ClSz:t.filter.cellSize,FlRs:t.filter.randomSeed},filterID:1349416044});case"clouds":return M(M({},e),{Fltr:{_name:"Clouds",_classID:"Clds",FlRs:t.filter.randomSeed},filterID:1131177075});case"difference clouds":return M(M({},e),{Fltr:{_name:"Difference Clouds",_classID:"DfrC",FlRs:t.filter.randomSeed},filterID:1147564611});case"fibers":return M(M({},e),{Fltr:{_name:"Fibers",_classID:"Fbrs",Vrnc:t.filter.variance,Strg:t.filter.strength,RndS:t.filter.randomSeed},filterID:1180856947});case"lens flare":return M(M({},e),{Fltr:{_name:"Lens Flare",_classID:"LnsF",Brgh:t.filter.brightness,FlrC:{_name:"",_classID:"Pnt ",Hrzn:t.filter.position.x,Vrtc:t.filter.position.y},"Lns ":lx.encode(t.filter.lensType)},filterID:1282306886});case"sharpen":return M(M({},e),{filterID:1399353968});case"sharpen edges":return M(M({},e),{filterID:1399353925});case"sharpen more":return M(M({},e),{filterID:1399353933});case"smart sharpen":return M(M({},e),{Fltr:{_name:"Smart Sharpen",_classID:"smartSharpen",Amnt:qn(t.filter.amount),"Rds ":Dr(t.filter),Thsh:t.filter.threshold,Angl:t.filter.angle,moreAccurate:t.filter.moreAccurate,blur:cx.encode(t.filter.blur),preset:t.filter.preset,sdwM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:qn(t.filter.shadow.fadeAmount),Wdth:qn(t.filter.shadow.tonalWidth),"Rds ":t.filter.shadow.radius},hglM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:qn(t.filter.highlight.fadeAmount),Wdth:qn(t.filter.highlight.tonalWidth),"Rds ":t.filter.highlight.radius}},filterID:698});case"unsharp mask":return M(M({},e),{Fltr:{_name:"Unsharp Mask",_classID:"UnsM",Amnt:qn(t.filter.amount),"Rds ":Dr(t.filter),Thsh:t.filter.threshold},filterID:1433301837});case"diffuse":return M(M({},e),{Fltr:{_name:"Diffuse",_classID:"Dfs ","Md  ":ux.encode(t.filter.mode),FlRs:t.filter.randomSeed},filterID:1147564832});case"emboss":return M(M({},e),{Fltr:{_name:"Emboss",_classID:"Embs",Angl:t.filter.angle,Hght:t.filter.height,Amnt:t.filter.amount},filterID:1164796531});case"extrude":return M(M({},e),{Fltr:{_name:"Extrude",_classID:"Extr",ExtS:t.filter.size,ExtD:t.filter.depth,ExtF:t.filter.solidFrontFaces,ExtM:t.filter.maskIncompleteBlocks,ExtT:fx.encode(t.filter.type),ExtR:hx.encode(t.filter.depthMode),FlRs:t.filter.randomSeed},filterID:1165522034});case"find edges":return M(M({},e),{filterID:1181639749});case"solarize":return M(M({},e),{filterID:1399616122});case"tiles":return M(M({},e),{Fltr:{_name:"Tiles",_classID:"Tls ",TlNm:t.filter.numberOfTiles,TlOf:t.filter.maximumOffset,FlCl:dx.encode(t.filter.fillEmptyAreaWith),FlRs:t.filter.randomSeed},filterID:1416393504});case"trace contour":return M(M({},e),{Fltr:{_name:"Trace Contour",_classID:"TrcC","Lvl ":t.filter.level,"Edg ":px.encode(t.filter.edge)},filterID:1416782659});case"wind":return M(M({},e),{Fltr:{_name:"Wind",_classID:"Wnd ",WndM:gx.encode(t.filter.method),Drct:mx.encode(t.filter.direction)},filterID:1466852384});case"de-interlace":return M(M({},e),{Fltr:{_name:"De-Interlace",_classID:"Dntr",IntE:vx.encode(t.filter.eliminate),IntC:yx.encode(t.filter.newFieldsBy)},filterID:1148089458});case"ntsc colors":return M(M({},e),{filterID:1314149187});case"invert":return M(M({},e),{filterID:1231976050});case"custom":return M(M({},e),{Fltr:{_name:"Custom",_classID:"Cstm","Scl ":t.filter.scale,Ofst:t.filter.offset,Mtrx:t.filter.matrix},filterID:1131639917});case"high pass":return M(M({},e),{Fltr:{_name:"High Pass",_classID:"HghP","Rds ":Dr(t.filter)},filterID:1214736464});case"maximum":return M(M({},e),{Fltr:{_name:"Maximum",_classID:"Mxm ","Rds ":Dr(t.filter)},filterID:1299737888});case"minimum":return M(M({},e),{Fltr:{_name:"Minimum",_classID:"Mnm ","Rds ":Dr(t.filter)},filterID:1299082528});case"offset":return M(M({},e),{Fltr:{_name:"Offset",_classID:"Ofst",Hrzn:t.filter.horizontal,Vrtc:t.filter.vertical,"Fl  ":bx.encode(t.filter.undefinedAreas)},filterID:1332114292});case"puppet":return M(M({},e),{Fltr:{_name:"Rigid Transform",_classID:"rigidTransform",null:["Ordn.Trgt"],rigidType:t.filter.rigidType,puppetShapeList:t.filter.puppetShapeList.map(function(l){return{_name:"",_classID:"puppetShape",rigidType:l.rigidType,VrsM:1,VrsN:0,originalVertexArray:zh(new Float32Array(ba(l.originalVertexArray))),deformedVertexArray:zh(new Float32Array(ba(l.deformedVertexArray))),indexArray:zh(new Uint32Array(l.indexArray)),pinOffsets:ba(l.pinOffsets),posFinalPins:ba(l.posFinalPins),pinVertexIndices:l.pinVertexIndices,PinP:ba(l.pinPosition),PnRt:l.pinRotation,PnOv:l.pinOverlay,PnDp:l.pinDepth,meshQuality:l.meshQuality,meshExpansion:l.meshExpansion,meshRigidity:l.meshRigidity,imageResolution:l.imageResolution,meshBoundaryPath:{_name:"",_classID:"pathClass",pathComponents:l.meshBoundaryPath.pathComponents.map(function(c){return{_name:"",_classID:"PaCm",shapeOperation:"shapeOperation.".concat(c.shapeOperation),SbpL:c.paths.map(function(u){return{_name:"",_classID:"Sbpl",Clsp:u.closed,"Pts ":u.points.map(function(f){return{_name:"",_classID:"Pthp",Anch:wa(f.anchor),"Fwd ":wa(f.forward),"Bwd ":wa(f.backward),Smoo:f.smooth}})}})}})},selectedPin:l.selectedPin}}),PuX0:t.filter.bounds[0].x,PuX1:t.filter.bounds[1].x,PuX2:t.filter.bounds[2].x,PuX3:t.filter.bounds[3].x,PuY0:t.filter.bounds[0].y,PuY1:t.filter.bounds[1].y,PuY2:t.filter.bounds[2].y,PuY3:t.filter.bounds[3].y},filterID:991});case"oil paint plugin":{for(var n={},r=0;r<t.filter.parameters.length;r++){var i=t.filter.parameters[r],s=i.name,o=i.value,a="".concat(Mn[Math.floor(r/Mn.length)]).concat(Mn[r%Mn.length]);n["PN".concat(a)]=s,n["PT".concat(a)]=0,n["PF".concat(a)]=o}return M(M({},e),{Fltr:M({_name:"Oil Paint Plugin",_classID:"PbPl",KnNm:t.filter.name,GpuY:t.filter.gpu,LIWy:t.filter.lighting,FPth:"1"},n),filterID:1348620396})}case"oil paint":return M(M({},e),{Fltr:{_name:"Oil Paint",_classID:"oilPaint",lightingOn:t.filter.lightingOn,stylization:t.filter.stylization,cleanliness:t.filter.cleanliness,brushScale:t.filter.brushScale,microBrush:t.filter.microBrush,LghD:t.filter.lightDirection,specularity:t.filter.specularity},filterID:1122});case"liquify":return M(M({},e),{Fltr:{_name:"Liquify",_classID:"LqFy",LqMe:t.filter.liquifyMesh},filterID:1282492025});case"perspective warp":return M(M({},e),{Fltr:{_name:"Perspective Warp",_classID:"perspectiveWarpTransform",vertices:t.filter.vertices.map(wa),warpedVertices:t.filter.warpedVertices.map(wa),quads:t.filter.quads.map(function(l){return{indices:l}})},filterID:442});case"curves":return M(M({},e),{Fltr:M({_name:"Curves",_classID:"Crvs",presetKind:_x.encode(t.filter.presetKind)},t.filter.adjustments?{Adjs:t.filter.adjustments.map(function(l){return"curve"in l?{_name:"",_classID:"CrvA",Chnl:l.channels.map(Za.encode),"Crv ":l.curve.map(function(c){return M({_name:"",_classID:"Pnt ",Hrzn:c.x,Vrtc:c.y},c.curved?{Cnty:!0}:{})})}:{_name:"",_classID:"CrvA",Chnl:l.channels.map(Za.encode),Mpng:l.values}})}:{}),filterID:1131574899});case"brightness/contrast":return M(M({},e),{Fltr:{_name:"Brightness/Contrast",_classID:"BrgC",Brgh:t.filter.brightness,Cntr:t.filter.contrast,useLegacy:!!t.filter.useLegacy},filterID:1114793795});default:throw new Error("Unknow filter type: ".concat(t.type))}}function Nx(t){if(t.warp)return t.warp;if(!t.width||!t.height)throw new Error("You must provide width and height of the linked image in placedLayer");var e=t.width,n=t.height,r=0,i=e/3,s=e*2/3,o=e,a=0,l=n/3,c=n*2/3,u=n;return{style:"custom",value:0,perspective:0,perspectiveOther:0,rotate:"horizontal",bounds:{top:{value:0,units:"Pixels"},left:{value:0,units:"Pixels"},bottom:{value:n,units:"Pixels"},right:{value:e,units:"Pixels"}},uOrder:4,vOrder:4,customEnvelopeWarp:{meshPoints:[{x:r,y:a},{x:i,y:a},{x:s,y:a},{x:o,y:a},{x:r,y:l},{x:i,y:l},{x:s,y:l},{x:o,y:l},{x:r,y:c},{x:i,y:c},{x:s,y:c},{x:o,y:c},{x:r,y:u},{x:i,y:u},{x:s,y:u},{x:o,y:u}]}}}Le("SoLd",lt("placedLayer"),function(t,e,n){if(dt(t)!=="soLD")throw new Error("Invalid SoLd type");var r=Ie(t);if(r!==4&&r!==5)throw new Error("Invalid SoLd version");var i=Xe(t,!0);e.placedLayer={id:i.Idnt,placed:i.placed,type:go[i.Type],pageNumber:i.PgNm,totalPages:i.totalPages,frameStep:mn(i.frameStep),duration:mn(i.duration),frameCount:i.frameCount,transform:i.Trnf,width:i["Sz  "].Wdth,height:i["Sz  "].Hght,resolution:st(i.Rslt),warp:jx(i.quiltWarp||i.warp)},i.nonAffineTransform&&i.nonAffineTransform.some(function(s,o){return s!==i.Trnf[o]})&&(e.placedLayer.nonAffineTransform=i.nonAffineTransform),i.Crop&&(e.placedLayer.crop=i.Crop),i.comp&&(e.placedLayer.comp=i.comp),i.compInfo&&(e.placedLayer.compInfo={compID:i.compInfo.compID,originalCompID:i.compInfo.originalCompID}),i.filterFX&&(e.placedLayer.filter=Oj(i.filterFX,t)),Te(t,n())},function(t,e){var n,r;Ue(t,"soLD"),He(t,4);var i=e.placedLayer;if(!i.id||typeof i.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(i.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");var s=M(M({Idnt:i.id,placed:(n=i.placed)!==null&&n!==void 0?n:i.id,PgNm:i.pageNumber||1,totalPages:i.totalPages||1},i.crop?{Crop:i.crop}:{}),{frameStep:i.frameStep||{numerator:0,denominator:600},duration:i.duration||{numerator:0,denominator:600},frameCount:i.frameCount||0,Annt:16,Type:go.indexOf(i.type),Trnf:i.transform,nonAffineTransform:(r=i.nonAffineTransform)!==null&&r!==void 0?r:i.transform,warp:Wu(Nx(i)),"Sz  ":{_name:"",_classID:"Pnt ",Wdth:i.width||0,Hght:i.height||0},Rslt:i.resolution?_t(i.resolution,"resolution"):{units:"Density",value:72}});if(i.filter&&(s.filterFX={_name:"",_classID:"filterFXStyle",enab:i.filter.enabled,validAtPosition:i.filter.validAtPosition,filterMaskEnable:i.filter.maskEnabled,filterMaskLinked:i.filter.maskLinked,filterMaskExtendWithWhite:i.filter.maskExtendWithWhite,filterFXList:i.filter.list.map(function(a){return Aj(a)})}),i.warp&&Ug(i.warp)){var o=Wu(i.warp);s.quiltWarp=o,s.warp={warpStyle:"warpStyle.warpNone",warpValue:o.warpValue,warpPerspective:o.warpPerspective,warpPerspectiveOther:o.warpPerspectiveOther,warpRotate:o.warpRotate,bounds:o.bounds,uOrder:o.uOrder,vOrder:o.vOrder}}else delete s.quiltWarp;i.comp&&(s.comp=i.comp),i.compInfo&&(s.compInfo=i.compInfo),Ye(t,"","null",s,s.quiltWarp?"quiltWarp":"warp")});oa("SoLE","SoLd");Le("fxrp",lt("referencePoint"),function(t,e){e.referencePoint={x:tr(t),y:tr(t)}},function(t,e){Hr(t,e.referencePoint.x),Hr(t,e.referencePoint.y)});Le("Lr16",function(){return!1},function(t,e,n,r,i){jg(t,r,i)},function(t,e){});Le("Lr32",function(){return!1},function(t,e,n,r,i){jg(t,r,i)},function(t,e){});Le("LMsk",lt("userMask"),function(t,e){e.userMask={colorSpace:zt(t),opacity:me(t)/255};var n=xe(t);if(n!==128)throw new Error("Invalid flag value");Te(t,1)},function(t,e){var n=e.userMask;Ut(t,n.colorSpace),pe(t,CS(n.opacity,0,1)*255),Oe(t,128),ot(t,1)});Le("Patt",function(t){return!t},function(t,e,n){n()&&Te(t,n())},function(t,e){});function pb(t){var e=Ie(t),n=Ie(t),r=Ie(t),i=Ie(t);return{top:e,left:n,bottom:r,right:i}}function gb(t,e){He(t,e.top),He(t,e.left),He(t,e.bottom),He(t,e.right)}Le("Anno",function(t){return t.annotations!==void 0},function(t,e,n){var r=me(t),i=me(t);if(r!==2||i!==1)throw new Error("Invalid Anno version");for(var s=ve(t),o=[],a=0;a<s;a++){ve(t);var l=dt(t),c=!!xe(t);xe(t),me(t);var u=pb(t),f=pb(t),d=zt(t),h=Ji(t,2),g=Ji(t,2),p=Ji(t,2);ve(t),dt(t);var v=ve(t),m=void 0;if(l==="txtA")v>=2&&me(t)===65279?m=Bg(t,(v-2)/2):(t.offset-=2,m=Bf(t,v)),m=m.replace(/\r/g,`
`);else if(l==="sndA")m=Qt(t,v);else throw new Error("Unknown annotation type");o.push({type:l==="txtA"?"text":"sound",open:c,iconLocation:u,popupLocation:f,color:d,author:h,name:g,date:p,data:m})}e.annotations=o,Te(t,n())},function(t,e){var n=e.annotations;pe(t,2),pe(t,1),Se(t,n.length);for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s.type==="sound";if(o&&!(s.data instanceof Uint8Array))throw new Error("Sound annotation data should be Uint8Array");if(!o&&typeof s.data!="string")throw new Error("Text annotation data should be string");var a=t.offset;Se(t,0),Ue(t,o?"sndA":"txtA"),Oe(t,s.open?1:0),Oe(t,28),pe(t,1),gb(t,s.iconLocation),gb(t,s.popupLocation),Ut(t,s.color),To(t,s.author||"",2),To(t,s.name||"",2),To(t,s.date||"",2);var l=t.offset;Se(t,0),Ue(t,o?"sndM":"txtC"),Se(t,0);var c=t.offset;if(o)ki(t,s.data);else{pe(t,65279);for(var u=s.data.replace(/\n/g,"\r"),f=0;f<u.length;f++)pe(t,u.charCodeAt(f))}t.view.setUint32(a,t.offset-a,!1),t.view.setUint32(l,t.offset-l,!1),t.view.setUint32(c-4,t.offset-c,!1)}});function zx(t){Le(t,function(e){var n=e;return!(!n.linkedFiles||!n.linkedFiles.length||t==="lnkE"&&!n.linkedFiles.some(function(r){return r.linkedFile}))},function(e,n,r,i){var s=n;for(s.linkedFiles=s.linkedFiles||[];r()>8;){var o=jh(e),a=e.offset,l=dt(e),c=Ie(e),u=Ji(e,1),f=Ht(e),d=dt(e).trim(),h=dt(e).trim(),g=jh(e),p=xe(e),v=p?Xe(e):void 0,m=l==="liFE"?Xe(e):void 0,y={id:u,name:f};if(d&&(y.type=d),h&&(y.creator=h),v&&(y.descriptor={compInfo:{compID:v.compInfo.compID,originalCompID:v.compInfo.originalCompID}}),l==="liFE"&&c>3){var _=Ie(e),b=xe(e),x=xe(e),E=xe(e),T=xe(e),O=tr(e),k=Math.floor(O),I=(O-k)*1e3;y.time=new Date(Date.UTC(_,b,x,E,T,k,I)).toISOString()}var R=l==="liFE"?jh(e):0;for(l==="liFA"&&Te(e,8),l==="liFD"&&(y.data=Qt(e,g)),c>=5&&(y.childDocumentID=Ht(e)),c>=6&&(y.assetModTime=tr(e)),c>=7&&(y.assetLockedState=xe(e)),l==="liFE"&&c===2&&(y.data=Qt(e,R)),e.skipLinkedFilesData&&(y.data=void 0),t==="lnkE"&&(y.linkedFile={fileSize:R,name:m?.["Nm  "]||"",fullPath:m?.fullPath||"",originalPath:m?.originalPath||"",relativePath:m?.relPath||""}),s.linkedFiles.push(y);o%4;)o++;e.offset=a+o}Te(e,r())},function(e,n){for(var r,i,s,o,a,l,c,u,f,d=n,h=0,g=d.linkedFiles;h<g.length;h++){var p=g[h];if(t==="lnkE"==!!p.linkedFile){var v=2;p.assetLockedState!=null?v=7:p.assetModTime!=null?v=6:p.childDocumentID!=null?v=5:t=="lnkE"&&(v=3),Nh(e,0);var m=e.offset;if(Ue(e,t==="lnkE"?"liFE":p.data?"liFD":"liFA"),He(e,v),!p.id||typeof p.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(p.id))throw new Error("Linked file ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if(To(e,p.id,1),Ns(e,p.name||""),Ue(e,p.type?"".concat(p.type,"    ").substring(0,4):"    "),Ue(e,p.creator?"".concat(p.creator,"    ").substring(0,4):"\0\0\0\0"),Nh(e,p.data?p.data.byteLength:0),p.descriptor&&p.descriptor.compInfo){var y={compInfo:{compID:p.descriptor.compInfo.compID,originalCompID:p.descriptor.compInfo.originalCompID}};Oe(e,1),Ye(e,"","null",y)}else Oe(e,0);if(t==="lnkE"){var y={descVersion:2,"Nm  ":(i=(r=p.linkedFile)===null||r===void 0?void 0:r.name)!==null&&i!==void 0?i:"",fullPath:(o=(s=p.linkedFile)===null||s===void 0?void 0:s.fullPath)!==null&&o!==void 0?o:"",originalPath:(l=(a=p.linkedFile)===null||a===void 0?void 0:a.originalPath)!==null&&l!==void 0?l:"",relPath:(u=(c=p.linkedFile)===null||c===void 0?void 0:c.relativePath)!==null&&u!==void 0?u:""};Ye(e,"","ExternalFileLink",y);var _=p.time?new Date(p.time):new Date;He(e,_.getUTCFullYear()),Oe(e,_.getUTCMonth()),Oe(e,_.getUTCDate()),Oe(e,_.getUTCHours()),Oe(e,_.getUTCMinutes()),Hr(e,_.getUTCSeconds()+_.getUTCMilliseconds()/1e3)}p.data?ki(e,p.data):Nh(e,((f=p.linkedFile)===null||f===void 0?void 0:f.fileSize)||0),v>=5&&Ns(e,p.childDocumentID||""),v>=6&&Hr(e,p.assetModTime||0),v>=7&&Oe(e,p.assetLockedState||0);var b=e.offset-m;for(e.view.setUint32(m-4,b,!1);b%4;)b++,Oe(e,0)}}})}zx("lnk2");zx("lnkE");oa("lnkD","lnk2");oa("lnk3","lnk2");Le("pths",lt("pathList"),function(t,e){Xe(t,!0),e.pathList=[]},function(t,e){var n={pathList:[]};Ye(t,"","pathsDataClass",n)});Le("lyvr",lt("version"),function(t,e){return e.version=ve(t)},function(t,e){return Se(t,e.version)});Le("lfxs",function(){return!1},function(t,e,n){var r=ve(t);if(r!==0)throw new Error("Invalid lfxs version");var i=Xe(t);e.effects=Al(i,!!t.logMissingFeatures),Te(t,n())},function(t,e,n,r){var i=Ol(e.effects,!!r.logMissingFeatures,!0);Se(t,0),Ye(t,"","null",i)});function hn(t){return function(e){return!!e.adjustment&&e.adjustment.type===t}}Le("brit",hn("brightness/contrast"),function(t,e,n){e.adjustment||(e.adjustment={type:"brightness/contrast",brightness:Ke(t),contrast:Ke(t),meanValue:Ke(t),labColorOnly:!!xe(t),useLegacy:!0}),Te(t,n())},function(t,e){var n,r=e.adjustment;nt(t,r.brightness||0),nt(t,r.contrast||0),nt(t,(n=r.meanValue)!==null&&n!==void 0?n:127),Oe(t,r.labColorOnly?1:0),ot(t,1)});function zc(t){var e=Ke(t),n=Ke(t),r=Ke(t),i=Ke(t),s=Ke(t)/100;return{shadowInput:e,highlightInput:n,shadowOutput:r,highlightOutput:i,midtoneInput:s}}function Sa(t,e){nt(t,e.shadowInput),nt(t,e.highlightInput),nt(t,e.shadowOutput),nt(t,e.highlightOutput),nt(t,Math.round(e.midtoneInput*100))}Le("levl",hn("levels"),function(t,e,n){if(me(t)!==2)throw new Error("Invalid levl version");e.adjustment=M(M({},e.adjustment),{type:"levels",rgb:zc(t),red:zc(t),green:zc(t),blue:zc(t)}),Te(t,n())},function(t,e){var n=e.adjustment,r={shadowInput:0,highlightInput:255,shadowOutput:0,highlightOutput:255,midtoneInput:1};pe(t,2),Sa(t,n.rgb||r),Sa(t,n.red||r),Sa(t,n.blue||r),Sa(t,n.green||r);for(var i=0;i<59;i++)Sa(t,r)});function $c(t){for(var e=me(t),n=[],r=0;r<e;r++){var i=Ke(t),s=Ke(t);n.push({input:s,output:i})}return n}function zi(t,e){pe(t,e.length);for(var n=0,r=e;n<r.length;n++){var i=r[n];pe(t,i.output),pe(t,i.input)}}Le("curv",hn("curves"),function(t,e,n){if(xe(t),me(t)!==1)throw new Error("Invalid curv version");me(t);var r=me(t),i={type:"curves"};r&1&&(i.rgb=$c(t)),r&2&&(i.red=$c(t)),r&4&&(i.green=$c(t)),r&8&&(i.blue=$c(t)),e.adjustment=M(M({},e.adjustment),i),Te(t,n())},function(t,e){var n=e.adjustment,r=n.rgb,i=n.red,s=n.green,o=n.blue,a=0,l=0;r&&r.length&&(a|=1,l++),i&&i.length&&(a|=2,l++),s&&s.length&&(a|=4,l++),o&&o.length&&(a|=8,l++),Oe(t,0),pe(t,1),pe(t,0),pe(t,a),r&&r.length&&zi(t,r),i&&i.length&&zi(t,i),s&&s.length&&zi(t,s),o&&o.length&&zi(t,o),Ue(t,"Crv "),pe(t,4),pe(t,0),pe(t,l),r&&r.length&&(pe(t,0),zi(t,r)),i&&i.length&&(pe(t,1),zi(t,i)),s&&s.length&&(pe(t,2),zi(t,s)),o&&o.length&&(pe(t,3),zi(t,o))});Le("expA",hn("exposure"),function(t,e,n){if(me(t)!==1)throw new Error("Invalid expA version");e.adjustment=M(M({},e.adjustment),{type:"exposure",exposure:yr(t),offset:yr(t),gamma:yr(t)}),Te(t,n())},function(t,e){var n=e.adjustment;pe(t,1),br(t,n.exposure),br(t,n.offset),br(t,n.gamma),ot(t,2)});Le("vibA",hn("vibrance"),function(t,e,n){var r=Xe(t);e.adjustment={type:"vibrance"},r.vibrance!==void 0&&(e.adjustment.vibrance=r.vibrance),r.Strt!==void 0&&(e.adjustment.saturation=r.Strt),Te(t,n())},function(t,e){var n=e.adjustment,r={};n.vibrance!==void 0&&(r.vibrance=n.vibrance),n.saturation!==void 0&&(r.Strt=n.saturation),Ye(t,"","null",r)});function ds(t){return{a:Ke(t),b:Ke(t),c:Ke(t),d:Ke(t),hue:Ke(t),saturation:Ke(t),lightness:Ke(t)}}function ps(t,e){var n=e||{};nt(t,n.a||0),nt(t,n.b||0),nt(t,n.c||0),nt(t,n.d||0),nt(t,n.hue||0),nt(t,n.saturation||0),nt(t,n.lightness||0)}Le("hue2",hn("hue/saturation"),function(t,e,n){if(me(t)!==2)throw new Error("Invalid hue2 version");e.adjustment=M(M({},e.adjustment),{type:"hue/saturation",master:ds(t),reds:ds(t),yellows:ds(t),greens:ds(t),cyans:ds(t),blues:ds(t),magentas:ds(t)}),Te(t,n())},function(t,e){var n=e.adjustment;pe(t,2),ps(t,n.master),ps(t,n.reds),ps(t,n.yellows),ps(t,n.greens),ps(t,n.cyans),ps(t,n.blues),ps(t,n.magentas)});function $h(t){return{cyanRed:Ke(t),magentaGreen:Ke(t),yellowBlue:Ke(t)}}function Uh(t,e){nt(t,e.cyanRed||0),nt(t,e.magentaGreen||0),nt(t,e.yellowBlue||0)}Le("blnc",hn("color balance"),function(t,e,n){e.adjustment={type:"color balance",shadows:$h(t),midtones:$h(t),highlights:$h(t),preserveLuminosity:!!xe(t)},Te(t,n())},function(t,e){var n=e.adjustment;Uh(t,n.shadows||{}),Uh(t,n.midtones||{}),Uh(t,n.highlights||{}),Oe(t,n.preserveLuminosity?1:0),ot(t,1)});Le("blwh",hn("black & white"),function(t,e,n){var r=Xe(t);e.adjustment={type:"black & white",reds:r["Rd  "],yellows:r.Yllw,greens:r["Grn "],cyans:r["Cyn "],blues:r["Bl  "],magentas:r.Mgnt,useTint:!!r.useTint,presetKind:r.bwPresetKind,presetFileName:r.blackAndWhitePresetFileName},r.tintColor!==void 0&&(e.adjustment.tintColor=xr(r.tintColor)),Te(t,n())},function(t,e){var n=e.adjustment,r={"Rd  ":n.reds||0,Yllw:n.yellows||0,"Grn ":n.greens||0,"Cyn ":n.cyans||0,"Bl  ":n.blues||0,Mgnt:n.magentas||0,useTint:!!n.useTint,tintColor:Cr(n.tintColor),bwPresetKind:n.presetKind||0,blackAndWhitePresetFileName:n.presetFileName||""};Ye(t,"","null",r)});Le("phfl",hn("photo filter"),function(t,e,n){var r=me(t);if(r!==2&&r!==3)throw new Error("Invalid phfl version");var i;r===2?i=zt(t):i={l:Ie(t)/100,a:Ie(t)/100,b:Ie(t)/100},e.adjustment={type:"photo filter",color:i,density:ve(t)/100,preserveLuminosity:!!xe(t)},Te(t,n())},function(t,e){var n=e.adjustment;pe(t,2),Ut(t,n.color||{l:0,a:0,b:0}),Se(t,(n.density||0)*100),Oe(t,n.preserveLuminosity?1:0),ot(t,3)});function Uc(t){var e=Ke(t),n=Ke(t),r=Ke(t);Te(t,2);var i=Ke(t);return{red:e,green:n,blue:r,constant:i}}function xa(t,e){var n=e||{};nt(t,n.red),nt(t,n.green),nt(t,n.blue),ot(t,2),nt(t,n.constant)}Le("mixr",hn("channel mixer"),function(t,e,n){if(me(t)!==1)throw new Error("Invalid mixr version");var r=e.adjustment=M(M({},e.adjustment),{type:"channel mixer",monochrome:!!me(t)});r.monochrome||(r.red=Uc(t),r.green=Uc(t),r.blue=Uc(t)),r.gray=Uc(t),Te(t,n())},function(t,e){var n=e.adjustment;pe(t,1),pe(t,n.monochrome?1:0),n.monochrome?(xa(t,n.gray),ot(t,30)):(xa(t,n.red),xa(t,n.green),xa(t,n.blue),xa(t,n.gray))});var mb=Be("colorLookupType","3DLUT",{"3dlut":"3DLUT",abstractProfile:"abstractProfile",deviceLinkProfile:"deviceLinkProfile"}),vb=Be("LUTFormatType","look",{look:"LUTFormatLOOK",cube:"LUTFormatCUBE","3dl":"LUTFormat3DL"}),Hc=Be("colorLookupOrder","rgb",{rgb:"rgbOrder",bgr:"bgrOrder"});Le("clrL",hn("color lookup"),function(t,e,n){if(me(t)!==1)throw new Error("Invalid clrL version");var r=Xe(t);e.adjustment={type:"color lookup"};var i=e.adjustment;r.lookupType!==void 0&&(i.lookupType=mb.decode(r.lookupType)),r["Nm  "]!==void 0&&(i.name=r["Nm  "]),r.Dthr!==void 0&&(i.dither=r.Dthr),r.profile!==void 0&&(i.profile=r.profile),r.LUTFormat!==void 0&&(i.lutFormat=vb.decode(r.LUTFormat)),r.dataOrder!==void 0&&(i.dataOrder=Hc.decode(r.dataOrder)),r.tableOrder!==void 0&&(i.tableOrder=Hc.decode(r.tableOrder)),r.LUT3DFileData!==void 0&&(i.lut3DFileData=r.LUT3DFileData),r.LUT3DFileName!==void 0&&(i.lut3DFileName=r.LUT3DFileName),Te(t,n())},function(t,e){var n=e.adjustment,r={};n.lookupType!==void 0&&(r.lookupType=mb.encode(n.lookupType)),n.name!==void 0&&(r["Nm  "]=n.name),n.dither!==void 0&&(r.Dthr=n.dither),n.profile!==void 0&&(r.profile=n.profile),n.lutFormat!==void 0&&(r.LUTFormat=vb.encode(n.lutFormat)),n.dataOrder!==void 0&&(r.dataOrder=Hc.encode(n.dataOrder)),n.tableOrder!==void 0&&(r.tableOrder=Hc.encode(n.tableOrder)),n.lut3DFileData!==void 0&&(r.LUT3DFileData=n.lut3DFileData),n.lut3DFileName!==void 0&&(r.LUT3DFileName=n.lut3DFileName),pe(t,1),Ye(t,"","null",r)});Le("nvrt",hn("invert"),function(t,e,n){e.adjustment={type:"invert"},Te(t,n())},function(){});Le("post",hn("posterize"),function(t,e,n){e.adjustment={type:"posterize",levels:me(t)},Te(t,n())},function(t,e){var n,r=e.adjustment;pe(t,(n=r.levels)!==null&&n!==void 0?n:4),ot(t,2)});Le("thrs",hn("threshold"),function(t,e,n){e.adjustment={type:"threshold",level:me(t)},Te(t,n())},function(t,e){var n,r=e.adjustment;pe(t,(n=r.level)!==null&&n!==void 0?n:128),ot(t,2)});var yb=["","","","rgb","hsb","","lab"];Le("grdm",hn("gradient map"),function(t,e,n){var r=me(t);if(r!==1&&r!==3)throw new Error("Invalid grdm version");var i={type:"gradient map",gradientType:"solid"};i.reverse=!!xe(t),i.dither=!!xe(t);var s=!!xe(t);if(t.offset--,s){var o=dt(t);i.method=Vo.decode(o)}i.name=Ht(t),i.colorStops=[],i.opacityStops=[];for(var a=me(t),l=0;l<a;l++)i.colorStops.push({location:ve(t),midpoint:ve(t)/100,color:zt(t)}),Te(t,2);for(var c=me(t),l=0;l<c;l++)i.opacityStops.push({location:ve(t),midpoint:ve(t)/100,opacity:me(t)/255});var u=me(t);if(u!==2)throw new Error("Invalid grdm expansion count");var f=me(t);i.smoothness=f/4096;var d=me(t);if(d!==32)throw new Error("Invalid grdm length");i.gradientType=me(t)?"noise":"solid",i.randomSeed=ve(t),i.addTransparency=!!me(t),i.restrictColors=!!me(t),i.roughness=ve(t)/4096,i.colorModel=yb[me(t)]||"rgb",i.min=[me(t)/32768,me(t)/32768,me(t)/32768,me(t)/32768],i.max=[me(t)/32768,me(t)/32768,me(t)/32768,me(t)/32768],Te(t,n());for(var h=0,g=i.colorStops;h<g.length;h++){var p=g[h];p.location/=f}for(var v=0,m=i.opacityStops;v<m.length;v++){var p=m[v];p.location/=f}e.adjustment=i},function(t,e){var n,r,i,s=e.adjustment;pe(t,s.method!==void 0?3:1),Oe(t,s.reverse?1:0),Oe(t,s.dither?1:0),s.method!==void 0&&Ue(t,Vo.encode(s.method)),Ns(t,s.name||""),pe(t,s.colorStops&&s.colorStops.length||0);for(var o=Math.round(((n=s.smoothness)!==null&&n!==void 0?n:1)*4096),a=0,l=s.colorStops||[];a<l.length;a++){var c=l[a];Se(t,Math.round(c.location*o)),Se(t,Math.round(c.midpoint*100)),Ut(t,c.color),ot(t,2)}pe(t,s.opacityStops&&s.opacityStops.length||0);for(var u=0,f=s.opacityStops||[];u<f.length;u++){var c=f[u];Se(t,Math.round(c.location*o)),Se(t,Math.round(c.midpoint*100)),pe(t,Math.round(c.opacity*255))}pe(t,2),pe(t,o),pe(t,32),pe(t,s.gradientType==="noise"?1:0),Se(t,s.randomSeed||0),pe(t,s.addTransparency?1:0),pe(t,s.restrictColors?1:0),Se(t,Math.round(((r=s.roughness)!==null&&r!==void 0?r:1)*4096));var d=yb.indexOf((i=s.colorModel)!==null&&i!==void 0?i:"rgb");pe(t,d===-1?3:d);for(var h=0;h<4;h++)pe(t,Math.round((s.min&&s.min[h]||0)*32768));for(var h=0;h<4;h++)pe(t,Math.round((s.max&&s.max[h]||0)*32768));ot(t,4)});function Zr(t){return{c:Ke(t),m:Ke(t),y:Ke(t),k:Ke(t)}}function Jr(t,e){var n=e||{};nt(t,n.c),nt(t,n.m),nt(t,n.y),nt(t,n.k)}Le("selc",hn("selective color"),function(t,e){if(me(t)!==1)throw new Error("Invalid selc version");var n=me(t)?"absolute":"relative";Te(t,8),e.adjustment={type:"selective color",mode:n,reds:Zr(t),yellows:Zr(t),greens:Zr(t),cyans:Zr(t),blues:Zr(t),magentas:Zr(t),whites:Zr(t),neutrals:Zr(t),blacks:Zr(t)}},function(t,e){var n=e.adjustment;pe(t,1),pe(t,n.mode==="absolute"?1:0),ot(t,8),Jr(t,n.reds),Jr(t,n.yellows),Jr(t,n.greens),Jr(t,n.cyans),Jr(t,n.blues),Jr(t,n.magentas),Jr(t,n.whites),Jr(t,n.neutrals),Jr(t,n.blacks)});Le("CgEd",function(t){var e=t.adjustment;return e?e.type==="brightness/contrast"&&!e.useLegacy||(e.type==="levels"||e.type==="curves"||e.type==="exposure"||e.type==="channel mixer"||e.type==="hue/saturation")&&e.presetFileName!==void 0:!1},function(t,e,n){var r=Xe(t);if(r.Vrsn!==1)throw new Error("Invalid CgEd version");"presetFileName"in r?e.adjustment=M(M({},e.adjustment),{presetKind:r.presetKind,presetFileName:r.presetFileName}):"curvesPresetFileName"in r?e.adjustment=M(M({},e.adjustment),{presetKind:r.curvesPresetKind,presetFileName:r.curvesPresetFileName}):"mixerPresetFileName"in r?e.adjustment=M(M({},e.adjustment),{presetKind:r.mixerPresetKind,presetFileName:r.mixerPresetFileName}):e.adjustment={type:"brightness/contrast",brightness:r.Brgh,contrast:r.Cntr,meanValue:r.means,useLegacy:!!r.useLegacy,labColorOnly:!!r["Lab "],auto:!!r.Auto},Te(t,n())},function(t,e){var n,r,i,s,o=e.adjustment;if(o.type==="levels"||o.type==="exposure"||o.type==="hue/saturation"){var a={Vrsn:1,presetKind:(n=o.presetKind)!==null&&n!==void 0?n:1,presetFileName:o.presetFileName||""};Ye(t,"","null",a)}else if(o.type==="curves"){var a={Vrsn:1,curvesPresetKind:(r=o.presetKind)!==null&&r!==void 0?r:1,curvesPresetFileName:o.presetFileName||""};Ye(t,"","null",a)}else if(o.type==="channel mixer"){var a={Vrsn:1,mixerPresetKind:(i=o.presetKind)!==null&&i!==void 0?i:1,mixerPresetFileName:o.presetFileName||""};Ye(t,"","null",a)}else if(o.type==="brightness/contrast"){var a={Vrsn:1,Brgh:o.brightness||0,Cntr:o.contrast||0,means:(s=o.meanValue)!==null&&s!==void 0?s:127,"Lab ":!!o.labColorOnly,useLegacy:!!o.useLegacy,Auto:!!o.auto};Ye(t,"","null",a)}else throw new Error("Unhandled CgEd case")});function Pj(t){var e=[];function n(r){var i;if(r.children)for(var s=0,o=r.children;s<o.length;s++){var a=o[s];((i=a.text)===null||i===void 0?void 0:i.index)!==void 0&&(e[a.text.index]=a),n(a)}}return n(t),e}Le("Txt2",lt("engineData"),function(t,e,n,r){var i=Qt(t,n());e.engineData=sp.fromByteArray(i);var s=Pj(r),o=Px(i),a=wj(o),l=a.ResourceDict.TextFrameSet;if(l)for(var c=0;c<l.length;c++){var u=s[c];l[c].path&&u?.text&&(u.text.textPath=l[c].path)}},function(t,e){var n=sp.toByteArray(e.engineData);ki(t,n)});Le("FEid",lt("filterEffectsMasks"),function(t,e,n){var r=Ie(t);if(r<1||r>3)throw new Error("Invalid filterEffects version ".concat(r));for(e.filterEffectsMasks=[];n()>8;){if(ve(t))throw new Error("filterEffects: 64 bit length is not supported");var i=ve(t),s=t.offset+i,o=Ji(t,1),a=Ie(t);if(a!==1)throw new Error("Invalid filterEffect version ".concat(a));if(ve(t))throw new Error("filterEffect: 64 bit length is not supported");ve(t);for(var l=Ie(t),c=Ie(t),u=Ie(t),f=Ie(t),d=Ie(t),h=Ie(t),g=[],p=0;p<h+2;p++){var v=Ie(t);if(v){if(ve(t))throw new Error("filterEffect: 64 bit length is not supported");var m=ve(t);if(!m)throw new Error("filterEffect: Empty channel");var y=me(t),_=Qt(t,m-2);g.push({compressionMode:y,data:_})}else g.push(void 0)}if(e.filterEffectsMasks.push({id:o,top:l,left:c,bottom:u,right:f,depth:d,channels:g}),t.offset<s&&xe(t)){var b=Ie(t),x=Ie(t),E=Ie(t),T=Ie(t);if(ve(t))throw new Error("filterEffect: 64 bit length is not supported");var O=ve(t),y=me(t),_=Qt(t,O-2);e.filterEffectsMasks[e.filterEffectsMasks.length-1].extra={top:b,left:x,bottom:E,right:T,compressionMode:y,data:_}}t.offset=s;for(var k=i;k%4;)t.offset++,k++}},function(t,e){var n;He(t,3);for(var r=0,i=e.filterEffectsMasks;r<i.length;r++){var s=i[r];Se(t,0),Se(t,0);var o=t.offset;To(t,s.id,1),He(t,1),Se(t,0),Se(t,0);var a=t.offset;He(t,s.top),He(t,s.left),He(t,s.bottom),He(t,s.right),He(t,s.depth);var l=Math.max(0,s.channels.length-2);He(t,l);for(var c=0;c<l+2;c++){var u=s.channels[c];He(t,u?1:0),u&&(Se(t,0),Se(t,u.data.length+2),pe(t,u.compressionMode),ki(t,u.data))}t.view.setUint32(a-4,t.offset-a,!1);var f=(n=e.filterEffectsMasks[e.filterEffectsMasks.length-1])===null||n===void 0?void 0:n.extra;f&&(Oe(t,1),He(t,f.top),He(t,f.left),He(t,f.bottom),He(t,f.right),Se(t,0),Se(t,f.data.byteLength+2),pe(t,f.compressionMode),ki(t,f.data));var d=t.offset-o;for(t.view.setUint32(o-4,d,!1);d%4;)ot(t,1),d++}});oa("FXid","FEid");Le("FMsk",lt("filterMask"),function(t,e){e.filterMask={colorSpace:zt(t),opacity:me(t)/255}},function(t,e){var n;Ut(t,e.filterMask.colorSpace),pe(t,CS((n=e.filterMask.opacity)!==null&&n!==void 0?n:1,0,1)*255)});Le("artd",function(t){return t.artboards!==void 0},function(t,e,n){var r=Xe(t);e.artboards={count:r["Cnt "],autoExpandOffset:{horizontal:r.autoExpandOffset.Hrzn,vertical:r.autoExpandOffset.Vrtc},origin:{horizontal:r.origin.Hrzn,vertical:r.origin.Vrtc},autoExpandEnabled:r.autoExpandEnabled,autoNestEnabled:r.autoNestEnabled,autoPositionEnabled:r.autoPositionEnabled,shrinkwrapOnSaveEnabled:!!r.shrinkwrapOnSaveEnabled,docDefaultNewArtboardBackgroundColor:xr(r.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:r.docDefaultNewArtboardBackgroundType},Te(t,n())},function(t,e){var n,r,i,s,o,a=e.artboards,l={"Cnt ":a.count,autoExpandOffset:a.autoExpandOffset?{Hrzn:a.autoExpandOffset.horizontal,Vrtc:a.autoExpandOffset.vertical}:{Hrzn:0,Vrtc:0},origin:a.origin?{Hrzn:a.origin.horizontal,Vrtc:a.origin.vertical}:{Hrzn:0,Vrtc:0},autoExpandEnabled:(n=a.autoExpandEnabled)!==null&&n!==void 0?n:!0,autoNestEnabled:(r=a.autoNestEnabled)!==null&&r!==void 0?r:!0,autoPositionEnabled:(i=a.autoPositionEnabled)!==null&&i!==void 0?i:!0,shrinkwrapOnSaveEnabled:(s=a.shrinkwrapOnSaveEnabled)!==null&&s!==void 0?s:!0,docDefaultNewArtboardBackgroundColor:Cr(a.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:(o=a.docDefaultNewArtboardBackgroundType)!==null&&o!==void 0?o:1};Ye(t,"","null",l,"artd")});function $x(t){return Object.keys(t).map(function(e){return t[e]}).some(function(e){return Array.isArray(e)&&e.length>1})}Le("lfx2",function(t){return t.effects!==void 0&&!$x(t.effects)},function(t,e,n){var r=ve(t);if(r!==0)throw new Error("Invalid lfx2 version");var i=Xe(t);e.effects=Al(i,!!t.logMissingFeatures),Te(t,n())},function(t,e,n,r){var i=Ol(e.effects,!!r.logMissingFeatures,!0);Se(t,0),Ye(t,"","null",i)});Le("cinf",lt("compositorUsed"),function(t,e,n){var r=Xe(t);function i(s){return s.split(".")[1]}e.compositorUsed={description:r.description,reason:r.reason,engine:i(r.Engn)},r.Vrsn&&(e.compositorUsed.version=r.Vrsn),r.psVersion&&(e.compositorUsed.photoshopVersion=r.psVersion),r.enableCompCore&&(e.compositorUsed.enableCompCore=i(r.enableCompCore)),r.enableCompCoreGPU&&(e.compositorUsed.enableCompCoreGPU=i(r.enableCompCoreGPU)),r.enableCompCoreThreads&&(e.compositorUsed.enableCompCoreThreads=i(r.enableCompCoreThreads)),r.compCoreSupport&&(e.compositorUsed.compCoreSupport=i(r.compCoreSupport)),r.compCoreGPUSupport&&(e.compositorUsed.compCoreGPUSupport=i(r.compCoreGPUSupport)),Te(t,n())},function(t,e){var n=e.compositorUsed,r={Vrsn:n.version||{major:1,minor:0,fix:0}};n.photoshopVersion&&(r.psVersion=n.photoshopVersion),r.description=n.description,r.reason=n.reason,r.Engn="Engn.".concat(n.engine),n.enableCompCore&&(r.enableCompCore="enable.".concat(n.enableCompCore)),n.enableCompCoreGPU&&(r.enableCompCoreGPU="enable.".concat(n.enableCompCoreGPU)),n.enableCompCoreThreads&&(r.enableCompCoreThreads="enable.".concat(n.enableCompCoreThreads)),n.compCoreSupport&&(r.compCoreSupport="reason.".concat(n.compCoreSupport)),n.compCoreGPUSupport&&(r.compCoreGPUSupport="reason.".concat(n.compCoreGPUSupport)),Ye(t,"","null",r)});Le("extn",function(t){return t._extn!==void 0},function(t,e){Xe(t)},function(t,e){});Le("iOpa",lt("fillOpacity"),function(t,e){e.fillOpacity=xe(t)/255,Te(t,3)},function(t,e){Oe(t,e.fillOpacity*255),ot(t,3)});Le("brst",lt("channelBlendingRestrictions"),function(t,e,n){for(e.channelBlendingRestrictions=[];n()>4;)e.channelBlendingRestrictions.push(Ie(t))},function(t,e){for(var n=0,r=e.channelBlendingRestrictions;n<r.length;n++){var i=r[n];He(t,i)}});Le("tsly",lt("transparencyShapesLayer"),function(t,e){e.transparencyShapesLayer=!!xe(t),Te(t,3)},function(t,e){Oe(t,e.transparencyShapesLayer?1:0),ot(t,3)});function Oe(t,e){var n=Mi(t,1);t.view.setUint8(n,e)}function nt(t,e){var n=Mi(t,2);t.view.setInt16(n,e,!1)}function pe(t,e){var n=Mi(t,2);t.view.setUint16(n,e,!1)}function Fj(t,e){var n=Mi(t,2);t.view.setUint16(n,e,!0)}function He(t,e){var n=Mi(t,4);t.view.setInt32(n,e,!1)}function bb(t,e){var n=Mi(t,4);t.view.setInt32(n,e,!0)}function Se(t,e){var n=Mi(t,4);t.view.setUint32(n,e,!1)}function br(t,e){var n=Mi(t,4);t.view.setFloat32(n,e,!1)}function Hr(t,e){var n=Mi(t,8);t.view.setFloat64(n,e,!1)}function Rn(t,e){He(t,e*65536)}function gr(t,e){He(t,e*(1<<24))}function ki(t,e){if(e){Ux(t,t.offset+e.length);var n=new Uint8Array(t.buffer);n.set(e,t.offset),t.offset+=e.length}}function ot(t,e){for(var n=0;n<e;n++)Oe(t,0)}function Ue(t,e){if(e.length!==4)throw new Error("Invalid signature: '".concat(e,"'"));for(var n=0;n<4;n++)Oe(t,e.charCodeAt(n))}function Dj(t,e){for(var n=0;n<e.length;n++)Oe(t,e.charCodeAt(n))}function To(t,e,n){var r=e.length;if(r>255)throw new Error("String too long");Oe(t,r);for(var i=0;i<r;i++){var s=e.charCodeAt(i);Oe(t,s<128?s:63)}for(;++r%n;)Oe(t,0)}function Ij(t,e){for(var n=0;n<e.length;n++)pe(t,e.charCodeAt(n))}function Mj(t,e){for(var n=0;n<e.length;n++)Fj(t,e.charCodeAt(n))}function Ln(t,e){Se(t,e.length),Ij(t,e)}function Ns(t,e){Se(t,e.length+1);for(var n=0;n<e.length;n++)pe(t,e.charCodeAt(n));pe(t,0)}function Ss(t,e,n,r,i){r===void 0&&(r=!1),i===void 0&&(i=!1),i&&Se(t,0);var s=t.offset;Se(t,0),n();for(var o=t.offset-s-4,a=o;a%e;)Oe(t,0),a++;r&&(o=a),t.view.setUint32(s,o,!1)}function Rj(t,e){var n=t.buffer.byteLength;do n*=2;while(e>n);var r=new ArrayBuffer(n),i=new Uint8Array(r),s=new Uint8Array(t.buffer);i.set(s),t.buffer=r,t.view=new DataView(t.buffer)}function Ux(t,e){e>t.buffer.byteLength&&Rj(t,e)}function Mi(t,e){var n=t.offset;return Ux(t,t.offset+=e),n}function Ut(t,e){e?"r"in e?(pe(t,0),pe(t,Math.round(e.r*257)),pe(t,Math.round(e.g*257)),pe(t,Math.round(e.b*257)),pe(t,0)):"fr"in e?(pe(t,0),pe(t,Math.round(e.fr*255*257)),pe(t,Math.round(e.fg*255*257)),pe(t,Math.round(e.fb*255*257)),pe(t,0)):"l"in e?(pe(t,7),nt(t,Math.round(e.l*1e4)),nt(t,Math.round(e.a<0?e.a*12800:e.a*12700)),nt(t,Math.round(e.b<0?e.b*12800:e.b*12700)),pe(t,0)):"h"in e?(pe(t,1),pe(t,Math.round(e.h*65535)),pe(t,Math.round(e.s*65535)),pe(t,Math.round(e.b*65535)),pe(t,0)):"c"in e?(pe(t,2),pe(t,Math.round(e.c*257)),pe(t,Math.round(e.m*257)),pe(t,Math.round(e.y*257)),pe(t,Math.round(e.k*257))):(pe(t,8),pe(t,Math.round(e.k*1e4/255)),ot(t,6)):(pe(t,0),ot(t,8))}var _b;(function(t){t[t.Bitmap=0]="Bitmap",t[t.Grayscale=1]="Grayscale",t[t.Indexed=2]="Indexed",t[t.RGB=3]="RGB",t[t.CMYK=4]="CMYK",t[t.Multichannel=7]="Multichannel",t[t.Duotone=8]="Duotone",t[t.Lab=9]="Lab"})(_b||(_b={}));var wb;(function(t){t[t.Other=0]="Other",t[t.OpenFolder=1]="OpenFolder",t[t.ClosedFolder=2]="ClosedFolder",t[t.BoundingSectionDivider=3]="BoundingSectionDivider"})(wb||(wb={}));var Sb;(function(t){t[t.None=0]="None",t[t.Visibility=1]="Visibility",t[t.Position=2]="Position",t[t.Appearance=4]="Appearance"})(Sb||(Sb={}));function Lj(t,e){var n="buffer"in t?nb(t.buffer,t.byteOffset,t.byteLength):nb(t);return qB(n,e)}function Vc(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Hh={exports:{}};var xb;function Bj(){return xb||(xb=1,(function(t,e){(function(n){t.exports=n()})(function(){return(function n(r,i,s){function o(c,u){if(!i[c]){if(!r[c]){var f=typeof Vc=="function"&&Vc;if(!u&&f)return f(c,!0);if(a)return a(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[c]={exports:{}};r[c][0].call(h.exports,function(g){var p=r[c][1][g];return o(p||g)},h,h.exports,n,r,i,s)}return i[c].exports}for(var a=typeof Vc=="function"&&Vc,l=0;l<s.length;l++)o(s[l]);return o})({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,u,f,d,h,g,p,v=[],m=0,y=l.length,_=y,b=s.getTypeOf(l)!=="string";m<l.length;)_=y-m,f=b?(c=l[m++],u=m<y?l[m++]:0,m<y?l[m++]:0):(c=l.charCodeAt(m++),u=m<y?l.charCodeAt(m++):0,m<y?l.charCodeAt(m++):0),d=c>>2,h=(3&c)<<4|u>>4,g=1<_?(15&u)<<2|f>>6:64,p=2<_?63&f:64,v.push(a.charAt(d)+a.charAt(h)+a.charAt(g)+a.charAt(p));return v.join("")},i.decode=function(l){var c,u,f,d,h,g,p=0,v=0,m="data:";if(l.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var y,_=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&_--,l.charAt(l.length-2)===a.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|_):new Array(0|_);p<l.length;)c=a.indexOf(l.charAt(p++))<<2|(d=a.indexOf(l.charAt(p++)))>>4,u=(15&d)<<4|(h=a.indexOf(l.charAt(p++)))>>2,f=(3&h)<<6|(g=a.indexOf(l.charAt(p++))),y[v++]=c,h!==64&&(y[v++]=u),g!==64&&(y[v++]=f);return y}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(u,f,d,h,g){this.compressedSize=u,this.uncompressedSize=f,this.crc32=d,this.compression=h,this.compressedContent=g}c.prototype={getContentWorker:function(){var u=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return u.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,f,d){return u.pipe(new a).pipe(new l("uncompressedSize")).pipe(f.compressWorker(d)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=(function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l})();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?(function(c,u,f,d){var h=o,g=d+f;c^=-1;for(var p=d;p<g;p++)c=c>>>8^h[255&(c^u[p])];return-1^c})(0|l,a,a.length,0):(function(c,u,f,d){var h=o,g=d+f;c^=-1;for(var p=d;p<g;p++)c=c>>>8^h[255&(c^u.charCodeAt(p))];return-1^c})(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),c=s?"uint8array":"array";function u(f,d){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=d,this.meta={}}i.magic="\b\0",a.inherits(u,l),u.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,f.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(d){f.push({data:d,meta:f.meta})}},i.compressWorker=function(f){return new u("Deflate",f)},i.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(h,g){var p,v="";for(p=0;p<g;p++)v+=String.fromCharCode(255&h),h>>>=8;return v}function o(h,g,p,v,m,y){var _,b,x=h.file,E=h.compression,T=y!==c.utf8encode,O=a.transformTo("string",y(x.name)),k=a.transformTo("string",c.utf8encode(x.name)),I=x.comment,R=a.transformTo("string",y(I)),C=a.transformTo("string",c.utf8encode(I)),P=k.length!==x.name.length,S=C.length!==I.length,$="",Z="",H="",K=x.dir,Q=x.date,ce={crc32:0,compressedSize:0,uncompressedSize:0};g&&!p||(ce.crc32=h.crc32,ce.compressedSize=h.compressedSize,ce.uncompressedSize=h.uncompressedSize);var Y=0;g&&(Y|=8),T||!P&&!S||(Y|=2048);var U=0,he=0;K&&(U|=16),m==="UNIX"?(he=798,U|=(function(te,Ce){var q=te;return te||(q=Ce?16893:33204),(65535&q)<<16})(x.unixPermissions,K)):(he=20,U|=(function(te){return 63&(te||0)})(x.dosPermissions)),_=Q.getUTCHours(),_<<=6,_|=Q.getUTCMinutes(),_<<=5,_|=Q.getUTCSeconds()/2,b=Q.getUTCFullYear()-1980,b<<=4,b|=Q.getUTCMonth()+1,b<<=5,b|=Q.getUTCDate(),P&&(Z=s(1,1)+s(u(O),4)+k,$+="up"+s(Z.length,2)+Z),S&&(H=s(1,1)+s(u(R),4)+C,$+="uc"+s(H.length,2)+H);var re="";return re+=`
\0`,re+=s(Y,2),re+=E.magic,re+=s(_,2),re+=s(b,2),re+=s(ce.crc32,4),re+=s(ce.compressedSize,4),re+=s(ce.uncompressedSize,4),re+=s(O.length,2),re+=s($.length,2),{fileRecord:f.LOCAL_FILE_HEADER+re+O+$,dirRecord:f.CENTRAL_FILE_HEADER+s(he,2)+re+s(R.length,2)+"\0\0\0\0"+s(U,4)+s(v,4)+O+$+R}}var a=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),u=n("../crc32"),f=n("../signature");function d(h,g,p,v){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=p,this.encodeFileName=v,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(d,l),d.prototype.push=function(h){var g=h.meta.percent||0,p=this.entriesCount,v=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,l.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:p?(g+100*(p-v-1))/p:100}}))},d.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var g=this.streamFiles&&!h.file.dir;if(g){var p=o(h,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(h){this.accumulate=!1;var g=this.streamFiles&&!h.file.dir,p=o(h,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),g)this.push({data:(function(v){return f.DATA_DESCRIPTOR+s(v.crc32,4)+s(v.compressedSize,4)+s(v.uncompressedSize,4)})(h),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var h=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var p=this.bytesWritten-h,v=(function(m,y,_,b,x){var E=a.transformTo("string",x(b));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(m,2)+s(m,2)+s(y,4)+s(_,4)+s(E.length,2)+E})(this.dirRecords.length,p,h,this.zipComment,this.encodeFileName);this.push({data:v,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(h){this._sources.push(h);var g=this;return h.on("data",function(p){g.processChunk(p)}),h.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),h.on("error",function(p){g.error(p)}),this},d.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(h){var g=this._sources;if(!l.prototype.error.call(this,h))return!1;for(var p=0;p<g.length;p++)try{g[p].error(h)}catch{}return!0},d.prototype.lock=function(){l.prototype.lock.call(this);for(var h=this._sources,g=0;g<h.length;g++)h[g].lock()},r.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,l,c){var u=new o(l.streamFiles,c,l.platform,l.encodeFileName),f=0;try{a.forEach(function(d,h){f++;var g=(function(y,_){var b=y||_,x=s[b];if(!x)throw new Error(b+" is not a valid compression method !");return x})(h.options.compression,l.compression),p=h.options.compressionOptions||l.compressionOptions||{},v=h.dir,m=h.date;h._compressWorker(g,p).withStreamInfo("file",{name:d,dir:v,date:m,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(u)}),u.entriesCount=f}catch(d){u.error(d)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),u=n("./nodejsUtils");function f(d){return new o.Promise(function(h,g){var p=d.decompressed.getContentWorker().pipe(new c);p.on("error",function(v){g(v)}).on("end",function(){p.streamInfo.crc32!==d.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}r.exports=function(d,h){var g=this;return h=s.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(d)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",d,!0,h.optimizedBinaryString,h.base64).then(function(p){var v=new l(h);return v.load(p),v}).then(function(p){var v=[o.Promise.resolve(p)],m=p.files;if(h.checkCRC32)for(var y=0;y<m.length;y++)v.push(f(m[y]));return o.Promise.all(v)}).then(function(p){for(var v=p.shift(),m=v.files,y=0;y<m.length;y++){var _=m[y],b=_.fileNameStr,x=s.resolve(_.fileNameStr);g.file(x,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:h.createFolders}),_.dir||(g.file(x).unsafeOriginalName=b)}return v.zipComment.length&&(g.comment=v.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,l,c){s.call(this,l),this._helper=a;var u=this;a.on("data",function(f,d){u.push(f)||u._helper.pause(),c&&c(d)}).on("error",function(f){u.emit("error",f)}).on("end",function(){u.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(x,E,T){var O,k=a.getTypeOf(E),I=a.extend(T||{},u);I.date=I.date||new Date,I.compression!==null&&(I.compression=I.compression.toUpperCase()),typeof I.unixPermissions=="string"&&(I.unixPermissions=parseInt(I.unixPermissions,8)),I.unixPermissions&&16384&I.unixPermissions&&(I.dir=!0),I.dosPermissions&&16&I.dosPermissions&&(I.dir=!0),I.dir&&(x=m(x)),I.createFolders&&(O=v(x))&&y.call(this,O,!0);var R=k==="string"&&I.binary===!1&&I.base64===!1;T&&T.binary!==void 0||(I.binary=!R),(E instanceof f&&E.uncompressedSize===0||I.dir||!E||E.length===0)&&(I.base64=!1,I.binary=!0,E="",I.compression="STORE",k="string");var C=null;C=E instanceof f||E instanceof l?E:g.isNode&&g.isStream(E)?new p(x,E):a.prepareContent(x,E,I.binary,I.optimizedBinaryString,I.base64);var P=new d(x,C,I);this.files[x]=P}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),u=n("./defaults"),f=n("./compressedObject"),d=n("./zipObject"),h=n("./generate"),g=n("./nodejsUtils"),p=n("./nodejs/NodejsStreamInputAdapter"),v=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var E=x.lastIndexOf("/");return 0<E?x.substring(0,E):""},m=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},y=function(x,E){return E=E!==void 0?E:u.createFolders,x=m(x),this.files[x]||s.call(this,x,null,{dir:!0,createFolders:E}),this.files[x]};function _(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var E,T,O;for(E in this.files)O=this.files[E],(T=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&x(T,O)},filter:function(x){var E=[];return this.forEach(function(T,O){x(T,O)&&E.push(O)}),E},file:function(x,E,T){if(arguments.length!==1)return x=this.root+x,s.call(this,x,E,T),this;if(_(x)){var O=x;return this.filter(function(I,R){return!R.dir&&O.test(I)})}var k=this.files[this.root+x];return k&&!k.dir?k:null},folder:function(x){if(!x)return this;if(_(x))return this.filter(function(k,I){return I.dir&&x.test(k)});var E=this.root+x,T=y.call(this,E),O=this.clone();return O.root=T.name,O},remove:function(x){x=this.root+x;var E=this.files[x];if(E||(x.slice(-1)!=="/"&&(x+="/"),E=this.files[x]),E&&!E.dir)delete this.files[x];else for(var T=this.filter(function(k,I){return I.name.slice(0,x.length)===x}),O=0;O<T.length;O++)delete this.files[T[O].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var E,T={};try{if((T=a.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");a.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var O=T.comment||this.comment||"";E=h.generateWorker(this,T,O)}catch(k){(E=new l("error")).error(k)}return new c(E,T.type||"string",T.mimeType)},generateAsync:function(x,E){return this.generateInternalStream(x).accumulate(E)},generateNodeStream:function(x,E){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(E)}};r.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),f=a.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===l&&this.data[d+1]===c&&this.data[d+2]===u&&this.data[d+3]===f)return d-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),f=a.charCodeAt(3),d=this.readData(4);return l===d[0]&&c===d[1]&&u===d[2]&&f===d[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),u=n("./Uint8ArrayReader");r.exports=function(f){var d=s.getTypeOf(f);return s.checkSupport(d),d!=="string"||o.uint8array?d==="nodebuffer"?new c(f):o.uint8array?new u(s.transformTo("uint8array",f)):new a(s.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=s.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),c=n("../support"),u=n("../external"),f=null;if(c.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function d(g,p){return new u.Promise(function(v,m){var y=[],_=g._internalType,b=g._outputType,x=g._mimeType;g.on("data",function(E,T){y.push(E),p&&p(T)}).on("error",function(E){y=[],m(E)}).on("end",function(){try{var E=(function(T,O,k){switch(T){case"blob":return s.newBlob(s.transformTo("arraybuffer",O),k);case"base64":return l.encode(O);default:return s.transformTo(T,O)}})(b,(function(T,O){var k,I=0,R=null,C=0;for(k=0;k<O.length;k++)C+=O[k].length;switch(T){case"string":return O.join("");case"array":return Array.prototype.concat.apply([],O);case"uint8array":for(R=new Uint8Array(C),k=0;k<O.length;k++)R.set(O[k],I),I+=O[k].length;return R;case"nodebuffer":return Buffer.concat(O);default:throw new Error("concat : unsupported type '"+T+"'")}})(_,y),x);v(E)}catch(T){m(T)}y=[]}).resume()})}function h(g,p,v){var m=p;switch(p){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=p,this._mimeType=v,s.checkSupport(m),this._worker=g.pipe(new o(m)),g.lock()}catch(y){this._worker=new a("error"),this._worker.error(y)}}h.prototype={accumulate:function(g){return d(this,g)},on:function(g,p){var v=this;return g==="data"?this._worker.on(g,function(m){p.call(v,m.data,m.meta)}):this._worker.on(g,function(){s.delay(p,arguments,v)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},g)}},r.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function d(){l.call(this,"utf-8 encode")}i.utf8encode=function(h){return o.nodebuffer?a.newBufferFrom(h,"utf-8"):(function(g){var p,v,m,y,_,b=g.length,x=0;for(y=0;y<b;y++)(64512&(v=g.charCodeAt(y)))==55296&&y+1<b&&(64512&(m=g.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(m-56320),y++),x+=v<128?1:v<2048?2:v<65536?3:4;for(p=o.uint8array?new Uint8Array(x):new Array(x),y=_=0;_<x;y++)(64512&(v=g.charCodeAt(y)))==55296&&y+1<b&&(64512&(m=g.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(m-56320),y++),v<128?p[_++]=v:(v<2048?p[_++]=192|v>>>6:(v<65536?p[_++]=224|v>>>12:(p[_++]=240|v>>>18,p[_++]=128|v>>>12&63),p[_++]=128|v>>>6&63),p[_++]=128|63&v);return p})(h)},i.utf8decode=function(h){return o.nodebuffer?s.transformTo("nodebuffer",h).toString("utf-8"):(function(g){var p,v,m,y,_=g.length,b=new Array(2*_);for(p=v=0;p<_;)if((m=g[p++])<128)b[v++]=m;else if(4<(y=c[m]))b[v++]=65533,p+=y-1;else{for(m&=y===2?31:y===3?15:7;1<y&&p<_;)m=m<<6|63&g[p++],y--;1<y?b[v++]=65533:m<65536?b[v++]=m:(m-=65536,b[v++]=55296|m>>10&1023,b[v++]=56320|1023&m)}return b.length!==v&&(b.subarray?b=b.subarray(0,v):b.length=v),s.applyFromCharCode(b)})(h=s.transformTo(o.uint8array?"uint8array":"array",h))},s.inherits(f,l),f.prototype.processChunk=function(h){var g=s.transformTo(o.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var p=g;(g=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),g.set(p,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var v=(function(y,_){var b;for((_=_||y.length)>y.length&&(_=y.length),b=_-1;0<=b&&(192&y[b])==128;)b--;return b<0||b===0?_:b+c[y[b]]>_?b:_})(g),m=g;v!==g.length&&(o.uint8array?(m=g.subarray(0,v),this.leftOver=g.subarray(v,g.length)):(m=g.slice(0,v),this.leftOver=g.slice(v,g.length))),this.push({data:i.utf8decode(m),meta:h.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,s.inherits(d,l),d.prototype.processChunk=function(h){this.push({data:i.utf8encode(h.data),meta:h.meta})},i.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function c(p){return p}function u(p,v){for(var m=0;m<p.length;++m)v[m]=255&p.charCodeAt(m);return v}n("setimmediate"),i.newBlob=function(p,v){i.checkSupport("blob");try{return new Blob([p],{type:v})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(p),m.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(p,v,m){var y=[],_=0,b=p.length;if(b<=m)return String.fromCharCode.apply(null,p);for(;_<b;)v==="array"||v==="nodebuffer"?y.push(String.fromCharCode.apply(null,p.slice(_,Math.min(_+m,b)))):y.push(String.fromCharCode.apply(null,p.subarray(_,Math.min(_+m,b)))),_+=m;return y.join("")},stringifyByChar:function(p){for(var v="",m=0;m<p.length;m++)v+=String.fromCharCode(p[m]);return v},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function d(p){var v=65536,m=i.getTypeOf(p),y=!0;if(m==="uint8array"?y=f.applyCanBeUsed.uint8array:m==="nodebuffer"&&(y=f.applyCanBeUsed.nodebuffer),y)for(;1<v;)try{return f.stringifyByChunk(p,m,v)}catch{v=Math.floor(v/2)}return f.stringifyByChar(p)}function h(p,v){for(var m=0;m<p.length;m++)v[m]=p[m];return v}i.applyFromCharCode=d;var g={};g.string={string:c,array:function(p){return u(p,new Array(p.length))},arraybuffer:function(p){return g.string.uint8array(p).buffer},uint8array:function(p){return u(p,new Uint8Array(p.length))},nodebuffer:function(p){return u(p,a.allocBuffer(p.length))}},g.array={string:d,array:c,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return a.newBufferFrom(p)}},g.arraybuffer={string:function(p){return d(new Uint8Array(p))},array:function(p){return h(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:c,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return a.newBufferFrom(new Uint8Array(p))}},g.uint8array={string:d,array:function(p){return h(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:c,nodebuffer:function(p){return a.newBufferFrom(p)}},g.nodebuffer={string:d,array:function(p){return h(p,new Array(p.length))},arraybuffer:function(p){return g.nodebuffer.uint8array(p).buffer},uint8array:function(p){return h(p,new Uint8Array(p.length))},nodebuffer:c},i.transformTo=function(p,v){if(v=v||"",!p)return v;i.checkSupport(p);var m=i.getTypeOf(v);return g[m][p](v)},i.resolve=function(p){for(var v=p.split("/"),m=[],y=0;y<v.length;y++){var _=v[y];_==="."||_===""&&y!==0&&y!==v.length-1||(_===".."?m.pop():m.push(_))}return m.join("/")},i.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(p)?"nodebuffer":s.uint8array&&p instanceof Uint8Array?"uint8array":s.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(p){if(!s[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(p){var v,m,y="";for(m=0;m<(p||"").length;m++)y+="\\x"+((v=p.charCodeAt(m))<16?"0":"")+v.toString(16).toUpperCase();return y},i.delay=function(p,v,m){setImmediate(function(){p.apply(m||null,v||[])})},i.inherits=function(p,v){function m(){}m.prototype=v.prototype,p.prototype=new m},i.extend=function(){var p,v,m={};for(p=0;p<arguments.length;p++)for(v in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],v)&&m[v]===void 0&&(m[v]=arguments[p][v]);return m},i.prepareContent=function(p,v,m,y,_){return l.Promise.resolve(v).then(function(b){return s.blob&&(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1)&&typeof FileReader<"u"?new l.Promise(function(x,E){var T=new FileReader;T.onload=function(O){x(O.target.result)},T.onerror=function(O){E(O.target.error)},T.readAsArrayBuffer(b)}):b}).then(function(b){var x=i.getTypeOf(b);return x?(x==="arraybuffer"?b=i.transformTo("uint8array",b):x==="string"&&(_?b=o.decode(b):m&&y!==!0&&(b=(function(E){return u(E,s.uint8array?new Uint8Array(E.length):new Array(E.length))})(b))),b):l.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),c=n("./support");function u(f){this.files=[],this.loadOptions=f}u.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(d)+", expected "+o.pretty(f)+")")}},isSignature:function(f,d){var h=this.reader.index;this.reader.setIndex(f);var g=this.reader.readString(4)===d;return this.reader.setIndex(h),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),d=c.uint8array?"uint8array":"array",h=o.transformTo(d,f);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,d,h,g=this.zip64EndOfCentralSize-44;0<g;)f=this.reader.readInt(2),d=this.reader.readInt(4),h=this.reader.readData(d),this.zip64ExtensibleData[f]={id:f,length:d,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,d;for(f=0;f<this.files.length;f++)d=this.files[f],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var d=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var g=d-h;if(0<g)this.isSignature(d,a.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(f){this.reader=s(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),u=n("./compressions"),f=n("./support");function d(h,g){this.options=h,this.loadOptions=g}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var g,p;if(h.skip(22),this.fileNameLength=h.readInt(2),p=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=(function(v){for(var m in u)if(Object.prototype.hasOwnProperty.call(u,m)&&u[m].magic===v)return u[m];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,g,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var g=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(g),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var g,p,v,m=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<m;)g=h.readInt(2),p=h.readInt(2),v=h.readData(p),this.extraFields[g]={id:g,length:p,value:v};h.setIndex(m)},handleUTF8:function(){var h=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var p=o.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var v=this.findExtraFieldUnicodeComment();if(v!==null)this.fileCommentStr=v;else{var m=o.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var g=s(h.value);return g.readInt(1)!==1||l(this.fileName)!==g.readInt(4)?null:c.utf8decode(g.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var g=s(h.value);return g.readInt(1)!==1||l(this.fileComment)!==g.readInt(4)?null:c.utf8decode(g.readData(h.length-5))}return null}},r.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(g,p,v){this.name=g,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=p,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),u=n("./stream/GenericWorker");s.prototype={internalStream:function(g){var p=null,v="string";try{if(!g)throw new Error("No output type specified.");var m=(v=g.toLowerCase())==="string"||v==="text";v!=="binarystring"&&v!=="text"||(v="string"),p=this._decompressWorker();var y=!this._dataBinary;y&&!m&&(p=p.pipe(new l.Utf8EncodeWorker)),!y&&m&&(p=p.pipe(new l.Utf8DecodeWorker))}catch(_){(p=new u("error")).error(_)}return new o(p,v,"")},async:function(g,p){return this.internalStream(g).accumulate(p)},nodeStream:function(g,p){return this.internalStream(g||"nodebuffer").toNodejsStream(p)},_compressWorker:function(g,p){if(this._data instanceof c&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(v,g,p)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<f.length;h++)s.prototype[f[h]]=d;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,u=new l(g),f=s.document.createTextNode("");u.observe(f,{characterData:!0}),o=function(){f.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var p=s.document.createElement("script");p.onreadystatechange=function(){g(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},s.document.documentElement.appendChild(p)}:function(){setTimeout(g,0)};else{var d=new s.MessageChannel;d.port1.onmessage=g,o=function(){d.port2.postMessage(0)}}var h=[];function g(){var p,v;a=!0;for(var m=h.length;m;){for(v=h,h=[],p=-1;++p<m;)v[p]();m=h.length}a=!1}r.exports=function(p){h.push(p)!==1||a||o()}}).call(this,typeof Xl<"u"?Xl:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function f(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,m!==o&&p(this,m)}function d(m,y,_){this.promise=m,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function h(m,y,_){s(function(){var b;try{b=y(_)}catch(x){return a.reject(m,x)}b===m?a.reject(m,new TypeError("Cannot resolve promise with itself")):a.resolve(m,b)})}function g(m){var y=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof y=="function")return function(){y.apply(m,arguments)}}function p(m,y){var _=!1;function b(T){_||(_=!0,a.reject(m,T))}function x(T){_||(_=!0,a.resolve(m,T))}var E=v(function(){y(x,b)});E.status==="error"&&b(E.value)}function v(m,y){var _={};try{_.value=m(y),_.status="success"}catch(b){_.status="error",_.value=b}return _}(r.exports=f).prototype.finally=function(m){if(typeof m!="function")return this;var y=this.constructor;return this.then(function(_){return y.resolve(m()).then(function(){return _})},function(_){return y.resolve(m()).then(function(){throw _})})},f.prototype.catch=function(m){return this.then(null,m)},f.prototype.then=function(m,y){if(typeof m!="function"&&this.state===c||typeof y!="function"&&this.state===l)return this;var _=new this.constructor(o);return this.state!==u?h(_,this.state===c?m:y,this.outcome):this.queue.push(new d(_,m,y)),_},d.prototype.callFulfilled=function(m){a.resolve(this.promise,m)},d.prototype.otherCallFulfilled=function(m){h(this.promise,this.onFulfilled,m)},d.prototype.callRejected=function(m){a.reject(this.promise,m)},d.prototype.otherCallRejected=function(m){h(this.promise,this.onRejected,m)},a.resolve=function(m,y){var _=v(g,y);if(_.status==="error")return a.reject(m,_.value);var b=_.value;if(b)p(m,b);else{m.state=c,m.outcome=y;for(var x=-1,E=m.queue.length;++x<E;)m.queue[x].callFulfilled(y)}return m},a.reject=function(m,y){m.state=l,m.outcome=y;for(var _=-1,b=m.queue.length;++_<b;)m.queue[_].callRejected(y);return m},f.resolve=function(m){return m instanceof this?m:a.resolve(new this(o),m)},f.reject=function(m){var y=new this(o);return a.reject(y,m)},f.all=function(m){var y=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=m.length,b=!1;if(!_)return this.resolve([]);for(var x=new Array(_),E=0,T=-1,O=new this(o);++T<_;)k(m[T],T);return O;function k(I,R){y.resolve(I).then(function(C){x[R]=C,++E!==_||b||(b=!0,a.resolve(O,x))},function(C){b||(b=!0,a.reject(O,C))})}},f.race=function(m){var y=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=m.length,b=!1;if(!_)return this.resolve([]);for(var x=-1,E=new this(o);++x<_;)T=m[x],y.resolve(T).then(function(O){b||(b=!0,a.resolve(E,O))},function(O){b||(b=!0,a.reject(E,O))});var T;return E}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),u=Object.prototype.toString,f=0,d=-1,h=0,g=8;function p(m){if(!(this instanceof p))return new p(m);this.options=o.assign({level:d,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},m||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var _=s.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(_!==f)throw new Error(l[_]);if(y.header&&s.deflateSetHeader(this.strm,y.header),y.dictionary){var b;if(b=typeof y.dictionary=="string"?a.string2buf(y.dictionary):u.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(_=s.deflateSetDictionary(this.strm,b))!==f)throw new Error(l[_]);this._dict_set=!0}}function v(m,y){var _=new p(y);if(_.push(m,!0),_.err)throw _.msg||l[_.err];return _.result}p.prototype.push=function(m,y){var _,b,x=this.strm,E=this.options.chunkSize;if(this.ended)return!1;b=y===~~y?y:y===!0?4:0,typeof m=="string"?x.input=a.string2buf(m):u.call(m)==="[object ArrayBuffer]"?x.input=new Uint8Array(m):x.input=m,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new o.Buf8(E),x.next_out=0,x.avail_out=E),(_=s.deflate(x,b))!==1&&_!==f)return this.onEnd(_),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||b!==4&&b!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(x.output,x.next_out))):this.onData(o.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&_!==1);return b===4?(_=s.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===f):b!==2||(this.onEnd(f),!(x.avail_out=0))},p.prototype.onData=function(m){this.chunks.push(m)},p.prototype.onEnd=function(m){m===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Deflate=p,i.deflate=v,i.deflateRaw=function(m,y){return(y=y||{}).raw=!0,v(m,y)},i.gzip=function(m,y){return(y=y||{}).gzip=!0,v(m,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),u=n("./zlib/zstream"),f=n("./zlib/gzheader"),d=Object.prototype.toString;function h(p){if(!(this instanceof h))return new h(p);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},p||{});var v=this.options;v.raw&&0<=v.windowBits&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),!(0<=v.windowBits&&v.windowBits<16)||p&&p.windowBits||(v.windowBits+=32),15<v.windowBits&&v.windowBits<48&&(15&v.windowBits)==0&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var m=s.inflateInit2(this.strm,v.windowBits);if(m!==l.Z_OK)throw new Error(c[m]);this.header=new f,s.inflateGetHeader(this.strm,this.header)}function g(p,v){var m=new h(v);if(m.push(p,!0),m.err)throw m.msg||c[m.err];return m.result}h.prototype.push=function(p,v){var m,y,_,b,x,E,T=this.strm,O=this.options.chunkSize,k=this.options.dictionary,I=!1;if(this.ended)return!1;y=v===~~v?v:v===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof p=="string"?T.input=a.binstring2buf(p):d.call(p)==="[object ArrayBuffer]"?T.input=new Uint8Array(p):T.input=p,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(O),T.next_out=0,T.avail_out=O),(m=s.inflate(T,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&k&&(E=typeof k=="string"?a.string2buf(k):d.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,m=s.inflateSetDictionary(this.strm,E)),m===l.Z_BUF_ERROR&&I===!0&&(m=l.Z_OK,I=!1),m!==l.Z_STREAM_END&&m!==l.Z_OK)return this.onEnd(m),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&m!==l.Z_STREAM_END&&(T.avail_in!==0||y!==l.Z_FINISH&&y!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=a.utf8border(T.output,T.next_out),b=T.next_out-_,x=a.buf2string(T.output,_),T.next_out=b,T.avail_out=O-b,b&&o.arraySet(T.output,T.output,_,b,0),this.onData(x)):this.onData(o.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(I=!0)}while((0<T.avail_in||T.avail_out===0)&&m!==l.Z_STREAM_END);return m===l.Z_STREAM_END&&(y=l.Z_FINISH),y===l.Z_FINISH?(m=s.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===l.Z_OK):y!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(T.avail_out=0))},h.prototype.onData=function(p){this.chunks.push(p)},h.prototype.onEnd=function(p){p===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},i.Inflate=h,i.inflate=g,i.inflateRaw=function(p,v){return(v=v||{}).raw=!0,g(p,v)},i.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var f in u)u.hasOwnProperty(f)&&(l[f]=u[f])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,u,f,d){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+f),d);else for(var h=0;h<f;h++)l[d+h]=c[u+h]},flattenChunks:function(l){var c,u,f,d,h,g;for(c=f=0,u=l.length;c<u;c++)f+=l[c].length;for(g=new Uint8Array(f),c=d=0,u=l.length;c<u;c++)h=l[c],g.set(h,d),d+=h.length;return g}},a={arraySet:function(l,c,u,f,d){for(var h=0;h<f;h++)l[d+h]=c[u+h]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(f,d){if(d<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(f,d));for(var h="",g=0;g<d;g++)h+=String.fromCharCode(f[g]);return h}l[254]=l[254]=1,i.string2buf=function(f){var d,h,g,p,v,m=f.length,y=0;for(p=0;p<m;p++)(64512&(h=f.charCodeAt(p)))==55296&&p+1<m&&(64512&(g=f.charCodeAt(p+1)))==56320&&(h=65536+(h-55296<<10)+(g-56320),p++),y+=h<128?1:h<2048?2:h<65536?3:4;for(d=new s.Buf8(y),p=v=0;v<y;p++)(64512&(h=f.charCodeAt(p)))==55296&&p+1<m&&(64512&(g=f.charCodeAt(p+1)))==56320&&(h=65536+(h-55296<<10)+(g-56320),p++),h<128?d[v++]=h:(h<2048?d[v++]=192|h>>>6:(h<65536?d[v++]=224|h>>>12:(d[v++]=240|h>>>18,d[v++]=128|h>>>12&63),d[v++]=128|h>>>6&63),d[v++]=128|63&h);return d},i.buf2binstring=function(f){return u(f,f.length)},i.binstring2buf=function(f){for(var d=new s.Buf8(f.length),h=0,g=d.length;h<g;h++)d[h]=f.charCodeAt(h);return d},i.buf2string=function(f,d){var h,g,p,v,m=d||f.length,y=new Array(2*m);for(h=g=0;h<m;)if((p=f[h++])<128)y[g++]=p;else if(4<(v=l[p]))y[g++]=65533,h+=v-1;else{for(p&=v===2?31:v===3?15:7;1<v&&h<m;)p=p<<6|63&f[h++],v--;1<v?y[g++]=65533:p<65536?y[g++]=p:(p-=65536,y[g++]=55296|p>>10&1023,y[g++]=56320|1023&p)}return u(y,g)},i.utf8border=function(f,d){var h;for((d=d||f.length)>f.length&&(d=f.length),h=d-1;0<=h&&(192&f[h])==128;)h--;return h<0||h===0?d:h+l[f[h]]>d?h:d}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,l){for(var c=65535&s|0,u=s>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;u=u+(c=c+o[l++]|0)|0,--f;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=(function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a})();r.exports=function(o,a,l,c){var u=s,f=c+l;o^=-1;for(var d=c;d<f;d++)o=o>>>8^u[255&(o^a[d])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),c=n("./crc32"),u=n("./messages"),f=0,d=4,h=0,g=-2,p=-1,v=4,m=2,y=8,_=9,b=286,x=30,E=19,T=2*b+1,O=15,k=3,I=258,R=I+k+1,C=42,P=113,S=1,$=2,Z=3,H=4;function K(w,N){return w.msg=u[N],N}function Q(w){return(w<<1)-(4<w?9:0)}function ce(w){for(var N=w.length;0<=--N;)w[N]=0}function Y(w){var N=w.state,j=N.pending;j>w.avail_out&&(j=w.avail_out),j!==0&&(o.arraySet(w.output,N.pending_buf,N.pending_out,j,w.next_out),w.next_out+=j,N.pending_out+=j,w.total_out+=j,w.avail_out-=j,N.pending-=j,N.pending===0&&(N.pending_out=0))}function U(w,N){a._tr_flush_block(w,0<=w.block_start?w.block_start:-1,w.strstart-w.block_start,N),w.block_start=w.strstart,Y(w.strm)}function he(w,N){w.pending_buf[w.pending++]=N}function re(w,N){w.pending_buf[w.pending++]=N>>>8&255,w.pending_buf[w.pending++]=255&N}function te(w,N){var j,A,F=w.max_chain_length,B=w.strstart,W=w.prev_length,G=w.nice_match,V=w.strstart>w.w_size-R?w.strstart-(w.w_size-R):0,J=w.window,ue=w.w_mask,oe=w.prev,ge=w.strstart+I,ee=J[B+W-1],fe=J[B+W];w.prev_length>=w.good_match&&(F>>=2),G>w.lookahead&&(G=w.lookahead);do if(J[(j=N)+W]===fe&&J[j+W-1]===ee&&J[j]===J[B]&&J[++j]===J[B+1]){B+=2,j++;do;while(J[++B]===J[++j]&&J[++B]===J[++j]&&J[++B]===J[++j]&&J[++B]===J[++j]&&J[++B]===J[++j]&&J[++B]===J[++j]&&J[++B]===J[++j]&&J[++B]===J[++j]&&B<ge);if(A=I-(ge-B),B=ge-I,W<A){if(w.match_start=N,G<=(W=A))break;ee=J[B+W-1],fe=J[B+W]}}while((N=oe[N&ue])>V&&--F!=0);return W<=w.lookahead?W:w.lookahead}function Ce(w){var N,j,A,F,B,W,G,V,J,ue,oe=w.w_size;do{if(F=w.window_size-w.lookahead-w.strstart,w.strstart>=oe+(oe-R)){for(o.arraySet(w.window,w.window,oe,oe,0),w.match_start-=oe,w.strstart-=oe,w.block_start-=oe,N=j=w.hash_size;A=w.head[--N],w.head[N]=oe<=A?A-oe:0,--j;);for(N=j=oe;A=w.prev[--N],w.prev[N]=oe<=A?A-oe:0,--j;);F+=oe}if(w.strm.avail_in===0)break;if(W=w.strm,G=w.window,V=w.strstart+w.lookahead,J=F,ue=void 0,ue=W.avail_in,J<ue&&(ue=J),j=ue===0?0:(W.avail_in-=ue,o.arraySet(G,W.input,W.next_in,ue,V),W.state.wrap===1?W.adler=l(W.adler,G,ue,V):W.state.wrap===2&&(W.adler=c(W.adler,G,ue,V)),W.next_in+=ue,W.total_in+=ue,ue),w.lookahead+=j,w.lookahead+w.insert>=k)for(B=w.strstart-w.insert,w.ins_h=w.window[B],w.ins_h=(w.ins_h<<w.hash_shift^w.window[B+1])&w.hash_mask;w.insert&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[B+k-1])&w.hash_mask,w.prev[B&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=B,B++,w.insert--,!(w.lookahead+w.insert<k)););}while(w.lookahead<R&&w.strm.avail_in!==0)}function q(w,N){for(var j,A;;){if(w.lookahead<R){if(Ce(w),w.lookahead<R&&N===f)return S;if(w.lookahead===0)break}if(j=0,w.lookahead>=k&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+k-1])&w.hash_mask,j=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),j!==0&&w.strstart-j<=w.w_size-R&&(w.match_length=te(w,j)),w.match_length>=k)if(A=a._tr_tally(w,w.strstart-w.match_start,w.match_length-k),w.lookahead-=w.match_length,w.match_length<=w.max_lazy_match&&w.lookahead>=k){for(w.match_length--;w.strstart++,w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+k-1])&w.hash_mask,j=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart,--w.match_length!=0;);w.strstart++}else w.strstart+=w.match_length,w.match_length=0,w.ins_h=w.window[w.strstart],w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+1])&w.hash_mask;else A=a._tr_tally(w,0,w.window[w.strstart]),w.lookahead--,w.strstart++;if(A&&(U(w,!1),w.strm.avail_out===0))return S}return w.insert=w.strstart<k-1?w.strstart:k-1,N===d?(U(w,!0),w.strm.avail_out===0?Z:H):w.last_lit&&(U(w,!1),w.strm.avail_out===0)?S:$}function ne(w,N){for(var j,A,F;;){if(w.lookahead<R){if(Ce(w),w.lookahead<R&&N===f)return S;if(w.lookahead===0)break}if(j=0,w.lookahead>=k&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+k-1])&w.hash_mask,j=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),w.prev_length=w.match_length,w.prev_match=w.match_start,w.match_length=k-1,j!==0&&w.prev_length<w.max_lazy_match&&w.strstart-j<=w.w_size-R&&(w.match_length=te(w,j),w.match_length<=5&&(w.strategy===1||w.match_length===k&&4096<w.strstart-w.match_start)&&(w.match_length=k-1)),w.prev_length>=k&&w.match_length<=w.prev_length){for(F=w.strstart+w.lookahead-k,A=a._tr_tally(w,w.strstart-1-w.prev_match,w.prev_length-k),w.lookahead-=w.prev_length-1,w.prev_length-=2;++w.strstart<=F&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+k-1])&w.hash_mask,j=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),--w.prev_length!=0;);if(w.match_available=0,w.match_length=k-1,w.strstart++,A&&(U(w,!1),w.strm.avail_out===0))return S}else if(w.match_available){if((A=a._tr_tally(w,0,w.window[w.strstart-1]))&&U(w,!1),w.strstart++,w.lookahead--,w.strm.avail_out===0)return S}else w.match_available=1,w.strstart++,w.lookahead--}return w.match_available&&(A=a._tr_tally(w,0,w.window[w.strstart-1]),w.match_available=0),w.insert=w.strstart<k-1?w.strstart:k-1,N===d?(U(w,!0),w.strm.avail_out===0?Z:H):w.last_lit&&(U(w,!1),w.strm.avail_out===0)?S:$}function se(w,N,j,A,F){this.good_length=w,this.max_lazy=N,this.nice_length=j,this.max_chain=A,this.func=F}function de(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*T),this.dyn_dtree=new o.Buf16(2*(2*x+1)),this.bl_tree=new o.Buf16(2*(2*E+1)),ce(this.dyn_ltree),ce(this.dyn_dtree),ce(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(O+1),this.heap=new o.Buf16(2*b+1),ce(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*b+1),ce(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _e(w){var N;return w&&w.state?(w.total_in=w.total_out=0,w.data_type=m,(N=w.state).pending=0,N.pending_out=0,N.wrap<0&&(N.wrap=-N.wrap),N.status=N.wrap?C:P,w.adler=N.wrap===2?0:1,N.last_flush=f,a._tr_init(N),h):K(w,g)}function L(w){var N=_e(w);return N===h&&(function(j){j.window_size=2*j.w_size,ce(j.head),j.max_lazy_match=s[j.level].max_lazy,j.good_match=s[j.level].good_length,j.nice_match=s[j.level].nice_length,j.max_chain_length=s[j.level].max_chain,j.strstart=0,j.block_start=0,j.lookahead=0,j.insert=0,j.match_length=j.prev_length=k-1,j.match_available=0,j.ins_h=0})(w.state),N}function z(w,N,j,A,F,B){if(!w)return g;var W=1;if(N===p&&(N=6),A<0?(W=0,A=-A):15<A&&(W=2,A-=16),F<1||_<F||j!==y||A<8||15<A||N<0||9<N||B<0||v<B)return K(w,g);A===8&&(A=9);var G=new de;return(w.state=G).strm=w,G.wrap=W,G.gzhead=null,G.w_bits=A,G.w_size=1<<G.w_bits,G.w_mask=G.w_size-1,G.hash_bits=F+7,G.hash_size=1<<G.hash_bits,G.hash_mask=G.hash_size-1,G.hash_shift=~~((G.hash_bits+k-1)/k),G.window=new o.Buf8(2*G.w_size),G.head=new o.Buf16(G.hash_size),G.prev=new o.Buf16(G.w_size),G.lit_bufsize=1<<F+6,G.pending_buf_size=4*G.lit_bufsize,G.pending_buf=new o.Buf8(G.pending_buf_size),G.d_buf=1*G.lit_bufsize,G.l_buf=3*G.lit_bufsize,G.level=N,G.strategy=B,G.method=j,L(w)}s=[new se(0,0,0,0,function(w,N){var j=65535;for(j>w.pending_buf_size-5&&(j=w.pending_buf_size-5);;){if(w.lookahead<=1){if(Ce(w),w.lookahead===0&&N===f)return S;if(w.lookahead===0)break}w.strstart+=w.lookahead,w.lookahead=0;var A=w.block_start+j;if((w.strstart===0||w.strstart>=A)&&(w.lookahead=w.strstart-A,w.strstart=A,U(w,!1),w.strm.avail_out===0)||w.strstart-w.block_start>=w.w_size-R&&(U(w,!1),w.strm.avail_out===0))return S}return w.insert=0,N===d?(U(w,!0),w.strm.avail_out===0?Z:H):(w.strstart>w.block_start&&(U(w,!1),w.strm.avail_out),S)}),new se(4,4,8,4,q),new se(4,5,16,8,q),new se(4,6,32,32,q),new se(4,4,16,16,ne),new se(8,16,32,32,ne),new se(8,16,128,128,ne),new se(8,32,128,256,ne),new se(32,128,258,1024,ne),new se(32,258,258,4096,ne)],i.deflateInit=function(w,N){return z(w,N,y,15,8,0)},i.deflateInit2=z,i.deflateReset=L,i.deflateResetKeep=_e,i.deflateSetHeader=function(w,N){return w&&w.state?w.state.wrap!==2?g:(w.state.gzhead=N,h):g},i.deflate=function(w,N){var j,A,F,B;if(!w||!w.state||5<N||N<0)return w?K(w,g):g;if(A=w.state,!w.output||!w.input&&w.avail_in!==0||A.status===666&&N!==d)return K(w,w.avail_out===0?-5:g);if(A.strm=w,j=A.last_flush,A.last_flush=N,A.status===C)if(A.wrap===2)w.adler=0,he(A,31),he(A,139),he(A,8),A.gzhead?(he(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),he(A,255&A.gzhead.time),he(A,A.gzhead.time>>8&255),he(A,A.gzhead.time>>16&255),he(A,A.gzhead.time>>24&255),he(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),he(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(he(A,255&A.gzhead.extra.length),he(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(w.adler=c(w.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(he(A,0),he(A,0),he(A,0),he(A,0),he(A,0),he(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),he(A,3),A.status=P);else{var W=y+(A.w_bits-8<<4)<<8;W|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(W|=32),W+=31-W%31,A.status=P,re(A,W),A.strstart!==0&&(re(A,w.adler>>>16),re(A,65535&w.adler)),w.adler=1}if(A.status===69)if(A.gzhead.extra){for(F=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>F&&(w.adler=c(w.adler,A.pending_buf,A.pending-F,F)),Y(w),F=A.pending,A.pending!==A.pending_buf_size));)he(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>F&&(w.adler=c(w.adler,A.pending_buf,A.pending-F,F)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){F=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>F&&(w.adler=c(w.adler,A.pending_buf,A.pending-F,F)),Y(w),F=A.pending,A.pending===A.pending_buf_size)){B=1;break}B=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,he(A,B)}while(B!==0);A.gzhead.hcrc&&A.pending>F&&(w.adler=c(w.adler,A.pending_buf,A.pending-F,F)),B===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){F=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>F&&(w.adler=c(w.adler,A.pending_buf,A.pending-F,F)),Y(w),F=A.pending,A.pending===A.pending_buf_size)){B=1;break}B=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,he(A,B)}while(B!==0);A.gzhead.hcrc&&A.pending>F&&(w.adler=c(w.adler,A.pending_buf,A.pending-F,F)),B===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&Y(w),A.pending+2<=A.pending_buf_size&&(he(A,255&w.adler),he(A,w.adler>>8&255),w.adler=0,A.status=P)):A.status=P),A.pending!==0){if(Y(w),w.avail_out===0)return A.last_flush=-1,h}else if(w.avail_in===0&&Q(N)<=Q(j)&&N!==d)return K(w,-5);if(A.status===666&&w.avail_in!==0)return K(w,-5);if(w.avail_in!==0||A.lookahead!==0||N!==f&&A.status!==666){var G=A.strategy===2?(function(V,J){for(var ue;;){if(V.lookahead===0&&(Ce(V),V.lookahead===0)){if(J===f)return S;break}if(V.match_length=0,ue=a._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++,ue&&(U(V,!1),V.strm.avail_out===0))return S}return V.insert=0,J===d?(U(V,!0),V.strm.avail_out===0?Z:H):V.last_lit&&(U(V,!1),V.strm.avail_out===0)?S:$})(A,N):A.strategy===3?(function(V,J){for(var ue,oe,ge,ee,fe=V.window;;){if(V.lookahead<=I){if(Ce(V),V.lookahead<=I&&J===f)return S;if(V.lookahead===0)break}if(V.match_length=0,V.lookahead>=k&&0<V.strstart&&(oe=fe[ge=V.strstart-1])===fe[++ge]&&oe===fe[++ge]&&oe===fe[++ge]){ee=V.strstart+I;do;while(oe===fe[++ge]&&oe===fe[++ge]&&oe===fe[++ge]&&oe===fe[++ge]&&oe===fe[++ge]&&oe===fe[++ge]&&oe===fe[++ge]&&oe===fe[++ge]&&ge<ee);V.match_length=I-(ee-ge),V.match_length>V.lookahead&&(V.match_length=V.lookahead)}if(V.match_length>=k?(ue=a._tr_tally(V,1,V.match_length-k),V.lookahead-=V.match_length,V.strstart+=V.match_length,V.match_length=0):(ue=a._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++),ue&&(U(V,!1),V.strm.avail_out===0))return S}return V.insert=0,J===d?(U(V,!0),V.strm.avail_out===0?Z:H):V.last_lit&&(U(V,!1),V.strm.avail_out===0)?S:$})(A,N):s[A.level].func(A,N);if(G!==Z&&G!==H||(A.status=666),G===S||G===Z)return w.avail_out===0&&(A.last_flush=-1),h;if(G===$&&(N===1?a._tr_align(A):N!==5&&(a._tr_stored_block(A,0,0,!1),N===3&&(ce(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),Y(w),w.avail_out===0))return A.last_flush=-1,h}return N!==d?h:A.wrap<=0?1:(A.wrap===2?(he(A,255&w.adler),he(A,w.adler>>8&255),he(A,w.adler>>16&255),he(A,w.adler>>24&255),he(A,255&w.total_in),he(A,w.total_in>>8&255),he(A,w.total_in>>16&255),he(A,w.total_in>>24&255)):(re(A,w.adler>>>16),re(A,65535&w.adler)),Y(w),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?h:1)},i.deflateEnd=function(w){var N;return w&&w.state?(N=w.state.status)!==C&&N!==69&&N!==73&&N!==91&&N!==103&&N!==P&&N!==666?K(w,g):(w.state=null,N===P?K(w,-3):h):g},i.deflateSetDictionary=function(w,N){var j,A,F,B,W,G,V,J,ue=N.length;if(!w||!w.state||(B=(j=w.state).wrap)===2||B===1&&j.status!==C||j.lookahead)return g;for(B===1&&(w.adler=l(w.adler,N,ue,0)),j.wrap=0,ue>=j.w_size&&(B===0&&(ce(j.head),j.strstart=0,j.block_start=0,j.insert=0),J=new o.Buf8(j.w_size),o.arraySet(J,N,ue-j.w_size,j.w_size,0),N=J,ue=j.w_size),W=w.avail_in,G=w.next_in,V=w.input,w.avail_in=ue,w.next_in=0,w.input=N,Ce(j);j.lookahead>=k;){for(A=j.strstart,F=j.lookahead-(k-1);j.ins_h=(j.ins_h<<j.hash_shift^j.window[A+k-1])&j.hash_mask,j.prev[A&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=A,A++,--F;);j.strstart=A,j.lookahead=k-1,Ce(j)}return j.strstart+=j.lookahead,j.block_start=j.strstart,j.insert=j.lookahead,j.lookahead=0,j.match_length=j.prev_length=k-1,j.match_available=0,w.next_in=G,w.input=V,w.avail_in=W,j.wrap=B,h},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,l,c,u,f,d,h,g,p,v,m,y,_,b,x,E,T,O,k,I,R,C,P,S,$;a=s.state,l=s.next_in,S=s.input,c=l+(s.avail_in-5),u=s.next_out,$=s.output,f=u-(o-s.avail_out),d=u+(s.avail_out-257),h=a.dmax,g=a.wsize,p=a.whave,v=a.wnext,m=a.window,y=a.hold,_=a.bits,b=a.lencode,x=a.distcode,E=(1<<a.lenbits)-1,T=(1<<a.distbits)-1;e:do{_<15&&(y+=S[l++]<<_,_+=8,y+=S[l++]<<_,_+=8),O=b[y&E];t:for(;;){if(y>>>=k=O>>>24,_-=k,(k=O>>>16&255)===0)$[u++]=65535&O;else{if(!(16&k)){if((64&k)==0){O=b[(65535&O)+(y&(1<<k)-1)];continue t}if(32&k){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}I=65535&O,(k&=15)&&(_<k&&(y+=S[l++]<<_,_+=8),I+=y&(1<<k)-1,y>>>=k,_-=k),_<15&&(y+=S[l++]<<_,_+=8,y+=S[l++]<<_,_+=8),O=x[y&T];n:for(;;){if(y>>>=k=O>>>24,_-=k,!(16&(k=O>>>16&255))){if((64&k)==0){O=x[(65535&O)+(y&(1<<k)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(R=65535&O,_<(k&=15)&&(y+=S[l++]<<_,(_+=8)<k&&(y+=S[l++]<<_,_+=8)),h<(R+=y&(1<<k)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(y>>>=k,_-=k,(k=u-f)<R){if(p<(k=R-k)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(P=m,(C=0)===v){if(C+=g-k,k<I){for(I-=k;$[u++]=m[C++],--k;);C=u-R,P=$}}else if(v<k){if(C+=g+v-k,(k-=v)<I){for(I-=k;$[u++]=m[C++],--k;);if(C=0,v<I){for(I-=k=v;$[u++]=m[C++],--k;);C=u-R,P=$}}}else if(C+=v-k,k<I){for(I-=k;$[u++]=m[C++],--k;);C=u-R,P=$}for(;2<I;)$[u++]=P[C++],$[u++]=P[C++],$[u++]=P[C++],I-=3;I&&($[u++]=P[C++],1<I&&($[u++]=P[C++]))}else{for(C=u-R;$[u++]=$[C++],$[u++]=$[C++],$[u++]=$[C++],2<(I-=3););I&&($[u++]=$[C++],1<I&&($[u++]=$[C++]))}break}}break}}while(l<c&&u<d);l-=I=_>>3,y&=(1<<(_-=I<<3))-1,s.next_in=l,s.next_out=u,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=u<d?d-u+257:257-(u-d),a.hold=y,a.bits=_}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),u=1,f=2,d=0,h=-2,g=1,p=852,v=592;function m(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(C){var P;return C&&C.state?(P=C.state,C.total_in=C.total_out=P.total=0,C.msg="",P.wrap&&(C.adler=1&P.wrap),P.mode=g,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new s.Buf32(p),P.distcode=P.distdyn=new s.Buf32(v),P.sane=1,P.back=-1,d):h}function b(C){var P;return C&&C.state?((P=C.state).wsize=0,P.whave=0,P.wnext=0,_(C)):h}function x(C,P){var S,$;return C&&C.state?($=C.state,P<0?(S=0,P=-P):(S=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?h:($.window!==null&&$.wbits!==P&&($.window=null),$.wrap=S,$.wbits=P,b(C))):h}function E(C,P){var S,$;return C?($=new y,(C.state=$).window=null,(S=x(C,P))!==d&&(C.state=null),S):h}var T,O,k=!0;function I(C){if(k){var P;for(T=new s.Buf32(512),O=new s.Buf32(32),P=0;P<144;)C.lens[P++]=8;for(;P<256;)C.lens[P++]=9;for(;P<280;)C.lens[P++]=7;for(;P<288;)C.lens[P++]=8;for(c(u,C.lens,0,288,T,0,C.work,{bits:9}),P=0;P<32;)C.lens[P++]=5;c(f,C.lens,0,32,O,0,C.work,{bits:5}),k=!1}C.lencode=T,C.lenbits=9,C.distcode=O,C.distbits=5}function R(C,P,S,$){var Z,H=C.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new s.Buf8(H.wsize)),$>=H.wsize?(s.arraySet(H.window,P,S-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):($<(Z=H.wsize-H.wnext)&&(Z=$),s.arraySet(H.window,P,S-$,Z,H.wnext),($-=Z)?(s.arraySet(H.window,P,S-$,$,0),H.wnext=$,H.whave=H.wsize):(H.wnext+=Z,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=Z))),0}i.inflateReset=b,i.inflateReset2=x,i.inflateResetKeep=_,i.inflateInit=function(C){return E(C,15)},i.inflateInit2=E,i.inflate=function(C,P){var S,$,Z,H,K,Q,ce,Y,U,he,re,te,Ce,q,ne,se,de,_e,L,z,w,N,j,A,F=0,B=new s.Buf8(4),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return h;(S=C.state).mode===12&&(S.mode=13),K=C.next_out,Z=C.output,ce=C.avail_out,H=C.next_in,$=C.input,Q=C.avail_in,Y=S.hold,U=S.bits,he=Q,re=ce,N=d;e:for(;;)switch(S.mode){case g:if(S.wrap===0){S.mode=13;break}for(;U<16;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}if(2&S.wrap&&Y===35615){B[S.check=0]=255&Y,B[1]=Y>>>8&255,S.check=a(S.check,B,2,0),U=Y=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&Y)<<8)+(Y>>8))%31){C.msg="incorrect header check",S.mode=30;break}if((15&Y)!=8){C.msg="unknown compression method",S.mode=30;break}if(U-=4,w=8+(15&(Y>>>=4)),S.wbits===0)S.wbits=w;else if(w>S.wbits){C.msg="invalid window size",S.mode=30;break}S.dmax=1<<w,C.adler=S.check=1,S.mode=512&Y?10:12,U=Y=0;break;case 2:for(;U<16;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}if(S.flags=Y,(255&S.flags)!=8){C.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){C.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=Y>>8&1),512&S.flags&&(B[0]=255&Y,B[1]=Y>>>8&255,S.check=a(S.check,B,2,0)),U=Y=0,S.mode=3;case 3:for(;U<32;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}S.head&&(S.head.time=Y),512&S.flags&&(B[0]=255&Y,B[1]=Y>>>8&255,B[2]=Y>>>16&255,B[3]=Y>>>24&255,S.check=a(S.check,B,4,0)),U=Y=0,S.mode=4;case 4:for(;U<16;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}S.head&&(S.head.xflags=255&Y,S.head.os=Y>>8),512&S.flags&&(B[0]=255&Y,B[1]=Y>>>8&255,S.check=a(S.check,B,2,0)),U=Y=0,S.mode=5;case 5:if(1024&S.flags){for(;U<16;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}S.length=Y,S.head&&(S.head.extra_len=Y),512&S.flags&&(B[0]=255&Y,B[1]=Y>>>8&255,S.check=a(S.check,B,2,0)),U=Y=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(Q<(te=S.length)&&(te=Q),te&&(S.head&&(w=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),s.arraySet(S.head.extra,$,H,te,w)),512&S.flags&&(S.check=a(S.check,$,te,H)),Q-=te,H+=te,S.length-=te),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(Q===0)break e;for(te=0;w=$[H+te++],S.head&&w&&S.length<65536&&(S.head.name+=String.fromCharCode(w)),w&&te<Q;);if(512&S.flags&&(S.check=a(S.check,$,te,H)),Q-=te,H+=te,w)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(Q===0)break e;for(te=0;w=$[H+te++],S.head&&w&&S.length<65536&&(S.head.comment+=String.fromCharCode(w)),w&&te<Q;);if(512&S.flags&&(S.check=a(S.check,$,te,H)),Q-=te,H+=te,w)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;U<16;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}if(Y!==(65535&S.check)){C.msg="header crc mismatch",S.mode=30;break}U=Y=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),C.adler=S.check=0,S.mode=12;break;case 10:for(;U<32;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}C.adler=S.check=m(Y),U=Y=0,S.mode=11;case 11:if(S.havedict===0)return C.next_out=K,C.avail_out=ce,C.next_in=H,C.avail_in=Q,S.hold=Y,S.bits=U,2;C.adler=S.check=1,S.mode=12;case 12:if(P===5||P===6)break e;case 13:if(S.last){Y>>>=7&U,U-=7&U,S.mode=27;break}for(;U<3;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}switch(S.last=1&Y,U-=1,3&(Y>>>=1)){case 0:S.mode=14;break;case 1:if(I(S),S.mode=20,P!==6)break;Y>>>=2,U-=2;break e;case 2:S.mode=17;break;case 3:C.msg="invalid block type",S.mode=30}Y>>>=2,U-=2;break;case 14:for(Y>>>=7&U,U-=7&U;U<32;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}if((65535&Y)!=(Y>>>16^65535)){C.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&Y,U=Y=0,S.mode=15,P===6)break e;case 15:S.mode=16;case 16:if(te=S.length){if(Q<te&&(te=Q),ce<te&&(te=ce),te===0)break e;s.arraySet(Z,$,H,te,K),Q-=te,H+=te,ce-=te,K+=te,S.length-=te;break}S.mode=12;break;case 17:for(;U<14;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}if(S.nlen=257+(31&Y),Y>>>=5,U-=5,S.ndist=1+(31&Y),Y>>>=5,U-=5,S.ncode=4+(15&Y),Y>>>=4,U-=4,286<S.nlen||30<S.ndist){C.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;U<3;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}S.lens[W[S.have++]]=7&Y,Y>>>=3,U-=3}for(;S.have<19;)S.lens[W[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,j={bits:S.lenbits},N=c(0,S.lens,0,19,S.lencode,0,S.work,j),S.lenbits=j.bits,N){C.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;se=(F=S.lencode[Y&(1<<S.lenbits)-1])>>>16&255,de=65535&F,!((ne=F>>>24)<=U);){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}if(de<16)Y>>>=ne,U-=ne,S.lens[S.have++]=de;else{if(de===16){for(A=ne+2;U<A;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}if(Y>>>=ne,U-=ne,S.have===0){C.msg="invalid bit length repeat",S.mode=30;break}w=S.lens[S.have-1],te=3+(3&Y),Y>>>=2,U-=2}else if(de===17){for(A=ne+3;U<A;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}U-=ne,w=0,te=3+(7&(Y>>>=ne)),Y>>>=3,U-=3}else{for(A=ne+7;U<A;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}U-=ne,w=0,te=11+(127&(Y>>>=ne)),Y>>>=7,U-=7}if(S.have+te>S.nlen+S.ndist){C.msg="invalid bit length repeat",S.mode=30;break}for(;te--;)S.lens[S.have++]=w}}if(S.mode===30)break;if(S.lens[256]===0){C.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,j={bits:S.lenbits},N=c(u,S.lens,0,S.nlen,S.lencode,0,S.work,j),S.lenbits=j.bits,N){C.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,j={bits:S.distbits},N=c(f,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,j),S.distbits=j.bits,N){C.msg="invalid distances set",S.mode=30;break}if(S.mode=20,P===6)break e;case 20:S.mode=21;case 21:if(6<=Q&&258<=ce){C.next_out=K,C.avail_out=ce,C.next_in=H,C.avail_in=Q,S.hold=Y,S.bits=U,l(C,re),K=C.next_out,Z=C.output,ce=C.avail_out,H=C.next_in,$=C.input,Q=C.avail_in,Y=S.hold,U=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;se=(F=S.lencode[Y&(1<<S.lenbits)-1])>>>16&255,de=65535&F,!((ne=F>>>24)<=U);){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}if(se&&(240&se)==0){for(_e=ne,L=se,z=de;se=(F=S.lencode[z+((Y&(1<<_e+L)-1)>>_e)])>>>16&255,de=65535&F,!(_e+(ne=F>>>24)<=U);){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}Y>>>=_e,U-=_e,S.back+=_e}if(Y>>>=ne,U-=ne,S.back+=ne,S.length=de,se===0){S.mode=26;break}if(32&se){S.back=-1,S.mode=12;break}if(64&se){C.msg="invalid literal/length code",S.mode=30;break}S.extra=15&se,S.mode=22;case 22:if(S.extra){for(A=S.extra;U<A;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}S.length+=Y&(1<<S.extra)-1,Y>>>=S.extra,U-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;se=(F=S.distcode[Y&(1<<S.distbits)-1])>>>16&255,de=65535&F,!((ne=F>>>24)<=U);){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}if((240&se)==0){for(_e=ne,L=se,z=de;se=(F=S.distcode[z+((Y&(1<<_e+L)-1)>>_e)])>>>16&255,de=65535&F,!(_e+(ne=F>>>24)<=U);){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}Y>>>=_e,U-=_e,S.back+=_e}if(Y>>>=ne,U-=ne,S.back+=ne,64&se){C.msg="invalid distance code",S.mode=30;break}S.offset=de,S.extra=15&se,S.mode=24;case 24:if(S.extra){for(A=S.extra;U<A;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}S.offset+=Y&(1<<S.extra)-1,Y>>>=S.extra,U-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){C.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(ce===0)break e;if(te=re-ce,S.offset>te){if((te=S.offset-te)>S.whave&&S.sane){C.msg="invalid distance too far back",S.mode=30;break}Ce=te>S.wnext?(te-=S.wnext,S.wsize-te):S.wnext-te,te>S.length&&(te=S.length),q=S.window}else q=Z,Ce=K-S.offset,te=S.length;for(ce<te&&(te=ce),ce-=te,S.length-=te;Z[K++]=q[Ce++],--te;);S.length===0&&(S.mode=21);break;case 26:if(ce===0)break e;Z[K++]=S.length,ce--,S.mode=21;break;case 27:if(S.wrap){for(;U<32;){if(Q===0)break e;Q--,Y|=$[H++]<<U,U+=8}if(re-=ce,C.total_out+=re,S.total+=re,re&&(C.adler=S.check=S.flags?a(S.check,Z,re,K-re):o(S.check,Z,re,K-re)),re=ce,(S.flags?Y:m(Y))!==S.check){C.msg="incorrect data check",S.mode=30;break}U=Y=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;U<32;){if(Q===0)break e;Q--,Y+=$[H++]<<U,U+=8}if(Y!==(4294967295&S.total)){C.msg="incorrect length check",S.mode=30;break}U=Y=0}S.mode=29;case 29:N=1;break e;case 30:N=-3;break e;case 31:return-4;default:return h}return C.next_out=K,C.avail_out=ce,C.next_in=H,C.avail_in=Q,S.hold=Y,S.bits=U,(S.wsize||re!==C.avail_out&&S.mode<30&&(S.mode<27||P!==4))&&R(C,C.output,C.next_out,re-C.avail_out)?(S.mode=31,-4):(he-=C.avail_in,re-=C.avail_out,C.total_in+=he,C.total_out+=re,S.total+=re,S.wrap&&re&&(C.adler=S.check=S.flags?a(S.check,Z,re,C.next_out-re):o(S.check,Z,re,C.next_out-re)),C.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(he==0&&re===0||P===4)&&N===d&&(N=-5),N)},i.inflateEnd=function(C){if(!C||!C.state)return h;var P=C.state;return P.window&&(P.window=null),C.state=null,d},i.inflateGetHeader=function(C,P){var S;return C&&C.state?(2&(S=C.state).wrap)==0?h:((S.head=P).done=!1,d):h},i.inflateSetDictionary=function(C,P){var S,$=P.length;return C&&C.state?(S=C.state).wrap!==0&&S.mode!==11?h:S.mode===11&&o(1,P,$,0)!==S.check?-3:R(C,P,$,$)?(S.mode=31,-4):(S.havedict=1,d):h},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(u,f,d,h,g,p,v,m){var y,_,b,x,E,T,O,k,I,R=m.bits,C=0,P=0,S=0,$=0,Z=0,H=0,K=0,Q=0,ce=0,Y=0,U=null,he=0,re=new s.Buf16(16),te=new s.Buf16(16),Ce=null,q=0;for(C=0;C<=15;C++)re[C]=0;for(P=0;P<h;P++)re[f[d+P]]++;for(Z=R,$=15;1<=$&&re[$]===0;$--);if($<Z&&(Z=$),$===0)return g[p++]=20971520,g[p++]=20971520,m.bits=1,0;for(S=1;S<$&&re[S]===0;S++);for(Z<S&&(Z=S),C=Q=1;C<=15;C++)if(Q<<=1,(Q-=re[C])<0)return-1;if(0<Q&&(u===0||$!==1))return-1;for(te[1]=0,C=1;C<15;C++)te[C+1]=te[C]+re[C];for(P=0;P<h;P++)f[d+P]!==0&&(v[te[f[d+P]]++]=P);if(T=u===0?(U=Ce=v,19):u===1?(U=o,he-=257,Ce=a,q-=257,256):(U=l,Ce=c,-1),C=S,E=p,K=P=Y=0,b=-1,x=(ce=1<<(H=Z))-1,u===1&&852<ce||u===2&&592<ce)return 1;for(;;){for(O=C-K,I=v[P]<T?(k=0,v[P]):v[P]>T?(k=Ce[q+v[P]],U[he+v[P]]):(k=96,0),y=1<<C-K,S=_=1<<H;g[E+(Y>>K)+(_-=y)]=O<<24|k<<16|I|0,_!==0;);for(y=1<<C-1;Y&y;)y>>=1;if(y!==0?(Y&=y-1,Y+=y):Y=0,P++,--re[C]==0){if(C===$)break;C=f[d+v[P]]}if(Z<C&&(Y&x)!==b){for(K===0&&(K=Z),E+=S,Q=1<<(H=C-K);H+K<$&&!((Q-=re[H+K])<=0);)H++,Q<<=1;if(ce+=1<<H,u===1&&852<ce||u===2&&592<ce)return 1;g[b=Y&x]=Z<<24|H<<16|E-p|0}}return Y!==0&&(g[E+Y]=C-K<<24|64<<16|0),m.bits=Z,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function l(F){for(var B=F.length;0<=--B;)F[B]=0}var c=0,u=29,f=256,d=f+1+u,h=30,g=19,p=2*d+1,v=15,m=16,y=7,_=256,b=16,x=17,E=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],R=new Array(2*(d+2));l(R);var C=new Array(2*h);l(C);var P=new Array(512);l(P);var S=new Array(256);l(S);var $=new Array(u);l($);var Z,H,K,Q=new Array(h);function ce(F,B,W,G,V){this.static_tree=F,this.extra_bits=B,this.extra_base=W,this.elems=G,this.max_length=V,this.has_stree=F&&F.length}function Y(F,B){this.dyn_tree=F,this.max_code=0,this.stat_desc=B}function U(F){return F<256?P[F]:P[256+(F>>>7)]}function he(F,B){F.pending_buf[F.pending++]=255&B,F.pending_buf[F.pending++]=B>>>8&255}function re(F,B,W){F.bi_valid>m-W?(F.bi_buf|=B<<F.bi_valid&65535,he(F,F.bi_buf),F.bi_buf=B>>m-F.bi_valid,F.bi_valid+=W-m):(F.bi_buf|=B<<F.bi_valid&65535,F.bi_valid+=W)}function te(F,B,W){re(F,W[2*B],W[2*B+1])}function Ce(F,B){for(var W=0;W|=1&F,F>>>=1,W<<=1,0<--B;);return W>>>1}function q(F,B,W){var G,V,J=new Array(v+1),ue=0;for(G=1;G<=v;G++)J[G]=ue=ue+W[G-1]<<1;for(V=0;V<=B;V++){var oe=F[2*V+1];oe!==0&&(F[2*V]=Ce(J[oe]++,oe))}}function ne(F){var B;for(B=0;B<d;B++)F.dyn_ltree[2*B]=0;for(B=0;B<h;B++)F.dyn_dtree[2*B]=0;for(B=0;B<g;B++)F.bl_tree[2*B]=0;F.dyn_ltree[2*_]=1,F.opt_len=F.static_len=0,F.last_lit=F.matches=0}function se(F){8<F.bi_valid?he(F,F.bi_buf):0<F.bi_valid&&(F.pending_buf[F.pending++]=F.bi_buf),F.bi_buf=0,F.bi_valid=0}function de(F,B,W,G){var V=2*B,J=2*W;return F[V]<F[J]||F[V]===F[J]&&G[B]<=G[W]}function _e(F,B,W){for(var G=F.heap[W],V=W<<1;V<=F.heap_len&&(V<F.heap_len&&de(B,F.heap[V+1],F.heap[V],F.depth)&&V++,!de(B,G,F.heap[V],F.depth));)F.heap[W]=F.heap[V],W=V,V<<=1;F.heap[W]=G}function L(F,B,W){var G,V,J,ue,oe=0;if(F.last_lit!==0)for(;G=F.pending_buf[F.d_buf+2*oe]<<8|F.pending_buf[F.d_buf+2*oe+1],V=F.pending_buf[F.l_buf+oe],oe++,G===0?te(F,V,B):(te(F,(J=S[V])+f+1,B),(ue=T[J])!==0&&re(F,V-=$[J],ue),te(F,J=U(--G),W),(ue=O[J])!==0&&re(F,G-=Q[J],ue)),oe<F.last_lit;);te(F,_,B)}function z(F,B){var W,G,V,J=B.dyn_tree,ue=B.stat_desc.static_tree,oe=B.stat_desc.has_stree,ge=B.stat_desc.elems,ee=-1;for(F.heap_len=0,F.heap_max=p,W=0;W<ge;W++)J[2*W]!==0?(F.heap[++F.heap_len]=ee=W,F.depth[W]=0):J[2*W+1]=0;for(;F.heap_len<2;)J[2*(V=F.heap[++F.heap_len]=ee<2?++ee:0)]=1,F.depth[V]=0,F.opt_len--,oe&&(F.static_len-=ue[2*V+1]);for(B.max_code=ee,W=F.heap_len>>1;1<=W;W--)_e(F,J,W);for(V=ge;W=F.heap[1],F.heap[1]=F.heap[F.heap_len--],_e(F,J,1),G=F.heap[1],F.heap[--F.heap_max]=W,F.heap[--F.heap_max]=G,J[2*V]=J[2*W]+J[2*G],F.depth[V]=(F.depth[W]>=F.depth[G]?F.depth[W]:F.depth[G])+1,J[2*W+1]=J[2*G+1]=V,F.heap[1]=V++,_e(F,J,1),2<=F.heap_len;);F.heap[--F.heap_max]=F.heap[1],(function(fe,Re){var ct,mt,tn,vt,as,Xt,Mt=Re.dyn_tree,aa=Re.max_code,Dl=Re.stat_desc.static_tree,Yx=Re.stat_desc.has_stree,Kx=Re.stat_desc.extra_bits,Gg=Re.stat_desc.extra_base,la=Re.stat_desc.max_length,Il=0;for(vt=0;vt<=v;vt++)fe.bl_count[vt]=0;for(Mt[2*fe.heap[fe.heap_max]+1]=0,ct=fe.heap_max+1;ct<p;ct++)la<(vt=Mt[2*Mt[2*(mt=fe.heap[ct])+1]+1]+1)&&(vt=la,Il++),Mt[2*mt+1]=vt,aa<mt||(fe.bl_count[vt]++,as=0,Gg<=mt&&(as=Kx[mt-Gg]),Xt=Mt[2*mt],fe.opt_len+=Xt*(vt+as),Yx&&(fe.static_len+=Xt*(Dl[2*mt+1]+as)));if(Il!==0){do{for(vt=la-1;fe.bl_count[vt]===0;)vt--;fe.bl_count[vt]--,fe.bl_count[vt+1]+=2,fe.bl_count[la]--,Il-=2}while(0<Il);for(vt=la;vt!==0;vt--)for(mt=fe.bl_count[vt];mt!==0;)aa<(tn=fe.heap[--ct])||(Mt[2*tn+1]!==vt&&(fe.opt_len+=(vt-Mt[2*tn+1])*Mt[2*tn],Mt[2*tn+1]=vt),mt--)}})(F,B),q(J,ee,F.bl_count)}function w(F,B,W){var G,V,J=-1,ue=B[1],oe=0,ge=7,ee=4;for(ue===0&&(ge=138,ee=3),B[2*(W+1)+1]=65535,G=0;G<=W;G++)V=ue,ue=B[2*(G+1)+1],++oe<ge&&V===ue||(oe<ee?F.bl_tree[2*V]+=oe:V!==0?(V!==J&&F.bl_tree[2*V]++,F.bl_tree[2*b]++):oe<=10?F.bl_tree[2*x]++:F.bl_tree[2*E]++,J=V,ee=(oe=0)===ue?(ge=138,3):V===ue?(ge=6,3):(ge=7,4))}function N(F,B,W){var G,V,J=-1,ue=B[1],oe=0,ge=7,ee=4;for(ue===0&&(ge=138,ee=3),G=0;G<=W;G++)if(V=ue,ue=B[2*(G+1)+1],!(++oe<ge&&V===ue)){if(oe<ee)for(;te(F,V,F.bl_tree),--oe!=0;);else V!==0?(V!==J&&(te(F,V,F.bl_tree),oe--),te(F,b,F.bl_tree),re(F,oe-3,2)):oe<=10?(te(F,x,F.bl_tree),re(F,oe-3,3)):(te(F,E,F.bl_tree),re(F,oe-11,7));J=V,ee=(oe=0)===ue?(ge=138,3):V===ue?(ge=6,3):(ge=7,4)}}l(Q);var j=!1;function A(F,B,W,G){re(F,(c<<1)+(G?1:0),3),(function(V,J,ue,oe){se(V),he(V,ue),he(V,~ue),s.arraySet(V.pending_buf,V.window,J,ue,V.pending),V.pending+=ue})(F,B,W)}i._tr_init=function(F){j||((function(){var B,W,G,V,J,ue=new Array(v+1);for(V=G=0;V<u-1;V++)for($[V]=G,B=0;B<1<<T[V];B++)S[G++]=V;for(S[G-1]=V,V=J=0;V<16;V++)for(Q[V]=J,B=0;B<1<<O[V];B++)P[J++]=V;for(J>>=7;V<h;V++)for(Q[V]=J<<7,B=0;B<1<<O[V]-7;B++)P[256+J++]=V;for(W=0;W<=v;W++)ue[W]=0;for(B=0;B<=143;)R[2*B+1]=8,B++,ue[8]++;for(;B<=255;)R[2*B+1]=9,B++,ue[9]++;for(;B<=279;)R[2*B+1]=7,B++,ue[7]++;for(;B<=287;)R[2*B+1]=8,B++,ue[8]++;for(q(R,d+1,ue),B=0;B<h;B++)C[2*B+1]=5,C[2*B]=Ce(B,5);Z=new ce(R,T,f+1,d,v),H=new ce(C,O,0,h,v),K=new ce(new Array(0),k,0,g,y)})(),j=!0),F.l_desc=new Y(F.dyn_ltree,Z),F.d_desc=new Y(F.dyn_dtree,H),F.bl_desc=new Y(F.bl_tree,K),F.bi_buf=0,F.bi_valid=0,ne(F)},i._tr_stored_block=A,i._tr_flush_block=function(F,B,W,G){var V,J,ue=0;0<F.level?(F.strm.data_type===2&&(F.strm.data_type=(function(oe){var ge,ee=4093624447;for(ge=0;ge<=31;ge++,ee>>>=1)if(1&ee&&oe.dyn_ltree[2*ge]!==0)return o;if(oe.dyn_ltree[18]!==0||oe.dyn_ltree[20]!==0||oe.dyn_ltree[26]!==0)return a;for(ge=32;ge<f;ge++)if(oe.dyn_ltree[2*ge]!==0)return a;return o})(F)),z(F,F.l_desc),z(F,F.d_desc),ue=(function(oe){var ge;for(w(oe,oe.dyn_ltree,oe.l_desc.max_code),w(oe,oe.dyn_dtree,oe.d_desc.max_code),z(oe,oe.bl_desc),ge=g-1;3<=ge&&oe.bl_tree[2*I[ge]+1]===0;ge--);return oe.opt_len+=3*(ge+1)+5+5+4,ge})(F),V=F.opt_len+3+7>>>3,(J=F.static_len+3+7>>>3)<=V&&(V=J)):V=J=W+5,W+4<=V&&B!==-1?A(F,B,W,G):F.strategy===4||J===V?(re(F,2+(G?1:0),3),L(F,R,C)):(re(F,4+(G?1:0),3),(function(oe,ge,ee,fe){var Re;for(re(oe,ge-257,5),re(oe,ee-1,5),re(oe,fe-4,4),Re=0;Re<fe;Re++)re(oe,oe.bl_tree[2*I[Re]+1],3);N(oe,oe.dyn_ltree,ge-1),N(oe,oe.dyn_dtree,ee-1)})(F,F.l_desc.max_code+1,F.d_desc.max_code+1,ue+1),L(F,F.dyn_ltree,F.dyn_dtree)),ne(F),G&&se(F)},i._tr_tally=function(F,B,W){return F.pending_buf[F.d_buf+2*F.last_lit]=B>>>8&255,F.pending_buf[F.d_buf+2*F.last_lit+1]=255&B,F.pending_buf[F.l_buf+F.last_lit]=255&W,F.last_lit++,B===0?F.dyn_ltree[2*W]++:(F.matches++,B--,F.dyn_ltree[2*(S[W]+f+1)]++,F.dyn_dtree[2*U(B)]++),F.last_lit===F.lit_bufsize-1},i._tr_align=function(F){re(F,2,3),te(F,_,R),(function(B){B.bi_valid===16?(he(B,B.bi_buf),B.bi_buf=0,B.bi_valid=0):8<=B.bi_valid&&(B.pending_buf[B.pending++]=255&B.bi_buf,B.bi_buf>>=8,B.bi_valid-=8)})(F)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,c,u,f,d=1,h={},g=!1,p=o.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(o);v=v&&v.setTimeout?v:o,l={}.toString.call(o.process)==="[object process]"?function(b){process.nextTick(function(){y(b)})}:(function(){if(o.postMessage&&!o.importScripts){var b=!0,x=o.onmessage;return o.onmessage=function(){b=!1},o.postMessage("","*"),o.onmessage=x,b}})()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",_,!1):o.attachEvent("onmessage",_),function(b){o.postMessage(f+b,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(b){y(b.data)},function(b){u.port2.postMessage(b)}):p&&"onreadystatechange"in p.createElement("script")?(c=p.documentElement,function(b){var x=p.createElement("script");x.onreadystatechange=function(){y(b),x.onreadystatechange=null,c.removeChild(x),x=null},c.appendChild(x)}):function(b){setTimeout(y,0,b)},v.setImmediate=function(b){typeof b!="function"&&(b=new Function(""+b));for(var x=new Array(arguments.length-1),E=0;E<x.length;E++)x[E]=arguments[E+1];var T={callback:b,args:x};return h[d]=T,l(d),d++},v.clearImmediate=m}function m(b){delete h[b]}function y(b){if(g)setTimeout(y,0,b);else{var x=h[b];if(x){g=!0;try{(function(E){var T=E.callback,O=E.args;switch(O.length){case 0:T();break;case 1:T(O[0]);break;case 2:T(O[0],O[1]);break;case 3:T(O[0],O[1],O[2]);break;default:T.apply(a,O)}})(x)}finally{m(b),g=!1}}}}function _(b){b.source===o&&typeof b.data=="string"&&b.data.indexOf(f)===0&&y(+b.data.slice(f.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Xl<"u"?Xl:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Hh)),Hh.exports}var jj=Bj();const Nj=Ww(jj);function zj(){return"./"}function $j(){return"https://media.githubusercontent.com/media/BZSH2/vue-photo-shop/master/public/"}const Uj=$j(),sn={width:0,height:0,scale:1};async function Hj(t,e){if(!e){console.error("Canvas");return}sn.width=e.width,sn.height=e.height;const n=Uj,r=t.zipFile.startsWith("/")?t.zipFile.slice(1):t.zipFile,i=n?n.endsWith("/")?`${n}${r}`:`${n}/${r}`:r;try{const s=await fetch(i);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const o=await s.arrayBuffer();if(new TextDecoder().decode(o.slice(0,100)).startsWith("version https://git-lfs.github.com/spec/v1"))throw new Error(" Git LFS  Git LFS");const u=await new Nj().loadAsync(o),f=Object.keys(u.files).filter(_=>{const b=_.toLowerCase().endsWith(".psd"),x=_.includes("__MACOSX")||_.split("/").pop()?.startsWith("._");return b&&!x});if(f.length===0){console.error("ZIP  PSD ");return}const d=f[0],h=u.file(d||"");if(!h){console.error(" PSD ");return}const g=await h.async("arraybuffer");console.log("PSD  ArrayBuffer:",g),e.clear();const p=Lj(g,{skipLayerImageData:!1,skipCompositeImageData:!1}),v=p,m=sn.width/v.width,y=sn.height/v.height;sn.scale=Math.min(m,y),e.setDimensions({width:v.width*sn.scale,height:v.height*sn.scale}),p.children&&await Hx(p.children,e)}catch(s){console.error("ZIP:",s)}}async function Hx(t,e){if(!e)return;const n=[...t];for(const r of n)r.hidden||(r.canvas&&r.canvas instanceof HTMLCanvasElement?await Vj(r,e):r.text?await Gj(r,e):r.children&&await Hx(r.children,e))}async function Vj(t,e){try{if(!t.canvas||!e)return;const n=t.left||0,r=t.top||0,i=t.width||t.canvas.width||0,s=t.height||t.canvas.height||0,o=new Bn(t.canvas,{left:n*sn.scale,top:r*sn.scale,scaleX:sn.scale,scaleY:sn.scale,originX:"left",originY:"top",opacity:t.opacity!==void 0?t.opacity*255:1});t.name&&(o.set("name",t.name),o.set("data",{originalLeft:n,originalTop:r,originalWidth:i,originalHeight:s})),e.add(o)}catch(n){console.error(` "${t.name||""}":`,n)}}async function Gj(t,e){try{if(!t.text||!e)return;const n=t.left||0,r=t.top||0,i=new rn(t.text.text||t.text.value||"",{left:n*sn.scale,top:r*sn.scale,scaleX:sn.scale,scaleY:sn.scale,originX:"left",originY:"top",selectable:!1,evented:!1,fontFamily:t.text.style?.font?.name||"Arial",fontSize:(t.text.style?.font?.sizes?.[0]||12)*sn.scale,fill:t.text.style?.fill?.color||"#000000",opacity:t.opacity!==void 0?t.opacity*255:1});t.name&&i.set("name",t.name),e.add(i)}catch(n){console.error(` "${t.name||""}":`,n)}}const Wj=De({__name:"index",setup(t){const{on:e}=Zo(),{open:n,close:r}=t2(),i=ye(null),s=ye(null);let o=null;e("selectTemplate",async l=>{n(),await Hj(l,o),r()}),e("download",async()=>{const l=o?.toDataURL({format:"jpeg",quality:.9,multiplier:2}),c=document.createElement("a");c.href=l||"",c.download="filename.png",c.click()}),e("uploadImage",async l=>{const c=await Bn.fromURL(l.url||"",{},{scaleX:.1,scaleY:.1,left:o.width/2,top:o.height/2});c&&o?.add(c)}),e("selectAddText",l=>{const c=l;console.log(c);const u=new zr(`${c.label}`,{left:o.width/2,top:o.height/2,fontSize:c.fontSize,fontFamily:"Arial",fill:"#000000",originX:"center",originY:"center",hasControls:!0,hasBorders:!0});o?.add(u)}),e("qrCodeGenerated",async l=>{const c=await Bn.fromURL(l,{},{left:o.width/2,top:o.height/2});c&&o?.add(c)});function a(){s.value&&(o=new Zd(s.value,{width:(s.value.parentElement?.clientWidth||0)-40,height:(s.value.parentElement?.clientHeight||0)-40,backgroundColor:"#ffffff",selection:!1,preserveObjectStacking:!0,renderOnAddRemove:!0}),o.renderAll())}return en(()=>{a()}),(l,c)=>(le(),be("div",{ref_key:"canvasContainerRef",ref:i,class:"canvas-container"},[Ee("canvas",{ref_key:"canvasRef",ref:s,class:"canvas"},null,512)],512))}}),Xj=fn(Wj,[["__scopeId","data-v-2597fc25"]]),Yj={class:"add-check-list"},Kj=["onClick"],qj={class:"add-check-item-value"},Zj={class:"add-check-item-label"},Jj=De({__name:"AddCheck",setup(t){const{emit:e}=Zo(),n=[{label:"",value:"H1",key:"h1",fontSize:40},{label:"",value:"H2",key:"h2",fontSize:30},{label:"",value:"Aa",key:"aa",fontSize:12}];function r(i){e("selectAddText",i)}return(i,s)=>(le(),be("div",Yj,[(le(),be(pt,null,nl(n,o=>Ee("div",{key:o.value,class:"add-check-item",onClick:a=>r(o)},[Ee("span",qj,ln(o.value),1),Ee("span",Zj,ln(o.label),1)],8,Kj)),64))]))}}),Qj=fn(Jj,[["__scopeId","data-v-2bc5a918"]]);var no={},Vh,Cb;function eN(){return Cb||(Cb=1,Vh=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Vh}var Gh={},$i={},Tb;function Gs(){if(Tb)return $i;Tb=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return $i.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},$i.getSymbolTotalCodewords=function(r){return e[r]},$i.getBCHDigit=function(n){let r=0;for(;n!==0;)r++,n>>>=1;return r},$i.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');t=r},$i.isKanjiModeEnabled=function(){return typeof t<"u"},$i.toSJIS=function(r){return t(r)},$i}var Wh={},Eb;function Hg(){return Eb||(Eb=1,(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}})(Wh)),Wh}var Xh,kb;function tN(){if(kb)return Xh;kb=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let r=0;r<n;r++)this.putBit((e>>>n-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}},Xh=t,Xh}var Yh,Ob;function nN(){if(Ob)return Yh;Ob=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,n,r,i){const s=e*this.size+n;this.data[s]=r,i&&(this.reservedBit[s]=!0)},t.prototype.get=function(e,n){return this.data[e*this.size+n]},t.prototype.xor=function(e,n,r){this.data[e*this.size+n]^=r},t.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]},Yh=t,Yh}var Kh={},Ab;function rN(){return Ab||(Ab=1,(function(t){const e=Gs().getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,s=e(r),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let l=1;l<i-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},t.getPositions=function(r){const i=[],s=t.getRowColCoords(r),o=s.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||i.push([s[a],s[l]]);return i}})(Kh)),Kh}var qh={},Pb;function iN(){if(Pb)return qh;Pb=1;const t=Gs().getSymbolSize,e=7;return qh.getPositions=function(r){const i=t(r);return[[0,0],[i-e,0],[0,i-e]]},qh}var Zh={},Fb;function sN(){return Fb||(Fb=1,(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,l=0,c=null,u=null;for(let f=0;f<s;f++){a=l=0,c=u=null;for(let d=0;d<s;d++){let h=i.get(f,d);h===c?a++:(a>=5&&(o+=e.N1+(a-5)),c=h,a=1),h=i.get(d,f),h===u?l++:(l>=5&&(o+=e.N1+(l-5)),u=h,l=1)}a>=5&&(o+=e.N1+(a-5)),l>=5&&(o+=e.N1+(l-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let l=0;l<s-1;l++){const c=i.get(a,l)+i.get(a,l+1)+i.get(a+1,l)+i.get(a+1,l+1);(c===4||c===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,l=0;for(let c=0;c<s;c++){a=l=0;for(let u=0;u<s;u++)a=a<<1&2047|i.get(c,u),u>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|i.get(u,c),u>=10&&(l===1488||l===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let l=0;l<o;l++)s+=i.data[l];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function n(r,i,s){switch(r){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)s.isReserved(l,a)||s.xor(l,a,n(i,l,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,l=1/0;for(let c=0;c<o;c++){s(c),t.applyMask(c,i);const u=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(c,i),u<l&&(l=u,a=c)}return a}})(Zh)),Zh}var Gc={},Db;function Vx(){if(Db)return Gc;Db=1;const t=Hg(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Gc.getBlocksCount=function(i,s){switch(s){case t.L:return e[(i-1)*4+0];case t.M:return e[(i-1)*4+1];case t.Q:return e[(i-1)*4+2];case t.H:return e[(i-1)*4+3];default:return}},Gc.getTotalCodewordsCount=function(i,s){switch(s){case t.L:return n[(i-1)*4+0];case t.M:return n[(i-1)*4+1];case t.Q:return n[(i-1)*4+2];case t.H:return n[(i-1)*4+3];default:return}},Gc}var Jh={},Ca={},Ib;function oN(){if(Ib)return Ca;Ib=1;const t=new Uint8Array(512),e=new Uint8Array(256);return(function(){let r=1;for(let i=0;i<255;i++)t[i]=r,e[r]=i,r<<=1,r&256&&(r^=285);for(let i=255;i<512;i++)t[i]=t[i-255]})(),Ca.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},Ca.exp=function(r){return t[r]},Ca.mul=function(r,i){return r===0||i===0?0:t[e[r]+e[i]]},Ca}var Mb;function aN(){return Mb||(Mb=1,(function(t){const e=oN();t.mul=function(r,i){const s=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(r[o],i[a]);return s},t.mod=function(r,i){let s=new Uint8Array(r);for(;s.length-i.length>=0;){const o=s[0];for(let l=0;l<i.length;l++)s[l]^=e.mul(i[l],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let s=0;s<r;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(Jh)),Jh}var Qh,Rb;function lN(){if(Rb)return Qh;Rb=1;const t=aN();function e(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(r.length+this.degree);i.set(r);const s=t.mod(i,this.genPoly),o=this.degree-s.length;if(o>0){const a=new Uint8Array(this.degree);return a.set(s,o),a}return s},Qh=e,Qh}var ed={},td={},nd={},Lb;function Gx(){return Lb||(Lb=1,nd.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),nd}var Ir={},Bb;function Wx(){if(Bb)return Ir;Bb=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;Ir.KANJI=new RegExp(n,"g"),Ir.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ir.BYTE=new RegExp(r,"g"),Ir.NUMERIC=new RegExp(t,"g"),Ir.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+n+"$"),s=new RegExp("^"+t+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ir.testKanji=function(l){return i.test(l)},Ir.testNumeric=function(l){return s.test(l)},Ir.testAlphanumeric=function(l){return o.test(l)},Ir}var jb;function Ws(){return jb||(jb=1,(function(t){const e=Gx(),n=Wx();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return n.testNumeric(s)?t.NUMERIC:n.testAlphanumeric(s)?t.ALPHANUMERIC:n.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return r(s)}catch{return o}}})(td)),td}var Nb;function cN(){return Nb||(Nb=1,(function(t){const e=Gs(),n=Vx(),r=Hg(),i=Ws(),s=Gx(),o=7973,a=e.getBCHDigit(o);function l(d,h,g){for(let p=1;p<=40;p++)if(h<=t.getCapacity(p,g,d))return p}function c(d,h){return i.getCharCountIndicator(d,h)+4}function u(d,h){let g=0;return d.forEach(function(p){const v=c(p.mode,h);g+=v+p.getBitsLength()}),g}function f(d,h){for(let g=1;g<=40;g++)if(u(d,g)<=t.getCapacity(g,h,i.MIXED))return g}t.from=function(h,g){return s.isValid(h)?parseInt(h,10):g},t.getCapacity=function(h,g,p){if(!s.isValid(h))throw new Error("Invalid QR Code version");typeof p>"u"&&(p=i.BYTE);const v=e.getSymbolTotalCodewords(h),m=n.getTotalCodewordsCount(h,g),y=(v-m)*8;if(p===i.MIXED)return y;const _=y-c(p,h);switch(p){case i.NUMERIC:return Math.floor(_/10*3);case i.ALPHANUMERIC:return Math.floor(_/11*2);case i.KANJI:return Math.floor(_/13);case i.BYTE:default:return Math.floor(_/8)}},t.getBestVersionForData=function(h,g){let p;const v=r.from(g,r.M);if(Array.isArray(h)){if(h.length>1)return f(h,v);if(h.length===0)return 1;p=h[0]}else p=h;return l(p.mode,p.getLength(),v)},t.getEncodedBits=function(h){if(!s.isValid(h)||h<7)throw new Error("Invalid QR Code version");let g=h<<12;for(;e.getBCHDigit(g)-a>=0;)g^=o<<e.getBCHDigit(g)-a;return h<<12|g}})(ed)),ed}var rd={},zb;function uN(){if(zb)return rd;zb=1;const t=Gs(),e=1335,n=21522,r=t.getBCHDigit(e);return rd.getEncodedBits=function(s,o){const a=s.bit<<3|o;let l=a<<10;for(;t.getBCHDigit(l)-r>=0;)l^=e<<t.getBCHDigit(l)-r;return(a<<10|l)^n},rd}var id={},sd,$b;function fN(){if($b)return sd;$b=1;const t=Ws();function e(n){this.mode=t.NUMERIC,this.data=n.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let i,s,o;for(i=0;i+3<=this.data.length;i+=3)s=this.data.substr(i,3),o=parseInt(s,10),r.put(o,10);const a=this.data.length-i;a>0&&(s=this.data.substr(i),o=parseInt(s,10),r.put(o,a*3+1))},sd=e,sd}var od,Ub;function hN(){if(Ub)return od;Ub=1;const t=Ws(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(r){this.mode=t.ALPHANUMERIC,this.data=r}return n.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(i){let s;for(s=0;s+2<=this.data.length;s+=2){let o=e.indexOf(this.data[s])*45;o+=e.indexOf(this.data[s+1]),i.put(o,11)}this.data.length%2&&i.put(e.indexOf(this.data[s]),6)},od=n,od}var ad,Hb;function dN(){if(Hb)return ad;Hb=1;const t=Ws();function e(n){this.mode=t.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){for(let r=0,i=this.data.length;r<i;r++)n.put(this.data[r],8)},ad=e,ad}var ld,Vb;function pN(){if(Vb)return ld;Vb=1;const t=Ws(),e=Gs();function n(r){this.mode=t.KANJI,this.data=r}return n.getBitsLength=function(i){return i*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(r){let i;for(i=0;i<this.data.length;i++){let s=e.toSJIS(this.data[i]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),r.put(s,13)}},ld=n,ld}var cd={exports:{}},Gb;function gN(){return Gb||(Gb=1,(function(t){var e={single_source_shortest_paths:function(n,r,i){var s={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var l,c,u,f,d,h,g,p,v;!a.empty();){l=a.pop(),c=l.value,f=l.cost,d=n[c]||{};for(u in d)d.hasOwnProperty(u)&&(h=d[u],g=f+h,p=o[u],v=typeof o[u]>"u",(v||p>g)&&(o[u]=g,a.push(u,g),s[u]=c))}if(typeof i<"u"&&typeof o[i]>"u"){var m=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(m)}return s},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],s=r;s;)i.push(s),n[s],s=n[s];return i.reverse(),i},find_path:function(n,r,i){var s=e.single_source_shortest_paths(n,r,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,i={},s;n=n||{};for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(cd)),cd.exports}var Wb;function mN(){return Wb||(Wb=1,(function(t){const e=Ws(),n=fN(),r=hN(),i=dN(),s=pN(),o=Wx(),a=Gs(),l=gN();function c(m){return unescape(encodeURIComponent(m)).length}function u(m,y,_){const b=[];let x;for(;(x=m.exec(_))!==null;)b.push({data:x[0],index:x.index,mode:y,length:x[0].length});return b}function f(m){const y=u(o.NUMERIC,e.NUMERIC,m),_=u(o.ALPHANUMERIC,e.ALPHANUMERIC,m);let b,x;return a.isKanjiModeEnabled()?(b=u(o.BYTE,e.BYTE,m),x=u(o.KANJI,e.KANJI,m)):(b=u(o.BYTE_KANJI,e.BYTE,m),x=[]),y.concat(_,b,x).sort(function(T,O){return T.index-O.index}).map(function(T){return{data:T.data,mode:T.mode,length:T.length}})}function d(m,y){switch(y){case e.NUMERIC:return n.getBitsLength(m);case e.ALPHANUMERIC:return r.getBitsLength(m);case e.KANJI:return s.getBitsLength(m);case e.BYTE:return i.getBitsLength(m)}}function h(m){return m.reduce(function(y,_){const b=y.length-1>=0?y[y.length-1]:null;return b&&b.mode===_.mode?(y[y.length-1].data+=_.data,y):(y.push(_),y)},[])}function g(m){const y=[];for(let _=0;_<m.length;_++){const b=m[_];switch(b.mode){case e.NUMERIC:y.push([b,{data:b.data,mode:e.ALPHANUMERIC,length:b.length},{data:b.data,mode:e.BYTE,length:b.length}]);break;case e.ALPHANUMERIC:y.push([b,{data:b.data,mode:e.BYTE,length:b.length}]);break;case e.KANJI:y.push([b,{data:b.data,mode:e.BYTE,length:c(b.data)}]);break;case e.BYTE:y.push([{data:b.data,mode:e.BYTE,length:c(b.data)}])}}return y}function p(m,y){const _={},b={start:{}};let x=["start"];for(let E=0;E<m.length;E++){const T=m[E],O=[];for(let k=0;k<T.length;k++){const I=T[k],R=""+E+k;O.push(R),_[R]={node:I,lastCount:0},b[R]={};for(let C=0;C<x.length;C++){const P=x[C];_[P]&&_[P].node.mode===I.mode?(b[P][R]=d(_[P].lastCount+I.length,I.mode)-d(_[P].lastCount,I.mode),_[P].lastCount+=I.length):(_[P]&&(_[P].lastCount=I.length),b[P][R]=d(I.length,I.mode)+4+e.getCharCountIndicator(I.mode,y))}}x=O}for(let E=0;E<x.length;E++)b[x[E]].end=0;return{map:b,table:_}}function v(m,y){let _;const b=e.getBestModeForData(m);if(_=e.from(y,b),_!==e.BYTE&&_.bit<b.bit)throw new Error('"'+m+'" cannot be encoded with mode '+e.toString(_)+`.
 Suggested mode is: `+e.toString(b));switch(_===e.KANJI&&!a.isKanjiModeEnabled()&&(_=e.BYTE),_){case e.NUMERIC:return new n(m);case e.ALPHANUMERIC:return new r(m);case e.KANJI:return new s(m);case e.BYTE:return new i(m)}}t.fromArray=function(y){return y.reduce(function(_,b){return typeof b=="string"?_.push(v(b,null)):b.data&&_.push(v(b.data,b.mode)),_},[])},t.fromString=function(y,_){const b=f(y,a.isKanjiModeEnabled()),x=g(b),E=p(x,_),T=l.find_path(E.map,"start","end"),O=[];for(let k=1;k<T.length-1;k++)O.push(E.table[T[k]].node);return t.fromArray(h(O))},t.rawSplit=function(y){return t.fromArray(f(y,a.isKanjiModeEnabled()))}})(id)),id}var Xb;function vN(){if(Xb)return Gh;Xb=1;const t=Gs(),e=Hg(),n=tN(),r=nN(),i=rN(),s=iN(),o=sN(),a=Vx(),l=lN(),c=cN(),u=uN(),f=Ws(),d=mN();function h(E,T){const O=E.size,k=s.getPositions(T);for(let I=0;I<k.length;I++){const R=k[I][0],C=k[I][1];for(let P=-1;P<=7;P++)if(!(R+P<=-1||O<=R+P))for(let S=-1;S<=7;S++)C+S<=-1||O<=C+S||(P>=0&&P<=6&&(S===0||S===6)||S>=0&&S<=6&&(P===0||P===6)||P>=2&&P<=4&&S>=2&&S<=4?E.set(R+P,C+S,!0,!0):E.set(R+P,C+S,!1,!0))}}function g(E){const T=E.size;for(let O=8;O<T-8;O++){const k=O%2===0;E.set(O,6,k,!0),E.set(6,O,k,!0)}}function p(E,T){const O=i.getPositions(T);for(let k=0;k<O.length;k++){const I=O[k][0],R=O[k][1];for(let C=-2;C<=2;C++)for(let P=-2;P<=2;P++)C===-2||C===2||P===-2||P===2||C===0&&P===0?E.set(I+C,R+P,!0,!0):E.set(I+C,R+P,!1,!0)}}function v(E,T){const O=E.size,k=c.getEncodedBits(T);let I,R,C;for(let P=0;P<18;P++)I=Math.floor(P/3),R=P%3+O-8-3,C=(k>>P&1)===1,E.set(I,R,C,!0),E.set(R,I,C,!0)}function m(E,T,O){const k=E.size,I=u.getEncodedBits(T,O);let R,C;for(R=0;R<15;R++)C=(I>>R&1)===1,R<6?E.set(R,8,C,!0):R<8?E.set(R+1,8,C,!0):E.set(k-15+R,8,C,!0),R<8?E.set(8,k-R-1,C,!0):R<9?E.set(8,15-R-1+1,C,!0):E.set(8,15-R-1,C,!0);E.set(k-8,8,1,!0)}function y(E,T){const O=E.size;let k=-1,I=O-1,R=7,C=0;for(let P=O-1;P>0;P-=2)for(P===6&&P--;;){for(let S=0;S<2;S++)if(!E.isReserved(I,P-S)){let $=!1;C<T.length&&($=(T[C]>>>R&1)===1),E.set(I,P-S,$),R--,R===-1&&(C++,R=7)}if(I+=k,I<0||O<=I){I-=k,k=-k;break}}}function _(E,T,O){const k=new n;O.forEach(function(S){k.put(S.mode.bit,4),k.put(S.getLength(),f.getCharCountIndicator(S.mode,E)),S.write(k)});const I=t.getSymbolTotalCodewords(E),R=a.getTotalCodewordsCount(E,T),C=(I-R)*8;for(k.getLengthInBits()+4<=C&&k.put(0,4);k.getLengthInBits()%8!==0;)k.putBit(0);const P=(C-k.getLengthInBits())/8;for(let S=0;S<P;S++)k.put(S%2?17:236,8);return b(k,E,T)}function b(E,T,O){const k=t.getSymbolTotalCodewords(T),I=a.getTotalCodewordsCount(T,O),R=k-I,C=a.getBlocksCount(T,O),P=k%C,S=C-P,$=Math.floor(k/C),Z=Math.floor(R/C),H=Z+1,K=$-Z,Q=new l(K);let ce=0;const Y=new Array(C),U=new Array(C);let he=0;const re=new Uint8Array(E.buffer);for(let se=0;se<C;se++){const de=se<S?Z:H;Y[se]=re.slice(ce,ce+de),U[se]=Q.encode(Y[se]),ce+=de,he=Math.max(he,de)}const te=new Uint8Array(k);let Ce=0,q,ne;for(q=0;q<he;q++)for(ne=0;ne<C;ne++)q<Y[ne].length&&(te[Ce++]=Y[ne][q]);for(q=0;q<K;q++)for(ne=0;ne<C;ne++)te[Ce++]=U[ne][q];return te}function x(E,T,O,k){let I;if(Array.isArray(E))I=d.fromArray(E);else if(typeof E=="string"){let $=T;if(!$){const Z=d.rawSplit(E);$=c.getBestVersionForData(Z,O)}I=d.fromString(E,$||40)}else throw new Error("Invalid data");const R=c.getBestVersionForData(I,O);if(!R)throw new Error("The amount of data is too big to be stored in a QR Code");if(!T)T=R;else if(T<R)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+R+`.
`);const C=_(T,O,I),P=t.getSymbolSize(T),S=new r(P);return h(S,T),g(S),p(S,T),m(S,O,0),T>=7&&v(S,T),y(S,C),isNaN(k)&&(k=o.getBestMask(S,m.bind(null,S,O))),o.applyMask(k,S),m(S,O,k),{modules:S,version:T,errorCorrectionLevel:O,maskPattern:k,segments:I}}return Gh.create=function(T,O){if(typeof T>"u"||T==="")throw new Error("No input text");let k=e.M,I,R;return typeof O<"u"&&(k=e.from(O.errorCorrectionLevel,e.M),I=c.from(O.version),R=o.from(O.maskPattern),O.toSJISFunc&&t.setToSJISFunction(O.toSJISFunc)),x(T,I,k,R)},Gh}var ud={},fd={},Yb;function Xx(){return Yb||(Yb=1,(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const s=t.getScale(r,i);return Math.floor((r+i.margin*2)*s)},t.qrToImageData=function(r,i,s){const o=i.modules.size,a=i.modules.data,l=t.getScale(o,s),c=Math.floor((o+s.margin*2)*l),u=s.margin*l,f=[s.color.light,s.color.dark];for(let d=0;d<c;d++)for(let h=0;h<c;h++){let g=(d*c+h)*4,p=s.color.light;if(d>=u&&h>=u&&d<c-u&&h<c-u){const v=Math.floor((d-u)/l),m=Math.floor((h-u)/l);p=f[a[v*o+m]?1:0]}r[g++]=p.r,r[g++]=p.g,r[g++]=p.b,r[g]=p.a}}})(fd)),fd}var Kb;function yN(){return Kb||(Kb=1,(function(t){const e=Xx();function n(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let l=a,c=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(c=r()),l=e.getOptions(l);const u=e.getImageWidth(s.modules.size,l),f=c.getContext("2d"),d=f.createImageData(u,u);return e.qrToImageData(d.data,s,l),n(f,c,u),f.putImageData(d,0,0),c},t.renderToDataURL=function(s,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const c=t.render(s,o,l),u=l.type||"image/png",f=l.rendererOpts||{};return c.toDataURL(u,f.quality)}})(ud)),ud}var hd={},qb;function bN(){if(qb)return hd;qb=1;const t=Xx();function e(i,s){const o=i.a/255,a=s+'="'+i.hex+'"';return o<1?a+" "+s+'-opacity="'+o.toFixed(2).slice(1)+'"':a}function n(i,s,o){let a=i+s;return typeof o<"u"&&(a+=" "+o),a}function r(i,s,o){let a="",l=0,c=!1,u=0;for(let f=0;f<i.length;f++){const d=Math.floor(f%s),h=Math.floor(f/s);!d&&!c&&(c=!0),i[f]?(u++,f>0&&d>0&&i[f-1]||(a+=c?n("M",d+o,.5+h+o):n("m",l,0),l=0,c=!1),d+1<s&&i[f+1]||(a+=n("h",u),u=0)):l++}return a}return hd.render=function(s,o,a){const l=t.getOptions(o),c=s.modules.size,u=s.modules.data,f=c+l.margin*2,d=l.color.light.a?"<path "+e(l.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",h="<path "+e(l.color.dark,"stroke")+' d="'+r(u,c,l.margin)+'"/>',g='viewBox="0 0 '+f+" "+f+'"',v='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+g+' shape-rendering="crispEdges">'+d+h+`</svg>
`;return typeof a=="function"&&a(null,v),v},hd}var Zb;function _N(){if(Zb)return no;Zb=1;const t=eN(),e=vN(),n=yN(),r=bN();function i(s,o,a,l,c){const u=[].slice.call(arguments,1),f=u.length,d=typeof u[f-1]=="function";if(!d&&!t())throw new Error("Callback required as last argument");if(d){if(f<2)throw new Error("Too few arguments provided");f===2?(c=a,a=o,o=l=void 0):f===3&&(o.getContext&&typeof c>"u"?(c=l,l=void 0):(c=l,l=a,a=o,o=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(a=o,o=l=void 0):f===2&&!o.getContext&&(l=a,a=o,o=void 0),new Promise(function(h,g){try{const p=e.create(a,l);h(s(p,o,l))}catch(p){g(p)}})}try{const h=e.create(a,l);c(null,s(h,o,l))}catch(h){c(h)}}return no.create=e.create,no.toCanvas=i.bind(null,n.render),no.toDataURL=i.bind(null,n.renderToDataURL),no.toString=i.bind(null,function(s,o,a){return r.render(s,a)}),no}var wN=_N();const SN=Ww(wN),xN=De({__name:"Code",setup(t){const e=ye("https://bzsh2.github.io/vue-photo-shop/#/"),{emit:n}=Zo();async function r(){console.log(e.value);const i={width:200},s=await SN.toDataURL(e.value,{width:i.width,margin:1,color:{dark:"#000000",light:"#ffffff"}});n("qrCodeGenerated",s)}return(i,s)=>{const o=rI,a=Gw;return le(),be("div",null,[Ae(o,{modelValue:D(e),"onUpdate:modelValue":s[0]||(s[0]=l=>kt(e)?e.value=l:null),placeholder:""},null,8,["modelValue"]),Ae(a,{type:"primary",class:"generate-btn",onClick:r},{default:Me(()=>[...s[1]||(s[1]=[of("  ",-1)])]),_:1})])}}}),CN=fn(xN,[["__scopeId","data-v-edfcc989"]]),TN=["src"],EN=De({__name:"UploadImage",setup(t){const e=ye([]),n=ye(""),r=ye(!1),{emit:i}=Zo(),s=(c,u)=>{console.log(c,u)},o=c=>{n.value=c.url,r.value=!0},a=(c,u)=>{i("uploadImage",u)};function l(){return Promise.resolve()}return(c,u)=>{const f=Lt,d=vR,h=R5;return le(),be(pt,null,[Ae(d,{"file-list":D(e),"onUpdate:fileList":u[0]||(u[0]=g=>kt(e)?e.value=g:null),"list-type":"picture-card","http-request":l,"on-preview":o,"on-remove":s,class:"upload-image","on-success":a},{default:Me(()=>[Ae(f,null,{default:Me(()=>[Ae(D(E3))]),_:1})]),_:1},8,["file-list"]),Ae(h,{modelValue:D(r),"onUpdate:modelValue":u[1]||(u[1]=g=>kt(r)?r.value=g:null)},{default:Me(()=>[Ee("img",{src:D(n),width:"100%",alt:"Preview Image"},null,8,TN)]),_:1},8,["modelValue"])],64)}}}),kN=fn(EN,[["__scopeId","data-v-38ed4838"]]),ON={class:"add-container"},AN=De({__name:"index",setup(t){const e=ye(["1"]);function n(r){console.log(r)}return(r,i)=>{const s=p5,o=d5;return le(),be("div",ON,[Ae(o,{modelValue:D(e),"onUpdate:modelValue":i[0]||(i[0]=a=>kt(e)?e.value=a:null),onChange:n},{default:Me(()=>[Ae(s,{title:"",name:"1"},{default:Me(()=>[Ee("div",null,[Ae(kN)])]),_:1}),Ae(s,{title:"",name:"2"},{default:Me(()=>[Ee("div",null,[Ae(Qj)])]),_:1}),Ae(s,{title:"",name:"4"},{default:Me(()=>[Ee("div",null,[Ae(CN)])]),_:1})]),_:1},8,["modelValue"])])}}}),PN=fn(AN,[["__scopeId","data-v-3c1f6a99"]]),FN={class:"template-group"},DN=["onClick"],IN=["src"],MN={class:"template-name"},RN=De({__name:"index",setup(t){const e=ye([]),{emit:n}=Zo(),r=zj(),i=`${r}templates/config.json`;async function s(){return(await(await fetch(i)).json()).templates}function o(l){n("selectTemplate",l)}function a(l){const f=[...l.map(y=>({...y,scaledHeight:Math.round(y.height*(100/y.width))}))].sort((y,_)=>_.scaledHeight-y.scaledHeight),d=[],h=[];let g=0,p=0;for(const y of f)g<=p?(d.push(y),g+=y.scaledHeight):(h.push(y),p+=y.scaledHeight);let v=Math.abs(g-p),m=!0;for(;m;){m=!1;for(let y=0;y<d.length;y++)for(let _=0;_<h.length;_++){const b=d[y],x=h[_],E=g-b.scaledHeight+x.scaledHeight,T=p-x.scaledHeight+b.scaledHeight,O=Math.abs(E-T);O<v&&(d[y]=x,h[_]=b,g=E,p=T,v=O,m=!0)}}return[d.map(({scaledHeight:y,..._})=>_),h.map(({scaledHeight:y,..._})=>_)]}return en(async()=>{e.value=a(await s()),console.log(e.value,"aaaaaaaaaaaaa")}),(l,c)=>(le(),be("div",FN,[(le(!0),be(pt,null,nl(e.value,(u,f)=>(le(),be("div",{key:f,class:"template-group-item"},[(le(!0),be(pt,null,nl(u,d=>(le(),be("div",{key:d.name,class:ke(["template-item",{"template-item-first":f===0,"template-item-second":f===1}]),onClick:h=>o(d)},[Ee("img",{src:`${D(r)}${d.image}`,class:"template-image"},null,8,IN),Ee("span",MN,ln(d.name),1)],10,DN))),128))]))),128))]))}}),LN=fn(RN,[["__scopeId","data-v-33d8eeb7"]]),BN=["onClick"],jN={class:"nav-item-title"},NN=De({__name:"NavAside",props:{modelValue:{type:String,default:()=>""}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=[{icon:i3,activeIcon:n3,title:"",key:"add"},{icon:g3,title:"",key:"template"},{icon:C3,activeIcon:S3,title:"",key:"image"},{icon:a3,title:"",key:"my"}];return(s,o)=>{const a=Lt;return le(),be("div",{class:"nav-aside",style:Dt({paddingBottom:n.modelValue?"60px":"0px"})},[(le(),be(pt,null,nl(i,(l,c)=>Ee("div",{key:c,class:ke(["nav-item",{"nav-item-active":n.modelValue===l.key}]),onClick:u=>r("update:modelValue",l.key)},[Ae(a,{class:"nav-item-icon"},{default:Me(()=>[(le(),Ve(jn(n.modelValue===l.key&&l.activeIcon?l.activeIcon:l.icon)))]),_:2},1024),Ee("span",jN,ln(l.title),1)],10,BN)),64)),n.modelValue?(le(),be("div",{key:0,class:"close-box",onClick:o[0]||(o[0]=l=>r("update:modelValue",""))},[Ae(a,{class:"nav-item-icon"},{default:Me(()=>[Ae(D(d3))]),_:1})])):je("",!0)],4)}}}),zN=fn(NN,[["__scopeId","data-v-3eacf230"]]),$N={key:0,class:"nav-inner-main"},UN=De({__name:"NavInner",props:{modelValue:{default:""},minWidth:{default:200},maxWidth:{default:600},defaultWidth:{default:313}},setup(t){const e=t,n=ye(e.defaultWidth),r=ye(!1),i=ye(0),s=ye(0);Ge(()=>e.modelValue,c=>{c&&(n.value=e.defaultWidth)},{immediate:!0});function o(c){c.preventDefault(),c.stopPropagation(),r.value=!0,i.value=c.clientX,s.value=n.value,document.addEventListener("mousemove",a),document.addEventListener("mouseup",l),document.body.style.userSelect="none",document.body.style.cursor="col-resize"}function a(c){if(!r.value)return;const u=c.clientX-i.value;let f=s.value+u;f=Math.max(e.minWidth,Math.min(e.maxWidth,f)),n.value=f}function l(){r.value&&(r.value=!1,document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",l),document.body.style.userSelect="",document.body.style.cursor="")}return Wo(()=>{r.value&&(document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",l))}),(c,u)=>{const f=yI;return le(),be("div",{class:"nav-inner",style:Dt({width:t.modelValue?`${n.value}px`:"0px"})},[t.modelValue?(le(),be("div",$N,[Ae(f,{height:"100%"},{default:Me(()=>[Ne(c.$slots,"default",{},void 0,!0)]),_:3})])):je("",!0),Ee("div",{class:"nav-drag-handle",onMousedown:o},null,32)],4)}}}),HN=fn(UN,[["__scopeId","data-v-0c03eb66"]]),VN={class:"nav-panel"},GN=De({__name:"index",setup(t){const e=ye("template");return(n,r)=>(le(),be("nav",VN,[Ae(zN,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=i=>e.value=i)},null,8,["modelValue"]),Ae(HN,{modelValue:e.value,"onUpdate:modelValue":r[1]||(r[1]=i=>e.value=i)},{default:Me(()=>[e.value==="add"?(le(),Ve(PN,{key:0})):je("",!0),e.value==="template"?(le(),Ve(LN,{key:1})):je("",!0)]),_:1},8,["modelValue"])]))}}),WN=fn(GN,[["__scopeId","data-v-2a97cccf"]]),XN=De({__name:"index",setup(t){return(e,n)=>(le(),Ve(ER,null,{header:Me(()=>[Ae(zR)]),nav:Me(()=>[Ae(WN)]),main:Me(()=>[Ae(Xj)]),aside:Me(()=>[Ae(AR)]),_:1}))}}),YN=Rk({history:dk("./"),routes:[{path:"/",name:"dashboard",component:XN}]}),Vg=wE(OE);Vg.use(TE());Vg.use(YN);Vg.mount("#app")});export default KN();
